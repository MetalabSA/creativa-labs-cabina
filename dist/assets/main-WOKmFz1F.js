import{c as ae,r as d,j as e,S as ie,a as Xt,R as ge,C as et,M as Jt,b as Lt,L as ea,d as Ae,e as He,s as V,A as ta,T as Ke,f as aa,D as sa}from"./DashboardApp-pSbKRTBw.js";import{Q as tt,a as st,C as Xe}from"./index-p6Oyk00P.js";import{B as ra}from"./Background3D-AG2p_QE_.js";import{m as de,A as Ge,I as We,C as St,M as Mt}from"./constants-CalWwTGQ.js";import{X as ue,Z as Le,D as Ve}from"./zap-sEK5Wo-9.js";import{H as at,S as na}from"./shopping-bag-Gy-2dPaf.js";import{S as It}from"./search-DeM_ZaUH.js";/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],Pt=ae("arrow-down",la);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Tt=ae("arrow-left",ca);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],oa=ae("arrow-right",ia);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],xa=ae("chevron-down",da);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Rt=ae("chevron-right",ua);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ma=ae("circle-alert",ha);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ba=ae("circle-question-mark",pa);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],mt=ae("heart",fa);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],wa=ae("instagram",ga);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],ja=ae("layout-grid",va);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ya=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],Na=ae("lock-open",ya);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],_a=ae("log-out",ka);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],Ea=ae("menu",Ca);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sa=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],$t=ae("printer",Sa);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ma=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],xt=ae("refresh-cw",Ma);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ia=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Pa=ae("share-2",Ia);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ra=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],ut=ae("smartphone",Ra);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aa=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],La=ae("user",Aa),Je=({title:n,sampleImageUrl:c,isSelected:m,onSelect:g,isPremium:C,isUnlocked:I,usageCount:S,isTopStyle:N,tags:u,isFavorite:$,onToggleFavorite:z})=>{const[B,P]=d.useState(!1),[F,G]=d.useState(!1);return d.useEffect(()=>{P(!1),G(!1);const H=new Image,A=setTimeout(()=>{F||(console.warn(`Timeout al cargar imagen: ${c}`),H.src=c+"?t="+Date.now())},5e3);return H.crossOrigin="anonymous",H.src=c,H.onload=()=>{clearTimeout(A),console.log(`Imagen cargada con Ã©xito: ${c}`),G(!0)},H.onerror=ne=>{clearTimeout(A),console.error(`Fallo al cargar imagen: ${c}`,ne),P(!0)},()=>clearTimeout(A)},[c]),e.jsxs("div",{className:`relative w-full max-w-[200px] aspect-[4/5] rounded-[24px] overflow-hidden transition-all duration-700 ease-[cubic-bezier(0.23,1,0.32,1)] group
                  backdrop-blur-xl border-2 cursor-pointer
                  hover:-translate-y-4 hover:shadow-[0_40px_80px_rgba(0,0,0,0.9)]
                  ${m?"border-accent shadow-[0_0_50px_rgba(255,85,0,0.3)] scale-[1.05] z-10":"border-white/5 hover:border-white/20 bg-[#121215]"}`,onClick:g,children:[z&&e.jsx("button",{onClick:z,className:`absolute top-4 right-4 z-[30] w-8 h-8 flex items-center justify-center rounded-full backdrop-blur-md border transition-all duration-300
            ${$?"bg-red-500/20 border-red-500/50 text-red-500":"bg-black/40 border-white/10 text-white/40 hover:bg-white/10 hover:text-white"}`,children:e.jsx(mt,{className:`w-4 h-4 ${$?"fill-current":""}`})}),C&&e.jsxs("div",{className:"absolute top-6 left-6 z-[20] flex items-center gap-2 px-3 py-1 bg-gradient-to-r from-amber-500 to-yellow-300 rounded-full shadow-[0_0_20px_rgba(245,158,11,0.4)] animate-pulse",children:[e.jsx(ie,{className:"w-3 h-3 text-white"}),e.jsx("span",{className:"text-[8px] font-black text-white uppercase tracking-[1px]",children:"Premium"})]}),S!==void 0&&S>0&&e.jsxs("div",{className:`absolute left-6 z-[20] flex items-center gap-1.5 px-2.5 py-1 bg-black/60 backdrop-blur-md rounded-full border border-white/10 transition-all duration-500
          ${C?"top-16":"top-6"}
          ${m?"opacity-100":"opacity-0 group-hover:opacity-100"}`,children:[e.jsx("div",{className:"w-1 h-1 rounded-full bg-accent animate-pulse"}),e.jsxs("span",{className:"text-[7px] font-black text-white/70 uppercase tracking-[1px]",children:[S," usos"]})]}),N&&e.jsx("div",{className:"absolute top-6 right-16 z-[20] flex items-center justify-center w-8 h-8 bg-accent/20 backdrop-blur-xl border border-accent/40 rounded-full shadow-[0_0_15px_rgba(255,85,0,0.3)] animate-bounce duration-[2000ms]",children:e.jsx(ie,{className:"w-4 h-4 text-accent"})}),e.jsx("div",{className:`absolute top-0 left-0 w-full h-[2px] bg-accent/60 blur-[2px] z-[10] pointer-events-none transition-opacity duration-500
        ${m?"opacity-100 animate-[scan_3s_linear_infinite]":"opacity-0"}`}),e.jsx("div",{className:`absolute inset-0 transition-opacity duration-700 pointer-events-none z-0
        ${m?"opacity-100":"opacity-0"}`,style:{background:"radial-gradient(circle at 50% 100%, rgba(255, 85, 0, 0.2) 0%, transparent 70%)"}}),e.jsx("div",{className:`absolute inset-[1px] rounded-[22px] bg-gradient-to-br from-white/10 to-transparent z-[2] pointer-events-none transition-opacity
        ${m?"opacity-100":"opacity-40"}`}),e.jsxs("div",{className:"absolute inset-0 z-[1] overflow-hidden bg-[#0a0a0c]",children:[B?e.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center bg-gradient-to-br from-[#1a1a1e] to-[#0a0a0c] p-10 text-center animate-[fadeIn_0.5s_ease-out]",children:[e.jsx(ma,{className:"w-12 h-12 text-accent/40 mb-4"}),e.jsxs("div",{className:"text-[8px] tracking-[4px] text-white/40 font-black uppercase leading-relaxed",children:["Error de Archivo",e.jsx("br",{}),e.jsx("span",{className:"text-accent/60 mt-2 block lowercase font-mono opacity-80",children:c})]}),e.jsx("p",{className:"text-[6px] text-white/20 uppercase tracking-[2px] mt-4 max-w-[150px]",children:"AsegÃºrate de que el archivo estÃ© en la raÃ­z con este nombre exacto."})]}):e.jsx("img",{src:c,alt:n,className:`w-full h-full object-cover transition-all duration-1000 ease-in-out
              ${F?"opacity-100":"opacity-0"}
              ${m?"scale-105 brightness-110 saturate-[1.1]":"scale-100 brightness-[0.7] saturate-[0.8] group-hover:brightness-90 group-hover:scale-102"}`,onLoad:()=>G(!0),onError:()=>P(!0),crossOrigin:"anonymous"}),!F&&!B&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-[#121215] z-[3]",children:e.jsx("div",{className:"w-8 h-8 border-2 border-accent/20 border-t-accent rounded-full animate-spin shadow-[0_0_15px_rgba(255,85,0,0.2)]"})}),e.jsx("div",{className:`absolute inset-0 transition-all duration-700 pointer-events-none z-[4]
          ${m?"bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-90":"bg-black/20"}`})]}),e.jsx("div",{className:"relative z-[15] flex flex-col items-center justify-end w-full h-full px-4 py-8",children:e.jsxs("div",{className:`flex flex-col items-center transition-all duration-500 transform
          ${m?"translate-y-0 opacity-100":"translate-y-4 opacity-70 group-hover:translate-y-0 group-hover:opacity-100"}`,children:[e.jsx("div",{className:`text-[9px] font-black tracking-[2px] uppercase mb-4 transition-colors duration-300 text-center leading-tight
            ${m?"text-accent":"text-white/60"}`,children:n}),e.jsx("div",{className:`px-6 py-2.5 rounded-full border text-[9px] font-black tracking-[4px] uppercase transition-all duration-500 backdrop-blur-xl
            ${m?"bg-accent text-white border-accent shadow-[0_0_20px_rgba(255,85,0,0.4)]":"bg-black/60 text-white/40 border-white/10"}`,children:m?"ACTIVO":C&&!I?"DESBLOQUEAR":"SELECCIONAR"}),u&&u.length>0&&e.jsx("div",{className:`flex flex-wrap justify-center gap-1.5 mt-4 transition-opacity duration-500 ${m?"opacity-100":"opacity-0 group-hover:opacity-60"}`,children:u.slice(0,3).map(H=>e.jsxs("span",{className:"text-[7px] font-black uppercase tracking-[1px] px-2 py-0.5 bg-white/5 rounded-md text-white/40",children:["#",H]},H))})]})}),e.jsx("div",{className:"absolute top-4 left-4 w-2 h-2 border-t border-l border-white/20 z-[6]"}),e.jsx("div",{className:"absolute top-4 right-4 w-2 h-2 border-t border-r border-white/20 z-[6]"}),e.jsx("div",{className:"absolute bottom-4 left-4 w-2 h-2 border-b border-l border-white/20 z-[6]"}),e.jsx("div",{className:"absolute bottom-4 right-4 w-2 h-2 border-b border-r border-white/20 z-[6]"})]})};var pt={};(function n(c,m,g,C){var I=!!(c.Worker&&c.Blob&&c.Promise&&c.OffscreenCanvas&&c.OffscreenCanvasRenderingContext2D&&c.HTMLCanvasElement&&c.HTMLCanvasElement.prototype.transferControlToOffscreen&&c.URL&&c.URL.createObjectURL),S=typeof Path2D=="function"&&typeof DOMMatrix=="function",N=(function(){if(!c.OffscreenCanvas)return!1;try{var s=new OffscreenCanvas(1,1),t=s.getContext("2d");t.fillRect(0,0,1,1);var x=s.transferToImageBitmap();t.createPattern(x,"no-repeat")}catch{return!1}return!0})();function u(){}function $(s){var t=m.exports.Promise,x=t!==void 0?t:c.Promise;return typeof x=="function"?new x(s):(s(u,u),null)}var z=(function(s,t){return{transform:function(x){if(s)return x;if(t.has(x))return t.get(x);var f=new OffscreenCanvas(x.width,x.height),y=f.getContext("2d");return y.drawImage(x,0,0),t.set(x,f),f},clear:function(){t.clear()}}})(N,new Map),B=(function(){var s=Math.floor(16.666666666666668),t,x,f={},y=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(t=function(v){var R=Math.random();return f[R]=requestAnimationFrame(function w(_){y===_||y+s-1<_?(y=_,delete f[R],v()):f[R]=requestAnimationFrame(w)}),R},x=function(v){f[v]&&cancelAnimationFrame(f[v])}):(t=function(v){return setTimeout(v,s)},x=function(v){return clearTimeout(v)}),{frame:t,cancel:x}})(),P=(function(){var s,t,x={};function f(y){function v(R,w){y.postMessage({options:R||{},callback:w})}y.init=function(w){var _=w.transferControlToOffscreen();y.postMessage({canvas:_},[_])},y.fire=function(w,_,U){if(t)return v(w,null),t;var D=Math.random().toString(36).slice(2);return t=$(function(q){function L(Q){Q.data.callback===D&&(delete x[D],y.removeEventListener("message",L),t=null,z.clear(),U(),q())}y.addEventListener("message",L),v(w,D),x[D]=L.bind(null,{data:{callback:D}})}),t},y.reset=function(){y.postMessage({reset:!0});for(var w in x)x[w](),delete x[w]}}return function(){if(s)return s;if(!g&&I){var y=["var CONFETTI, SIZE = {}, module = {};","("+n.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{s=new Worker(URL.createObjectURL(new Blob([y])))}catch(v){return typeof console<"u"&&typeof console.warn=="function"&&console.warn("ðŸŽŠ Could not load worker",v),null}f(s)}return s}})(),F={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function G(s,t){return t?t(s):s}function H(s){return s!=null}function A(s,t,x){return G(s&&H(s[t])?s[t]:F[t],x)}function ne(s){return s<0?0:Math.floor(s)}function Z(s,t){return Math.floor(Math.random()*(t-s))+s}function he(s){return parseInt(s,16)}function Se(s){return s.map(se)}function se(s){var t=String(s).replace(/[^0-9a-f]/gi,"");return t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),{r:he(t.substring(0,2)),g:he(t.substring(2,4)),b:he(t.substring(4,6))}}function le(s){var t=A(s,"origin",Object);return t.x=A(t,"x",Number),t.y=A(t,"y",Number),t}function me(s){s.width=document.documentElement.clientWidth,s.height=document.documentElement.clientHeight}function _e(s){var t=s.getBoundingClientRect();s.width=t.width,s.height=t.height}function pe(s){var t=document.createElement("canvas");return t.style.position="fixed",t.style.top="0px",t.style.left="0px",t.style.pointerEvents="none",t.style.zIndex=s,t}function we(s,t,x,f,y,v,R,w,_){s.save(),s.translate(t,x),s.rotate(v),s.scale(f,y),s.arc(0,0,1,R,w,_),s.restore()}function Ce(s){var t=s.angle*(Math.PI/180),x=s.spread*(Math.PI/180);return{x:s.x,y:s.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:s.startVelocity*.5+Math.random()*s.startVelocity,angle2D:-t+(.5*x-Math.random()*x),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:s.color,shape:s.shape,tick:0,totalTicks:s.ticks,decay:s.decay,drift:s.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:s.gravity*3,ovalScalar:.6,scalar:s.scalar,flat:s.flat}}function $e(s,t){t.x+=Math.cos(t.angle2D)*t.velocity+t.drift,t.y+=Math.sin(t.angle2D)*t.velocity+t.gravity,t.velocity*=t.decay,t.flat?(t.wobble=0,t.wobbleX=t.x+10*t.scalar,t.wobbleY=t.y+10*t.scalar,t.tiltSin=0,t.tiltCos=0,t.random=1):(t.wobble+=t.wobbleSpeed,t.wobbleX=t.x+10*t.scalar*Math.cos(t.wobble),t.wobbleY=t.y+10*t.scalar*Math.sin(t.wobble),t.tiltAngle+=.1,t.tiltSin=Math.sin(t.tiltAngle),t.tiltCos=Math.cos(t.tiltAngle),t.random=Math.random()+2);var x=t.tick++/t.totalTicks,f=t.x+t.random*t.tiltCos,y=t.y+t.random*t.tiltSin,v=t.wobbleX+t.random*t.tiltCos,R=t.wobbleY+t.random*t.tiltSin;if(s.fillStyle="rgba("+t.color.r+", "+t.color.g+", "+t.color.b+", "+(1-x)+")",s.beginPath(),S&&t.shape.type==="path"&&typeof t.shape.path=="string"&&Array.isArray(t.shape.matrix))s.fill(be(t.shape.path,t.shape.matrix,t.x,t.y,Math.abs(v-f)*.1,Math.abs(R-y)*.1,Math.PI/10*t.wobble));else if(t.shape.type==="bitmap"){var w=Math.PI/10*t.wobble,_=Math.abs(v-f)*.1,U=Math.abs(R-y)*.1,D=t.shape.bitmap.width*t.scalar,q=t.shape.bitmap.height*t.scalar,L=new DOMMatrix([Math.cos(w)*_,Math.sin(w)*_,-Math.sin(w)*U,Math.cos(w)*U,t.x,t.y]);L.multiplySelf(new DOMMatrix(t.shape.matrix));var Q=s.createPattern(z.transform(t.shape.bitmap),"no-repeat");Q.setTransform(L),s.globalAlpha=1-x,s.fillStyle=Q,s.fillRect(t.x-D/2,t.y-q/2,D,q),s.globalAlpha=1}else if(t.shape==="circle")s.ellipse?s.ellipse(t.x,t.y,Math.abs(v-f)*t.ovalScalar,Math.abs(R-y)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI):we(s,t.x,t.y,Math.abs(v-f)*t.ovalScalar,Math.abs(R-y)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI);else if(t.shape==="star")for(var T=Math.PI/2*3,Y=4*t.scalar,xe=8*t.scalar,re=t.x,oe=t.y,fe=5,J=Math.PI/fe;fe--;)re=t.x+Math.cos(T)*xe,oe=t.y+Math.sin(T)*xe,s.lineTo(re,oe),T+=J,re=t.x+Math.cos(T)*Y,oe=t.y+Math.sin(T)*Y,s.lineTo(re,oe),T+=J;else s.moveTo(Math.floor(t.x),Math.floor(t.y)),s.lineTo(Math.floor(t.wobbleX),Math.floor(y)),s.lineTo(Math.floor(v),Math.floor(R)),s.lineTo(Math.floor(f),Math.floor(t.wobbleY));return s.closePath(),s.fill(),t.tick<t.totalTicks}function Me(s,t,x,f,y){var v=t.slice(),R=s.getContext("2d"),w,_,U=$(function(D){function q(){w=_=null,R.clearRect(0,0,f.width,f.height),z.clear(),y(),D()}function L(){g&&!(f.width===C.width&&f.height===C.height)&&(f.width=s.width=C.width,f.height=s.height=C.height),!f.width&&!f.height&&(x(s),f.width=s.width,f.height=s.height),R.clearRect(0,0,f.width,f.height),v=v.filter(function(Q){return $e(R,Q)}),v.length?w=B.frame(L):q()}w=B.frame(L),_=q});return{addFettis:function(D){return v=v.concat(D),U},canvas:s,promise:U,reset:function(){w&&B.cancel(w),_&&_()}}}function h(s,t){var x=!s,f=!!A(t||{},"resize"),y=!1,v=A(t,"disableForReducedMotion",Boolean),R=I&&!!A(t||{},"useWorker"),w=R?P():null,_=x?me:_e,U=s&&w?!!s.__confetti_initialized:!1,D=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,q;function L(T,Y,xe){for(var re=A(T,"particleCount",ne),oe=A(T,"angle",Number),fe=A(T,"spread",Number),J=A(T,"startVelocity",Number),rt=A(T,"decay",Number),ce=A(T,"gravity",Number),W=A(T,"drift",Number),Qe=A(T,"colors",Se),je=A(T,"ticks",Number),ye=A(T,"shapes"),De=A(T,"scalar"),p=!!A(T,"flat"),Fe=le(T),qe=re,ke=[],nt=s.width*Fe.x,Ze=s.height*Fe.y;qe--;)ke.push(Ce({x:nt,y:Ze,angle:oe,spread:fe,startVelocity:J,color:Qe[qe%Qe.length],shape:ye[Z(0,ye.length)],ticks:je,decay:rt,gravity:ce,drift:W,scalar:De,flat:p}));return q?q.addFettis(ke):(q=Me(s,ke,_,Y,xe),q.promise)}function Q(T){var Y=v||A(T,"disableForReducedMotion",Boolean),xe=A(T,"zIndex",Number);if(Y&&D)return $(function(J){J()});x&&q?s=q.canvas:x&&!s&&(s=pe(xe),document.body.appendChild(s)),f&&!U&&_(s);var re={width:s.width,height:s.height};w&&!U&&w.init(s),U=!0,w&&(s.__confetti_initialized=!0);function oe(){if(w){var J={getBoundingClientRect:function(){if(!x)return s.getBoundingClientRect()}};_(J),w.postMessage({resize:{width:J.width,height:J.height}});return}re.width=re.height=null}function fe(){q=null,f&&(y=!1,c.removeEventListener("resize",oe)),x&&s&&(document.body.contains(s)&&document.body.removeChild(s),s=null,U=!1)}return f&&!y&&(y=!0,c.addEventListener("resize",oe,!1)),w?w.fire(T,re,fe):L(T,re,fe)}return Q.reset=function(){w&&w.reset(),q&&q.reset()},Q}var ve;function i(){return ve||(ve=h(null,{useWorker:!0,resize:!0})),ve}function be(s,t,x,f,y,v,R){var w=new Path2D(s),_=new Path2D;_.addPath(w,new DOMMatrix(t));var U=new Path2D;return U.addPath(_,new DOMMatrix([Math.cos(R)*y,Math.sin(R)*y,-Math.sin(R)*v,Math.cos(R)*v,x,f])),U}function ze(s){if(!S)throw new Error("path confetti are not supported in this browser");var t,x;typeof s=="string"?t=s:(t=s.path,x=s.matrix);var f=new Path2D(t),y=document.createElement("canvas"),v=y.getContext("2d");if(!x){for(var R=1e3,w=R,_=R,U=0,D=0,q,L,Q=0;Q<R;Q+=2)for(var T=0;T<R;T+=2)v.isPointInPath(f,Q,T,"nonzero")&&(w=Math.min(w,Q),_=Math.min(_,T),U=Math.max(U,Q),D=Math.max(D,T));q=U-w,L=D-_;var Y=10,xe=Math.min(Y/q,Y/L);x=[xe,0,0,xe,-Math.round(q/2+w)*xe,-Math.round(L/2+_)*xe]}return{type:"path",path:t,matrix:x}}function Ee(s){var t,x=1,f="#000000",y='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof s=="string"?t=s:(t=s.text,x="scalar"in s?s.scalar:x,y="fontFamily"in s?s.fontFamily:y,f="color"in s?s.color:f);var v=10*x,R=""+v+"px "+y,w=new OffscreenCanvas(v,v),_=w.getContext("2d");_.font=R;var U=_.measureText(t),D=Math.ceil(U.actualBoundingBoxRight+U.actualBoundingBoxLeft),q=Math.ceil(U.actualBoundingBoxAscent+U.actualBoundingBoxDescent),L=2,Q=U.actualBoundingBoxLeft+L,T=U.actualBoundingBoxAscent+L;D+=L+L,q+=L+L,w=new OffscreenCanvas(D,q),_=w.getContext("2d"),_.font=R,_.fillStyle=f,_.fillText(t,Q,T);var Y=1/x;return{type:"bitmap",bitmap:w.transferToImageBitmap(),matrix:[Y,0,0,Y,-D*Y/2,-q*Y/2]}}m.exports=function(){return i().apply(this,arguments)},m.exports.reset=function(){i().reset()},m.exports.create=h,m.exports.shapeFromPath=ze,m.exports.shapeFromText=Ee})((function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}})(),pt,!1);const ht=pt.exports;pt.exports.create;function zt(n){var c,m,g="";if(typeof n=="string"||typeof n=="number")g+=n;else if(typeof n=="object")if(Array.isArray(n)){var C=n.length;for(c=0;c<C;c++)n[c]&&(m=zt(n[c]))&&(g&&(g+=" "),g+=m)}else for(m in n)n[m]&&(g&&(g+=" "),g+=m);return g}function Te(){for(var n,c,m=0,g="",C=arguments.length;m<C;m++)(n=arguments[m])&&(c=zt(n))&&(g&&(g+=" "),g+=c);return g}const Ta=({user:n,profile:c,onNavigate:m,onLogout:g,categories:C,currentView:I,eventConfig:S})=>{var F;const[N,u]=d.useState(!1),[$,z]=d.useState(!1),B=()=>u(!N),P=G=>{m(G),u(!1)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"fixed top-6 inset-x-0 z-[200] flex justify-center md:justify-end md:pr-12 px-4 pointer-events-none",children:e.jsx("div",{className:"pointer-events-auto relative",children:e.jsxs(de.div,{layout:!0,className:Te("bg-black/60 backdrop-blur-3xl border border-white/20 shadow-[0_20px_50px_rgba(0,0,0,0.5)] overflow-hidden",N?"rounded-[32px] w-[320px]":"rounded-full w-auto"),initial:{borderRadius:50},animate:{width:N?320:"auto",borderRadius:N?32:999},transition:{type:"spring",stiffness:300,damping:30},children:[e.jsxs("div",{className:"flex items-center justify-between p-3 gap-4",children:[e.jsxs("div",{className:Te("flex items-center gap-3 transition-opacity duration-300","opacity-100"),onClick:()=>!N&&B(),children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-tr from-accent to-purple-600 rounded-full flex items-center justify-center shrink-0 shadow-lg shadow-accent/20 cursor-pointer",children:e.jsx("span",{className:"font-black italic text-white text-lg",children:"C"})}),!N&&e.jsxs("div",{className:"flex flex-col pr-4 cursor-pointer",onClick:B,children:[e.jsx("span",{className:"text-[10px] uppercase font-bold text-white/50 tracking-wider",children:S?"Event Credits":"CrÃ©ditos"}),e.jsx("span",{className:"text-sm font-black text-white leading-none",children:S?Math.max(0,(S.credits_allocated||0)-(S.credits_used||0)):c!=null&&c.is_master||(c==null?void 0:c.role)==="master"?"âˆž":(c==null?void 0:c.credits)||0})]}),N&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-bold text-white leading-tight",children:S?S.event_name:n?`Hola, ${(F=n.email)==null?void 0:F.split("@")[0]}`:"Invitado"}),e.jsx("span",{className:"text-[10px] text-accent font-black uppercase tracking-wider",children:S?`${Math.max(0,(S.credits_allocated||0)-(S.credits_used||0))} Disponibles`:`${c!=null&&c.is_master||(c==null?void 0:c.role)==="master"?"âˆž":(c==null?void 0:c.credits)||0} CrÃ©ditos`})]})]}),e.jsx("button",{onClick:B,className:"w-10 h-10 hover:bg-white/10 rounded-full flex items-center justify-center text-white transition-colors cursor-pointer shrink-0",children:N?e.jsx(ue,{className:"w-5 h-5"}):e.jsx(Ea,{className:"w-5 h-5"})})]}),e.jsx(Ge,{children:N&&e.jsx(de.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"px-4 pb-6",children:e.jsxs("div",{className:"space-y-2 mt-4",children:[e.jsxs("div",{className:"overflow-hidden rounded-xl bg-white/5 border border-white/5",children:[e.jsxs("button",{onClick:()=>z(!$),className:"w-full flex items-center justify-between p-3 text-sm font-medium text-white hover:bg-white/5 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ja,{className:"w-4 h-4 text-white/70"}),e.jsx("span",{children:"CategorÃ­as"})]}),e.jsx(xa,{className:Te("w-4 h-4 transition-transform",$&&"rotate-180")})]}),e.jsx(Ge,{children:$&&e.jsx(de.div,{initial:{height:0},animate:{height:"auto"},exit:{height:0},className:"bg-black/20",children:e.jsxs("div",{className:"p-2 space-y-1",children:[C.map(G=>e.jsx(ot,{label:G.label,onClick:()=>P(`category_${G.id}`)},G.id)),!S&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-px bg-white/10 my-1"}),e.jsx(ot,{label:"Mis Favoritos",icon:mt,onClick:()=>P("favorites"),className:"text-pink-400 hover:text-pink-300"}),e.jsx(ot,{label:"Mis Fotos",icon:at,onClick:()=>P("history"),className:"text-blue-400 hover:text-blue-300"})]})]})})})]}),S&&e.jsxs(e.Fragment,{children:[e.jsx(Re,{icon:at,label:"GalerÃ­a del Evento",onClick:()=>P("event-gallery"),active:I==="event-gallery",highlight:!0}),e.jsx(Re,{icon:tt,label:"Compartir Evento",onClick:()=>P("show-qr")})]}),!S&&e.jsx(Re,{icon:ie,label:"Comprar CrÃ©ditos",onClick:()=>P("buy_credits"),highlight:!0}),e.jsx(Re,{icon:na,label:"Packs",onClick:()=>P("packs"),active:I==="packs"}),!S&&e.jsx(Re,{icon:Xt,label:"Ajustes",onClick:()=>P("settings"),active:I==="settings"}),e.jsx(Re,{icon:ba,label:"Soporte",onClick:()=>P("support"),active:I==="support"}),n&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-px bg-white/10 my-2"}),e.jsxs("button",{onClick:g,className:"w-full flex items-center gap-3 p-3 rounded-xl text-sm font-medium text-red-400 hover:bg-red-500/10 hover:text-red-300 transition-colors",children:[e.jsx(_a,{className:"w-4 h-4"}),e.jsx("span",{children:"Cerrar SesiÃ³n"})]})]})]})})})]})})})})},Re=({icon:n,label:c,onClick:m,active:g,highlight:C})=>e.jsxs("button",{onClick:m,className:Te("w-full flex items-center gap-3 p-3 rounded-xl text-sm font-medium transition-all group",g?"bg-accent text-white":"text-white/80 hover:bg-white/10 hover:text-white",C&&!g&&"bg-gradient-to-r from-accent/20 to-transparent border border-accent/20 text-accent"),children:[e.jsx(n,{className:Te("w-4 h-4",g?"text-white":"text-white/70 group-hover:text-white")}),e.jsx("span",{children:c})]}),ot=({label:n,onClick:c,icon:m,className:g})=>e.jsxs("button",{onClick:c,className:Te("w-full flex items-center gap-3 p-2.5 rounded-lg text-xs font-medium pl-9 text-white/60 hover:bg-white/10 hover:text-white transition-colors",g),children:[m&&e.jsx(m,{className:"w-3 h-3"}),e.jsx("span",{children:n})]}),$a=({profile:n,session:c,onBack:m,onAddCredits:g,onUpdateProfile:C})=>{var z,B;const[I,S]=ge.useState((n==null?void 0:n.full_name)||""),[N,u]=ge.useState(!1),$=async()=>{u(!0),await C({full_name:I}),u(!1)};return e.jsxs("div",{className:"w-full max-w-2xl mx-auto pt-32 px-6 pb-12 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("button",{onClick:m,className:"flex items-center gap-2 text-white/60 hover:text-white mb-8 transition-colors",children:[e.jsx(et,{className:"w-5 h-5"}),e.jsx("span",{children:"Volver"})]}),e.jsx("h2",{className:"text-3xl font-black italic uppercase mb-8 tracking-tighter",children:"Ajustes de Perfil"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-6 backdrop-blur-sm",children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx(La,{className:"w-5 h-5 text-accent"}),"InformaciÃ³n Personal"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs uppercase tracking-wider text-white/40 mb-1",children:"Email"}),e.jsxs("div",{className:"flex items-center gap-3 text-lg font-medium text-white/80",children:[e.jsx(Jt,{className:"w-5 h-5 text-white/40"}),(z=c==null?void 0:c.user)==null?void 0:z.email]})]}),e.jsxs("div",{className:"pt-4 border-t border-white/10",children:[e.jsx("label",{className:"block text-xs uppercase tracking-wider text-white/40 mb-3",children:"Nombre Completo"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"relative flex-1",children:e.jsx("input",{type:"text",value:I,onChange:P=>S(P.target.value),placeholder:"Tu nombre aquÃ­...",className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white placeholder:text-white/20 focus:outline-none focus:border-accent transition-colors"})}),e.jsx("button",{onClick:$,disabled:N||I===((n==null?void 0:n.full_name)||""),className:"px-6 py-3 bg-accent text-white rounded-xl font-bold uppercase tracking-wider text-xs hover:bg-white hover:text-black transition-all disabled:opacity-30 disabled:hover:bg-accent disabled:hover:text-white",children:N?"...":"Guardar"})]})]}),e.jsxs("div",{className:"pt-4 border-t border-white/10",children:[e.jsx("label",{className:"block text-xs uppercase tracking-wider text-white/40 mb-1",children:"ID de Usuario"}),e.jsx("code",{className:"text-xs text-white/30 font-mono",children:(B=c==null?void 0:c.user)==null?void 0:B.id})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-accent/20 to-transparent border border-accent/30 rounded-2xl p-6 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-accent/20 blur-[50px] rounded-full -translate-y-1/2 translate-x-1/2"}),e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2 relative z-10",children:[e.jsx(Lt,{className:"w-5 h-5 text-accent"}),"CrÃ©ditos y Consumo"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 relative z-10",children:[e.jsxs("div",{className:"bg-black/20 rounded-xl p-4",children:[e.jsx("span",{className:"block text-xs uppercase tracking-wider text-white/60 mb-1",children:"CrÃ©ditos Disponibles"}),e.jsx("span",{className:"text-3xl font-black text-accent",children:n!=null&&n.is_master?"âˆž":(n==null?void 0:n.credits)||0})]}),e.jsxs("div",{className:"bg-black/20 rounded-xl p-4",children:[e.jsx("span",{className:"block text-xs uppercase tracking-wider text-white/60 mb-1",children:"Total Generaciones"}),e.jsx("span",{className:"text-3xl font-black text-white",children:(n==null?void 0:n.total_generations)||0})]})]}),e.jsx("button",{onClick:g,className:"mt-6 w-full bg-white text-black font-black uppercase tracking-widest py-3 rounded-xl hover:bg-accent hover:text-white transition-all duration-300",children:"Cargar MÃ¡s CrÃ©ditos"})]})]})]})},dt=3e3,za=({onBack:n,identities:c,unlockedPacks:m=[],userCredits:g,onUnlock:C,isUnlocking:I})=>{const S=d.useMemo(()=>{const u=new Map;return c.forEach($=>{u.has($.subCategory)||u.set($.subCategory,{id:$.subCategory,title:$.subCategory,preview:$.url,count:0}),u.get($.subCategory).count++}),Array.from(u.values())},[c]),N=u=>{C(u,dt)};return e.jsxs("div",{className:"w-full max-w-7xl mx-auto pt-32 px-6 pb-24 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsxs("button",{onClick:n,className:"flex items-center gap-2 text-white/60 hover:text-white transition-colors",children:[e.jsx(et,{className:"w-5 h-5"}),e.jsx("span",{children:"Volver"})]}),e.jsx("h2",{className:"text-3xl font-black italic uppercase tracking-tighter",children:"Tienda de Packs"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:S.map(u=>{const $=m.includes(u.id),z=g>=dt;return e.jsxs("div",{className:"group relative bg-[#0a0a0a] border border-white/10 rounded-2xl overflow-hidden hover:border-accent/50 transition-all duration-300",children:[e.jsxs("div",{className:"h-48 overflow-hidden relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent z-10"}),e.jsx("img",{src:u.preview,alt:u.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700"}),$?e.jsxs("div",{className:"absolute top-4 right-4 z-20 bg-green-500/20 backdrop-blur-md border border-green-500/50 text-green-400 px-3 py-1 rounded-full text-xs font-bold uppercase flex items-center gap-1.5",children:[e.jsx(Na,{className:"w-3 h-3"}),"Adquirido"]}):e.jsxs("div",{className:"absolute top-4 right-4 z-20 bg-black/60 backdrop-blur-md border border-white/10 text-white/60 px-3 py-1 rounded-full text-xs font-bold uppercase flex items-center gap-1.5",children:[e.jsx(ea,{className:"w-3 h-3"}),"Premium"]})]}),e.jsxs("div",{className:"p-6 relative z-20",children:[e.jsx("div",{className:"flex justify-between items-start mb-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:u.title}),e.jsxs("p",{className:"text-white/40 text-sm",children:[u.count," Estilos incluidos"]})]})}),$?e.jsxs("button",{disabled:!0,className:"w-full py-4 rounded-xl font-black uppercase tracking-widest bg-white/5 text-green-400 opacity-50 flex items-center justify-center gap-2 cursor-default",children:[e.jsx(Da,{className:"w-5 h-5"}),"Disponible"]}):e.jsx("button",{onClick:()=>N(u.id),disabled:!z||I,className:`w-full py-4 rounded-xl font-black uppercase tracking-widest flex items-center justify-center gap-2 transition-all ${z?"bg-white text-black hover:bg-accent hover:text-white":"bg-white/5 text-white/20 cursor-not-allowed"}`,children:I?e.jsx(ie,{className:"w-5 h-5 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Desbloquear"}),e.jsxs("div",{className:"flex items-center gap-1 text-xs opacity-50 ml-2 border-l border-black/20 pl-2",children:[e.jsx(Le,{className:"w-3 h-3"}),dt]})]})})]})]},u.id)})})]})},Da=({className:n})=>e.jsx("svg",{className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),Fa=({eventConfig:n,supabase:c,onBack:m,onViewPhoto:g})=>{const[C,I]=d.useState([]),[S,N]=d.useState(!0),[u,$]=d.useState(!1),z=async(P=!1)=>{P?$(!0):N(!0);try{const{data:F,error:G}=await c.from("generations").select("id, image_url, style_id, created_at").eq("event_id",n.id).order("created_at",{ascending:!1});!G&&F&&I(F)}catch(F){console.error("Error fetching event gallery:",F)}finally{N(!1),$(!1)}};d.useEffect(()=>{z();const P=setInterval(()=>z(!0),3e4);return()=>clearInterval(P)},[n.id]);const B=(n.credits_allocated||0)-(n.credits_used||0);return e.jsxs("div",{className:"animate-[fadeIn_0.5s_ease-out] max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col items-center mb-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-accent/10 rounded-full flex items-center justify-center mb-6",children:e.jsx("span",{className:"text-3xl",children:"ðŸ“¸"})}),e.jsx("h2",{className:"text-3xl font-black uppercase italic tracking-tight text-white mb-2",children:n.event_name}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"h-[1px] w-8 bg-accent/50"}),e.jsx("p",{className:"text-[10px] tracking-[4px] text-white/40 uppercase",children:"GalerÃ­a del Evento"}),e.jsx("div",{className:"h-[1px] w-8 bg-accent/50"})]}),e.jsxs("div",{className:"flex items-center gap-6 mt-4",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-2xl font-black text-accent",children:C.length}),e.jsx("span",{className:"text-[8px] tracking-[2px] text-white/30 uppercase",children:"Fotos"})]}),e.jsx("div",{className:"w-px h-8 bg-white/10"}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-2xl font-black text-white",children:B}),e.jsx("span",{className:"text-[8px] tracking-[2px] text-white/30 uppercase",children:"CrÃ©ditos"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-6",children:[e.jsxs("button",{onClick:m,className:"flex items-center gap-2 px-5 py-2.5 bg-white/5 border border-white/10 rounded-xl hover:bg-white/10 transition-all text-white/60 hover:text-white text-[10px] font-bold tracking-[1px] uppercase",children:[e.jsx(Tt,{className:"w-4 h-4"}),"Volver"]}),e.jsxs("button",{onClick:()=>z(!0),className:`flex items-center gap-2 px-5 py-2.5 bg-accent/10 border border-accent/20 rounded-xl hover:bg-accent/20 transition-all text-accent text-[10px] font-bold tracking-[1px] uppercase ${u?"opacity-50":""}`,disabled:u,children:[e.jsx(xt,{className:`w-4 h-4 ${u?"animate-spin":""}`}),"Actualizar"]})]})]}),S?e.jsxs("div",{className:"flex flex-col items-center py-20 opacity-40",children:[e.jsx(Ae,{className:"w-10 h-10 animate-spin mb-4 text-accent"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-[2px]",children:"Cargando galerÃ­a..."})]}):C.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-32 border-2 border-dashed border-white/5 rounded-[40px] bg-white/[0.02]",children:[e.jsx(He,{className:"w-12 h-12 text-white/10 mb-6"}),e.jsx("p",{className:"text-white/30 text-xs font-black uppercase tracking-[4px] mb-4",children:"AÃºn no hay fotos en este evento"}),e.jsx("p",{className:"text-white/20 text-[10px] tracking-[1px] max-w-sm text-center",children:"Las fotos aparecerÃ¡n aquÃ­ a medida que los invitados las generen. Esta galerÃ­a se actualiza automÃ¡ticamente."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6",children:C.map(P=>e.jsxs("div",{className:"group relative aspect-[4/5] rounded-[24px] md:rounded-[32px] overflow-hidden border border-white/10 bg-[#0a0a0c] hover:border-accent/40 hover:shadow-[0_0_30px_rgba(0,0,0,0.5)] transition-all duration-500",children:[e.jsx("img",{src:P.image_url,alt:"Foto del evento",className:"w-full h-full object-cover opacity-80 group-hover:opacity-100 group-hover:scale-110 transition-all duration-700",crossOrigin:"anonymous",loading:"lazy"}),e.jsxs("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col justify-end p-4 md:p-6",children:[e.jsx("span",{className:"text-[8px] font-black uppercase tracking-[2px] text-accent mb-2 block",children:new Date(P.created_at).toLocaleTimeString("es-AR",{hour:"2-digit",minute:"2-digit"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>g(P.image_url),className:"flex-1 bg-white text-black py-3 rounded-xl text-[8px] font-black uppercase tracking-[1px] hover:bg-accent hover:text-white transition-colors flex items-center justify-center gap-2",children:e.jsx("span",{children:"Ver"})}),e.jsx("a",{href:P.image_url,target:"_blank",rel:"noreferrer",className:"p-3 bg-white/10 rounded-xl text-white hover:bg-white hover:text-black transition-colors",children:e.jsx(Ve,{className:"w-4 h-4"})})]})]})]},P.id))}),e.jsxs("div",{className:"flex items-center justify-center gap-2 mt-8 text-white/20",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500/50 animate-pulse"}),e.jsx("span",{className:"text-[9px] tracking-[1px]",children:"actualizaciÃ³n automÃ¡tica cada 30s"})]})]})]})},qa=({eventConfig:n,onClose:c})=>{const m=d.useRef(null),g=`https://app.metalabia.com/?event=${n.event_slug}`,C=()=>{var Z;const S=(Z=m.current)==null?void 0:Z.querySelector("canvas");if(!S)return;const N=document.createElement("canvas"),u=N.getContext("2d");if(!u)return;const $=60,z=400,B=120,P=80,F=z+$*2,G=B+z+$+P;N.width=F,N.height=G,u.fillStyle="#0a0a0c",u.fillRect(0,0,F,G),u.strokeStyle="rgba(255, 85, 0, 0.3)",u.lineWidth=2,u.roundRect(4,4,F-8,G-8,20),u.stroke(),u.fillStyle="#ffffff",u.font="bold 28px system-ui, -apple-system, sans-serif",u.textAlign="center",u.fillText(n.event_name,F/2,55),u.fillStyle="rgba(255, 85, 0, 0.8)",u.font="bold 14px system-ui, -apple-system, sans-serif",u.fillText("ðŸ“¸  ESCANEÃ Y CREÃ TU FOTO CON IA",F/2,85);const H=(F-z-20)/2,A=B;u.fillStyle="#ffffff",u.beginPath(),u.roundRect(H,A,z+20,z+20,16),u.fill(),u.drawImage(S,H+10,A+10,z,z),u.fillStyle="rgba(255,255,255,0.3)",u.font="12px system-ui, -apple-system, sans-serif",u.fillText("Powered by MetaLab IA  â€¢  metalab30.com",F/2,G-30);const ne=document.createElement("a");ne.download=`qr-${n.event_slug}.png`,ne.href=N.toDataURL("image/png"),ne.click()},I=()=>{var u;const S=(u=m.current)==null?void 0:u.querySelector("canvas");if(!S)return;const N=window.open("","_blank");N&&(N.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>QR - ${n.event_name}</title>
          <style>
            * { margin: 0; padding: 0; box-sizing: border-box; }
            body { 
              display: flex; flex-direction: column; align-items: center; 
              justify-content: center; min-height: 100vh; font-family: system-ui;
              background: white; color: black;
            }
            h1 { font-size: 32px; font-weight: 900; margin-bottom: 8px; text-transform: uppercase; }
            p.sub { font-size: 16px; color: #666; margin-bottom: 40px; }
            .qr { margin-bottom: 40px; }
            .qr img { width: 300px; height: 300px; }
            p.url { font-size: 12px; color: #999; margin-bottom: 8px; }
            p.brand { font-size: 11px; color: #ccc; }
          </style>
        </head>
        <body>
          <h1>${n.event_name}</h1>
          <p class="sub">ðŸ“¸ EscaneÃ¡ y creÃ¡ tu foto con IA</p>
          <div class="qr"><img src="${S.toDataURL()}" /></div>
          <p class="url">${g}</p>
          <p class="brand">Powered by MetaLab IA</p>
          <script>window.onload = () => { window.print(); }<\/script>
        </body>
      </html>
    `),N.document.close())};return e.jsx("div",{className:"fixed inset-0 z-[500] bg-black/95 backdrop-blur-2xl flex items-center justify-center p-4 animate-[fadeIn_0.3s_ease-out]",children:e.jsxs("div",{className:"relative w-full max-w-sm bg-[#0a0a0c] rounded-[40px] p-10 border border-white/10 text-center flex flex-col items-center",children:[e.jsx("button",{onClick:c,className:"absolute top-6 right-6 w-10 h-10 rounded-full bg-white/5 flex items-center justify-center hover:bg-white/10 transition-colors",children:e.jsx(ue,{className:"w-5 h-5"})}),e.jsx("div",{className:"w-16 h-16 bg-accent/20 rounded-full flex items-center justify-center mb-6",children:e.jsx("span",{className:"text-3xl",children:"ðŸ“±"})}),e.jsx("h3",{className:"text-xl font-black mb-1 uppercase italic text-white",children:n.event_name}),e.jsx("p",{className:"text-accent text-[10px] uppercase tracking-[3px] mb-8 font-bold",children:"EscaneÃ¡ y creÃ¡ tu foto con IA"}),e.jsx("div",{ref:m,className:"p-5 bg-white rounded-3xl mb-8 shadow-[0_0_40px_rgba(255,85,0,0.15)]",children:e.jsx(st,{value:g,size:220,level:"H",includeMargin:!0,imageSettings:{src:"/icon-192x192.png",height:40,width:40,excavate:!0}})}),e.jsx("p",{className:"text-white/20 text-[9px] tracking-[1px] mb-8 break-all px-4",children:g}),e.jsxs("div",{className:"flex gap-3 w-full",children:[e.jsxs("button",{onClick:C,className:"flex-1 flex items-center justify-center gap-2 px-6 py-4 bg-accent text-white rounded-xl hover:bg-accent/80 transition-all text-[10px] font-black tracking-[2px] uppercase",children:[e.jsx(Ve,{className:"w-4 h-4"}),"Descargar"]}),e.jsxs("button",{onClick:I,className:"flex-1 flex items-center justify-center gap-2 px-6 py-4 bg-white/10 text-white border border-white/10 rounded-xl hover:bg-white/20 transition-all text-[10px] font-black tracking-[2px] uppercase",children:[e.jsx($t,{className:"w-4 h-4"}),"Imprimir"]})]}),e.jsx("p",{className:"text-white/15 text-[8px] tracking-[1px] mt-6 leading-relaxed",children:"ImprimÃ­ este QR y colocalo en las mesas del evento. Los invitados escanean y generan sus fotos al instante."})]})})},Oa=({eventConfig:n,supabase:c,onBackToMain:m})=>{var be,ze,Ee,s;const[g,C]=d.useState("WELCOME"),[I,S]=d.useState(null),[N,u]=d.useState(null),[$,z]=d.useState(!1),[B,P]=d.useState(null),[F,G]=d.useState(!1),[H,A]=d.useState(null),[ne,Z]=d.useState(null),[he,Se]=d.useState(0),[se,le]=d.useState(!1),me=d.useRef(null),_e=d.useRef(null),pe=d.useRef(null),we=["Invocando a los genios digitales... âœ¨","Analizando tu mejor Ã¡ngulo... ðŸ¤³","Mezclando pÃ­xeles y creatividad... ðŸŽ¨","Casi listo para la magia... ðŸª„","Tu retrato estÃ¡ en el horno digital... ðŸ¥¨","Ajustando las luces del multiverso... ðŸŒŒ"],Ce=ge.useMemo(()=>{var t;return((t=n==null?void 0:n.selected_styles)==null?void 0:t.length)>0?We.filter(x=>n.selected_styles.includes(x.id)):We.slice(0,8)},[n]);d.useEffect(()=>{if(F){const t=setInterval(()=>{Se(x=>(x+1)%we.length)},5e3);return()=>clearInterval(t)}},[F]);const $e=async()=>{P(null);try{pe.current&&pe.current.getTracks().forEach(x=>x.stop());const t=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:1080},height:{ideal:1920}}});pe.current=t,me.current&&(me.current.srcObject=t)}catch(t){console.error(t),P("No se pudo acceder a la cÃ¡mara. Verifica los permisos.")}};d.useEffect(()=>{g==="CAMERA"?$e():pe.current&&(pe.current.getTracks().forEach(t=>t.stop()),pe.current=null)},[g]);const Me=()=>{if(me.current&&_e.current){const t=_e.current,x=me.current,f=x.videoWidth,y=x.videoHeight;t.width=f,t.height=y;const v=t.getContext("2d");v&&(v.translate(t.width,0),v.scale(-1,1),v.drawImage(x,0,0,f,y),u(t.toDataURL("image/jpeg",.8)),C("CAMERA"))}},h=async()=>{var t;if(!(!I||!N)){C("PROCESSING"),G(!0),Z(null);try{const{data:x,error:f}=await c.functions.invoke("cabina-vision",{body:{user_photo:N,model_id:I.id,aspect_ratio:"9:16",event_id:n.id,guest_id:`guest_${Date.now()}`}});if(f)throw f;if(!(x!=null&&x.success))throw new Error((x==null?void 0:x.error)||"Error en el procesamiento");A(x.image_url),C("RESULT"),ht({particleCount:150,spread:70,origin:{y:.6},colors:[((t=n.config)==null?void 0:t.primary_color)||"#7f13ec","#ffffff"]})}catch(x){console.error(x),Z(x.message||"Lo sentimos, hubo un error. Intenta de nuevo."),C("RESULT")}finally{G(!1)}}},ve=()=>{C("WELCOME"),S(null),u(null),A(null),Z(null)},i={"--accent-color":((be=n==null?void 0:n.config)==null?void 0:be.primary_color)||"#7f13ec","--accent-glow":`${((ze=n==null?void 0:n.config)==null?void 0:ze.primary_color)||"#7f13ec"}40`};return e.jsxs("div",{className:"fixed inset-0 bg-[#050505] text-white flex flex-col items-center overflow-hidden z-[100] font-sans selection:bg-accent/30",style:i,children:[e.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-[800px] h-[300px] bg-accent/10 blur-[150px] rounded-full -translate-y-1/2 pointer-events-none"}),e.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 w-[600px] h-[300px] bg-accent/5 blur-[120px] rounded-full translate-y-1/2 pointer-events-none"}),e.jsxs("main",{className:"relative flex-1 w-full max-w-lg flex flex-col p-6 overflow-y-auto no-scrollbar",children:[e.jsxs("div",{className:"flex flex-col items-center mb-8 pt-4",children:[(Ee=n.config)!=null&&Ee.logo_url?e.jsx(de.img,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},src:n.config.logo_url,alt:"Logo",className:"h-12 w-auto object-contain mb-4 drop-shadow-2xl"}):e.jsx(ie,{className:"w-10 h-10 text-accent mb-4"}),e.jsx("h1",{className:"text-xl font-black italic uppercase tracking-tighter text-white/90",children:n.event_name})]}),e.jsxs(Ge,{mode:"wait",children:[g==="WELCOME"&&e.jsxs(de.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.05},className:"flex-1 flex flex-col items-center justify-center text-center space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-4xl font-extrabold tracking-tight leading-tight",children:((s=n.config)==null?void 0:s.welcome_text)||"Â¡Bienvenidos a la fiesta!"}),e.jsx("p",{className:"text-white/40 text-sm uppercase tracking-[4px] font-bold",children:"Transforma tu foto con IA en segundos"})]}),e.jsxs("div",{className:"w-full aspect-[4/5] bg-white/5 rounded-[40px] border border-white/10 flex items-center justify-center p-8 relative overflow-hidden group",children:[e.jsx(de.div,{animate:{rotate:[0,5,-5,0]},transition:{duration:6,repeat:1/0,ease:"easeInOut"},className:"relative z-10",children:e.jsx(He,{className:"w-24 h-24 text-accent drop-shadow-[0_0_30px_rgba(var(--accent-rgb),0.5)]"})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-accent/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"})]}),e.jsxs("button",{onClick:()=>C("STYLE_SELECTION"),className:"w-full py-6 bg-accent rounded-3xl text-lg font-black uppercase tracking-[6px] shadow-[0_20px_40px_rgba(0,0,0,0.4)] hover:scale-105 active:scale-95 transition-all flex items-center justify-center gap-4",children:["Iniciar Experiencia",e.jsx(oa,{className:"w-6 h-6"})]})]},"welcome"),g==="STYLE_SELECTION"&&e.jsxs(de.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("span",{className:"text-accent text-[10px] font-black uppercase tracking-[4px]",children:"Paso 01"}),e.jsx("h2",{className:"text-2xl font-black uppercase italic italic",children:"ElegÃ­ tu Estilo"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4 pb-24",children:Ce.map(t=>e.jsx(Je,{type:"character",title:t.title,sampleImageUrl:t.url,isSelected:(I==null?void 0:I.id)===t.id,onSelect:()=>{S(t),C("CAMERA")}},t.id))})]},"styles"),g==="CAMERA"&&e.jsxs(de.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.9},className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("span",{className:"text-accent text-[10px] font-black uppercase tracking-[4px]",children:"Paso 02"}),e.jsx("h2",{className:"text-2xl font-black uppercase italic",children:"Â¡SonrÃ­e!"})]}),e.jsxs("div",{className:"relative w-full aspect-[3/4] rounded-[40px] overflow-hidden bg-black border border-white/10 shadow-2xl",children:[N?e.jsx("img",{src:N,className:"w-full h-full object-cover",alt:"Captura"}):e.jsxs(e.Fragment,{children:[e.jsx("video",{ref:me,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover scale-x-[-1]"}),e.jsx("div",{className:"absolute inset-0 border-[20px] border-black/40 pointer-events-none",children:e.jsx("div",{className:"w-full h-full border border-white/5 flex items-center justify-center",children:e.jsx("div",{className:"w-48 h-64 border border-accent/30 rounded-[100px] border-dashed"})})})]}),B&&e.jsxs("div",{className:"absolute inset-0 bg-black/90 flex flex-col items-center justify-center p-8 text-center mt-[-40px]",children:[e.jsx(ue,{className:"w-12 h-12 text-red-500 mb-4"}),e.jsx("p",{className:"font-bold text-sm uppercase tracking-wider",children:B}),e.jsx("button",{onClick:$e,className:"mt-6 px-6 py-3 bg-white/10 rounded-full text-[10px] font-black uppercase",children:"Reintentar"})]})]}),e.jsx("div",{className:"mt-8 flex items-center justify-center gap-6",children:N?e.jsxs("div",{className:"w-full space-y-4",children:[e.jsxs("button",{onClick:h,className:"w-full py-6 bg-accent rounded-3xl text-lg font-black uppercase tracking-[6px] shadow-[0_20px_40px_rgba(0,0,0,0.4)] flex items-center justify-center gap-4",children:["Generar Arte",e.jsx(ie,{className:"w-6 h-6"})]}),e.jsx("button",{onClick:()=>u(null),className:"w-full py-4 bg-white/5 text-white/40 rounded-2xl text-[10px] font-black uppercase tracking-[4px]",children:"Tomar otra foto"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>C("STYLE_SELECTION"),className:"w-16 h-16 rounded-full bg-white/5 border border-white/10 flex items-center justify-center text-white/50 hover:bg-white/10",children:e.jsx(Tt,{className:"w-6 h-6"})}),e.jsx("button",{onClick:Me,className:"w-24 h-24 rounded-full bg-white p-1.5 shadow-[0_0_40px_rgba(255,255,255,0.2)]",children:e.jsx("div",{className:"w-full h-full rounded-full border-4 border-black bg-black/5 flex items-center justify-center",children:e.jsx("div",{className:"w-6 h-6 bg-black rounded-full"})})}),e.jsx("div",{className:"w-16"})]})})]},"camera"),g==="PROCESSING"&&e.jsxs(de.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex-1 flex flex-col items-center justify-center text-center p-8",children:[e.jsxs("div",{className:"relative mb-12",children:[e.jsx(de.div,{animate:{rotate:360},transition:{duration:4,repeat:1/0,ease:"linear"},className:"w-48 h-48 rounded-full border-t-2 border-accent"}),e.jsx(de.div,{animate:{rotate:-360},transition:{duration:3,repeat:1/0,ease:"linear"},className:"absolute inset-4 rounded-full border-r-2 border-accent/30"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(ie,{className:"w-12 h-12 text-accent animate-pulse"})})]}),e.jsx("h2",{className:"text-2xl font-black uppercase italic mb-4",children:"Procesando Alquimia..."}),e.jsxs("p",{className:"text-white/60 text-sm font-medium h-12 italic",children:['"',we[he],'"']})]},"processing"),g==="RESULT"&&e.jsx(de.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"flex-1 flex flex-col items-center",children:ne?e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center space-y-6",children:[e.jsx("div",{className:"w-20 h-20 bg-red-500/10 border border-red-500/20 rounded-full flex items-center justify-center",children:e.jsx(ue,{className:"w-10 h-10 text-red-500"})}),e.jsx("h3",{className:"text-2xl font-black uppercase text-red-500 italic",children:"Algo saliÃ³ mal"}),e.jsx("p",{className:"text-white/40 text-sm",children:ne}),e.jsx("button",{onClick:ve,className:"px-8 py-4 bg-white/10 rounded-2xl text-[10px] font-black uppercase tracking-widest",children:"Reintentar"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-black uppercase italic text-accent leading-none",children:"Â¡IncreÃ­ble!"}),e.jsx("p",{className:"text-[10px] font-black text-white/30 uppercase tracking-[4px] mt-2",children:"Tu Alquimia Digital ha terminado"})]}),e.jsxs("div",{className:"relative w-full aspect-[3/4] rounded-[40px] overflow-hidden border-2 border-accent shadow-[0_0_50px_rgba(var(--accent-rgb),0.3)] bg-black mb-8 group",children:[e.jsx("img",{src:H||"",alt:"Resultado",className:"w-full h-full object-cover",crossOrigin:"anonymous"}),e.jsx("div",{className:"absolute top-4 right-4 z-20",children:e.jsx("button",{onClick:()=>le(!0),className:"w-12 h-12 bg-black/60 backdrop-blur-xl border border-white/20 rounded-2xl flex items-center justify-center shadow-2xl",children:e.jsx(tt,{className:"w-6 h-6 text-white"})})})]}),e.jsxs("div",{className:"w-full space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>{const t=document.createElement("a");t.href=H,t.download=`creativa-${Date.now()}.jpg`,t.click()},className:"py-5 bg-white text-black rounded-2xl font-black uppercase tracking-[2px] text-[10px] flex items-center justify-center gap-3",children:[e.jsx(Ve,{className:"w-4 h-4"}),"Descargar"]}),e.jsxs("button",{onClick:async()=>{var t;if(H)try{const f=await(await fetch(H,{mode:"cors"})).blob(),y=new File([f],`creativa-${Date.now()}.png`,{type:"image/png"});if(navigator.share&&((t=navigator.canShare)!=null&&t.call(navigator,{files:[y]})))await navigator.share({files:[y],title:n.event_name,text:`ðŸ“¸ Mi Alquimia en ${n.event_name} âœ¨ metalab30.com`});else{const v=encodeURIComponent(`ðŸ“¸ Â¡MirÃ¡ mi foto del evento ${n.event_name}! âœ¨ Creada por metalab30.com`);window.open(`https://wa.me/?text=${v}`,"_blank")}}catch{const f=encodeURIComponent(`ðŸ“¸ Â¡MirÃ¡ mi foto del evento ${n.event_name}! âœ¨ metalab30.com`);window.open(`https://wa.me/?text=${f}`,"_blank")}},className:"py-5 bg-accent text-white rounded-2xl font-black uppercase tracking-[2px] text-[10px] flex items-center justify-center gap-3",children:[e.jsx(Pa,{className:"w-4 h-4"}),"WhatsApp"]})]}),e.jsx("button",{onClick:ve,className:"w-full py-4 bg-white/5 text-white/40 rounded-2xl text-[9px] font-black uppercase tracking-[4px]",children:"Hacer otra foto"})]})]})},"result")]})]}),e.jsx("footer",{className:"py-8 opacity-20 hover:opacity-100 transition-opacity",children:e.jsx("span",{className:"text-[7px] font-black uppercase tracking-[6px] italic",children:"Powered by Creativa Labs"})}),e.jsx(Ge,{children:se&&H&&e.jsx(de.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[200] bg-black/95 backdrop-blur-2xl flex items-center justify-center p-6",children:e.jsxs("div",{className:"relative w-full max-w-sm bg-[#0a0a0c] rounded-[48px] p-12 border border-white/10 text-center flex flex-col items-center shadow-[0_40px_100px_rgba(0,0,0,1)]",children:[e.jsx("button",{onClick:()=>le(!1),className:"absolute top-8 right-8 w-12 h-12 rounded-full bg-white/5 flex items-center justify-center hover:bg-white/10",children:e.jsx(ue,{className:"w-6 h-6"})}),e.jsx(tt,{className:"w-16 h-16 text-accent mb-6"}),e.jsx("h3",{className:"text-2xl font-black uppercase italic mb-2 tracking-tighter",children:"Escanea y GuardÃ¡"}),e.jsxs("p",{className:"text-white/40 text-[9px] uppercase tracking-[3px] mb-10 leading-relaxed",children:["ApuntÃ¡ con tu cÃ¡mara",e.jsx("br",{}),"para descargar tu Alquimia"]}),e.jsx("div",{className:"p-6 bg-white rounded-[40px] shadow-2xl mb-10",children:e.jsx(st,{value:H,size:220,level:"H",includeMargin:!0})}),e.jsx("button",{onClick:()=>le(!1),className:"text-[10px] font-black uppercase tracking-[4px] text-accent hover:text-white",children:"Volver a la Foto"})]})})}),e.jsx("canvas",{ref:_e,className:"hidden"})]})},Ua=({eventConfig:n,supabase:c})=>{var z,B,P,F;const[m,g]=d.useState([]),[C,I]=d.useState(0),[S,N]=d.useState(!0);d.useEffect(()=>{(async()=>{const{data:A}=await c.from("generations").select("id, image_url, created_at").eq("event_id",n.id).order("created_at",{ascending:!1}).limit(50);A&&g(A),N(!1)})();const H=c.channel(`public-gallery-${n.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"generations",filter:`event_id=eq.${n.id}`},A=>{g(ne=>[A.new,...ne.slice(0,49)]),I(0)}).subscribe();return()=>{c.removeChannel(H)}},[n.id]),d.useEffect(()=>{if(m.length>1){const G=setInterval(()=>{I(H=>(H+1)%m.length)},8e3);return()=>clearInterval(G)}},[m.length]);const u={"--accent-color":((z=n==null?void 0:n.config)==null?void 0:z.primary_color)||"#7f13ec"},$=`${window.location.origin}/?event=${n.event_slug}`;return e.jsxs("div",{className:"fixed inset-0 bg-[#050505] text-white flex flex-col overflow-hidden z-[100] font-sans",style:u,children:[e.jsx("div",{className:"relative flex-1 flex items-center justify-center p-8 md:p-12",children:e.jsx(Ge,{mode:"wait",children:m.length>0?e.jsxs(de.div,{initial:{opacity:0,scale:.9,rotate:-2},animate:{opacity:1,scale:1,rotate:0},exit:{opacity:0,scale:1.1,rotate:2},transition:{duration:.8,ease:"easeOut"},className:"relative w-full h-full max-w-4xl flex items-center justify-center",children:[e.jsxs("div",{className:"relative w-full h-full rounded-[40px] md:rounded-[60px] overflow-hidden border-[10px] border-white/5 shadow-[0_0_100px_rgba(0,0,0,0.8)]",children:[e.jsx("img",{src:(B=m[C])==null?void 0:B.image_url,alt:"Live Event",className:"w-full h-full object-cover",crossOrigin:"anonymous"}),e.jsx("div",{className:"absolute bottom-10 left-10 z-10",children:e.jsxs("div",{className:"flex items-center gap-4 bg-black/40 backdrop-blur-xl px-6 py-3 rounded-full border border-white/10",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),e.jsxs("span",{className:"text-xs font-black uppercase tracking-[4px]",children:["Live from ",n.event_name]})]})})]}),e.jsx("div",{className:"absolute -top-10 -right-10 w-40 h-40 bg-accent/20 blur-[80px] rounded-full pointer-events-none"}),e.jsx("div",{className:"absolute -bottom-10 -left-10 w-60 h-60 bg-accent/10 blur-[100px] rounded-full pointer-events-none"})]},(P=m[C])==null?void 0:P.id):e.jsxs("div",{className:"flex flex-col items-center gap-6 text-white/20",children:[e.jsx(He,{className:"w-24 h-24 animate-pulse"}),e.jsx("p",{className:"text-xl font-black uppercase tracking-[10px]",children:"Esperando la primera Alquimia..."})]})})}),e.jsxs("div",{className:"h-48 md:h-auto md:w-[400px] bg-black/40 backdrop-blur-3xl border-t md:border-t-0 md:border-l border-white/10 p-10 flex md:flex-col items-center justify-between md:justify-center gap-8 relative z-20",children:[e.jsxs("div",{className:"text-center md:mb-8",children:[(F=n.config)!=null&&F.logo_url?e.jsx("img",{src:n.config.logo_url,alt:"Logo",className:"h-16 w-auto object-contain mx-auto mb-6"}):e.jsx(ie,{className:"w-12 h-12 text-accent mx-auto mb-6"}),e.jsx("h2",{className:"hidden md:block text-2xl font-black uppercase italic tracking-tighter leading-none mb-2",children:"Â¡Hazte la Tuya!"}),e.jsx("p",{className:"hidden md:block text-[10px] font-bold text-white/40 uppercase tracking-[4px]",children:"Escanea el cÃ³digo QR"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-[40px] shadow-2xl relative",children:[e.jsx(st,{value:$,size:window.innerWidth<768?120:200,level:"H",includeMargin:!0}),e.jsx("div",{className:"absolute -inset-2 border-2 border-accent/30 rounded-[48px] animate-pulse pointer-events-none"})]}),e.jsx("div",{className:"hidden md:flex flex-col items-center gap-4 mt-8 opacity-40",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ut,{className:"w-5 h-5"}),e.jsx("span",{className:"text-[9px] font-black uppercase tracking-[2px]",children:"Usa tu mÃ³vil"})]})}),e.jsxs("div",{className:"md:hidden text-right",children:[e.jsx("h2",{className:"text-lg font-black uppercase italic tracking-tighter text-accent leading-none",children:n.event_name}),e.jsx("p",{className:"text-[8px] font-bold text-white/40 uppercase tracking-[2px] mt-1",children:"Live Gallery"})]})]}),e.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-full bg-gradient-to-l from-accent/5 to-transparent pointer-events-none"})]})},Ba=(n,c)=>{if(!n||n[0]!=="#")return`rgba(255, 85, 0, ${c})`;const m=parseInt(n.slice(1,3),16),g=parseInt(n.slice(3,5),16),C=parseInt(n.slice(5,7),16);return`rgba(${m}, ${g}, ${C}, ${c})`},Wa=()=>{var kt,_t,Ct,Et;const[n,c]=d.useState({selectedIdentity:null,details:"GeneraciÃ³n desde Cabina Creativa Labs",email:"booth@creativa.lab",aspectRatio:"9:16",resolution:"1K",outputFormat:"png"}),[m,g]=d.useState(!1),[C,I]=d.useState(!1),[S,N]=d.useState(!1),[u,$]=d.useState(null),[z,B]=d.useState(!1),[P,F]=d.useState(null),[G,H]=d.useState(!1),[A,ne]=d.useState(!1),[Z,he]=d.useState(null),[Se,se]=d.useState(null),[le,me]=d.useState(0),[_e,pe]=d.useState(0),[we,Ce]=d.useState([]),[$e,Me]=d.useState(!1),[h,ve]=d.useState(null),[i,be]=d.useState(null),[ze,Ee]=d.useState(!0),[s,t]=d.useState(!1),[x,f]=d.useState([]),[y,v]=d.useState(!1),[R,w]=d.useState(!1),[_,U]=d.useState(null),[D,q]=d.useState("all"),[L,Q]=d.useState(""),[T,Y]=d.useState(null),[xe,re]=d.useState(!1),[oe,fe]=d.useState(!1),[J,rt]=d.useState([]),[ce,W]=d.useState("gallery"),[Qe,je]=d.useState([]),[ye,De]=d.useState(null),[p,Fe]=d.useState(null),[qe,ke]=d.useState(null),[nt,Ze]=d.useState(()=>!!new URLSearchParams(window.location.search).get("event")),Ie=3e3,Oe=ge.useMemo(()=>{const a=We.map(l=>{const o=J.find(O=>O.id===l.id),b=J.find(O=>{var K,j;return((K=O.id)==null?void 0:K.toLowerCase())===((j=l.subCategory)==null?void 0:j.toLowerCase())}),E=J.find(O=>{var K,j;return((K=O.id)==null?void 0:K.toLowerCase())===((j=l.category)==null?void 0:j.toLowerCase())});let k=l.isActive??!0;return E&&E.is_active===!1&&(k=!1),b&&b.is_active===!1&&(k=!1),o&&o.is_active===!1&&(k=!1),{...l,isPremium:o?o.is_premium:l.isPremium,usageCount:(o==null?void 0:o.usage_count)||0,isActive:k}}),r=J.filter(l=>!We.some(o=>o.id===l.id)).filter(l=>l.label&&l.image_url).map(l=>{const o=J.find(k=>{var O,K;return((O=k.id)==null?void 0:O.toLowerCase())===((K=l.category)==null?void 0:K.toLowerCase())}),b=J.find(k=>{var O,K;return((O=k.id)==null?void 0:O.toLowerCase())===((K=l.subcategory)==null?void 0:K.toLowerCase())});let E=l.is_active??!0;return o&&o.is_active===!1&&(E=!1),b&&b.is_active===!1&&(E=!1),{id:l.id,title:l.label,category:l.category||"General",subCategory:l.subcategory||"General",url:l.image_url,isPremium:l.is_premium||!1,usageCount:l.usage_count||0,isActive:E,tags:Array.isArray(l.tags)?l.tags:[]}});return[...a,...r]},[J]),Ne=ge.useMemo(()=>{let a=Oe.filter(r=>r.isActive);return p!=null&&p.selected_styles&&p.selected_styles.length>0&&(a=a.filter(r=>p.selected_styles.includes(r.id))),a},[Oe,p]),Ft=ge.useMemo(()=>{if(p)return[...Ne].sort(()=>Math.random()-.5).slice(0,4);const a=["jhonw_a","sup_a","pb_a","f1_a","magic_a"];return Ne.filter(r=>a.includes(r.id)).sort(()=>Math.random()-.5).slice(0,4)},[Ne,p]),Ye=ge.useMemo(()=>[...Ne].sort((a,r)=>(r.usageCount||0)-(a.usageCount||0)).slice(0,5).filter(a=>(a.usageCount||0)>0),[Ne]),lt=ge.useMemo(()=>{const o=Array.from(new Set(Ne.map(b=>b.category).filter(Boolean))).map(b=>{const E=St.find(k=>k.id.toLowerCase()===(b==null?void 0:b.toLowerCase()));return{id:b,label:(E==null?void 0:E.label)||b.charAt(0).toUpperCase()+b.slice(1),icon:(E==null?void 0:E.icon)||ie}}).filter(b=>b.id!=="all").filter((b,E,k)=>E===k.findIndex(O=>O.label.toLowerCase()===b.label.toLowerCase()));return[St.find(b=>b.id==="all"),...o]},[Ne]);d.useEffect(()=>{V.auth.getSession().then(({data:{session:r}})=>{ve(r)});const{data:{subscription:a}}=V.auth.onAuthStateChange((r,l)=>{ve(l)});return()=>a.unsubscribe()},[]),d.useEffect(()=>{if(!L.trim()||L.length<3)return;const a=setTimeout(async()=>{var r;try{await V.from("search_logs").insert({query:L.trim().toLowerCase(),user_id:(r=h==null?void 0:h.user)==null?void 0:r.id})}catch(l){console.error("Error logging search:",l)}},2e3);return()=>clearTimeout(a)},[L,(kt=h==null?void 0:h.user)==null?void 0:kt.id]),d.useEffect(()=>{bt();const a=V.channel("styles_sync").on("postgres_changes",{event:"*",schema:"public",table:"styles_metadata"},r=>{console.log("Realtime update received for styles_metadata:",r),bt()}).subscribe();return()=>{V.removeChannel(a)}},[s]),d.useEffect(()=>{h!=null&&h.user&&(ft(),gt(),Ut())},[h]);const qt=new URLSearchParams(window.location.search).get("mode")==="gallery",Ot=(i==null?void 0:i.is_master)||(i==null?void 0:i.role)==="partner"||(i==null?void 0:i.role)==="admin"||(i==null?void 0:i.role)==="master";d.useEffect(()=>{(async()=>{const l=new URLSearchParams(window.location.search).get("event");if(l){Ze(!0);try{const{data:o,error:b}=await V.from("events").select("*").eq("event_slug",l).maybeSingle();if(b)throw b;if(o){console.log("Evento detectado:",o.event_name);const E=new Date;if(o.start_date&&new Date(o.start_date)>E){const O=new Date(o.start_date).toLocaleDateString("es-AR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"});ke(`ðŸ—“ï¸ Este evento aÃºn no comenzÃ³. Arranca el ${O}`);return}if(o.end_date&&new Date(o.end_date)<E){ke("ðŸŽ¬ Este evento ya finalizÃ³. Â¡Gracias por participar!");return}if((o.credits_allocated||0)-(o.credits_used||0)<=0){ke(`ðŸŽŸï¸ Los crÃ©ditos de "${o.event_name}" se agotaron.`);return}Fe(o)}else ke("âŒ Evento no encontrado. VerificÃ¡ el link.")}catch(o){console.error("Error cargando evento:",o)}finally{Ze(!1)}}})()},[h]),d.useEffect(()=>{var a;if((a=p==null?void 0:p.config)!=null&&a.primary_color){const r=p.config.primary_color,l=Ba(r,.4);document.documentElement.style.setProperty("--accent-color",r),document.documentElement.style.setProperty("--accent-glow",l),console.log("ðŸŽ¨ Branding aplicado:",r)}else document.documentElement.style.setProperty("--accent-color","#ff5500"),document.documentElement.style.setProperty("--accent-glow","rgba(255, 85, 0, 0.4)")},[p]);const Ut=async()=>{if(h!=null&&h.user)try{Me(!0);const{data:a,error:r}=await V.from("favorites").select("style_id").eq("user_id",h.user.id);if(r)throw r;Ce(a.map(l=>l.style_id))}catch(a){console.error("Error fetching favorites:",a)}finally{Me(!1)}},Bt=async a=>{if(h!=null&&h.user)try{we.includes(a)?(await V.from("favorites").delete().eq("user_id",h.user.id).eq("style_id",a),Ce(l=>l.filter(o=>o!==a))):(await V.from("favorites").insert({user_id:h.user.id,style_id:a}),Ce(l=>[...l,a]))}catch(r){console.error("Error toggling favorite:",r)}};d.useEffect(()=>{var l,o,b,E;const a=((o=(l=p==null?void 0:p.partner)==null?void 0:l.config)==null?void 0:o.primary_color)||((E=(b=i==null?void 0:i.partner)==null?void 0:b.config)==null?void 0:E.primary_color)||"#ff5500",r=(k,O)=>{parseInt((k.slice(1,4).length===2,k.slice(1,3)),16);const K=parseInt(k.substring(1,3),16),j=parseInt(k.substring(3,5),16),ee=parseInt(k.substring(5,7),16);return`rgba(${K}, ${j}, ${ee}, ${O})`};try{const k=r(a,.4);document.documentElement.style.setProperty("--accent-color",a),document.documentElement.style.setProperty("--accent-glow",k)}catch(k){console.error("Error applying dynamic colors:",k)}},[p,i]);const bt=async()=>{try{const{data:a,error:r}=await V.from("styles_metadata").select("*");if(r)throw r;rt(a||[])}catch(a){console.error("Error fetching styles metadata:",a)}},ft=async()=>{try{Ee(!0);const{data:a,error:r}=await V.from("profiles").select("credits, total_generations, is_master, role, partner_id, unlocked_packs, full_name").eq("id",h.user.id).single();if(r)throw r;be(a)}catch(a){console.error("Error fetching profile:",a)}finally{Ee(!1)}},Wt=async a=>{if(h!=null&&h.user)try{const{error:r}=await V.from("profiles").update(a).eq("id",h.user.id);if(r)throw r;be(l=>l?{...l,...a}:null),je(l=>[...l,{id:Date.now().toString(),message:"âœ… Perfil actualizado correctamente",type:"success"}])}catch(r){console.error("Error updating profile:",r),je(l=>[...l,{id:Date.now().toString(),message:"âŒ Error al actualizar perfil",type:"error"}])}},gt=async()=>{var a;try{v(!0);let r=V.from("generations").select("*");if(p!=null&&p.id)r=r.eq("event_id",p.id);else if((a=h==null?void 0:h.user)!=null&&a.id)r=r.eq("user_id",h.user.id);else{v(!1);return}const{data:l,error:o}=await r.order("created_at",{ascending:!1}).limit(20);if(o)throw o;f(l||[])}catch(r){console.error("Error fetching generations:",r)}finally{v(!1)}},wt=async a=>{if(!(!i||!(h!=null&&h.user)))try{if(fe(!0),i.credits<Ie){Y(null),w(!0);return}const r=[...i.unlocked_packs||[],a],l=i.credits-Ie,{error:o}=await V.from("profiles").update({credits:l,unlocked_packs:r}).eq("id",h.user.id);if(o)throw o;be(j=>j?{...j,credits:l,unlocked_packs:r}:null),Y(null),se(null);const b=3*1e3,E=Date.now()+b,k={startVelocity:30,spread:360,ticks:60,zIndex:500},O=(j,ee)=>Math.random()*(ee-j)+j,K=setInterval(function(){const j=E-Date.now();if(j<=0)return clearInterval(K);const ee=50*(j/b);ht({...k,particleCount:ee,origin:{x:O(.1,.3),y:Math.random()-.2},colors:["#ff5500","#ffffff","#00d2ff"]}),ht({...k,particleCount:ee,origin:{x:O(.7,.9),y:Math.random()-.2},colors:["#ff5500","#ffffff","#00d2ff"]})},250)}catch(r){console.error("Error unlocking pack:",r),se("No se pudo desbloquear el pack. Reintenta.")}finally{fe(!1)}},vt=["Invocando a los genios digitales para tu retrato... âœ¨","Â¿SabÃ­as que la IA analiza miles de patrones para crear tu estilo? ðŸ§ ","Â¡EstÃ¡s quedando increÃ­ble! (O al menos eso dice nuestro algoritmo) ðŸ˜‰","Extrayendo creatividad del Ã©ter digital... ðŸŒŒ","Dato curioso: La IA no duerme, pero toma mucho cafÃ© virtual â˜•","Ajustando las luces y sombras para tu obra maestra... ðŸŽ¨","Casi listo... la perfecciÃ³n toma unos segundos extra âŒ›","Convirtiendo pÃ­xeles en arte puro para ti ðŸ’Ž","Esperamos que estÃ©s disfrutando de la magia de Creativa Labs ðŸš€","Buscando tu mejor Ã¡ngulo en el multiverso digital... ðŸŒ€"],Ue=d.useRef(null),ct=d.useRef(null),Be=d.useRef(null),jt=async()=>{F(null);try{Be.current&&Be.current.getTracks().forEach(o=>o.stop());const a=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:1280},height:{ideal:720}}});Be.current=a;let r=0;const l=()=>{Ue.current?Ue.current.srcObject=a:r<10&&(r++,setTimeout(l,100))};l()}catch(a){console.error(a),F("No se pudo acceder a la cÃ¡mara. Verifica los permisos.")}};d.useEffect(()=>{if(S&&z){const a=setTimeout(jt,300);return()=>clearTimeout(a)}},[S,z]),d.useEffect(()=>{let a,r;return m?(me(0),pe(0),a=setInterval(()=>{me(l=>l+1)},1e3),r=setInterval(()=>{pe(l=>(l+1)%vt.length)},6e3)):me(0),()=>{clearInterval(a),clearInterval(r)}},[m]);const Ht=()=>{N(!0),B(!0)},Gt=()=>{if(Ue.current&&ct.current){const a=ct.current,r=Ue.current,l=1024;let o=r.videoWidth,b=r.videoHeight;o>b?o>l&&(b*=l/o,o=l):b>l&&(o*=l/b,b=l),a.width=o,a.height=b;const E=a.getContext("2d");E&&(E.translate(a.width,0),E.scale(-1,1),E.drawImage(r,0,0,a.width,a.height),$(a.toDataURL("image/jpeg",.8)),B(!1),Be.current&&Be.current.getTracks().forEach(k=>k.stop()))}},Vt=async a=>{var o,b,E,k,O,K;a.preventDefault();const r=!!p,l=i==null?void 0:i.is_master;if(!(!n.selectedIdentity||!u)&&!(!r&&!(h!=null&&h.user))){if(r){if((p.credits_allocated||0)-(p.credits_used||0)<=0){se("ðŸŽŸï¸ Los crÃ©ditos del evento se agotaron."),I(!0),W("result");return}}else if(!l&&(!i||i.credits<100)){se(i&&i.total_generations>=5?"Ya gastaste tus 500 crÃ©ditos.":"Saldo insuficiente."),I(!0),W("result");return}if(g(!0),he(null),se(null),!r&&!l&&(h!=null&&h.user))try{const j=new Date;j.setHours(0,0,0,0);const{count:ee,error:M}=await V.from("generations").select("*",{count:"exact",head:!0}).eq("user_id",h.user.id).gte("created_at",j.toISOString());if(M)throw M;if(ee!==null&&ee>=2){se("MÃ¡ximo de impresiones del dÃ­a alcanzado."),I(!0),W("result"),g(!1);return}}catch(j){console.error("Error checking daily limit:",j)}if(!r&&!l&&(h!=null&&h.user))try{const{error:j}=await V.from("profiles").update({credits:i.credits-100}).eq("id",h.user.id);if(j)throw j;be(ee=>ee?{...ee,credits:ee.credits-100}:null)}catch(j){console.error("Error deducting credit:",j),se("Error al procesar crÃ©ditos. Intenta de nuevo."),g(!1);return}W("processing");try{const{data:j,error:ee}=await V.functions.invoke("cabina-vision",{body:{user_photo:u,model_id:n.selectedIdentity,aspect_ratio:n.aspectRatio,user_id:((o=h==null?void 0:h.user)==null?void 0:o.id)||null,email:((b=h==null?void 0:h.user)==null?void 0:b.email)||null,guest_id:`cabina_${Date.now()}`,event_id:(p==null?void 0:p.id)||null}});if(ee)throw console.warn("Invoke error (timeout), habilitando modo espera..."),await new Promise(X=>setTimeout(X,2e3)),new Error("VAR: Se perdiÃ³ la conexiÃ³n, pero tu Alquimia ya estÃ¡ en proceso en la nube. ðŸ‡¦ðŸ‡·âœ¨");if(!(j!=null&&j.success))throw new Error((j==null?void 0:j.error)||"Error al iniciar la IA");let M=j.image_url;if(!M&&j.taskId){console.log("Modo rescate activado para taskId:",j.taskId);for(let X=0;X<10;X++){await new Promise(Pe=>setTimeout(Pe,5e3));const{data:te}=await V.functions.invoke("cabina-vision",{body:{action:"check",taskId:j.taskId,model_id:n.selectedIdentity}});if(te!=null&&te.success&&te.state==="success"&&te.image_url){M=te.image_url;break}}}if(!M)throw new Error("VAR: Alquimia en proceso en la nube... âœ¨");he(M),h!=null&&h.user&&i&&(await V.from("profiles").update({total_generations:(i.total_generations||0)+1}).eq("id",h.user.id),ft()),r&&Fe(X=>X&&{...X,credits_used:(X.credits_used||0)+1}),gt(),I(!0),W("result"),je(X=>[...X,{id:Date.now().toString(),message:"ðŸª„ Â¡Tu foto estÃ¡ lista!",type:"success",action:()=>{W("result"),window.scrollTo({top:0,behavior:"smooth"})}}])}catch(j){console.error("Submission error:",j),((E=j.message)==null?void 0:E.includes("non-2xx"))||((k=j.message)==null?void 0:k.includes("timeout"))||((O=j.message)==null?void 0:O.includes("Failed to fetch"))||((K=j.message)==null?void 0:K.includes("VAR"))?se("VAR: Se perdiÃ³ la conexiÃ³n, pero tu Alquimia ya estÃ¡ en proceso en la nube. ðŸ‡¦ðŸ‡·âœ¨"):(!r&&!l&&i&&(h!=null&&h.user)&&(await V.from("profiles").update({credits:i.credits}).eq("id",h.user.id),be(M=>M?{...M,credits:i.credits}:null)),se(j.message||"Error al procesar la imagen.")),I(!0),W("result")}finally{g(!1),De(null)}}},Qt=()=>{if(!Z)return;const a=window.open("","_blank");a&&(a.document.write(`
        <html>
          <head>
            <title>Imprimir Foto</title>
            <style>
              body { margin: 0; display: flex; align-items: center; justify-content: center; height: 100vh; background: #fff; }
              img { max-width: 100%; max-height: 100%; object-fit: contain; }
              @media print {
                body { background: none; }
                img { width: 100%; height: auto; }
              }
            </style>
          </head>
          <body>
            <img src="${Z}" onload="setTimeout(function(){window.print();}, 500);" />
          </body>
        </html>
      `),a.document.close())},Zt=async()=>{if(!Z)return;const a=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent);try{const r=`creativa-photo-${Date.now()}.png`,o=await(await fetch(Z,{mode:"cors"})).blob(),b=new File([o],r,{type:"image/png"});if(a&&navigator.share&&navigator.canShare&&navigator.canShare({files:[b]}))try{await navigator.share({files:[b],title:"Mi Foto Creativa",text:"Â¡Mira mi foto generada con IA por Creativa Labs!"});return}catch(O){if(O.name!=="AbortError")throw O;return}const E=window.URL.createObjectURL(o),k=document.createElement("a");k.href=E,k.download=r,document.body.appendChild(k),k.click(),document.body.removeChild(k),window.URL.revokeObjectURL(E)}catch(r){console.error("Download/Share error:",r),a?window.location.href=Z:window.open(Z,"_blank")}},Yt=[{id:"9:16",label:"9:16",icon:ut,desc:"Portrait"},{id:"16:9",label:"16:9",icon:Mt,desc:"Landscape"},{id:"4:5",label:"4:5",icon:wa,desc:"Classic"}],yt=()=>{$(null),he(null),I(!1),g(!1),c(a=>({...a,selectedIdentity:null})),W("gallery"),se(null),window.scrollTo({top:0,behavior:"smooth"})},it=u&&n.selectedIdentity,Nt=async a=>{try{U(a.name),console.log("Iniciando pago para pack:",a.name);const{data:r,error:l}=await V.functions.invoke("mercadopago-payment",{body:{user_id:h.user.id,credits:a.credits,price:a.price,pack_name:a.name,redirect_url:window.location.origin}});if(l)throw console.error("Error invocando funciÃ³n:",l),l;if(console.log("Respuesta de funciÃ³n:",r),r!=null&&r.error){const b=r.message||"Error desconocido en el servidor.";se(`Error de Pago: ${b}`),je(E=>[...E,{id:Date.now().toString(),message:`âŒ ${b}`,type:"error"}]);return}const o=(r==null?void 0:r.init_point)||(r==null?void 0:r.sandbox_init_point);o?window.location.href=o:(console.error("No se recibiÃ³ URL de pago:",r),se("No se pudo generar el enlace de pago."),je(b=>[...b,{id:Date.now().toString(),message:"âŒ Error: No se recibiÃ³ link de pago",type:"error"}]))}catch(r){console.error("Error initiating payment:",r);let l=r.message||"No se pudo iniciar el proceso de pago.";if(r.context)try{const o=await r.context.json();l=o.message||o.error||l}catch{}se(`Error: ${l}`),je(o=>[...o,{id:Date.now().toString(),message:`âŒ ${l}`,type:"error"}])}finally{U(null)}};return nt?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-primary",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-white/5 border-t-[#7f13ec] rounded-full animate-spin"}),e.jsx(ie,{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-6 h-6 text-[#7f13ec] animate-pulse"})]}),e.jsx("div",{className:"mt-8 text-white font-bold tracking-[0.2em] animate-pulse uppercase text-[10px]",children:"Iniciando Experiencia AlquÃ­mica"})]}):qe?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-primary",children:e.jsxs("div",{className:"text-center max-w-md mx-auto px-6",children:[e.jsx("div",{className:"text-6xl mb-6",children:"ðŸŽ­"}),e.jsx("h2",{style:{fontFamily:"var(--font-display)",fontSize:"1.5rem",color:"white",marginBottom:"12px"},children:"Cabina de Fotos"}),e.jsx("p",{style:{color:"rgba(255,255,255,0.7)",fontSize:"1.1rem",lineHeight:"1.6",marginBottom:"24px"},children:qe}),e.jsx("a",{href:"https://metalab30.com",style:{color:"rgba(255,255,255,0.4)",fontSize:"0.8rem",textDecoration:"underline"},children:"metalab30.com"})]})}):!h&&!p?e.jsx(ta,{}):qt&&p?e.jsx(Ua,{eventConfig:p,supabase:V}):p&&!Ot?e.jsx(Oa,{eventConfig:p,supabase:V}):e.jsxs("div",{className:"relative w-full min-h-screen font-sans text-white bg-primary overflow-x-hidden",children:[e.jsx(ra,{}),h||p?e.jsx(Ta,{user:(h==null?void 0:h.user)||null,profile:i,eventConfig:p,onNavigate:a=>{a.startsWith("category_")?(q(a.replace("category_","")),W("gallery")):a==="favorites"?(q("favorites"),W("gallery")):a==="buy_credits"?w(!0):a==="show-qr"?ne(!0):W(a),window.scrollTo({top:0,behavior:"smooth"})},onLogout:async()=>{await V.auth.signOut(),window.location.href="/"},categories:lt,currentView:ce}):null,e.jsxs("div",{className:"fixed bottom-10 right-10 z-[500] flex flex-col gap-4",children:[Qe.map(a=>e.jsxs("div",{onClick:a.action,className:`flex items-center gap-4 px-8 py-4 rounded-2xl border backdrop-blur-2xl animate-[fadeInRight_0.5s_ease-out] shadow-2xl cursor-pointer hover:scale-105 transition-all
              ${a.type==="success"?"bg-accent/20 border-accent/40 text-white":"bg-red-500/20 border-red-500/40 text-red-100"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${a.type==="success"?"bg-accent":"bg-red-500"}`,children:a.type==="success"?e.jsx(Xe,{className:"w-5 h-5"}):e.jsx(Ke,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-black text-[10px] uppercase tracking-[2px]",children:a.message}),a.action&&e.jsx("span",{className:"text-[7px] font-bold text-accent uppercase tracking-[1px]",children:"Clic para ver"})]}),e.jsx("button",{onClick:r=>{r.stopPropagation(),je(l=>l.filter(o=>o.id!==a.id))},className:"ml-4 opacity-40 hover:opacity-100",children:e.jsx(ue,{className:"w-4 h-4"})})]},a.id)),m&&(ye==null?void 0:ye.active)&&e.jsxs("div",{className:"bg-black/80 backdrop-blur-xl border border-white/10 p-6 rounded-[24px] shadow-2xl flex items-center gap-6 animate-[fadeInUp_0.5s_ease-out]",children:[e.jsxs("div",{className:"relative w-12 h-12 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 border-[1px] border-accent/20 rounded-full animate-spin"}),e.jsxs("span",{className:"text-[8px] font-black",children:[le,"s"]})]}),e.jsxs("div",{className:"flex flex-col text-left",children:[e.jsx("span",{className:"text-white text-[10px] font-black uppercase tracking-[2px]",children:"Alquimia en progreso..."}),e.jsx("span",{className:"text-white/40 text-[7px] uppercase tracking-[1px]",children:"PodÃ©s seguir usando la app"})]}),e.jsx("button",{onClick:()=>{W("gallery"),De({active:!1,id:null,startTime:Date.now()})},className:"px-4 py-2 bg-accent text-white rounded-lg text-[8px] font-black uppercase tracking-[1px] hover:bg-white transition-colors",children:"Cerrar"})]})]}),m&&!(ye!=null&&ye.active)&&e.jsxs("div",{className:"fixed inset-0 z-[200] bg-black/90 backdrop-blur-2xl flex flex-col items-center justify-center p-6 text-center animate-[fadeIn_0.3s_ease-out]",children:[e.jsxs("div",{className:"relative mb-12",children:[e.jsx("div",{className:"absolute inset-0 bg-accent/20 blur-[100px] rounded-full animate-pulse"}),e.jsxs("div",{className:"relative w-32 h-32 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 border-[1px] border-accent/20 rounded-full animate-[ping_3s_linear_infinite]"}),e.jsx("div",{className:"absolute inset-[-10px] border-[1px] border-white/5 rounded-full animate-[ping_4s_linear_infinite]"}),e.jsx(Ae,{className:"w-full h-full text-accent animate-spin stroke-[1px] opacity-40"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(Mt,{className:"w-6 h-6 text-accent animate-pulse mb-1"}),e.jsx("span",{className:"text-xl font-black italic tracking-tighter text-white",children:"AI"}),e.jsx("span",{className:"text-[6px] font-black uppercase tracking-[2px] text-accent/60",children:"Scanning..."})]})})]})]}),e.jsxs("div",{className:"max-w-md space-y-8 relative z-10",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-accent text-[10px] font-black tracking-[5px] uppercase block animate-pulse",children:"Procesando Alquimia Digital"}),e.jsx("h3",{className:"text-2xl font-black italic uppercase tracking-tight h-20 flex items-center justify-center transition-all duration-500",children:vt[_e]})]}),e.jsxs("div",{className:"flex flex-col items-center gap-4 pt-8",children:[e.jsx("div",{className:"w-64 h-1.5 bg-white/5 rounded-full overflow-hidden border border-white/5",children:e.jsx("div",{className:"h-full bg-accent transition-all duration-300 ease-linear shadow-[0_0_15px_rgba(255,85,0,0.5)]",style:{width:`${le<5?le/5*30:le<25?30+(le-5)/20*50:le<60?80+(le-25)/35*15:Math.min(99,95+(le-60)/60*4)}%`}})}),e.jsx("p",{className:"text-[8px] text-white/30 font-black tracking-[3px] uppercase",children:le>30?"Finalizando detalles finales...":"Sincronizando con el servidor"})]}),e.jsxs("button",{onClick:()=>{De({active:!0,id:null,startTime:Date.now()}),W("gallery")},className:"px-8 py-4 mt-8 bg-white/5 border border-white/10 rounded-xl text-[10px] font-black uppercase tracking-[2px] hover:bg-white/10 transition-all flex items-center gap-3 group",children:[e.jsx(ut,{className:"w-4 h-4 text-accent group-hover:scale-110 transition-transform"}),"Procesar en Segundo Plano"]})]})]}),ce==="gallery"&&e.jsx("section",{className:"relative h-[40vh] w-full flex flex-col items-center justify-center z-10 px-4",children:e.jsxs("div",{className:"text-center pointer-events-none",children:[e.jsxs("h1",{className:"font-black text-[clamp(2.5rem,10vw,10rem)] leading-none tracking-tighter uppercase select-none",children:[(p==null?void 0:p.event_name)||"Creativa"," ",e.jsx("span",{className:"text-white/20",children:p?"":"Labs"})]}),e.jsxs("div",{className:"mt-4 flex flex-col items-center gap-2",children:[e.jsx("div",{className:"h-[1px] w-16 bg-accent"}),e.jsx("div",{className:"text-[10px] tracking-[0.5rem] text-white/40 uppercase",children:((_t=p==null?void 0:p.config)==null?void 0:_t.welcome_text)||"Photo Booth Experience"})]})]})}),(ce==="setup"||ce==="result"||ce==="history")&&e.jsx("div",{className:"fixed top-24 left-6 z-[160] animate-[fadeIn_0.5s_ease-out]",children:e.jsxs("button",{onClick:()=>{yt(),W("gallery")},className:"group flex items-center gap-4 px-6 py-3 bg-black/40 backdrop-blur-xl border border-white/5 rounded-full hover:bg-white/10 transition-all pointer-events-auto shadow-2xl",children:[e.jsx(Pt,{className:"w-4 h-4 text-accent rotate-90"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-[3px]",children:"Volver a Estilos"})]})}),e.jsx("section",{className:"relative min-h-screen w-full bg-[#050505]/95 backdrop-blur-md border-t border-white/5 py-20 px-6 z-20",children:e.jsxs("div",{className:"max-w-[1200px] mx-auto",children:[ce==="gallery"&&e.jsxs("div",{className:"animate-[fadeIn_1s_ease-out]",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("span",{className:"inline-block px-4 py-1 rounded-full bg-accent/10 border border-accent/20 text-accent text-[10px] font-black tracking-[3px] uppercase mb-6",children:"Discovery"}),e.jsx("h2",{className:"text-4xl font-black tracking-tight uppercase mb-4 italic text-white",children:p?"Selecciona tu Estilo":"Elige tu destino"}),e.jsx("p",{className:"text-white/30 text-[10px] uppercase tracking-[4px]",children:p?"Personaliza tu experiencia exclusiva":"Navega por los universos visuales disponibles"}),p&&e.jsxs("button",{onClick:()=>W("event-gallery"),className:"mt-8 inline-flex items-center gap-2 px-6 py-3 bg-white/5 border border-white/10 rounded-2xl hover:bg-white/10 transition-all text-white/40 hover:text-white text-[10px] font-black tracking-[2px] uppercase blur-none",children:[e.jsx(at,{className:"w-4 h-4"}),e.jsx("span",{children:"Ver GalerÃ­a del Evento"})]})]}),e.jsxs("div",{className:"max-w-xl mx-auto mb-12 relative group",children:[e.jsx("div",{className:"absolute inset-0 bg-accent/5 blur-2xl rounded-full opacity-0 group-focus-within:opacity-100 transition-opacity duration-700"}),e.jsxs("div",{className:"relative flex items-center bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl overflow-hidden focus-within:border-accent/50 transition-all duration-300",children:[e.jsx("div",{className:"pl-6 pointer-events-none",children:e.jsx(It,{className:`w-5 h-5 transition-colors ${L?"text-accent":"text-white/20"}`})}),e.jsx("input",{type:"text",value:L,onChange:a=>Q(a.target.value),placeholder:"Busca por estilo, pack o tags (ej: f1, traje, neon)...",className:"w-full bg-transparent border-none px-6 py-5 text-sm font-bold placeholder:text-white/10 focus:outline-none focus:ring-0 text-white"}),L&&e.jsx("button",{onClick:()=>Q(""),className:"pr-6 text-white/20 hover:text-white transition-colors",children:e.jsx(ue,{className:"w-4 h-4"})})]})]}),!L&&e.jsxs("div",{className:"mb-20 animate-[fadeIn_0.8s_ease-out]",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-8",children:[e.jsx(ie,{className:"w-4 h-4 text-amber-500 animate-pulse"}),e.jsx("h3",{className:"text-[10px] font-black tracking-[4px] uppercase text-white/40",children:"Recomendados para vos"}),e.jsx(ie,{className:"w-4 h-4 text-amber-500 animate-pulse"})]}),e.jsx("div",{className:"flex flex-nowrap overflow-x-auto pb-8 gap-3 px-4 no-scrollbar justify-center",children:Ft.map(a=>{var r;return e.jsx("div",{className:"min-w-[110px] sm:min-w-[120px] transform hover:scale-110 transition-all duration-500",children:e.jsx(Je,{type:"character",title:a.title,sampleImageUrl:a.url,isSelected:n.selectedIdentity===a.id,isPremium:a.isPremium,isUnlocked:((r=i==null?void 0:i.unlocked_packs)==null?void 0:r.includes(a.subCategory))||(i==null?void 0:i.is_master),usageCount:a.usageCount,isTopStyle:Ye.some(l=>l.id===a.id),tags:[],onSelect:()=>{var o;a.isPremium&&!((o=i==null?void 0:i.unlocked_packs)!=null&&o.includes(a.subCategory))&&!(i!=null&&i.is_master)?i&&i.credits>=Ie?Y(a):re(!0):(c(b=>({...b,selectedIdentity:a.id})),W("setup"),window.scrollTo({top:0,behavior:"smooth"}))}})},`rec-${a.id}`)})})]}),!L&&!p&&Ye.length>0&&e.jsxs("div",{className:"mb-20 animate-[fadeIn_1.2s_ease-out]",children:[e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-10",children:[e.jsx("div",{className:"h-[1px] w-12 bg-gradient-to-r from-transparent to-accent"}),e.jsx(Le,{className:"w-5 h-5 text-accent animate-pulse"}),e.jsx("h3",{className:"text-[12px] font-black tracking-[6px] uppercase text-white italic",children:"Los MÃ¡s Buscados"}),e.jsx(Le,{className:"w-5 h-5 text-accent animate-pulse"}),e.jsx("div",{className:"h-[1px] w-12 bg-gradient-to-l from-transparent to-accent"})]}),e.jsx("div",{className:"flex flex-nowrap overflow-x-auto pb-8 gap-4 px-4 no-scrollbar justify-center",children:Ye.map(a=>{var r;return e.jsx("div",{className:"min-w-[120px] sm:min-w-[140px] transform hover:scale-110 transition-all duration-500",children:e.jsx(Je,{type:"character",title:a.title,sampleImageUrl:a.url,isSelected:n.selectedIdentity===a.id,isPremium:a.isPremium,isUnlocked:((r=i==null?void 0:i.unlocked_packs)==null?void 0:r.includes(a.subCategory))||(i==null?void 0:i.is_master),usageCount:a.usageCount,isTopStyle:!0,tags:[],onSelect:()=>{var o;a.isPremium&&!((o=i==null?void 0:i.unlocked_packs)!=null&&o.includes(a.subCategory))&&!(i!=null&&i.is_master)?i&&i.credits>=Ie?Y(a):re(!0):(c(b=>({...b,selectedIdentity:a.id})),W("setup"),window.scrollTo({top:0,behavior:"smooth"}))}})},`top-${a.id}`)})})]}),e.jsxs("div",{className:"relative mb-16 max-w-5xl mx-auto px-4 group/carousel",children:[e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-16 bg-gradient-to-r from-[#050505] to-transparent z-10 pointer-events-none opacity-0 group-hover/carousel:opacity-100 transition-opacity duration-500"}),e.jsxs("div",{id:"category-scroll-container",className:"flex gap-4 overflow-x-auto no-scrollbar scroll-smooth py-4 px-8",children:[[...lt.filter(a=>a.id==="all"),...lt.filter(a=>a.id!=="all").sort((a,r)=>a.label.localeCompare(r.label))].map(a=>e.jsxs("button",{onClick:()=>{q(a.id),Q("")},className:`flex-shrink-0 flex items-center gap-3 px-8 py-4 rounded-2xl font-black text-[10px] tracking-[4px] uppercase transition-all duration-500 whitespace-nowrap border
                          ${D===a.id?"bg-accent text-white shadow-[0_0_40px_var(--accent-glow)] scale-105 border-accent":"bg-white/5 text-white/40 border-white/5 hover:bg-white/10 hover:border-white/20 hover:text-white"}`,children:[e.jsx(a.icon,{className:`w-4 h-4 ${D===a.id?"animate-pulse text-white":"opacity-40"}`}),a.label]},a.id)),!p&&e.jsxs("button",{onClick:()=>q("favorites"),className:`flex-shrink-0 flex items-center gap-3 px-8 py-4 rounded-2xl border transition-all duration-500 whitespace-nowrap
                          ${D==="favorites"?"bg-gradient-to-r from-pink-500 to-rose-500 border-pink-500 text-white shadow-[0_0_30px_rgba(244,63,94,0.3)] scale-105":"bg-white/5 border-white/5 text-white/40 hover:text-pink-400 hover:border-pink-500/30"}`,children:[e.jsx(mt,{className:`w-5 h-5 ${D==="favorites"?"fill-current animate-pulse text-white":"opacity-40"}`}),e.jsx("span",{className:"font-black tracking-[2px] uppercase text-[10px]",children:"Favoritos"})]})]}),e.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-16 bg-gradient-to-l from-[#050505] to-transparent z-10 pointer-events-none opacity-0 group-hover/carousel:opacity-100 transition-opacity duration-500"})]}),e.jsx("button",{onClick:()=>{const a=document.getElementById("category-scroll-container");a&&(a.scrollLeft-=300)},className:"absolute left-[-10px] top-1/2 -translate-y-1/2 w-10 h-10 rounded-full bg-black/60 border border-white/10 backdrop-blur-xl flex items-center justify-center text-white opacity-0 group-hover/carousel:opacity-100 transition-all hover:bg-accent hover:border-accent hover:scale-110 shadow-2xl z-20",children:e.jsx(et,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>{const a=document.getElementById("category-scroll-container");a&&(a.scrollLeft+=300)},className:"absolute right-[-10px] top-1/2 -translate-y-1/2 w-10 h-10 rounded-full bg-black/60 border border-white/10 backdrop-blur-xl flex items-center justify-center text-white opacity-0 group-hover/carousel:opacity-100 transition-all hover:bg-accent hover:border-accent hover:scale-110 shadow-2xl z-20",children:e.jsx(Rt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-20",children:[Array.from(new Set(Ne.filter(a=>{const r=D==="favorites"?we.includes(a.id):D==="all"||a.category===D,l=L.toLowerCase(),o=a.title.toLowerCase().includes(l)||a.subCategory.toLowerCase().includes(l)||a.tags.some(b=>b.toLowerCase().includes(l));return r&&o}).map(a=>a.subCategory))).sort((a,r)=>{const l=J.find(k=>k.id===a),o=J.find(k=>k.id===r),b=(l==null?void 0:l.sort_order)??999,E=(o==null?void 0:o.sort_order)??999;return b!==E?b-E:a.localeCompare(r)}).map(a=>{const r=()=>{const l=d.useRef(null),[o,b]=d.useState(!1),[E,k]=d.useState(!0),O=()=>{if(l.current){const{scrollLeft:M,scrollWidth:X,clientWidth:te}=l.current;b(M>10),k(M<X-te-10)}};d.useEffect(()=>{O();const M=setTimeout(O,500);return()=>clearTimeout(M)},[]);const K=M=>{if(l.current){const{clientWidth:X}=l.current,te=M==="left"?-X*.8:X*.8;l.current.scrollBy({left:te,behavior:"smooth"})}},j=Ne.filter(M=>{const X=D==="favorites"?we.includes(M.id):D==="all"||M.category===D,te=L.toLowerCase();return M.subCategory===a&&X&&(M.title.toLowerCase().includes(te)||M.subCategory.toLowerCase().includes(te)||M.tags.some(Pe=>Pe.toLowerCase().includes(te)))}),ee=j.length;return e.jsxs("div",{className:"animate-[fadeIn_0.5s_ease-out]",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx("div",{className:"h-[2px] w-8 bg-accent"}),e.jsx("h3",{className:"text-sm font-black tracking-[4px] uppercase text-white/60 italic",children:a}),e.jsx("div",{className:"flex-grow h-[1px] bg-white/5"})]}),e.jsxs("div",{className:"relative group/carousel",children:[ee>4&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>K("left"),className:`absolute -left-4 top-1/2 -translate-y-1/2 z-30 p-3 rounded-full bg-black/80 border border-accent/30 shadow-[0_0_20px_rgba(255,85,0,0.2)] backdrop-blur-xl transition-all duration-300 hover:scale-110 active:scale-95
                                    ${o?"opacity-100":"opacity-20 pointer-events-none"}`,children:e.jsx(et,{className:"w-5 h-5 text-accent"})}),e.jsx("button",{onClick:()=>K("right"),className:`absolute -right-4 top-1/2 -translate-y-1/2 z-30 p-3 rounded-full bg-black/80 border border-accent/30 shadow-[0_0_20px_rgba(255,85,0,0.2)] backdrop-blur-xl transition-all duration-300 hover:scale-110 active:scale-95
                                    ${E?"opacity-100":"opacity-20 pointer-events-none"}`,children:e.jsx(Rt,{className:"w-5 h-5 text-accent"})})]}),e.jsx("div",{ref:l,onScroll:O,className:`flex flex-nowrap overflow-x-auto pt-8 pb-12 gap-6 snap-x snap-mandatory no-scrollbar scroll-smooth px-4 ${ee<=4?"justify-center":""}`,children:j.map(M=>{var X;return e.jsx("div",{className:"min-w-[130px] sm:min-w-[140px] lg:min-w-[150px] snap-center transform hover:scale-[1.08] transition-all duration-500",children:e.jsx(Je,{type:"character",title:M.title,sampleImageUrl:M.url,isSelected:n.selectedIdentity===M.id,isPremium:M.isPremium,isUnlocked:((X=i==null?void 0:i.unlocked_packs)==null?void 0:X.includes(M.subCategory))||(i==null?void 0:i.is_master),usageCount:M.usageCount,isTopStyle:Ye.some(te=>te.id===M.id),tags:M.tags,isFavorite:we.includes(M.id),onToggleFavorite:te=>{te.stopPropagation(),Bt(M.id)},onSelect:()=>{var Pe;M.isPremium&&!((Pe=i==null?void 0:i.unlocked_packs)!=null&&Pe.includes(M.subCategory))&&!(i!=null&&i.is_master)?i&&i.credits>=Ie?Y(M):re(!0):(c(Kt=>({...Kt,selectedIdentity:M.id})),W("setup"),window.scrollTo({top:0,behavior:"smooth"}))}})},M.id)})}),e.jsx("div",{className:"absolute left-0 top-0 bottom-12 w-20 bg-gradient-to-r from-[#050505]/80 to-transparent pointer-events-none z-[10] opacity-0 group-hover/carousel:opacity-100 transition-opacity"}),e.jsx("div",{className:"absolute right-0 top-0 bottom-12 w-20 bg-gradient-to-l from-[#050505]/80 to-transparent pointer-events-none z-[10] opacity-0 group-hover/carousel:opacity-100 transition-opacity"})]})]},a)};return e.jsx(r,{},a)}),L&&Oe.filter(a=>{const r=D==="all"||a.category===D,l=L.toLowerCase();return r&&(a.title.toLowerCase().includes(l)||a.subCategory.toLowerCase().includes(l)||a.tags.some(o=>o.toLowerCase().includes(l)))}).length===0&&e.jsxs("div",{className:"py-20 text-center animate-pulse",children:[e.jsx(It,{className:"w-12 h-12 text-white/5 mx-auto mb-4"}),e.jsxs("p",{className:"text-white/20 text-[10px] font-black uppercase tracking-[4px]",children:['No hay resultados para "',L,'"']}),e.jsx("button",{onClick:()=>Q(""),className:"mt-6 text-accent text-[8px] font-black uppercase tracking-[2px] hover:underline",children:"Limpiar bÃºsqueda"})]})]})]}),ce==="setup"&&e.jsxs("div",{className:"animate-[fadeInDown_0.8s_ease-out]",children:[n.selectedIdentity&&e.jsxs("div",{className:"flex flex-col items-center mb-16",children:[e.jsx("div",{className:"w-32 h-32 rounded-3xl overflow-hidden border-2 border-accent mb-6 shadow-[0_0_30px_rgba(255,85,0,0.3)]",children:e.jsx("img",{src:(Ct=Oe.find(a=>a.id===n.selectedIdentity))==null?void 0:Ct.url,className:"w-full h-full object-cover",alt:"Estilo"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-accent text-[8px] font-black uppercase tracking-[4px]",children:"TransformaciÃ³n Elegida"}),e.jsx("h2",{className:"text-3xl font-black italic uppercase tracking-tighter text-white",children:(Et=Oe.find(a=>a.id===n.selectedIdentity))==null?void 0:Et.title})]})]}),e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("span",{className:"inline-block px-4 py-1 rounded-full bg-accent/10 border border-accent/20 text-accent text-[10px] font-black tracking-[3px] uppercase mb-6",children:"Paso 01"}),e.jsx("h2",{className:"text-2xl font-black tracking-[0.2em] uppercase mb-8",children:"Captura tu Rostro"}),e.jsx("p",{className:"text-white/30 text-[9px] uppercase tracking-[3px] mb-12",children:"Ubica tu cara en el centro para mejores resultados"}),e.jsx("div",{className:"flex flex-col items-center gap-8",children:u?e.jsxs("div",{className:"relative group",children:[e.jsxs("div",{className:"w-64 aspect-[4/5] rounded-3xl overflow-hidden border-2 border-accent shadow-[0_0_40px_rgba(255,85,0,0.3)] relative",children:[e.jsx("img",{src:u,className:"w-full h-full object-cover",alt:"Tu foto"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-[1px] bg-accent/50 animate-[scan_2s_linear_infinite]"})]}),e.jsx("button",{onClick:()=>$(null),className:"absolute -top-3 -right-3 w-10 h-10 bg-white text-black rounded-full flex items-center justify-center hover:bg-accent hover:text-white transition-all shadow-xl z-30",children:e.jsx(xt,{className:"w-5 h-5"})}),e.jsx("p",{className:"mt-4 text-[9px] font-black tracking-[3px] text-accent uppercase",children:"Foto Capturada"})]}):e.jsxs("button",{onClick:Ht,className:"group relative flex items-center justify-center gap-4 px-12 py-6 bg-white/5 border-2 border-white/10 rounded-2xl hover:bg-accent hover:border-accent transition-all duration-500 hover:scale-105",children:[e.jsx(He,{className:"w-6 h-6 text-accent group-hover:text-white"}),e.jsx("span",{className:"font-black tracking-[4px] uppercase text-sm text-white",children:"Iniciar CÃ¡mara"})]})})]}),e.jsxs("div",{className:"relative py-20 flex items-center justify-center",children:[e.jsx("div",{className:"absolute w-full h-[1px] bg-white/5"}),e.jsx(Pt,{className:`relative px-4 bg-[#050505] w-12 h-5 transition-colors duration-500 ${u?"text-accent":"text-white/10"}`})]}),e.jsx("div",{className:`transition-all duration-700 ${u?"opacity-100":"opacity-20 pointer-events-none grayscale"}`,children:e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("span",{className:"inline-block px-4 py-1 rounded-full bg-white/5 border border-white/10 text-white/40 text-[10px] font-black tracking-[3px] uppercase mb-6",children:"Paso 02"}),e.jsx("h2",{className:"text-2xl font-black tracking-[0.2em] uppercase mb-12",children:"Formato de Imagen"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-8 max-w-3xl mx-auto",children:Yt.map(a=>e.jsxs("button",{onClick:()=>c(r=>({...r,aspectRatio:a.id})),className:`relative group flex flex-col items-center p-8 rounded-[32px] border-2 transition-all duration-500
                          ${n.aspectRatio===a.id?"border-accent bg-accent/5 shadow-[0_0_40px_rgba(255,85,0,0.2)]":"border-white/5 bg-white/2 bg-[#121215] hover:border-white/20"}`,children:[e.jsx("div",{className:`mb-6 p-4 rounded-2xl transition-all duration-500
                          ${n.aspectRatio===a.id?"bg-accent text-white":"bg-white/5 text-white/40 group-hover:text-white"}`,children:e.jsx(a.icon,{className:"w-8 h-8"})}),e.jsx("span",{className:`text-xl font-black tracking-[4px] mb-2 ${n.aspectRatio===a.id?"text-white":"text-white/40"}`,children:a.label}),n.aspectRatio===a.id&&e.jsx(Xe,{className:"absolute top-4 right-4 w-5 h-5 text-accent"})]},a.id))})]})}),e.jsx("div",{className:`mt-32 max-w-sm mx-auto transition-all duration-700 ${it?"opacity-100 scale-100":"opacity-30 scale-95 pointer-events-none"}`,children:e.jsxs("button",{onClick:Vt,disabled:m||!it,className:"group relative w-full h-20 rounded-2xl overflow-hidden transition-all duration-500 shadow-2xl",children:[e.jsx("div",{className:`absolute inset-0 transition-all duration-500 ${it?"bg-accent":"bg-white/10"}`}),e.jsx("div",{className:"relative flex items-center justify-center gap-4 font-black text-sm uppercase tracking-[6px] text-white",children:m?e.jsx("span",{children:"PROCESANDO..."}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"GENERAR ALQUIMIA"}),e.jsx(ie,{className:"w-5 h-5"})]})})]})})]}),ce==="result"&&e.jsxs("div",{className:"mt-8 p-12 bg-accent/5 border border-accent/20 rounded-[40px] text-center max-w-2xl mx-auto backdrop-blur-3xl animate-[fadeIn_0.5s_ease-out] flex flex-col items-center",children:[Se?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-16 h-16 bg-red-500 rounded-full flex items-center justify-center mb-8",children:e.jsx(Ke,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"text-3xl font-black mb-4 uppercase italic text-red-500",children:"Error"}),e.jsx("p",{className:"text-white/70 text-xs font-bold uppercase tracking-[2px] leading-relaxed",children:Se})]}):Z?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-16 h-16 bg-accent rounded-full flex items-center justify-center mb-8 shadow-[0_0_30px_rgba(255,85,0,0.4)]",children:e.jsx(Xe,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"text-3xl font-black mb-10 uppercase italic text-white",children:"Â¡Tu Alquimia estÃ¡ Lista!"}),e.jsx("div",{className:"w-64 aspect-[4/5] rounded-3xl overflow-hidden border-2 border-accent shadow-[0_0_40px_rgba(255,85,0,0.3)] mb-10 bg-black",children:e.jsx("img",{src:Z,alt:"Resultado",className:"w-full h-full object-cover",crossOrigin:"anonymous"})}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[e.jsxs("button",{onClick:Qt,className:"group flex items-center gap-3 px-8 py-4 bg-white text-black rounded-xl hover:bg-accent hover:text-white transition-all shadow-lg hover:shadow-accent/50",children:[e.jsx($t,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs font-black tracking-[2px] uppercase",children:"Imprimir"})]}),e.jsxs("button",{onClick:Zt,className:"group flex items-center gap-3 px-8 py-4 bg-white/10 text-white border border-white/10 rounded-xl hover:bg-white/20 transition-all shadow-lg",children:[e.jsx(Ve,{className:"w-5 h-5 text-accent"}),e.jsx("span",{className:"text-xs font-black tracking-[2px] uppercase",children:"Descargar"})]}),e.jsxs("button",{onClick:async()=>{var a;if(Z)try{const l=await(await fetch(Z,{mode:"cors"})).blob(),o=new File([l],`creativa-${Date.now()}.png`,{type:"image/png"});if(navigator.share&&((a=navigator.canShare)!=null&&a.call(navigator,{files:[o]})))await navigator.share({files:[o],title:(p==null?void 0:p.event_name)||"Mi Foto Creativa",text:p?`ðŸ“¸ Mi foto del evento ${p.event_name} âœ¨ Creada con IA por metalab30.com`:"ðŸ“¸ Â¡Mi foto generada con IA! âœ¨ metalab30.com"});else{const b=encodeURIComponent(p?`ðŸ“¸ Â¡MirÃ¡ mi foto del evento ${p.event_name}! âœ¨ Creada con IA por metalab30.com`:"ðŸ“¸ Â¡MirÃ¡ mi foto generada con IA! âœ¨ metalab30.com");window.open(`https://wa.me/?text=${b}`,"_blank")}}catch(r){if(r.name!=="AbortError"){const l=encodeURIComponent("ðŸ“¸ Â¡MirÃ¡ mi foto generada con IA! âœ¨ metalab30.com");window.open(`https://wa.me/?text=${l}`,"_blank")}}},className:"group flex items-center gap-3 px-8 py-4 bg-[#25D366]/20 text-[#25D366] border border-[#25D366]/30 rounded-xl hover:bg-[#25D366]/30 transition-all shadow-lg",children:[e.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),e.jsx("span",{className:"text-xs font-black tracking-[2px] uppercase",children:"Compartir"})]})]}),p&&e.jsxs("button",{onClick:()=>{W("event-gallery")},className:"mt-6 flex items-center gap-2 px-6 py-3 bg-white/5 border border-white/10 rounded-xl hover:bg-white/10 transition-all text-white/60 hover:text-white mx-auto",children:[e.jsx("span",{className:"text-lg",children:"ðŸ“¸"}),e.jsx("span",{className:"text-[10px] font-bold tracking-[2px] uppercase",children:"Ver galerÃ­a del evento"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-16 h-16 bg-yellow-500 rounded-full flex items-center justify-center mb-8",children:e.jsx(Ke,{className:"w-8 h-8 text-white"})}),e.jsx("p",{children:"Respuesta inesperada del servidor."})]}),e.jsx("button",{onClick:yt,className:"mt-12 text-[9px] font-black tracking-[4px] uppercase text-white/30 hover:text-white transition-colors",children:"Reiniciar Proceso"})]}),ce==="history"&&e.jsxs("div",{className:"animate-[fadeIn_0.5s_ease-out] max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col items-center mb-16 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-white/5 rounded-full flex items-center justify-center mb-6",children:e.jsx(at,{className:"w-8 h-8 text-accent"})}),e.jsx("h2",{className:"text-3xl font-black uppercase italic tracking-tight text-white mb-2",children:"Mis Fotos"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-[1px] w-8 bg-accent/50"}),e.jsx("p",{className:"text-[10px] tracking-[4px] text-white/40 uppercase",children:"Historial de Generaciones"}),e.jsx("div",{className:"h-[1px] w-8 bg-accent/50"})]})]}),y?e.jsxs("div",{className:"flex flex-col items-center py-20 opacity-40",children:[e.jsx(Ae,{className:"w-10 h-10 animate-spin mb-4 text-accent"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-[2px]",children:"Cargando historial..."})]}):x.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-32 border-2 border-dashed border-white/5 rounded-[40px] bg-white/[0.02]",children:[e.jsx(He,{className:"w-12 h-12 text-white/10 mb-6"}),e.jsx("p",{className:"text-white/30 text-xs font-black uppercase tracking-[4px] mb-8",children:"AÃºn no has generado imÃ¡genes"}),e.jsx("button",{onClick:()=>W("gallery"),className:"px-8 py-4 bg-accent text-white rounded-xl text-[10px] font-black uppercase tracking-[2px] hover:bg-white hover:text-black transition-all",children:"Crear mi primera foto"})]}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:x.map(a=>e.jsxs("div",{className:"group relative aspect-[4/5] rounded-[32px] overflow-hidden border border-white/10 bg-[#0a0a0c] hover:border-accent/40 hover:shadow-[0_0_30px_rgba(0,0,0,0.5)] transition-all duration-500",children:[e.jsx("img",{src:a.image_url,alt:"GeneraciÃ³n",className:"w-full h-full object-cover opacity-80 group-hover:opacity-100 group-hover:scale-110 transition-all duration-700",crossOrigin:"anonymous"}),e.jsxs("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col justify-end p-6",children:[e.jsx("span",{className:"text-[8px] font-black uppercase tracking-[2px] text-accent mb-2 block",children:new Date(a.created_at).toLocaleDateString()}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{he(a.image_url),I(!0),W("result"),window.scrollTo({top:0,behavior:"smooth"})},className:"flex-1 bg-white text-black py-3 rounded-xl text-[8px] font-black uppercase tracking-[1px] hover:bg-accent hover:text-white transition-colors flex items-center justify-center gap-2",children:e.jsx("span",{children:"Ver"})}),e.jsx("a",{href:a.image_url,target:"_blank",rel:"noreferrer",className:"p-3 bg-white/10 rounded-xl text-white hover:bg-white hover:text-black transition-colors",children:e.jsx(Ve,{className:"w-4 h-4"})})]})]})]},a.id))})]}),ce==="event-gallery"&&p&&e.jsx(Fa,{eventConfig:p,supabase:V,onBack:()=>W("gallery"),onViewPhoto:a=>{he(a),I(!0),W("result"),window.scrollTo({top:0,behavior:"smooth"})}}),ce==="settings"&&e.jsx($a,{profile:i,session:h,onBack:()=>W("gallery"),onAddCredits:()=>w(!0),onUpdateProfile:Wt}),ce==="packs"&&e.jsx(za,{identities:We,unlockedPacks:i==null?void 0:i.unlocked_packs,userCredits:(i==null?void 0:i.credits)||0,onBack:()=>W("gallery"),onUnlock:wt,isUnlocking:oe}),ce==="support"&&e.jsxs("div",{className:"flex flex-col items-center justify-center pt-32 pb-20 animate-[fadeIn_0.5s_ease-out]",children:[e.jsx("h2",{className:"text-3xl font-black italic uppercase text-white mb-6",children:"Soporte"}),e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-8 max-w-md w-full text-center",children:[e.jsx("p",{className:"text-white/60 text-sm mb-6",children:"Si tienes algÃºn problema o sugerencia, contÃ¡ctanos."}),e.jsx("a",{href:"mailto:support@metalab.ai",className:"inline-block px-8 py-4 bg-accent text-white rounded-xl font-black uppercase tracking-[2px] text-xs hover:bg-white hover:text-black transition-all",children:"Enviar Email"}),e.jsx("button",{onClick:()=>W("gallery"),className:"block w-full mt-6 text-[10px] font-black uppercase tracking-[2px] text-white/30 hover:text-white",children:"Volver"})]})]})]})}),S&&e.jsx("div",{className:"fixed inset-0 z-[100] bg-black/95 backdrop-blur-xl flex items-center justify-center p-4",children:e.jsxs("div",{className:"relative w-full max-w-md max-h-[90vh] aspect-[3/4] bg-primary rounded-[40px] overflow-hidden border border-white/10 flex flex-col",children:[e.jsxs("div",{className:"relative flex-1 bg-black overflow-hidden",children:[z?e.jsx("video",{ref:Ue,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover scale-x-[-1]"}):e.jsx("img",{src:u||"",className:"w-full h-full object-cover",alt:"PrevisualizaciÃ³n"}),P&&e.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/80 p-8 text-center",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(Ke,{className:"w-12 h-12 text-red-500 mb-4"}),e.jsx("p",{className:"text-white text-xs font-bold uppercase tracking-widest",children:P}),e.jsx("button",{onClick:jt,className:"mt-6 px-6 py-3 bg-white/10 hover:bg-white/20 rounded-full text-[10px] font-black uppercase tracking-widest transition-all",children:"Reintentar"})]})}),e.jsx("div",{className:"absolute inset-0 border-[20px] border-black/40 pointer-events-none",children:e.jsx("div",{className:"w-full h-full border border-white/5 relative flex items-center justify-center",children:e.jsx("div",{className:"w-48 h-64 border border-accent/20 rounded-[100px]"})})})]}),e.jsx("div",{className:"absolute bottom-10 left-0 w-full px-10 flex items-center justify-between z-20",children:z?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>N(!1),className:"w-12 h-12 rounded-full bg-white/5 flex items-center justify-center border border-white/10",children:e.jsx(ue,{className:"w-5 h-5"})}),e.jsx("button",{onClick:Gt,className:"w-20 h-20 rounded-full bg-white p-1 shadow-2xl",children:e.jsx("div",{className:"w-full h-full rounded-full border-4 border-black bg-black/5 flex items-center justify-center",children:e.jsx("div",{className:"w-4 h-4 bg-black rounded-full"})})}),e.jsx("div",{className:"w-12"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>B(!0),className:"flex flex-col items-center gap-2 group",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-white/5 border border-white/10 flex items-center justify-center group-hover:bg-white/10",children:e.jsx(xt,{className:"w-5 h-5"})}),e.jsx("span",{className:"text-[8px] font-black tracking-[2px] uppercase opacity-40",children:"Reintentar"})]}),e.jsxs("button",{onClick:()=>N(!1),className:"flex flex-col items-center gap-2 group",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-accent flex items-center justify-center shadow-lg",children:e.jsx(Xe,{className:"w-6 h-6"})}),e.jsx("span",{className:"text-[8px] font-black tracking-[2px] uppercase",children:"Listo"})]}),e.jsxs("button",{onClick:()=>{$(null),N(!1)},className:"flex flex-col items-center gap-2 group",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-white/5 border border-white/10 flex items-center justify-center group-hover:bg-white/10",children:e.jsx(ue,{className:"w-5 h-5"})}),e.jsx("span",{className:"text-[8px] font-black tracking-[2px] uppercase opacity-40",children:"Cerrar"})]})]})})]})}),G&&Z&&e.jsx("div",{className:"fixed inset-0 z-[110] bg-black/95 backdrop-blur-2xl flex items-center justify-center p-4",children:e.jsxs("div",{className:"relative w-full max-w-sm bg-[#0a0a0c] rounded-[40px] p-12 border border-white/10 text-center flex flex-col items-center",children:[e.jsx("button",{onClick:()=>H(!1),className:"absolute top-6 right-6 w-10 h-10 rounded-full bg-white/5 flex items-center justify-center hover:bg-white/10 transition-colors",children:e.jsx(ue,{className:"w-5 h-5"})}),e.jsx("div",{className:"w-16 h-16 bg-accent/20 rounded-full flex items-center justify-center mb-8",children:e.jsx(tt,{className:"w-8 h-8 text-accent"})}),e.jsx("h3",{className:"text-2xl font-black mb-2 uppercase italic",children:"Escanear para Descargar"}),e.jsx("p",{className:"text-white/40 text-[10px] uppercase tracking-[2px] mb-8",children:"Escanea con tu cÃ¡mara para guardar en tu mÃ³vil"}),e.jsx("div",{className:"p-4 bg-white rounded-3xl mb-8",children:e.jsx(st,{value:Z,size:200,level:"H",includeMargin:!0})}),e.jsx("button",{onClick:()=>H(!1),className:"text-[10px] font-black tracking-[4px] uppercase text-accent hover:text-white transition-colors",children:"Cerrar"})]})}),A&&p&&e.jsx(qa,{eventConfig:p,onClose:()=>ne(!1)}),R&&e.jsx("div",{className:"fixed inset-0 z-[300] bg-black/40 backdrop-blur-md flex items-center justify-center p-4 animate-[fadeIn_0.3s_ease-out]",children:e.jsxs("div",{className:"relative w-full max-w-xl bg-white/5 backdrop-blur-[40px] rounded-[32px] p-6 md:p-8 border border-white/10 text-center shadow-2xl overflow-y-auto max-h-[95vh]",children:[e.jsx("button",{onClick:()=>w(!1),className:"absolute top-6 right-6 w-10 h-10 rounded-full bg-white/5 flex items-center justify-center hover:bg-white/10 transition-colors",children:e.jsx(ue,{className:"w-5 h-5"})}),e.jsx("div",{className:"w-16 h-16 bg-accent/20 rounded-full flex items-center justify-center mb-8 mx-auto",children:e.jsx(Lt,{className:"w-8 h-8 text-accent"})}),e.jsx("h3",{className:"text-xl md:text-2xl font-black mb-1 uppercase italic tracking-tight",children:"ElegÃ­ tu Pack"}),e.jsx("p",{className:"text-accent text-[7px] font-black uppercase tracking-[2px] mb-1",children:"Desbloquea todos los estilos Premium"}),e.jsx("p",{className:"text-white/40 text-[6px] uppercase tracking-[2px] mb-6",children:"ObtenÃ© crÃ©ditos para tus retratos con IA"}),e.jsx("div",{className:"flex flex-wrap items-center justify-center gap-3",children:[{name:"Starter",price:4e3,credits:500,bonus:"",color:"white/5",popular:!1,premium:!1},{name:"Standard",price:8e3,credits:1100,bonus:"+10%",color:"accent/5",popular:!0,premium:!1},{name:"Business",price:1e4,credits:1500,bonus:"+20%",color:"white/5",popular:!1,premium:!1}].map(a=>e.jsxs("div",{className:`relative w-full max-w-[150px] p-4 rounded-[24px] border transition-all duration-500 flex flex-col items-center group
                    ${a.popular?"bg-accent/10 border-accent shadow-[0_0_20px_rgba(255,85,0,0.1)] scale-105 z-10":"bg-white/5 border-white/5 hover:border-white/20"}`,children:[a.popular&&e.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-accent text-[8px] font-black uppercase tracking-[2px] px-4 py-1 rounded-full",children:"MÃ¡s Popular"}),a.premium&&e.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-gradient-to-r from-amber-500 to-yellow-300 text-[8px] font-black uppercase tracking-[2px] px-4 py-1 rounded-full text-black",children:"Especial Packs"}),e.jsx("span",{className:"text-[7px] font-black uppercase tracking-[1px] text-white/40 mb-3",children:a.name}),e.jsxs("div",{className:"flex flex-col items-center mb-4",children:[e.jsx("span",{className:`text-3xl font-black italic mb-1 ${a.premium?"text-amber-400":"text-white"}`,children:a.credits}),e.jsx("span",{className:"text-[7px] font-black uppercase tracking-[1px] text-accent",children:"CrÃ©ditos"}),a.bonus&&e.jsxs("div",{className:`mt-4 flex items-center gap-2 px-3 py-1 rounded-full ${a.premium?"bg-amber-500/20":"bg-accent/20"}`,children:[e.jsx(Le,{className:`w-3 h-3 ${a.premium?"text-amber-400":"text-accent"}`}),e.jsx("span",{className:`text-[8px] font-black uppercase tracking-[1px] ${a.premium?"text-amber-400":"text-accent"}`,children:a.bonus})]})]}),e.jsxs("div",{className:`text-lg font-black italic mb-4 ${a.premium?"text-amber-400":"text-white"}`,children:["$",a.price.toLocaleString()]}),e.jsx("button",{disabled:!!_,onClick:()=>Nt(a),className:`w-full py-4 rounded-xl text-xs font-black uppercase tracking-[2px] transition-all duration-300 flex items-center justify-center gap-2
                      ${a.popular?"bg-accent text-white hover:bg-white hover:text-black":"bg-white text-black hover:bg-accent hover:text-white"}
                      ${_===a.name?"opacity-50":""}`,children:_===a.name?e.jsx(Ae,{className:"w-4 h-4 animate-spin"}):"Comprar"})]},a.name))}),e.jsx("p",{className:"mt-12 text-[8px] font-black tracking-[4px] uppercase text-white/20",children:"Pagos protegidos por Mercado Pago"})]})}),T&&e.jsx("div",{className:"fixed inset-0 z-[400] bg-black/90 backdrop-blur-2xl flex items-center justify-center p-6 animate-[fadeIn_0.3s_ease-out]",children:e.jsxs("div",{className:"relative w-full max-w-md bg-[#0a0a0c] rounded-[40px] p-10 border border-white/10 text-center shadow-2xl",children:[e.jsx("div",{className:"w-16 h-16 bg-accent/20 rounded-full flex items-center justify-center mb-8 mx-auto",children:e.jsx(Le,{className:"w-8 h-8 text-accent animate-pulse"})}),e.jsx("h3",{className:"text-2xl font-black mb-2 uppercase italic",children:"Desbloquear Pack"}),e.jsxs("p",{className:"text-white/40 text-[10px] uppercase tracking-[2px] mb-8",children:["Â¿Quieres desbloquear el pack ",e.jsx("span",{className:"text-white font-bold",children:T.subCategory})," por ",e.jsxs("span",{className:"text-accent font-bold",children:[Ie," crÃ©ditos"]}),"?"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("button",{disabled:oe,onClick:()=>wt(T.subCategory),className:"w-full h-16 bg-accent text-white rounded-2xl font-black uppercase tracking-[4px] text-xs hover:bg-white hover:text-black transition-all flex items-center justify-center gap-3",children:oe?e.jsx(Ae,{className:"w-5 h-5 animate-spin"}):e.jsxs(e.Fragment,{children:["Confirmar Compra",e.jsx(ie,{className:"w-4 h-4"})]})}),e.jsx("button",{disabled:oe,onClick:()=>Y(null),className:"w-full py-4 text-[10px] font-black uppercase tracking-[3px] text-white/20 hover:text-white transition-colors",children:"Cancelar"})]}),e.jsxs("p",{className:"mt-8 text-[8px] font-black tracking-[3px] text-white/10 uppercase",children:["Tu saldo actual: ",i==null?void 0:i.credits," crÃ©ditos"]})]})}),xe&&e.jsx("div",{className:"fixed inset-0 z-[400] bg-black/40 backdrop-blur-md flex items-center justify-center p-6 animate-[fadeIn_0.3s_ease-out]",children:e.jsxs("div",{className:"relative w-full max-w-[260px] bg-white/5 backdrop-blur-[40px] rounded-[32px] p-6 border border-amber-500/20 text-center shadow-[0_0_80px_rgba(251,191,36,0.1)]",children:[e.jsx("button",{onClick:()=>re(!1),className:"absolute top-4 right-4 w-8 h-8 rounded-full bg-white/5 flex items-center justify-center hover:bg-white/10 transition-colors",children:e.jsx(ue,{className:"w-4 h-4 text-white/40"})}),e.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-amber-500 to-yellow-300 rounded-2xl flex items-center justify-center mb-6 mx-auto rotate-6 shadow-xl shadow-amber-500/10",children:e.jsx(ie,{className:"w-7 h-7 text-black"})}),e.jsx("h3",{className:"text-2xl font-black mb-3 uppercase italic tracking-tighter text-transparent bg-clip-text bg-gradient-to-r from-amber-400 to-yellow-200",children:"Pack Premium"}),e.jsxs("div",{className:"bg-white/5 border border-white/5 rounded-2xl p-5 mb-6",children:[e.jsx("div",{className:"text-[8px] font-black text-white/40 uppercase tracking-[3px] mb-4 leading-relaxed",children:"Desbloquea estilos VIP + 3000 crÃ©ditos"}),e.jsx("div",{className:"flex flex-col items-center",children:e.jsxs("div",{className:"flex items-baseline gap-1.5",children:[e.jsx("span",{className:"text-4xl font-black italic text-white leading-none",children:"3000"}),e.jsx("span",{className:"text-[8px] font-black uppercase text-amber-500 tracking-widest",children:"CrÃ©ditos"})]})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"text-3xl font-black italic mb-1",children:"$20.000"}),e.jsx("div",{className:"text-[7px] font-black uppercase tracking-[2px] text-white/15",children:"Pago Ãšnico"})]}),e.jsx("button",{disabled:!!_,onClick:()=>{Nt({name:"Unlock Premium",price:2e4,credits:3e3}),re(!1)},className:"w-full h-14 bg-gradient-to-r from-amber-500 to-yellow-400 hover:from-white hover:to-white text-black font-black uppercase tracking-[4px] text-[10px] rounded-xl transition-all duration-500 shadow-[0_10px_20px_rgba(245,158,11,0.2)] active:scale-95 flex items-center justify-center gap-3",children:_?e.jsx(Ae,{className:"w-5 h-5 animate-spin"}):e.jsxs(e.Fragment,{children:["DESBLOQUEAR AHORA",e.jsx(Le,{className:"w-3.5 h-3.5 fill-black"})]})})]})}),e.jsx("canvas",{ref:ct,className:"hidden"}),e.jsx("footer",{className:"relative py-12 bg-primary border-t border-white/5 text-center z-20",children:e.jsx("div",{className:"text-white/10 text-[8px] uppercase tracking-[6px] font-bold italic",children:"Â© 2024 Creativa Labs â€” Digital Alchemy Studio"})})]})},Dt=document.getElementById("root");if(!Dt)throw new Error("Could not find root element to mount to");const At=window.location.hostname,Ha=At.startsWith("kiosk")||At.startsWith("admin")||window.location.pathname.startsWith("/dashboard")||window.location.pathname.startsWith("/kiosk");class Ga extends ge.Component{constructor(c){super(c),this.state={hasError:!1,error:null}}static getDerivedStateFromError(c){return{hasError:!0,error:c}}componentDidCatch(c,m){console.error("ErrorBoundary caught an error",c,m)}render(){var c;return this.state.hasError?e.jsxs("div",{style:{padding:"20px",color:"white",background:"#222",minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center"},children:[e.jsx("h1",{style:{color:"#13ec80"},children:"Algo saliÃ³ mal"}),e.jsx("p",{children:((c=this.state.error)==null?void 0:c.message)||"Error desconocido"}),e.jsx("button",{onClick:()=>window.location.reload(),style:{padding:"10px 20px",background:"#13ec80",border:"none",color:"black",fontWeight:"bold",borderRadius:"8px",cursor:"pointer",marginTop:"20px"},children:"Reintentar"})]}):this.props.children}}const Va=aa.createRoot(Dt);Va.render(e.jsx(ge.StrictMode,{children:e.jsx(Ga,{children:Ha?e.jsx(sa,{}):e.jsx(Wa,{})})}));
