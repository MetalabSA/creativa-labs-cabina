import{c as M,r as g,s as y,j as e,m as S,i as Pe,k as de,P as ot,S as dt,M as Ie,A as ce,T as _e,l as xt,b as pt}from"./DashboardApp-B7b0T5mo.js";import{U as ne}from"./users-CvC8aklw.js";import{Z as R,D as ve,C as mt}from"./zap-BIqtXcy1.js";import{T as Ne,P as Ae,a as oe,E as Re,b as we,J as ut,U as ht,C as ye}from"./jszip.min-CZPKx8to.js";import{A as Me,S as De}from"./search-06e4BXTb.js";import{P as bt,M as gt,X as Ce,a as H,I as ie}from"./constants-CVhp42Js.js";import{S as ft,H as jt}from"./shopping-bag-CdnIFAkv.js";import{A as D}from"./AlquimiaModal-BK6ERbTg.js";/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],qe=M("arrow-down-right",vt);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],wt=M("globe",Nt);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],ke=M("info",yt);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],_t=M("layers",kt);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],xe=M("shopping-cart",Ct);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],Oe=M("wallet",St),zt=({profile:a,showToast:o})=>{const[s,l]=g.useState(!1),[i,p]=g.useState(null),[x,h]=g.useState([]),[f,t]=g.useState([]),[c,j]=g.useState([]),[r,n]=g.useState([]),[N,b]=g.useState([]),w=g.useCallback(async()=>{if(a)try{l(!0);let m=a.partner_id,d=!1;if(!m){const{data:v}=await y.from("partners").select("id").or(`user_id.eq.${a.id},contact_email.eq.${a.email}`).single();v?m=v.id:d=!0}if(d){p({id:a.id,name:a.full_name||a.email.split("@")[0],credits_total:a.credits||0,credits_used:a.total_generations||0,is_virtual:!0,config:{primary_color:"#135bec",logo_url:null}});const[v,u]=await Promise.all([y.from("events").select("*").eq("partner_id",a.id).order("created_at",{ascending:!1}),y.from("wallet_transactions").select("*").eq("partner_id",a.id).order("created_at",{ascending:!1})]);h(v.data||[]),t(u.data||[])}else{const[v,u,G]=await Promise.all([y.from("partners").select("*").eq("id",m).single(),y.from("events").select("*").eq("partner_id",m).order("created_at",{ascending:!1}),y.from("wallet_transactions").select("*").eq("partner_id",m).order("created_at",{ascending:!1})]);if(v.error)throw v.error;if(p(v.data),t(G.data||[]),u.data&&u.data.length>0){const pe=u.data.map(me=>me.id),Z=new Date;Z.setDate(Z.getDate()-7);const{data:P}=await y.from("generations").select("id, created_at, event_id, image_url").in("event_id",pe).gte("created_at",Z.toISOString()).order("created_at",{ascending:!1});n(P||[]),b((P==null?void 0:P.slice(0,10))||[])}h(u.data||[]);const{data:X}=await y.from("clients").select("*").eq("partner_id",m).order("name");j(X||[])}}catch(m){console.error("Error fetching partner data:",m)}finally{l(!1)}},[a]);g.useEffect(()=>{w()},[w]);const k=g.useCallback(m=>{const d=c.find(u=>u.id===m||u.email===m);if(!d)return 0;const v=x.filter(u=>u.client_id===d.id||u.client_email===d.email).reduce((u,G)=>u+(G.credits_allocated||0),0);return d.credits_total-v},[c,x]);return{loading:s,partner:i,events:x,transactions:f,clients:c,generationsData:r,recentGlobalPhotos:N,fetchPartnerData:w,getClientBalance:k,handleCreateEvent:async m=>{if(!i)return;const d=c.find(u=>u.email===m.client_email),v=Number(m.credits);if(d){const u=k(d.id);if(v>u)return o(`CrÃ©ditos insuficientes en la cuenta del cliente (Disponibles: ${u}).`,"error"),!1}else if(v>i.credits_total-i.credits_used)return o("CrÃ©ditos insuficientes en tu balance mayorista.","error"),!1;try{l(!0);const{error:u}=await y.from("events").insert([{partner_id:i.id,client_id:(d==null?void 0:d.id)||null,event_name:m.name,client_email:m.client_email,event_slug:m.slug||m.name.toLowerCase().replace(/\s+/g,"-"),credits_allocated:v,credits_used:0,start_date:new Date(m.start_date).toISOString(),end_date:new Date(m.end_date).toISOString(),is_active:!0,selected_styles:m.selected_styles}]);if(u)throw u;return d||(i.is_virtual?await y.from("profiles").update({credits:Math.max(0,i.credits_total-v)}).eq("id",a.id):await y.from("partners").update({credits_used:(i.credits_used||0)+v}).eq("id",i.id)),o("Evento creado con Ã©xito"),w(),!0}catch(u){return o("Error al crear el evento: "+u.message,"error"),!1}finally{l(!1)}},handleUpdateEvent:async(m,d)=>{try{l(!0);const{error:v}=await y.from("events").update({event_name:d.event_name,event_slug:d.event_slug,start_date:new Date(d.start_date).toISOString(),end_date:new Date(d.end_date).toISOString(),is_active:d.is_active,selected_styles:d.selected_styles}).eq("id",m);if(v)throw v;return o("Evento actualizado"),w(),!0}catch(v){return o("Error al actualizar: "+v.message,"error"),!1}finally{l(!1)}},handleDeleteEvent:async m=>{try{const{error:d}=await y.from("events").delete().eq("id",m);if(d)throw d;return o("Evento eliminado"),w(),!0}catch(d){return o("Error al eliminar: "+d.message,"error"),!1}},handleCreateClient:async m=>{if(i)try{l(!0);const{error:d}=await y.from("clients").insert([{partner_id:i.id,name:m.name,email:m.email,contact_person:m.contact_person,phone:m.phone,contracted_styles:m.contracted_styles||[],invitation_sent_at:new Date().toISOString()}]);if(d)throw d;return o("Cliente creado con Ã©xito"),w(),!0}catch(d){return o("Error: "+d.message,"error"),!1}finally{l(!1)}},handleUpdateClient:async(m,d)=>{try{l(!0);const{error:v}=await y.from("clients").update({name:d.name,email:d.email,contact_person:d.contact_person,phone:d.phone,contracted_styles:d.contracted_styles}).eq("id",m);if(v)throw v;return o("Cliente actualizado"),w(),!0}catch(v){return o("Error: "+v.message,"error"),!1}finally{l(!1)}},handleClientTopUp:async(m,d,v)=>{if(i)try{l(!0);const{error:u}=await y.rpc("transfer_credits_to_client",{p_partner_id:i.id,p_client_id:m,p_amount:v});if(u)throw u;return o(`Â¡${v} crÃ©ditos asignados a ${d}!`),w(),!0}catch(u){return o("Error: "+u.message,"error"),!1}finally{l(!1)}},handleResendInvitation:async m=>{try{l(!0);const{error:d}=await y.from("clients").update({invitation_sent_at:new Date().toISOString()}).eq("id",m.id);if(d)throw d;return o(`InvitaciÃ³n re-enviada a ${m.email}`),w(),!0}catch(d){return o("Error: "+d.message,"error"),!1}finally{l(!1)}},handleTopUpEvent:async(m,d)=>{if(!i)return;const v=c.find(u=>u.id===m.client_id||u.email===m.client_email);if(v){const u=k(v.id);if(d>u)return o(`CrÃ©ditos insuficientes en la cuenta del cliente (Disponibles: ${u}).`,"error"),!1}else{const u=(i.credits_total||0)-(i.credits_used||0);if(d>u)return o("No tienes crÃ©ditos suficientes en tu balance mayorista.","error"),!1}try{l(!0);const{error:u}=await y.from("events").update({credits_allocated:(m.credits_allocated||0)+d}).eq("id",m.id);if(u)throw u;return v||(i.is_virtual?await y.from("profiles").update({credits:Math.max(0,i.credits_total-d)}).eq("id",a.id):await y.from("partners").update({credits_used:(i.credits_used||0)+d}).eq("id",i.id)),await y.from("wallet_transactions").insert({partner_id:i.id,amount:d,type:"usage",description:`Transferencia a evento: ${m.event_name}`+(v?` (Saldo Cliente: ${v.name})`:"")}),o(`Se han transferido ${d} crÃ©ditos.`),w(),!0}catch(u){return o("Error: "+u.message,"error"),!1}finally{l(!1)}},handlePurchase:async m=>{if(i)try{l(!0);const d=window.location.href,u=await(await fetch("https://elesttjfwfhvzdvldytn.supabase.co/functions/v1/mercadopago-payment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:i.id,credits:m.qty,price:m.price,pack_name:m.label,redirect_url:d})})).json();if(u.init_point)window.location.href=u.init_point;else throw new Error(u.message||"Error al iniciar pago")}catch(d){o(d.message,"error")}finally{l(!1)}}}},Lt=({partner:a,initialConfig:o,showToast:s})=>{const[l,i]=g.useState(()=>{const r=o||{primary_color:"#135bec",logo_url:"",radius:"12px",style_presets:["SuperhÃ©roes","John Wick","Urbano"]};return r.style_presets||(r.style_presets=["SuperhÃ©roes","John Wick","Urbano"]),r});g.useEffect(()=>{if(o){const r={...o};r.style_presets||(r.style_presets=["SuperhÃ©roes","John Wick","Urbano"]),i(r)}},[o]);const[p,x]=g.useState(!1),[h,f]=g.useState(!1),t=g.useCallback(r=>{i(n=>({...n,style_presets:n.style_presets.includes(r)?n.style_presets.filter(N=>N!==r):[...n.style_presets,r]}))},[]);return{brandingConfig:l,setBrandingConfig:i,isSaving:p,isUploading:h,toggleStylePreset:t,handleUpdateBranding:async()=>{if(a)try{x(!0);const{error:r}=await y.from("partners").update({config:l}).eq("id",a.id);if(r)throw r;return s("Â¡ConfiguraciÃ³n sincronizada con Ã©xito! âœ¨"),!0}catch(r){return console.error("Error updating branding:",r),s("Error al guardar: "+r.message,"error"),!1}finally{x(!1)}},handleLogoUpload:async r=>{if(!r.target.files||r.target.files.length===0||!a)return;const n=r.target.files[0],N=n.name.split(".").pop(),b=`${a.id}-${Date.now()}.${N}`;try{f(!0);const{error:w}=await y.storage.from("logos").upload(b,n);if(w){const{error:k}=await y.storage.from("public").upload(`logos/${b}`,n);if(k)throw w;const{data:C}=y.storage.from("public").getPublicUrl(`logos/${b}`);i(E=>({...E,logo_url:C.publicUrl}))}else{const{data:k}=y.storage.from("logos").getPublicUrl(b);i(C=>({...C,logo_url:k.publicUrl}))}s("Logo subido con Ã©xito")}catch(w){s("Error al subir logo: "+w.message,"error")}finally{f(!1)}}}},Et=({showToast:a})=>{const[o,s]=g.useState([]),[l,i]=g.useState([]),[p,x]=g.useState(!1),[h,f]=g.useState(!1),t=g.useCallback(async r=>{try{x(!0);const{data:n,error:N}=await y.from("generations").select("*, profiles(email)").eq("event_id",r).order("created_at",{ascending:!1});if(N)throw N;s(n||[])}catch(n){console.error("Error fetching photos:",n),a("No se pudieron cargar las fotos","error")}finally{x(!1)}},[a]);return{eventPhotos:o,setEventPhotos:s,loading:p,moderationLoading:h,selectedPhotos:l,setSelectedPhotos:i,fetchEventPhotos:t,handleDeletePhoto:async r=>{if(!window.confirm("Â¿EstÃ¡s seguro de que deseas eliminar esta foto de la galerÃ­a?"))return!1;try{const{error:n}=await y.from("generations").delete().eq("id",r);if(n)throw n;return s(N=>N.filter(b=>b.id!==r)),i(N=>N.filter(b=>b!==r)),a("Foto eliminada correctamente"),!0}catch{return a("Error al eliminar la foto","error"),!1}},handleBulkDelete:async()=>{if(l.length!==0&&window.confirm(`ðŸš¨ ACCIÃ“N MASIVA: Â¿EstÃ¡s seguro de eliminar ${l.length} fotos definitivamente?`))try{f(!0);const{error:r}=await y.from("generations").delete().in("id",l);if(r)throw r;a(`${l.length} fotos eliminadas`),s(n=>n.filter(N=>!l.includes(N.id))),i([])}catch(r){a(r.message,"error")}finally{f(!1)}}}},Ut=({partnerName:a,view:o,setView:s})=>{const l=(i,p,x)=>{const h=o===i;return e.jsxs("button",{onClick:()=>s(i),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-all text-sm font-bold border ${h?"bg-[#135bec]/10 text-[#135bec] border-[#135bec]/30 shadow-[0_0_15px_rgba(19,91,236,0.1)]":"text-slate-400 border-transparent hover:text-white hover:bg-white/5"}`,children:[e.jsx(x,{className:"size-4"}),p]},i)};return e.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-6 pb-6 border-b border-white/5",children:[e.jsxs(S.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},children:[e.jsxs("h1",{className:"text-3xl font-black tracking-tight text-white mb-1 flex items-center gap-3",children:[e.jsx("div",{className:"size-10 rounded-xl bg-gradient-to-br from-[#135bec] to-[#0a1f4d] flex items-center justify-center shadow-lg shadow-[#135bec]/20",children:e.jsx(Pe,{className:"text-white size-6"})}),"Panel de Partner ",e.jsxs("span",{className:"text-[#135bec] opacity-50 text-xl font-medium",children:["/ ",a]})]}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Sistema de gestiÃ³n de eventos y marca blanca corporativa."})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-slate-900/50 p-1 rounded-xl border border-white/5",children:[l("overview","Vista General",Pe),l("clients","Clientes",ne),l("events","Mis Eventos",de),l("wallet","Billetera",Oe),l("branding","Marca Blanca",ot)]})]})},$t=({partner:a,events:o,generationsData:s,setView:l})=>{const i=((a==null?void 0:a.credits_total)||0)-((a==null?void 0:a.credits_used)||0),p=i>0&&i<((a==null?void 0:a.credits_total)||0)*.2,x=i>0&&i<((a==null?void 0:a.credits_total)||0)*.1;return e.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-8",children:[e.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"glass-card rounded-[32px] p-8 border border-white/5 bg-slate-900/40 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-10 group-hover:opacity-20 transition-opacity",children:e.jsx(Oe,{className:"size-20 text-[#135bec]"})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[3px] mb-4",children:"Balance Mayorista"}),e.jsxs("div",{className:"flex items-baseline gap-2 mb-2",children:[e.jsx("h3",{className:"text-4xl font-black text-white tracking-tighter tabular-nums",children:i.toLocaleString()}),e.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:"CrÃ©ditos"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`size-2 rounded-full ${x?"bg-rose-500 animate-pulse":p?"bg-amber-500":"bg-emerald-500"}`}),e.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:x?"Balance CrÃ­tico":p?"Balance Bajo":"Estado Ã“ptimo"})]})]})]}),e.jsxs("div",{className:"glass-card rounded-[32px] p-8 border border-white/5 bg-slate-900/40 relative overflow-hidden group hover:border-[#135bec]/30 transition-all cursor-pointer",onClick:()=>l("events"),children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-10 group-hover:opacity-20 transition-opacity",children:e.jsx(de,{className:"size-20 text-white"})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[3px] mb-4",children:"Total Proyectos"}),e.jsxs("div",{className:"flex items-baseline gap-2 mb-2",children:[e.jsx("h3",{className:"text-4xl font-black text-white tracking-tighter tabular-nums",children:o.length}),e.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:"Instancias"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"size-2 rounded-full bg-[#135bec]"}),e.jsxs("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:["Activos en ",new Set(o.map(h=>h.client_email)).size," Cuentas"]})]})]})]}),e.jsxs("div",{className:"glass-card rounded-[32px] p-8 border border-white/5 bg-slate-900/40 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-10 group-hover:opacity-20 transition-opacity",children:e.jsx(R,{className:"size-20 text-white"})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[3px] mb-4",children:"ProducciÃ³n IA"}),e.jsxs("div",{className:"flex items-baseline gap-2 mb-2",children:[e.jsx("h3",{className:"text-4xl font-black text-white tracking-tighter tabular-nums",children:(a==null?void 0:a.credits_used)||0}),e.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:"ImÃ¡genes"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-emerald-500",children:[e.jsx(Ne,{className:"size-3"}),e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"Crecimiento OrgÃ¡nico"})]})]})]})]}),e.jsxs("div",{className:"bg-slate-900/50 border border-white/5 rounded-[32px] p-8 glass-card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-black text-white uppercase tracking-widest",children:"Actividad de GeneraciÃ³n"}),e.jsx("p",{className:"text-[10px] text-slate-500 uppercase font-bold mt-1",children:"Fotos creadas por dÃ­a (Ãšltimos 7 dÃ­as)"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"size-2 rounded-full bg-[#135bec] animate-pulse"}),e.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Tiempo Real"})]})]}),e.jsx("div",{className:"h-48 flex items-end gap-2 px-2",children:Array.from({length:7}).map((h,f)=>{const t=new Date;t.setDate(t.getDate()-(6-f));const c=t.toISOString().split("T")[0],j=s.filter(N=>N.created_at.startsWith(c)).length,r=Math.max(...Array.from({length:7}).map((N,b)=>{const w=new Date;return w.setDate(w.getDate()-(6-b)),s.filter(k=>k.created_at.startsWith(w.toISOString().split("T")[0])).length}),1),n=j/r*100;return e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-3 group",children:[e.jsx("div",{className:"w-full relative h-[140px] flex items-end",children:e.jsx(S.div,{initial:{height:0},animate:{height:`${Math.max(n,5)}%`},className:`w-full rounded-t-xl transition-all duration-500 hover:brightness-125 ${j>0?"bg-gradient-to-t from-[#135bec] to-[#7f13ec]":"bg-white/5"}`})}),e.jsx("span",{className:"text-[8px] font-black text-slate-600 uppercase",children:t.toLocaleDateString("es-AR",{weekday:"short"})})]},f)})})]})]},"overview")},Pt=({clients:a,events:o,setShowCreateClientModal:s,setEditingClient:l,setShowClientTopUpModal:i,setSelectedClientId:p,setView:x,exportClientReport:h,onResendInvitation:f})=>e.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black text-white uppercase tracking-tighter",children:"Cartera de Clientes"}),e.jsx("p",{className:"text-slate-500 text-xs uppercase tracking-[2px] mt-1 font-bold",children:"Administra tus cuentas corporativas y saldos asignados"})]}),e.jsxs("button",{onClick:()=>s(!0),className:"px-6 py-2.5 bg-[#135bec] hover:bg-[#135bec]/90 text-white text-[10px] font-black rounded-xl shadow-lg shadow-[#135bec]/20 transition-all uppercase tracking-[2px] flex items-center gap-2",children:[e.jsx(Ae,{className:"size-4"}),"Nuevo Cliente"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[a.map(t=>{const c=o.filter(r=>r.client_id===t.id||r.client_email===t.email),j=c.reduce((r,n)=>r+n.credits_used,0);return e.jsxs(S.div,{whileHover:{y:-5},className:`glass-card rounded-[32px] p-8 border bg-slate-900/40 relative overflow-hidden group transition-all duration-300 ${t.credits_total===0?"border-l-4 border-l-amber-500 border-white/5 shadow-[0_0_20px_rgba(245,158,11,0.05)]":"border-l-4 border-l-[#135bec] border-white/5"}`,children:[t.credits_total===0&&!t.invitation_sent_at&&e.jsx("div",{className:"absolute top-0 right-0 pt-8 pr-8",children:e.jsxs("div",{className:"px-3 py-1 bg-amber-500/10 border border-amber-500/20 rounded-full flex items-center gap-1.5",children:[e.jsx(dt,{className:"size-3 text-amber-500"}),e.jsx("span",{className:"text-[8px] font-black text-amber-500 uppercase tracking-[2px]",children:"Nuevo Lead"})]})}),t.invitation_sent_at&&e.jsxs("div",{className:"absolute top-0 right-0 pt-8 pr-8 flex flex-col items-end gap-2",children:[e.jsxs("div",{className:"px-3 py-1 bg-[#135bec]/10 border border-[#135bec]/20 rounded-full flex items-center gap-1.5",children:[e.jsx(Ie,{className:"size-3 text-[#135bec]"}),e.jsx("span",{className:"text-[8px] font-black text-[#135bec] uppercase tracking-[2px]",children:"InvitaciÃ³n Enviada"})]}),e.jsx("button",{onClick:()=>f(t),className:"text-[7px] font-black text-slate-500 hover:text-white uppercase tracking-widest transition-colors",children:"Re-enviar"})]}),e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("div",{className:"p-4 bg-[#135bec]/10 rounded-2xl border border-[#135bec]/20",children:e.jsx(ne,{className:"size-6 text-[#135bec]"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>l(t),className:"p-2 bg-white/5 hover:bg-white/10 rounded-lg border border-white/10 text-slate-400 hover:text-white transition-all",title:"Editar Cliente",children:e.jsx(oe,{className:"size-3"})}),e.jsxs("div",{className:"px-3 py-1 bg-white/5 rounded-full border border-white/10 text-[9px] font-black text-slate-400 uppercase tracking-widest",children:[c.length," Proyectos"]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-black text-white uppercase tracking-tight truncate",children:t.name}),e.jsxs("p",{className:"text-xs text-slate-500 flex items-center gap-2 mt-1 lowercase",children:[e.jsx(Ie,{className:"size-3"}),t.email||"Sin email"]})]}),e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between text-[10px] uppercase font-bold",children:[e.jsx("span",{className:"text-slate-500 tracking-widest",children:"Saldo Asignado"}),e.jsxs("span",{className:"text-white tracking-widest",children:[t.credits_total.toLocaleString()," Cds"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-[10px] uppercase font-bold text-slate-600",children:[e.jsx("span",{children:"Consumido"}),e.jsxs("span",{children:[j.toLocaleString()," (",t.credits_total>0?Math.round(j/t.credits_total*100):0,"%)"]})]}),e.jsx("div",{className:"w-full h-1.5 bg-white/5 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-[#135bec] to-[#00d2ff] rounded-full",style:{width:`${Math.min(100,j/t.credits_total*100||0)}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("button",{onClick:()=>{p(t.email||t.id),x("events")},className:"py-3 bg-[#135bec]/10 hover:bg-[#135bec]/20 text-[#135bec] border border-[#135bec]/30 rounded-xl text-[10px] font-black uppercase tracking-[2px] transition-all flex items-center justify-center gap-2",children:"Proyectos"}),e.jsx("button",{onClick:()=>i(t),className:"py-3 bg-emerald-500/10 hover:bg-emerald-500/20 text-emerald-500 border border-emerald-500/30 rounded-xl text-[10px] font-black uppercase tracking-[2px] transition-all flex items-center justify-center gap-2",children:"Asignar $"}),e.jsxs("button",{onClick:()=>h(t),className:"col-span-2 py-3 bg-white/5 hover:bg-white/10 text-slate-300 border border-white/10 rounded-xl text-[10px] font-black uppercase tracking-[2px] transition-all flex items-center justify-center gap-2",children:[e.jsx(ve,{className:"size-3"}),"Exportar Reporte"]})]})]},t.id)}),a.length===0&&e.jsxs("div",{className:"col-span-full py-20 text-center glass-card rounded-[40px] border-dashed border-white/10",children:[e.jsx(ne,{className:"size-12 text-slate-700 mx-auto mb-4 opacity-20"}),e.jsx("p",{className:"text-slate-500 font-black uppercase tracking-widest",children:"No hay clientes registrados"}),e.jsx("button",{onClick:()=>s(!0),className:"text-[#135bec] text-xs font-bold mt-4 hover:underline",children:"Crear primer cliente corporativo"})]})]})]},"clients"),It=({events:a,filteredEvents:o,searchTerm:s,setSearchTerm:l,selectedClientId:i,setSelectedClientId:p,setShowCreateEventModal:x,setEventToTopUp:h,setEventToModerate:f,setView:t,setEditingEvent:c,setEventToDelete:j,onProxyClient:r})=>e.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between px-2",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black text-white uppercase tracking-tighter",children:i?`Proyectos: ${i.split("@")[0]}`:"Mis Eventos"}),i?e.jsxs("button",{onClick:()=>p(null),className:"flex items-center gap-2 text-[#135bec] text-[10px] font-black uppercase tracking-[2px] mt-1 hover:text-[#135bec]/80 transition-colors group",children:[e.jsx(Me,{className:"size-3 group-hover:-translate-x-1 transition-transform"}),"Volver a todos los proyectos"]}):e.jsx("p",{className:"text-slate-500 text-xs mt-1",children:"Gestiona las instancias activas y el consumo de crÃ©ditos."})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx(De,{className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-slate-500 group-focus-within:text-[#135bec] transition-colors"}),e.jsx("input",{type:"text",placeholder:"Buscar por nombre o slug...",value:s,onChange:n=>l(n.target.value),className:"bg-slate-900 border border-slate-800 rounded-xl pl-9 pr-4 py-2.5 text-xs text-white focus:ring-1 focus:ring-[#135bec] focus:border-[#135bec] w-64 transition-all outline-none"})]}),e.jsxs("button",{onClick:()=>x(!0),className:"px-6 py-2.5 bg-[#135bec] hover:bg-[#135bec]/90 text-white text-[10px] font-black rounded-xl shadow-lg shadow-[#135bec]/20 transition-all uppercase tracking-[2px] flex items-center gap-2",children:[e.jsx(Ae,{className:"size-4"}),"Nuevo Evento"]})]})]}),e.jsx("div",{className:"glass-card rounded-2xl overflow-hidden border border-white/5 bg-slate-900/50 backdrop-blur-xl",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{className:"bg-white/[0.03] border-b border-white/5",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"IdentificaciÃ³n"}),e.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Consumo de CrÃ©ditos"}),e.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Estado"}),e.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-slate-500 uppercase tracking-widest text-right",children:"Panel de Control"})]})}),e.jsxs("tbody",{className:"divide-y divide-white/5",children:[o.map(n=>{const N=n.credits_allocated?Math.min(100,Math.round(n.credits_used/n.credits_allocated*100)):0;return e.jsxs("tr",{className:"hover:bg-white/[0.02] transition-colors group",children:[e.jsx("td",{className:"px-6 py-5",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"size-12 rounded-xl bg-gradient-to-br from-[#135bec]/20 to-[#0a1f4d]/20 border border-[#135bec]/20 flex items-center justify-center text-[#135bec] font-black text-sm group-hover:scale-110 transition-transform",children:((n==null?void 0:n.event_name)||"E").substring(0,2).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-white group-hover:text-[#135bec] transition-colors",children:n.event_name}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[e.jsx(wt,{className:"size-3 text-slate-600"}),e.jsxs("p",{className:"text-[10px] text-slate-500 font-mono",children:["/",n.event_slug]})]})]})]})}),e.jsx("td",{className:"px-6 py-5",children:e.jsxs("div",{className:"w-48",children:[e.jsxs("div",{className:"flex justify-between text-[10px] mb-1.5 font-bold",children:[e.jsxs("span",{className:"text-slate-400",children:[n.credits_used.toLocaleString()," / ",n.credits_allocated.toLocaleString()]}),e.jsxs("span",{className:`${N>90?"text-rose-500":"text-emerald-500"}`,children:[N,"%"]})]}),e.jsx("div",{className:"w-full h-1.5 bg-slate-800 rounded-full overflow-hidden p-[1px]",children:e.jsx(S.div,{initial:{width:0},animate:{width:`${N}%`},transition:{duration:1,ease:"easeOut"},className:`h-full ${N>90?"bg-rose-500":"bg-[#135bec]"} rounded-full shadow-[0_0_8px_rgba(19,91,236,0.5)]`})})]})}),e.jsx("td",{className:"px-6 py-5",children:e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-[10px] font-black uppercase tracking-wider ${n.is_active?"bg-emerald-500/10 text-emerald-500 border border-emerald-500/20":"bg-rose-500/10 text-rose-500 border border-rose-500/20"}`,children:[e.jsx("span",{className:`size-2 rounded-full ${n.is_active?"bg-emerald-500 animate-pulse":"bg-rose-500"}`}),n.is_active?"En LÃ­nea":"Pausado"]})}),e.jsx("td",{className:"px-6 py-5 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-3",children:[e.jsx("button",{onClick:()=>h(n),className:"p-2.5 bg-emerald-500/10 hover:bg-emerald-500 border border-emerald-500/20 rounded-xl text-emerald-500 hover:text-white transition-all group/action",title:"Cargar CrÃ©ditos",children:e.jsx(xe,{className:"w-4 h-4 group-hover/action:scale-110 transition-transform"})}),e.jsx("button",{onClick:()=>{f(n),t("moderation")},className:"p-2.5 bg-indigo-500/10 hover:bg-indigo-500 border border-indigo-500/20 rounded-xl text-indigo-500 hover:text-white transition-all group/action",title:"ModeraciÃ³n de GalerÃ­a",children:e.jsx(bt,{className:"w-4 h-4 group-hover/action:scale-110 transition-transform"})}),e.jsx("button",{onClick:()=>c(n),className:"p-2.5 bg-slate-800/50 hover:bg-slate-800 border border-white/5 rounded-xl text-slate-400 hover:text-white transition-all group/action",title:"Editar Evento",children:e.jsx(oe,{className:"w-4 h-4 group-hover/action:rotate-12 transition-transform"})}),e.jsx("button",{onClick:()=>window.open(`https://app.metalabia.com/?event=${n.event_slug}`,"_blank"),className:"p-2.5 bg-slate-800/50 hover:bg-slate-800 border border-white/5 rounded-xl text-slate-400 hover:text-white transition-all group/action",title:"Ver Kiosco (PÃºblico)",children:e.jsx(Re,{className:"w-4 h-4 group-hover/action:scale-110 transition-transform"})}),r&&n.client_email&&e.jsx("button",{onClick:()=>r(n.client_email),className:"p-2.5 bg-[#135bec]/10 hover:bg-[#135bec] border border-[#135bec]/20 rounded-xl text-[#135bec] hover:text-white transition-all group/action",title:"Gestionar Branding como Cliente",children:e.jsx(gt,{className:"w-4 h-4 group-hover/action:scale-110 transition-transform"})}),e.jsx("button",{onClick:()=>j({id:n.id,name:n.event_name}),className:"p-2.5 bg-rose-500/10 hover:bg-rose-500 border border-rose-500/20 rounded-xl text-rose-500 hover:text-white transition-all group/action",title:"Eliminar Instancia",children:e.jsx(we,{className:"w-4 h-4 group-hover/action:scale-110 transition-transform"})})]})})]},n.id)}),o.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"p-20 text-center",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"size-16 rounded-2xl bg-slate-800/50 flex items-center justify-center mb-4",children:e.jsx(de,{className:"size-8 text-slate-600 opacity-20"})}),e.jsx("p",{className:"text-slate-400 text-sm font-bold uppercase tracking-widest",children:"No hay eventos para mostrar"}),e.jsx("p",{className:"text-slate-600 text-[10px] mt-1",children:"Crea tu primera instancia para comenzar."})]})})})]})]})})]},"events"),At=({eventToModerate:a,setView:o,filteredPhotos:s,eventPhotos:l,moderationSearchTerm:i,setModerationSearchTerm:p,moderationDateFilter:x,setModerationDateFilter:h,showToast:f,handleDeletePhoto:t,loading:c,selectedPhotos:j,setSelectedPhotos:r,handleBulkDelete:n})=>{const N=async(b,w)=>{if(b.length===0)return f("No hay fotos para descargar","error");try{f("Preparando descarga ZIP...","info");const k=new ut,C=k.folder(w);if(!C)throw new Error("No se pudo crear la carpeta en el ZIP");const E=b.map(async(O,K)=>{var $;try{const m=await(await fetch(O.image_url)).blob(),d=(($=O.image_url.split(".").pop())==null?void 0:$.split("?")[0])||"jpg";C.file(`photo-${K+1}.${d}`,m)}catch(B){console.error("Error al descargar foto para el ZIP:",B)}});await Promise.all(E);const J=await k.generateAsync({type:"blob"}),q=window.URL.createObjectURL(J),A=document.createElement("a");A.href=q,A.download=`${w}.zip`,A.click(),window.URL.revokeObjectURL(q),f("Archivo ZIP descargado con Ã©xito")}catch(k){console.error("Error al generar ZIP:",k),f("Error al generar el archivo ZIP","error")}};return e.jsxs(S.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.05},className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>o("events"),className:"p-2.5 bg-slate-800 hover:bg-slate-700 rounded-xl text-white transition-all border border-white/5",children:e.jsx(qe,{className:"w-5 h-5 rotate-180"})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-black text-white uppercase tracking-tighter",children:["GalerÃ­a: ",a==null?void 0:a.event_name]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:`size-2 rounded-full ${s.length>0?"bg-emerald-500 animate-pulse":"bg-slate-700"}`}),e.jsxs("p",{className:"text-slate-500 text-[10px] font-black uppercase tracking-widest",children:[s.length," de ",l.length," Fotos"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 bg-slate-900/80 p-1.5 rounded-2xl border border-white/5 shadow-inner",children:[e.jsxs("div",{className:"relative",children:[e.jsx(De,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 size-3.5 text-slate-600"}),e.jsx("input",{type:"text",placeholder:"Buscar email o ID...",className:"bg-slate-950/50 border border-white/5 rounded-xl py-2.5 pl-10 pr-4 text-[10px] text-white focus:border-[#135bec] outline-none transition-all w-52 placeholder:text-slate-700 font-bold uppercase tracking-widest",value:i,onChange:b=>p(b.target.value)})]}),e.jsxs("div",{className:"relative",children:[e.jsx(de,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 size-3.5 text-slate-600"}),e.jsx("input",{type:"date",className:"bg-slate-950/50 border border-white/5 rounded-xl py-2.5 pl-10 pr-4 text-[10px] text-white focus:border-[#135bec] outline-none transition-all w-40 font-bold",value:x,onChange:b=>h(b.target.value)})]}),(i||x)&&e.jsx("button",{onClick:()=>{p(""),h("")},className:"p-2.5 hover:bg-white/5 text-slate-500 hover:text-white transition-all rounded-xl",children:e.jsx(Ce,{className:"size-4"})})]}),e.jsx("div",{className:"w-px h-8 bg-white/5 mx-1"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>{const b=s.map(E=>E.image_url).join(`
`);if(b.length===0)return f("No hay links para exportar","error");const w=new Blob([b],{type:"text/plain"}),k=window.URL.createObjectURL(w),C=document.createElement("a");C.href=k,C.download=`links-${a==null?void 0:a.event_slug}-filtrados.txt`,C.click(),window.URL.revokeObjectURL(k),f("Links filtrados exportados")},className:"px-6 py-2.5 bg-slate-800 hover:bg-slate-700 text-white text-[10px] font-black rounded-xl border border-white/5 transition-all uppercase tracking-[2px] flex items-center gap-2",children:[e.jsx(ve,{className:"size-4"}),"Exportar Links"]}),e.jsxs("button",{onClick:()=>N(s,`galeria-${a==null?void 0:a.event_slug}`),className:"px-6 py-2.5 bg-[#135bec] hover:bg-[#135bec]/90 text-white text-[10px] font-black rounded-xl shadow-lg border border-white/10 transition-all uppercase tracking-[2px] flex items-center gap-2",children:[e.jsx(_t,{className:"size-4"}),"Descargar Todo (ZIP)"]})]})]})]}),e.jsx(ce,{children:j.length>0&&e.jsxs(S.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},className:"fixed bottom-10 left-1/2 -translate-x-1/2 z-[60] bg-slate-900/90 backdrop-blur-2xl border border-[#135bec]/30 rounded-2xl px-8 py-4 flex items-center gap-8 shadow-[0_20px_50px_rgba(0,0,0,0.5)]",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] font-black text-[#135bec] uppercase tracking-widest",children:"SelecciÃ³n Activa"}),e.jsxs("span",{className:"text-xl font-black text-white",children:[j.length," ",e.jsx("span",{className:"text-xs text-slate-500 font-medium",children:"Fotos"})]})]}),e.jsx("div",{className:"w-px h-10 bg-white/10"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>r([]),className:"px-4 py-2 text-[10px] font-black text-slate-400 uppercase tracking-widest hover:text-white transition-colors",children:"Cancelar"}),e.jsxs("button",{onClick:()=>{const b=l.filter(w=>j.includes(w.id));N(b,"seleccion-fotos")},className:"px-6 py-2.5 bg-white text-black text-[10px] font-black rounded-xl hover:bg-slate-200 transition-all uppercase tracking-[2px] flex items-center gap-2",children:[e.jsx(ve,{className:"size-4"}),"Descargar ZIP"]}),e.jsxs("button",{onClick:n,className:"px-6 py-2.5 bg-rose-500 text-white text-[10px] font-black rounded-xl hover:bg-rose-600 transition-all uppercase tracking-[2px] flex items-center gap-2",children:[e.jsx(we,{className:"size-4"}),"Eliminar Seleccionadas"]})]})]})}),c?e.jsxs("div",{className:"h-96 flex flex-col items-center justify-center gap-4",children:[e.jsx("div",{className:"size-12 border-4 border-[#135bec]/30 border-t-[#135bec] rounded-full animate-spin"}),e.jsx("p",{className:"text-slate-500 text-[10px] font-black uppercase tracking-widest",children:"Sincronizando GalerÃ­a..."})]}):e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:[s.map(b=>{var w;return e.jsxs("div",{onClick:()=>{j.includes(b.id)?r(k=>k.filter(C=>C!==b.id)):r(k=>[...k,b.id])},className:`group relative aspect-[3/4] rounded-2xl overflow-hidden border transition-all duration-300 cursor-pointer shadow-xl ${j.includes(b.id)?"border-[#135bec] scale-[0.98] ring-4 ring-[#135bec]/20":"border-white/5 bg-slate-900"}`,children:[e.jsx("div",{className:`absolute top-4 left-4 z-20 size-5 rounded-md border flex items-center justify-center transition-all ${j.includes(b.id)?"bg-[#135bec] border-[#135bec] text-white":"bg-black/20 border-white/20 text-transparent opacity-0 group-hover:opacity-100"}`,children:e.jsx("span",{className:"text-[14px] font-black",children:"âœ“"})}),e.jsx("img",{src:b.image_url,alt:"Generation",className:`w-full h-full object-cover transition-transform duration-700 group-hover:scale-110 ${j.includes(b.id)?"opacity-50":""}`}),e.jsxs("div",{className:"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent p-4 translate-y-2 group-hover:translate-y-0 transition-transform",children:[e.jsx("p",{className:"text-[8px] font-mono text-white/50 mb-0.5 truncate",children:b.id}),e.jsx("p",{className:"text-[10px] font-black text-white mb-3 truncate uppercase tracking-widest",children:((w=b.profiles)==null?void 0:w.email)||"AnÃ³nimo"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:k=>{k.stopPropagation(),t(b.id)},className:"p-2.5 bg-rose-500/20 hover:bg-rose-500 border border-rose-500/30 rounded-xl text-rose-500 hover:text-white transition-all group/del",title:"Eliminar de la galerÃ­a",children:e.jsx(we,{className:"size-4 group-hover/del:scale-110 transition-transform"})}),e.jsxs("button",{onClick:k=>{k.stopPropagation(),window.open(b.image_url,"_blank")},className:"flex-1 py-2 bg-white/10 backdrop-blur-md border border-white/20 rounded-xl text-white text-[9px] font-black uppercase tracking-widest hover:bg-white/20 transition-all flex items-center justify-center gap-2",children:[e.jsx(Re,{className:"size-3"}),"Ver Original"]})]})]})]},b.id)}),s.length===0&&e.jsxs("div",{className:"col-span-full h-64 flex flex-col items-center justify-center bg-slate-900/50 rounded-[32px] border border-dashed border-white/5",children:[e.jsx(_e,{className:"size-8 text-slate-800 mb-4"}),e.jsx("p",{className:"text-slate-500 text-[10px] font-black uppercase tracking-widest",children:"No hay fotos en este evento"})]})]})]},"moderation")},Rt=({brandingConfig:a,setBrandingConfig:o,handleLogoUpload:s,handleUpdateBranding:l,isSavingBranding:i,toggleStylePreset:p,recentGlobalPhotos:x,events:h,setView:f})=>e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-12 gap-8",children:[e.jsx("div",{className:"xl:col-span-8 space-y-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("section",{className:"glass-card rounded-[32px] p-8 border border-white/5 bg-slate-900/50 backdrop-blur-xl shadow-2xl h-fit",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx("div",{className:"p-3 bg-indigo-500/10 border border-indigo-500/20 rounded-xl text-indigo-500",children:e.jsx(xt,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-black text-white uppercase tracking-tighter",children:"Identidad Visual"}),e.jsx("p",{className:"text-slate-500 text-xs",children:"Personaliza tu panel de control."})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[2px] block mb-4",children:"Logo Corporativo"}),e.jsxs("div",{className:"w-full border-2 border-dashed border-slate-800 rounded-2xl p-6 flex flex-col items-center justify-center bg-slate-950/50 hover:bg-slate-950 transition-all cursor-pointer group hover:border-[#135bec]/50 shadow-inner",onClick:()=>{var t;return(t=document.getElementById("brandingLogoInput"))==null?void 0:t.click()},children:[e.jsx("input",{type:"file",id:"brandingLogoInput",className:"hidden",accept:"image/*",onChange:s}),a.logo_url?e.jsxs("div",{className:"relative group/logo",children:[e.jsx("img",{src:a.logo_url,className:"h-12 object-contain mb-2 group-hover:opacity-50 transition-opacity",alt:"Logo"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover/logo:opacity-100 transition-opacity",children:e.jsx(oe,{className:"size-5 text-white"})})]}):e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(ht,{className:"w-8 h-8 text-slate-700 group-hover:text-[#135bec] mb-3 transition-colors"}),e.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest text-center",children:"Subir Identidad"})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[2px] block mb-4",children:"Color de Acento"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"size-12 rounded-xl border-2 border-white/10 shadow-2xl cursor-pointer hover:scale-105 transition-all",style:{backgroundColor:a.primary_color},onClick:()=>{var t;return(t=document.getElementById("brandingColorPicker"))==null?void 0:t.click()}}),e.jsx("input",{id:"brandingColorPicker",type:"color",className:"sr-only",value:a.primary_color,onChange:t=>o({...a,primary_color:t.target.value})}),e.jsxs("div",{className:"flex-1 bg-slate-950 border border-slate-800 rounded-xl py-3 px-4 text-xs text-white font-mono flex items-center justify-between",children:[e.jsx("span",{children:a.primary_color.toUpperCase()}),e.jsx(oe,{className:"size-3 text-slate-600"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[2px] block mb-4",children:"Radio de Bordes"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{className:"w-full bg-slate-950 border border-slate-800 rounded-xl py-3 px-4 text-xs text-white focus:ring-1 focus:ring-[#135bec] outline-none appearance-none cursor-pointer pr-10",value:a.radius,onChange:t=>o({...a,radius:t.target.value}),children:[e.jsx("option",{value:"4px",children:"4px (Recto)"}),e.jsx("option",{value:"8px",children:"8px (Suave)"}),e.jsx("option",{value:"12px",children:"12px (Premium)"}),e.jsx("option",{value:"20px",children:"20px (Redondeado)"})]}),e.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none",children:e.jsx(qe,{className:"size-3 text-slate-600"})})]})]})]}),e.jsxs("button",{onClick:l,disabled:i,className:`w-full py-4 bg-white text-slate-900 text-[10px] font-black rounded-2xl transition-all shadow-xl hover:shadow-2xl active:scale-[0.98] uppercase tracking-[3px] flex items-center justify-center gap-2 group ${i?"opacity-50 cursor-not-allowed":""}`,children:[i?e.jsx("div",{className:"size-4 border-2 border-slate-900 border-t-transparent rounded-full animate-spin"}):e.jsx(ye,{className:"size-4 group-hover:scale-110 transition-transform"}),i?"Sincronizando...":"Sincronizar Panel"]})]})]}),e.jsxs("div",{className:"glass-card rounded-[32px] p-8 border border-white/5 bg-slate-900/50 backdrop-blur-xl shadow-2xl relative overflow-hidden h-fit",children:[e.jsx("div",{className:"flex items-center justify-between mb-8 relative z-10",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-[#135bec]/10 border border-[#135bec]/20 rounded-xl text-[#135bec]",children:e.jsx(R,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-black text-white uppercase tracking-tighter",children:"Estilos IA"}),e.jsx("p",{className:"text-slate-500 text-xs",children:"Packs activos para clientes."})]})]})}),e.jsx("div",{className:"grid grid-cols-2 gap-4 relative z-10",children:H.map(t=>{const c=ie.find(j=>j.subCategory===t)||ie[0];return e.jsxs("label",{className:"relative block cursor-pointer group",children:[e.jsx("input",{type:"checkbox",checked:a.style_presets.includes(t),onChange:()=>p(t),className:"peer sr-only"}),e.jsxs("div",{className:`aspect-square rounded-2xl overflow-hidden relative border-2 transition-all duration-300 ${a.style_presets.includes(t)?"border-[#135bec] scale-[1.02] shadow-xl shadow-[#135bec]/20":"border-white/5 opacity-40 hover:border-white/20 hover:opacity-80"}`,children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 to-transparent z-10"}),e.jsx("img",{alt:t,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700",src:c.url}),e.jsx("div",{className:"absolute bottom-2 left-3 z-20",children:e.jsx("p",{className:"text-[8px] font-black uppercase text-white tracking-[1px] leading-tight",children:t})}),a.style_presets.includes(t)&&e.jsx("div",{className:"absolute top-2 right-2 z-20",children:e.jsx("div",{className:"bg-[#135bec] rounded-full p-1 shadow-xl border border-white/20",children:e.jsx(ye,{className:"w-2.5 h-2.5 text-white"})})})]})]},t)})})]})]})}),e.jsxs("div",{className:"xl:col-span-4 sticky top-8",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("div",{className:"mb-6 flex items-center gap-3",children:[e.jsx("div",{className:"size-1.5 rounded-full bg-emerald-500 animate-pulse"}),e.jsx("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[4px]",children:"Live Preview (Kiosk)"})]}),e.jsxs("div",{className:"relative w-[280px] h-[580px] bg-slate-800 rounded-[50px] p-3 border-[6px] border-slate-700 shadow-2xl overflow-hidden shadow-black/60",children:[e.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-32 h-6 bg-slate-700 rounded-b-2xl z-50"}),e.jsxs("div",{className:"w-full h-full bg-[#071121] rounded-[40px] overflow-hidden flex flex-col relative",children:[e.jsx("div",{className:"absolute inset-0 opacity-20",style:{background:`radial-gradient(circle at 50% 50%, ${a.primary_color}33 0%, transparent 70%)`}}),e.jsxs("div",{className:"p-6 flex flex-col items-center justify-center pt-10",children:[a.logo_url?e.jsx("img",{src:a.logo_url,className:"h-10 object-contain mb-4",alt:"Mockup Logo"}):e.jsx("div",{className:"h-10 w-32 bg-white/5 rounded-xl border border-white/10 flex items-center justify-center text-[8px] text-slate-600 font-black uppercase tracking-[2px]",children:"Your Logo Here"}),e.jsx("div",{className:"w-12 h-0.5",style:{background:`linear-gradient(90deg, transparent, ${a.primary_color}, transparent)`}})]}),e.jsxs("div",{className:"px-6 py-2 text-center",children:[e.jsx("h3",{className:"text-[14px] font-black text-white uppercase tracking-tighter italic",children:"Descubre tu Identidad"}),e.jsx("p",{className:"text-[8px] text-slate-500 uppercase font-black tracking-widest mt-1 opacity-60",children:"Selecciona un estandar de estilo"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4 no-scrollbar",children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.style_presets.slice(0,4).map((t,c)=>{const j=ie.find(r=>r.subCategory===t)||ie[0];return e.jsxs("div",{className:"aspect-[3/4] overflow-hidden relative border shadow-lg",style:{borderRadius:a.radius,borderColor:c===0?a.primary_color:"rgba(255,255,255,0.05)"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent z-10"}),e.jsx("img",{src:j.url,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute bottom-2 left-2 z-20",children:e.jsx("p",{className:"text-[7px] font-black text-white uppercase",children:t})})]},c)}),a.style_presets.length<4&&Array.from({length:4-a.style_presets.length}).map((t,c)=>e.jsx("div",{className:"aspect-[3/4] bg-white/5 border border-dashed border-white/10 flex items-center justify-center text-slate-800",style:{borderRadius:a.radius},children:e.jsx("span",{className:"text-sm",children:"+"})},c))]})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"w-full py-3 text-center text-white text-[9px] font-black uppercase tracking-[2px] shadow-lg shadow-black/20",style:{backgroundColor:a.primary_color,borderRadius:a.radius},children:"Comenzar Experiencia"})})]})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 px-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"size-8 rounded-lg bg-orange-500/10 flex items-center justify-center text-orange-500",children:e.jsx(R,{className:"size-4"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-black text-white uppercase tracking-widest",children:"Global Live Feed"}),e.jsx("p",{className:"text-[9px] text-slate-500 font-bold uppercase tracking-[2px]",children:"Ãšltimas capturas en tus eventos"})]})]}),e.jsx("button",{onClick:()=>f("events"),className:"text-[9px] font-black text-[#135bec] uppercase tracking-widest hover:underline",children:"Ver todos los eventos"})]}),e.jsxs("div",{className:"relative group/feed",children:[e.jsx("div",{className:"flex gap-4 overflow-x-auto pb-6 pt-2 no-scrollbar scroll-smooth",children:x.length>0?x.map((t,c)=>{var j;return e.jsxs(S.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:c*.1},className:"min-w-[140px] md:min-w-[180px] aspect-[3/4] rounded-2xl overflow-hidden border border-white/5 bg-slate-900 shadow-xl relative group/item",children:[e.jsx("img",{src:t.image_url,alt:"Recent",className:"w-full h-full object-cover grayscale-[0.5] group-hover/item:grayscale-0 transition-all duration-500"}),e.jsxs("div",{className:"absolute inset-x-0 bottom-0 p-3 bg-gradient-to-t from-black/80 to-transparent",children:[e.jsx("p",{className:"text-[7px] font-black text-white/50 uppercase tracking-widest mb-0.5",children:((j=h.find(r=>r.id===t.event_id))==null?void 0:j.event_name)||"Evento"}),e.jsxs("p",{className:"text-[8px] font-bold text-white uppercase",children:["Hace ",Math.floor((Date.now()-new Date(t.created_at).getTime())/6e4),"m"]})]})]},t.id)}):e.jsxs("div",{className:"w-full h-40 rounded-[32px] border border-dashed border-white/10 flex flex-col items-center justify-center text-slate-600",children:[e.jsx(Ce,{className:"size-8 mb-2 opacity-20"}),e.jsx("p",{className:"text-[10px] font-black uppercase tracking-[2px]",children:"Esperando actividad..."})]})}),e.jsx("div",{className:"absolute inset-y-0 left-0 w-20 bg-gradient-to-r from-[#0a0c0b]/50 to-transparent pointer-events-none opacity-0 group-hover/feed:opacity-100 transition-opacity"}),e.jsx("div",{className:"absolute inset-y-0 right-0 w-20 bg-gradient-to-l from-[#0a0c0b]/50 to-transparent pointer-events-none opacity-0 group-hover/feed:opacity-100 transition-opacity"})]})]})]})]}),Mt=({availableCredits:a,partner:o,events:s,transactions:l,setShowTopUpModal:i})=>{var p;return e.jsxs(S.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.05},className:"space-y-8",children:[e.jsxs("section",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 glass-card rounded-3xl p-10 bg-gradient-to-br from-[#135bec] to-[#0a1f4d] border-none shadow-2xl shadow-[#135bec]/20 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-10 opacity-10",children:e.jsx(ft,{className:"size-64"})}),e.jsxs("div",{className:"relative z-10 flex flex-col h-full justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white/60 text-[11px] font-black uppercase tracking-[3px] mb-2",children:"CrÃ©ditos Totales Disponibles"}),e.jsxs("h2",{className:"text-7xl font-black text-white tracking-tighter",children:[a.toLocaleString(),e.jsx("span",{className:"text-2xl text-white/40 ml-4 font-medium uppercase tracking-widest",children:"unidades"})]})]}),e.jsxs("div",{className:"mt-12 flex flex-wrap gap-8 items-end",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-white/40 text-[10px] font-bold uppercase",children:"Consumo Total"}),e.jsxs("div",{className:"flex items-center gap-2 text-white",children:[e.jsx(Ne,{className:"size-5 text-emerald-400"}),e.jsx("span",{className:"text-2xl font-black",children:((p=o==null?void 0:o.credits_used)==null?void 0:p.toLocaleString())||0})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-white/40 text-[10px] font-bold uppercase",children:"Eventos Activos"}),e.jsxs("div",{className:"flex items-center gap-2 text-white/80",children:[e.jsx(R,{className:"size-5 text-yellow-400"}),e.jsx("span",{className:"text-2xl font-black",children:s.filter(x=>x.is_active).length})]})]}),e.jsx("button",{onClick:()=>i(!0),className:"ml-auto px-8 py-4 bg-white text-[#135bec] font-black rounded-2xl hover:scale-105 transition-all text-xs uppercase tracking-[2px] shadow-xl",children:"Recargar CrÃ©ditos"})]})]})]}),e.jsxs("div",{className:"glass-card rounded-3xl p-8 border border-white/5 bg-slate-900/50 backdrop-blur-xl flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-black text-white uppercase tracking-tighter mb-6 flex items-center gap-2",children:[e.jsx(jt,{className:"size-5 text-[#135bec]"}),"Ãšltimas Recargas"]}),e.jsx("div",{className:"space-y-6 max-h-[400px] overflow-y-auto custom-scrollbar pr-2",children:l.length>0?l.map((x,h)=>e.jsxs("div",{className:"flex justify-between items-center bg-white/[0.02] p-4 rounded-2xl border border-white/5 group hover:border-[#135bec]/30 transition-all",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-bold text-white",children:["+",x.amount.toLocaleString()," CrÃ©ditos"]}),e.jsx("p",{className:"text-[10px] text-slate-500 mt-1",children:new Date(x.created_at).toLocaleDateString()})]}),e.jsx("span",{className:`text-[9px] font-black uppercase px-2 py-1 rounded-lg ${x.type==="top-up"?"text-emerald-500 bg-emerald-500/10":"text-blue-500 bg-blue-500/10"}`,children:x.type==="top-up"?"Carga":"Ajuste"})]},x.id)):e.jsx("div",{className:"text-center py-10 opacity-40",children:e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-widest",children:"Sin movimientos"})})})]}),e.jsxs("p",{className:"text-[10px] text-slate-600 text-center mt-6",children:[e.jsx(ke,{className:"size-3 inline mr-1"}),"Los crÃ©ditos no poseen fecha de vencimiento."]})]})]}),e.jsxs("section",{className:"glass-card rounded-[40px] p-10 border border-white/5 bg-slate-900/40 backdrop-blur-3xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-10",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-black text-white uppercase tracking-tighter",children:"AnalÃ­ticas de Consumo"}),e.jsx("p",{className:"text-slate-500 text-[9px] font-black uppercase tracking-[3px] mt-1",children:"Monitoreo de energÃ­a AI por evento activo"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("div",{className:"px-3 py-1 bg-emerald-500/10 border border-emerald-500/20 rounded-full flex items-center gap-2",children:[e.jsx("div",{className:"size-1.5 bg-emerald-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-[9px] font-black text-emerald-500 uppercase",children:"Live Metrics"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8",children:[s.map((x,h)=>{var c;const f=Math.min(100,(x.credits_used||0)/(x.credits_allocated||1)*100),t=[20,45,30,60,40,75,f].map((j,r)=>`${r*20},${80-j*.6}`).join(" ");return e.jsx(S.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:h*.05},className:"group relative h-full",children:e.jsxs("div",{className:"p-8 rounded-[32px] bg-gradient-to-br from-white/[0.03] to-transparent border border-white/5 group-hover:border-[#135bec]/40 transition-all overflow-hidden h-full flex flex-col",children:[e.jsx("div",{className:"absolute inset-x-0 bottom-0 h-24 opacity-20 pointer-events-none",children:e.jsxs("svg",{className:"w-full h-full",preserveAspectRatio:"none",viewBox:"0 0 120 80",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:`grad-${h}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#135bec",stopOpacity:"0.5"}),e.jsx("stop",{offset:"100%",stopColor:"#135bec",stopOpacity:"0"})]})}),e.jsx("path",{d:`M0,80 L${t} L120,80 Z`,fill:`url(#grad-${h})`,className:"group-hover:opacity-100 transition-opacity"}),e.jsx(S.path,{d:`M0,${80-20*.6} L${t}`,fill:"none",stroke:"#135bec",strokeWidth:"2",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:1.5,delay:.5}})]})}),e.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("div",{className:"p-2.5 bg-white/5 rounded-xl",children:e.jsx(Ne,{className:`size-4 ${f>80?"text-amber-500":"text-emerald-500"}`})}),e.jsx("p",{className:"text-[10px] font-black text-white/20 uppercase tracking-[2px]",children:x.event_slug})]}),e.jsx("h4",{className:"text-[11px] font-black text-white uppercase tracking-widest mb-1 truncate group-hover:text-[#135bec] transition-colors",children:x.event_name}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-black text-white",children:((c=x.credits_used)==null?void 0:c.toLocaleString())||0}),e.jsx("span",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Usados"})]}),e.jsx("div",{className:"mt-4 w-full bg-white/5 h-1.5 rounded-full overflow-hidden",children:e.jsx(S.div,{initial:{width:0},animate:{width:`${f}%`},className:`h-full rounded-full ${f>90?"bg-rose-500":f>70?"bg-amber-500":"bg-[#135bec]"}`})}),e.jsxs("div",{className:"flex justify-between mt-3",children:[e.jsxs("span",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest",children:[Math.round(f),"% Cap"]}),e.jsxs("span",{className:"text-[9px] font-black text-white/30 uppercase tracking-widest",children:["Limite: ",x.credits_allocated]})]})]})]})]})},x.id)}),s.length===0&&e.jsxs("div",{className:"col-span-full py-20 text-center border-2 border-dashed border-white/5 rounded-[40px]",children:[e.jsx("div",{className:"size-16 bg-white/5 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ke,{className:"size-8 text-slate-600"})}),e.jsx("p",{className:"text-xs font-black text-slate-600 uppercase tracking-[3px]",children:"Sin actividad de consumo para reportar"})]})]})]})]},"wallet")},Dt=({isOpen:a,onClose:o,newEvent:s,setNewEvent:l,clients:i,partner:p,brandingConfig:x,getClientBalance:h,onEventCreate:f,loading:t})=>{var c,j;return e.jsx(D,{isOpen:a,onClose:o,title:"Crear Evento",description:"Nueva instancia",children:e.jsxs("form",{onSubmit:f,className:"p-7 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 mb-2 block",children:"Nombre del Evento"}),e.jsx("input",{required:!0,type:"text",placeholder:"Nombre comercial",className:"w-full bg-[#0a0a0b] border border-white/10 rounded-xl px-5 py-4 text-white focus:border-[#135bec] outline-none transition-all placeholder:text-slate-800",value:s.name,onChange:r=>l({...s,name:r.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 mb-2 block",children:"Asignar a Cliente"}),e.jsxs("div",{className:"relative",children:[e.jsx(ne,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-700 size-4"}),e.jsxs("select",{required:!0,className:"w-full bg-[#0a0a0b] border border-white/10 rounded-xl pl-11 pr-5 py-4 text-white focus:border-[#135bec] outline-none transition-all text-xs appearance-none",value:s.client_email,onChange:r=>{var N;const n=i.find(b=>b.email===r.target.value);l({...s,client_email:r.target.value,selected_styles:(n==null?void 0:n.contracted_styles)||(((N=x.style_presets)==null?void 0:N.length)>0?x.style_presets:H)})},children:[e.jsx("option",{value:"",children:"Consumo Directo (Mayorista)"}),i.map(r=>e.jsxs("option",{value:r.email,children:[r.name," (",r.email,")"]},r.id))]}),e.jsx(mt,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-700 size-4 rotate-90"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 mb-2 block",children:"Personalizado"}),e.jsx("input",{type:"text",placeholder:"slug",className:"w-full bg-[#0a0a0b] border border-white/10 rounded-xl px-4 py-3 text-white focus:border-[#135bec] outline-none transition-all text-xs font-mono",value:s.slug,onChange:r=>l({...s,slug:r.target.value.toLowerCase().replace(/\s+/g,"-")})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 mb-2 block",children:"CrÃ©ditos"}),e.jsxs("div",{className:"relative",children:[e.jsx(xe,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-[#135bec] size-4"}),e.jsx("input",{required:!0,type:"number",className:"w-full bg-[#0a0a0b] border border-white/10 rounded-xl pl-11 pr-5 py-3 text-white focus:border-[#135bec] outline-none transition-all text-xs font-bold",value:s.credits,onChange:r=>l({...s,credits:Number(r.target.value)})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 mb-2 block",children:"Inicio"}),e.jsx("input",{required:!0,type:"date",className:"w-full bg-[#0a0a0b] border border-white/10 rounded-xl px-4 py-3 text-white focus:border-[#135bec] outline-none transition-all text-xs",value:s.start_date,onChange:r=>l({...s,start_date:r.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 mb-2 block",children:"Fin"}),e.jsx("input",{required:!0,type:"date",className:"w-full bg-[#0a0a0b] border border-white/10 rounded-xl px-4 py-3 text-white focus:border-[#135bec] outline-none transition-all text-xs",value:s.end_date,onChange:r=>l({...s,end_date:r.target.value})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 block",children:"Estilos para este Evento"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:(s.client_email&&((c=i.find(r=>r.email===s.client_email))==null?void 0:c.contracted_styles)||H).map(r=>{const n=s.selected_styles.includes(r);return e.jsx("button",{type:"button",onClick:()=>{const N=n?s.selected_styles.filter(b=>b!==r):[...s.selected_styles,r];l({...s,selected_styles:N})},className:`py-2 px-1 rounded-lg border text-[8px] font-bold uppercase transition-all ${n?"bg-[#135bec]/20 border-[#135bec] text-white":"bg-white/5 border-white/5 text-slate-500"}`,children:r},r)})})]}),e.jsxs("div",{className:"p-4 bg-[#135bec]/5 border border-[#135bec]/10 rounded-xl flex items-center gap-4",children:[e.jsx("div",{className:"size-8 rounded-lg bg-[#135bec]/10 flex items-center justify-center text-[#135bec]",children:e.jsx(pt,{className:"size-4"})}),e.jsx("div",{children:s.client_email&&i.find(r=>r.email===s.client_email)?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-[9px] font-bold text-slate-500 uppercase tracking-widest leading-none",children:"Saldo Cliente"}),e.jsxs("p",{className:"text-[11px] text-slate-400 mt-1 leading-tight",children:["Se utilizarÃ¡n ",s.credits," del saldo de ",(j=i.find(r=>r.email===s.client_email))==null?void 0:j.name," (",h(s.client_email)," disponibles)."]})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-[9px] font-bold text-slate-500 uppercase tracking-widest leading-none",children:"VerificaciÃ³n de Balance"}),e.jsxs("p",{className:"text-[11px] text-slate-400 mt-1 leading-tight",children:["Se deducirÃ¡n ",s.credits," crÃ©ditos de tu balance mayorista (",p?p.credits_total-p.credits_used:0," disponibles)."]})]})})]})]}),e.jsx("button",{disabled:t,type:"submit",className:"w-full py-5 bg-[#135bec] hover:bg-[#135bec]/90 text-white text-[11px] font-black rounded-xl transition-all shadow-xl shadow-[#135bec]/20 uppercase tracking-widest disabled:opacity-50 disabled:cursor-not-allowed group/btn",children:t?"Creando...":e.jsxs("span",{className:"flex items-center justify-center gap-2",children:["Activar Instancia de Evento",e.jsx(R,{className:"size-4 group-hover:scale-110 transition-transform"})]})})]})})},qt=({isOpen:a,onClose:o,editingEvent:s,setEditingEvent:l,clients:i,brandingConfig:p,onEventUpdate:x,loading:h})=>{var f,t;return s?e.jsx(D,{isOpen:a,onClose:o,title:"Editar Evento",description:"Modificar parÃ¡metros",children:e.jsxs("form",{onSubmit:x,className:"p-7 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 mb-2 block",children:"Nombre del Evento"}),e.jsx("input",{required:!0,type:"text",className:"w-full bg-[#0a0a0b] border border-white/10 rounded-xl px-5 py-4 text-white focus:border-[#135bec] outline-none transition-all placeholder:text-slate-800",value:s.event_name,onChange:c=>l({...s,event_name:c.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 mb-2 block",children:"Inicio"}),e.jsx("input",{required:!0,type:"date",className:"w-full bg-[#0a0a0b] border border-white/10 rounded-xl px-4 py-3 text-white focus:border-[#135bec] outline-none transition-all text-xs",value:s.start_date?new Date(s.start_date).toISOString().split("T")[0]:"",onChange:c=>l({...s,start_date:c.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 mb-2 block",children:"Fin"}),e.jsx("input",{required:!0,type:"date",className:"w-full bg-[#0a0a0b] border border-white/10 rounded-xl px-4 py-3 text-white focus:border-[#135bec] outline-none transition-all text-xs",value:s.end_date?new Date(s.end_date).toISOString().split("T")[0]:"",onChange:c=>l({...s,end_date:c.target.value})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 block",children:"Estilos para este Evento"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:(s.client_id&&((f=i.find(c=>c.id===s.client_id))==null?void 0:f.contracted_styles)||(((t=p.style_presets)==null?void 0:t.length)>0?p.style_presets:H)).map(c=>{var r;const j=(r=s.selected_styles)==null?void 0:r.includes(c);return e.jsx("button",{type:"button",onClick:()=>{const n=j?s.selected_styles.filter(N=>N!==c):[...s.selected_styles||[],c];l({...s,selected_styles:n})},className:`py-2 px-1 rounded-lg border text-[8px] font-bold uppercase transition-all ${j?"bg-[#135bec]/20 border-[#135bec] text-white":"bg-white/5 border-white/5 text-slate-500"}`,children:c},c)})})]}),e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-white/5 rounded-2xl border border-white/5",children:[e.jsx("div",{className:`size-10 rounded-xl flex items-center justify-center ${s.is_active?"bg-emerald-500/10 text-emerald-500":"bg-rose-500/10 text-rose-500"}`,children:e.jsx(R,{className:"size-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-[10px] font-black uppercase text-white tracking-widest leading-none",children:"Estado"}),e.jsx("p",{className:"text-[9px] text-slate-500 uppercase mt-1 leading-none",children:s.is_active?"En LÃ­nea":"Inactivo"})]}),e.jsx("button",{type:"button",onClick:()=>l({...s,is_active:!s.is_active}),className:`px-4 py-2 rounded-xl text-[10px] font-black uppercase transition-all ${s.is_active?"bg-rose-500/10 text-rose-500 hover:bg-rose-500 hover:text-white":"bg-emerald-500/10 text-emerald-500 hover:bg-emerald-500 hover:text-white"}`,children:s.is_active?"Pausar":"Activar"})]})]}),e.jsx("button",{disabled:h,type:"submit",className:"w-full py-5 bg-[#135bec] hover:bg-[#135bec]/90 text-white text-[11px] font-black rounded-xl transition-all shadow-xl shadow-[#135bec]/20 uppercase tracking-[3px] disabled:opacity-50 disabled:cursor-not-allowed",children:h?"Sincronizando...":"Guardar Cambios"})]})}):null},Ot=({isOpen:a,onClose:o,editingClient:s,newClient:l,setNewClient:i,setEditingClient:p,onClientCreate:x,onClientUpdate:h,loading:f})=>{const t=!!s;return e.jsx(D,{isOpen:a,onClose:o,title:t?"Editar Cliente":"Nuevo Cliente",description:"Cuenta corporativa",children:e.jsxs("form",{onSubmit:c=>{c.preventDefault(),t?h(s):x(l)},className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 mb-2 block",children:"Nombre de la Empresa"}),e.jsx("input",{required:!0,type:"text",className:"w-full bg-[#0a0a0b] border border-white/10 rounded-xl px-5 py-4 text-white focus:border-[#135bec] outline-none transition-all",value:t?s.name:l.name,onChange:c=>t?p({...s,name:c.target.value}):i({...l,name:c.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 mb-2 block",children:"Email de la Cuenta"}),e.jsx("input",{required:!0,type:"email",className:"w-full bg-[#0a0a0b] border border-white/10 rounded-xl px-5 py-4 text-white focus:border-[#135bec] outline-none transition-all text-xs",value:t?s.email:l.email,onChange:c=>t?p({...s,email:c.target.value}):i({...l,email:c.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 mb-2 block",children:"Persona de Contacto"}),e.jsx("input",{type:"text",className:"w-full bg-[#0a0a0b] border border-white/10 rounded-xl px-4 py-3 text-white focus:border-[#135bec] outline-none transition-all text-xs",value:t?s.contact_person:l.contact_person,onChange:c=>t?p({...s,contact_person:c.target.value}):i({...l,contact_person:c.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 mb-2 block",children:"TelÃ©fono"}),e.jsx("input",{type:"text",className:"w-full bg-[#0a0a0b] border border-white/10 rounded-xl px-4 py-3 text-white focus:border-[#135bec] outline-none transition-all text-xs",value:t?s.phone:l.phone,onChange:c=>t?p({...s,phone:c.target.value}):i({...l,phone:c.target.value})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 mb-3 block",children:"Estilos Contratados"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:H.map(c=>{const j=t?s.contracted_styles:l.contracted_styles,r=j==null?void 0:j.includes(c);return e.jsx("button",{type:"button",onClick:()=>{const n=r?j.filter(N=>N!==c):[...j||[],c];t?p({...s,contracted_styles:n}):i({...l,contracted_styles:n})},className:`py-2 px-1 rounded-lg border text-[8px] font-bold uppercase tracking-wider transition-all ${r?"bg-[#135bec]/20 border-[#135bec] text-white":"bg-white/5 border-white/5 text-slate-500"}`,children:c},c)})})]})]}),e.jsx("button",{disabled:f,type:"submit",className:"w-full py-5 bg-[#135bec] hover:bg-[#135bec]/90 text-white text-[11px] font-black rounded-xl transition-all shadow-xl shadow-[#135bec]/20 uppercase tracking-widest disabled:opacity-50",children:f?"Sincronizando...":t?"Guardar Cambios":"Registrar Cliente"})]})})},Bt=({isOpen:a,onClose:o,client:s,amount:l,setAmount:i,partner:p,onTopUp:x,loading:h})=>s?e.jsx(D,{isOpen:a,onClose:o,title:"Asignar Saldo",description:s.name||"",maxWidth:"max-w-sm",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 mb-2 block",children:"Cantidad a Transferir"}),e.jsxs("div",{className:"relative",children:[e.jsx(xe,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-emerald-500 size-4"}),e.jsx("input",{type:"number",className:"w-full bg-[#0a0a0b] border border-white/10 rounded-xl pl-11 pr-5 py-4 text-white focus:border-emerald-500 outline-none transition-all font-bold text-center text-xl",value:l,onChange:f=>i(Number(f.target.value))})]}),e.jsxs("div",{className:"flex flex-col gap-2 mt-4 p-4 bg-white/5 rounded-xl border border-white/5",children:[e.jsxs("p",{className:"text-[9px] text-slate-500 uppercase tracking-widest flex justify-between",children:["Tu Disponible: ",e.jsx("span",{className:"text-white",children:(((p==null?void 0:p.credits_total)||0)-((p==null?void 0:p.credits_used)||0)).toLocaleString()})]}),e.jsxs("p",{className:"text-[9px] text-slate-500 uppercase tracking-widest flex justify-between",children:["Nuevo Saldo Cliente: ",e.jsx("span",{className:"text-emerald-500",children:((s.credits_total||0)+l).toLocaleString()})]})]})]}),e.jsx("button",{disabled:h||l<=0,onClick:x,className:"w-full py-5 bg-emerald-500 hover:bg-emerald-400 text-[#071121] text-[11px] font-black rounded-xl transition-all shadow-xl shadow-emerald-500/20 uppercase tracking-[3px] disabled:opacity-30 disabled:grayscale",children:h?"Transfiriendo...":"Confirmar AsignaciÃ³n"})]})}):null,Gt=({isOpen:a,onClose:o,event:s,amount:l,setAmount:i,availableCredits:p,onTopUp:x,loading:h})=>s?e.jsx(D,{isOpen:a,onClose:o,title:"Recargar Evento",description:s.event_name||"",maxWidth:"max-w-sm",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 mb-2 block",children:"Cantidad de CrÃ©ditos"}),e.jsxs("div",{className:"relative",children:[e.jsx(xe,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-emerald-500 size-4"}),e.jsx("input",{type:"number",className:"w-full bg-[#0a0a0b] border border-white/10 rounded-xl pl-11 pr-5 py-4 text-white focus:border-emerald-500 outline-none transition-all font-bold text-center text-xl",value:l,onChange:f=>i(Number(f.target.value))})]}),e.jsxs("p",{className:"text-[9px] text-slate-500 mt-3 text-center uppercase tracking-widest",children:["Disponibles: ",e.jsx("span",{className:"text-white",children:p.toLocaleString()})]})]}),e.jsx("button",{disabled:h||l<=0||l>p,onClick:x,className:"w-full py-5 bg-emerald-500 hover:bg-emerald-400 text-[#071121] text-[11px] font-black rounded-xl transition-all shadow-xl shadow-emerald-500/20 uppercase tracking-[3px] disabled:opacity-30 disabled:grayscale",children:h?"Procesando...":"Confirmar Transferencia"})]})}):null,Zt=({isOpen:a,onClose:o,eventToDelete:s,onConfirm:l})=>e.jsx(D,{isOpen:a,onClose:o,title:"Â¿Eliminar Evento?",description:"Esta acciÃ³n es permanente",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"size-20 bg-rose-500/10 rounded-full flex items-center justify-center mx-auto mb-6 border border-rose-500/20",children:e.jsx(_e,{className:"size-10 text-rose-500"})}),e.jsxs("p",{className:"text-slate-400 text-sm leading-relaxed mb-8",children:["Se eliminarÃ¡ el evento ",e.jsxs("span",{className:"text-white font-bold",children:['"',s==null?void 0:s.event_name,'"']})," y todos sus datos asociados."]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:o,className:"flex-1 py-4 bg-slate-800 hover:bg-slate-700 text-slate-300 text-[10px] font-black rounded-xl transition-all uppercase tracking-[2px]",children:"Cancelar"}),e.jsx("button",{onClick:l,className:"flex-1 py-4 bg-rose-500 hover:bg-rose-600 text-white text-[10px] font-black rounded-xl transition-all shadow-lg shadow-rose-500/20 uppercase tracking-[2px]",children:"Confirmar Baja"})]})]})}),Qt=({user:a,profile:o,onBack:s,initialView:l="overview",onProxyClient:i})=>{const[p,x]=g.useState({message:"",type:null}),h=g.useCallback((_,z="success")=>{x({message:_,type:z}),setTimeout(()=>x({message:"",type:null}),4e3)},[]),{loading:f,partner:t,events:c,transactions:j,clients:r,generationsData:n,recentGlobalPhotos:N,fetchPartnerData:b,getClientBalance:w,handleCreateEvent:k,handleUpdateEvent:C,handleDeleteEvent:E,handleCreateClient:J,handleUpdateClient:q,handleClientTopUp:A,handleResendInvitation:O,handleTopUpEvent:K}=zt({profile:o,showToast:h}),{brandingConfig:$,setBrandingConfig:B,isSaving:m,isUploading:d,toggleStylePreset:v,handleUpdateBranding:u,handleLogoUpload:G}=Lt({partner:t,initialConfig:t==null?void 0:t.config,showToast:h}),{eventPhotos:X,loading:pe,moderationLoading:Z,fetchEventPhotos:P,handleDeletePhoto:me,handleBulkDelete:Be,selectedPhotos:Ge,setSelectedPhotos:Ze}=Et({showToast:h}),Se=pe||Z,[I,L]=g.useState(l),[Y,Fe]=g.useState(""),[Q,ze]=g.useState(null),[We,Ft]=g.useState(!1),[Te,ue]=g.useState(!1),[F,ee]=g.useState(null),[te,he]=g.useState(null),[Le,Ve]=g.useState(100),[se,be]=g.useState(null),[W,He]=g.useState(null),[Je,ge]=g.useState(!1),[ae,re]=g.useState(null),[T,fe]=g.useState(null),[Ee,Ke]=g.useState(1e3),[le,Xe]=g.useState(""),[je,Ye]=g.useState(""),[Ue,$e]=g.useState({name:"",slug:"",client_email:"",credits:500,start_date:new Date().toISOString().split("T")[0],end_date:new Date(Date.now()+10080*60*1e3).toISOString().split("T")[0],selected_styles:[]}),[Qe,et]=g.useState({name:"",email:"",contact_person:"",phone:"",contracted_styles:[]}),V=f||We||m||d||Se,tt=g.useMemo(()=>c.filter(_=>{const z=(_.event_name||"").toLowerCase().includes(Y.toLowerCase())||(_.event_slug||"").toLowerCase().includes(Y.toLowerCase()),U=!Q||_.client_email===Q;return z&&U}),[c,Y,Q]);g.useEffect(()=>{const _=new URLSearchParams(window.location.search),z=_.get("status")||_.get("collection_status");if(z==="approved"||z==="success"){h("Â¡Recarga acreditada con Ã©xito! ðŸŽ‰","success");const U=window.location.pathname;window.history.replaceState({},document.title,U),b()}else if(z==="failure"){h("El pago no pudo procesarse. Reintenta.","error");const U=window.location.pathname;window.history.replaceState({},document.title,U)}},[b,h]),g.useEffect(()=>{L(l)},[l]),g.useEffect(()=>{W&&P(W.id)},[W,P]),g.useEffect(()=>{b()},[o.partner_id,b]);const st=async _=>{await J(_)&&ge(!1)},at=async _=>{if(!ae)return;await q(ae.id,_)&&re(null)},rt=async _=>{_.preventDefault(),await k(Ue)&&(ue(!1),$e({name:"",slug:"",client_email:"",credits:500,start_date:"",end_date:"",selected_styles:[]}))},lt=async _=>{if(_.preventDefault(),!F)return;await C(F.id,F)&&ee(null)},it=async()=>{if(!T)return;await A(T.id,T.name,Ee)&&fe(null)},ct=async()=>{if(!te)return;await K(te,Le)&&he(null)},nt=async()=>{if(!se)return;await E(se.id)&&be(null)};return e.jsxs("div",{className:"min-h-screen bg-[#071121] text-white font-['Outfit'] selection:bg-[#135bec]/30 p-4 md:p-8",children:[e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[e.jsxs("button",{onClick:s,className:"group flex items-center gap-3 text-slate-500 hover:text-white transition-all text-[11px] font-black uppercase tracking-[3px]",children:[e.jsx("div",{className:"size-8 rounded-full border border-white/5 flex items-center justify-center group-hover:bg-white/5 transition-all",children:e.jsx(Me,{className:"size-4 group-hover:-translate-x-1 transition-transform"})}),"Volver al Inicio"]}),e.jsx(Ut,{partnerName:t==null?void 0:t.name,view:I,setView:L}),e.jsx("main",{children:e.jsxs(ce,{mode:"wait",children:[I==="overview"&&e.jsx($t,{partner:t,events:c,generationsData:n,setView:L}),I==="clients"&&e.jsx(Pt,{clients:r,events:c,setShowCreateClientModal:ge,setEditingClient:re,setShowClientTopUpModal:fe,setSelectedClientId:ze,setView:L,exportClientReport:_=>{h(`Exportando reporte de ${_.name}...`,"info")},onResendInvitation:O}),I==="events"&&e.jsx(It,{events:c,filteredEvents:tt,searchTerm:Y,setSearchTerm:Fe,selectedClientId:Q,setSelectedClientId:ze,setShowCreateEventModal:ue,setEditingEvent:ee,setEventToTopUp:he,setEventToDelete:be,setEventToModerate:_=>{He(_),L("moderation")},setView:L}),I==="wallet"&&e.jsx(Mt,{availableCredits:((t==null?void 0:t.credits_total)||0)-((t==null?void 0:t.credits_used)||0),partner:t,events:c,transactions:j,setShowTopUpModal:()=>L("wallet")}),I==="branding"&&e.jsx(Rt,{brandingConfig:$,setBrandingConfig:B,isSavingBranding:m,handleLogoUpload:G,handleUpdateBranding:u,toggleStylePreset:v,recentGlobalPhotos:N,events:c,setView:L}),I==="moderation"&&W&&e.jsx(At,{eventToModerate:W,setView:L,filteredPhotos:X.filter(_=>{var z,U;return(!le||((U=(z=_.profiles)==null?void 0:z.email)==null?void 0:U.toLowerCase().includes(le.toLowerCase()))||_.id.includes(le))&&(!je||_.created_at.startsWith(je))}),eventPhotos:X,moderationSearchTerm:le,setModerationSearchTerm:Xe,moderationDateFilter:je,setModerationDateFilter:Ye,showToast:h,handleDeletePhoto:me,loading:Se,selectedPhotos:Ge,setSelectedPhotos:Ze,handleBulkDelete:Be})]})})]}),e.jsxs(ce,{children:[e.jsx(Dt,{isOpen:Te,onClose:()=>ue(!1),newEvent:Ue,setNewEvent:$e,clients:r,partner:t,brandingConfig:$,getClientBalance:w,onEventCreate:rt,loading:V},"create-event-modal"),e.jsx(qt,{isOpen:!!F,onClose:()=>ee(null),editingEvent:F,setEditingEvent:ee,clients:r,brandingConfig:$,onEventUpdate:lt,loading:V},"edit-event-modal"),e.jsx(Ot,{isOpen:Je||!!ae,onClose:()=>{ge(!1),re(null)},editingClient:ae,newClient:Qe,setNewClient:et,setEditingClient:re,onClientCreate:st,onClientUpdate:at,loading:V},"client-modal"),e.jsx(Bt,{isOpen:!!T,onClose:()=>fe(null),client:T,amount:Ee,setAmount:Ke,partner:t,onTopUp:it,loading:V},"client-topup-modal"),e.jsx(Gt,{isOpen:!!te,onClose:()=>he(null),event:te,amount:Le,setAmount:Ve,availableCredits:((t==null?void 0:t.credits_total)||0)-((t==null?void 0:t.credits_used)||0),onTopUp:ct,loading:V},"event-topup-modal"),e.jsx(Zt,{isOpen:!!se,onClose:()=>be(null),eventToDelete:se,onConfirm:nt},"delete-event-modal")]}),e.jsx(ce,{children:p.type&&e.jsx(S.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.9},className:"fixed bottom-8 right-8 z-[100]",children:e.jsxs("div",{className:`flex items-center gap-4 px-6 py-4 rounded-2xl border backdrop-blur-xl shadow-2xl ${p.type==="success"?"bg-emerald-500/10 border-emerald-500/20 text-emerald-500":p.type==="error"?"bg-rose-500/10 border-rose-500/20 text-rose-500":"bg-[#135bec]/10 border-[#135bec]/20 text-blue-400"}`,children:[p.type==="success"?e.jsx(ye,{className:"size-5"}):p.type==="error"?e.jsx(_e,{className:"size-5"}):e.jsx(ke,{className:"size-5"}),e.jsx("p",{className:"text-sm font-bold",children:p.message}),e.jsx("button",{onClick:()=>x({message:"",type:null}),className:"ml-2 opacity-50 hover:opacity-100",children:e.jsx(Ce,{className:"size-4"})})]})})})]})};export{Qt as PartnerDashboard};
