import{r as m,j as e,s as p}from"./DashboardApp-BE3oS_VM.js";import{m as ne,A as ve,I as Je}from"./constants-cJPfzdI_.js";import{B as Xe}from"./Background3D-D_4hhvxT.js";import{A as we}from"./AlquimiaModal-CsZQN3UJ.js";import{S as Ce}from"./search-CCJnL7dH.js";const Ze=({isOpen:v,onClose:x,onSave:g,onDelete:h,partner:y,isSaving:u,loading:j})=>{const C=!!y,[c,k]=m.useState({name:"",company_name:"",contact_email:"",contact_phone:"",password:"",initialCredits:1e3,is_active:!0});m.useEffect(()=>{v&&k(y?{name:y.name||"",company_name:y.company_name||"",contact_email:y.contact_email,contact_phone:y.contact_phone||"",password:"",initialCredits:y.credits_total||0,is_active:y.is_active!==!1}:{name:"",company_name:"",contact_email:"",contact_phone:"",password:"",initialCredits:1e3,is_active:!0})},[v,y]);const o=async i=>{i.preventDefault(),await g(c)};return C?e.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center p-6 bg-black/90 backdrop-blur-xl",children:e.jsxs(ne.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},className:"bg-[#121413] border border-[#1f2b24] p-8 rounded-[32px] w-full max-w-lg shadow-[0_0_100px_rgba(0,0,0,1)] relative overflow-hidden",children:[e.jsx("div",{className:`absolute top-0 right-0 w-32 h-32 blur-[80px] opacity-20 pointer-events-none ${c.is_active?"bg-[#13ec80]":"bg-red-500"}`}),e.jsxs("div",{className:"flex justify-between items-start mb-8 relative z-10",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-2xl font-black text-white uppercase tracking-tight italic",children:["Partner ",e.jsx("span",{className:"text-[#13ec80]",children:"Settings"})]}),e.jsx("p",{className:"text-slate-500 text-[10px] font-bold uppercase tracking-[3px] mt-1",children:"Configuración Maestro de Canal"})]}),e.jsx("button",{onClick:x,className:"w-10 h-10 rounded-full bg-white/5 flex items-center justify-center text-slate-500 hover:text-white transition-colors",children:e.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),e.jsxs("form",{onSubmit:o,className:"space-y-6 relative z-10",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest block mb-2",children:"Razón Social / Empresa"}),e.jsx("input",{className:"w-full bg-[#0a0c0b] border border-[#1f2b24] rounded-xl px-4 py-3 text-white outline-none focus:border-[#13ec80] transition-all",value:c.company_name,onChange:i=>k({...c,company_name:i.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest block mb-2",children:"Nombre de Contacto"}),e.jsx("input",{className:"w-full bg-[#0a0c0b] border border-[#1f2b24] rounded-xl px-4 py-3 text-white outline-none focus:border-[#13ec80] transition-all",value:c.name,onChange:i=>k({...c,name:i.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest block mb-2",children:"Teléfono de Contacto"}),e.jsx("input",{className:"w-full bg-[#0a0c0b] border border-[#1f2b24] rounded-xl px-4 py-3 text-white outline-none focus:border-[#13ec80] transition-all",value:c.contact_phone,onChange:i=>k({...c,contact_phone:i.target.value}),placeholder:"+54 9 11..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest block mb-2",children:"Email del Partner"}),e.jsx("input",{className:"w-full bg-[#0a0c0b] border border-[#1f2b24] rounded-xl px-4 py-3 text-white/50 outline-none cursor-not-allowed",value:c.contact_email,readOnly:!0}),e.jsx("p",{className:"text-[9px] text-slate-600 mt-1 italic",children:"* El email es el identificador único y no puede cambiarse."})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-2xl border border-white/5",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-white uppercase italic",children:"Estado de Cuenta"}),e.jsx("p",{className:"text-[10px] text-slate-500 font-medium",children:"Permitir acceso y operaciones"})]}),e.jsx("button",{type:"button",onClick:()=>k({...c,is_active:!c.is_active}),className:`relative w-12 h-6 rounded-full transition-colors duration-300 ${c.is_active?"bg-[#13ec80]":"bg-slate-700"}`,children:e.jsx("div",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-transform duration-300 ${c.is_active?"left-7":"left-1"}`})})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[h&&e.jsx("button",{type:"button",onClick:()=>h(y),className:"px-6 py-4 rounded-xl border border-red-500/30 text-red-500 text-[10px] font-black uppercase tracking-widest hover:bg-red-500/10 transition-all font-mono",children:"Dar de Baja"}),e.jsx("button",{type:"submit",disabled:u,className:"flex-1 py-4 bg-[#13ec80] text-[#0a0c0b] font-black text-[10px] rounded-xl shadow-[0_10px_30px_rgba(19,236,128,0.2)] hover:scale-[1.02] transition-all disabled:opacity-50 uppercase tracking-widest",children:u?"Sincronizando...":"Guardar Cambios"})]})]})]})}):e.jsxs(we,{isOpen:v,onClose:x,title:"Nuevo Revendedor",maxWidth:"max-w-md",children:[e.jsxs("h3",{className:"text-xl font-black text-white uppercase mb-6 flex items-center gap-3",children:[e.jsx("span",{className:"material-symbols-outlined text-[#13ec80]",children:"add_business"})," Nuevo Revendedor"]}),e.jsxs("form",{onSubmit:o,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest block mb-1",children:"Razón Social"}),e.jsx("input",{className:"w-full bg-[#0a0c0b] border border-[#1f2b24] rounded-lg px-4 py-3 text-white outline-none focus:border-[#13ec80]",placeholder:"Nombre de la Agencia...",value:c.name,onChange:i=>k({...c,name:i.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest block mb-1",children:"Email de Usuario (Login)"}),e.jsx("input",{className:"w-full bg-[#0a0c0b] border border-[#1f2b24] rounded-lg px-4 py-3 text-white outline-none focus:border-[#13ec80]",placeholder:"admin@agencia.com",type:"email",value:c.contact_email,onChange:i=>k({...c,contact_email:i.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest block mb-1",children:"Contraseña Temporal"}),e.jsx("input",{className:"w-full bg-[#0a0c0b] border border-[#1f2b24] rounded-lg px-4 py-3 text-white outline-none focus:border-[#13ec80]",placeholder:"Contraseña temporal para el partner",type:"password",value:c.password,onChange:i=>k({...c,password:i.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest block mb-1",children:"Créditos Iniciales"}),e.jsx("input",{className:"w-full bg-[#0a0c0b] border border-[#1f2b24] rounded-lg px-4 py-3 text-white outline-none focus:border-[#13ec80]",type:"number",value:c.initialCredits,onChange:i=>k({...c,initialCredits:parseInt(i.target.value)||0}),required:!0})]}),e.jsxs("div",{className:"flex gap-4 mt-8",children:[e.jsx("button",{type:"button",onClick:x,className:"flex-1 py-3 text-xs font-bold text-slate-500 hover:text-white transition-colors uppercase",children:"CANCELAR"}),e.jsx("button",{type:"submit",disabled:j,className:"flex-1 py-3 bg-[#13ec80] text-[#0a0c0b] font-black text-xs rounded-lg shadow-[0_0_20px_rgba(19,236,128,0.2)] hover:scale-[1.02] transition-all disabled:opacity-50 uppercase",children:j?"CREANDO...":"CREAR PARTNER"})]})]})]})},et=({isOpen:v,onClose:x,onTopUp:g,targetName:h,loading:y})=>e.jsxs(we,{isOpen:v,onClose:x,title:"Recarga de Créditos",maxWidth:"max-w-md",children:[e.jsxs("p",{className:"text-slate-400 text-sm mb-6",children:["Asignando nuevos créditos a ",e.jsx("span",{className:"text-[#13ec80] font-bold",children:h})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:[1e3,5e3,1e4,5e4].map(u=>e.jsxs("button",{onClick:()=>g(u),disabled:y,className:"py-4 border border-[#1f2b24] bg-[#0a0c0b] rounded-xl text-white font-black hover:border-[#13ec80] hover:text-[#13ec80] transition-all uppercase disabled:opacity-50",children:["+",u.toLocaleString()]},u))}),e.jsx("button",{onClick:x,className:"w-full mt-6 py-3 text-xs font-bold text-slate-500 hover:text-white tracking-widest uppercase transition-colors",children:"Cerrar"})]}),tt=({isOpen:v,onClose:x,onSave:g,user:h,stylesMetadata:y,isSaving:u})=>{const j=!!h,[C,c]=m.useState({email:"",credits:1e3,full_name:"",unlocked_packs:[]});m.useEffect(()=>{v&&c(h?{email:h.email,credits:h.credits,full_name:h.full_name||"",unlocked_packs:h.unlocked_packs||[]}:{email:"",credits:1e3,full_name:"",unlocked_packs:[]})},[v,h]);const k=async i=>{i.preventDefault(),await g(C)},o=i=>{const N=[...C.unlocked_packs],Q=N.indexOf(i);Q>-1?N.splice(Q,1):N.push(i),c({...C,unlocked_packs:N})};return e.jsxs(we,{isOpen:v,onClose:x,title:j?"Editar Usuario B2C":"Nuevo Usuario B2C",maxWidth:"max-w-lg",children:[e.jsx("div",{className:"mb-6",children:e.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest mt-1",children:j?C.email:"Alta de cuenta pública y créditos"})}),e.jsxs("form",{onSubmit:k,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:j?"col-span-1":"col-span-2",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest block mb-2",children:j?"Nombre Completo":"Email del Usuario"}),e.jsx("input",{type:j?"text":"email",required:!0,value:j?C.full_name:C.email,onChange:i=>c({...C,[j?"full_name":"email"]:i.target.value}),className:"w-full bg-[#0a0c0b] border border-[#1f2b24] rounded-xl px-4 py-3 text-white outline-none focus:border-blue-500 transition-colors",placeholder:j?"Nombre del usuario...":"ejemplo@usuario.com"})]}),j&&e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest block mb-2",children:"Créditos"}),e.jsx("input",{type:"number",required:!0,value:C.credits,onChange:i=>c({...C,credits:parseInt(i.target.value)||0}),className:"w-full bg-[#0a0c0b] border border-[#1f2b24] rounded-xl px-4 py-3 text-white outline-none focus:border-blue-500"})]})]}),!j&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest block mb-2",children:"Créditos Iniciales"}),e.jsx("input",{type:"number",required:!0,value:C.credits,onChange:i=>c({...C,credits:parseInt(i.target.value)||0}),className:"w-full bg-[#0a0c0b] border border-[#1f2b24] rounded-xl px-4 py-3 text-white outline-none focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest block mb-2",children:"Rol Asignado"}),e.jsx("div",{className:"w-full bg-[#0a0c0b] border border-[#1f2b24] rounded-xl px-4 py-3 text-slate-400 text-xs font-bold uppercase tracking-widest",children:"USUARIO B2C"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest block mb-2",children:"Packs Desbloqueados"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-40 overflow-y-auto p-4 bg-[#0a0c0b] rounded-xl border border-[#1f2b24] custom-scrollbar",children:Array.from(new Set(y.map(i=>i.category))).filter(i=>i).map(i=>{const N=C.unlocked_packs.includes(i);return e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[e.jsx("input",{type:"checkbox",checked:N,onChange:()=>o(i),className:"hidden"}),e.jsx("div",{className:`w-4 h-4 rounded border ${N?"bg-blue-600 border-blue-600":"border-[#1f2b24] group-hover:border-slate-600"} flex items-center justify-center transition-all`,children:N&&e.jsx("span",{className:"material-symbols-outlined !text-[12px] text-white",children:"check"})}),e.jsx("span",{className:`text-[11px] uppercase font-bold tracking-tight ${N?"text-white":"text-slate-500"}`,children:i})]},i)})}),!j&&e.jsx("p",{className:"text-[9px] text-slate-600 mt-2 italic",children:"* Los nombres deben coincidir con la categoría en el Motor de Estilos."})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx("button",{type:"button",onClick:x,className:"flex-1 px-6 py-4 rounded-xl font-bold text-slate-400 hover:text-white hover:bg-white/5 transition-all uppercase text-[10px] tracking-widest",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:u,className:"flex-1 px-6 py-4 bg-blue-600 text-white rounded-xl font-black uppercase text-[10px] tracking-[2px] shadow-lg shadow-blue-500/20 hover:scale-[1.02] transition-all disabled:opacity-50",children:u?j?"GUARDANDO...":"CREANDO...":j?"GUARDAR CAMBIOS":"CREAR USUARIO"})]})]})]})},st=({isOpen:v,onClose:x,onSave:g,onDelete:h,onImageUpload:y,style:u,isSaving:j,stylesMetadata:C,stats:c})=>{var J,te;const k=u==="new",[o,i]=m.useState({id:"",label:"",category:"",subcategory:"",image_url:"",prompt:"",tags:[],is_premium:!1,is_active:!0}),[N,Q]=m.useState(!1);m.useEffect(()=>{v&&u&&i(k?{id:"",label:"",category:"",subcategory:"",image_url:"",prompt:"",tags:[],is_premium:!1,is_active:!0}:{id:u.id||"",label:u.label||"",category:u.category||"",subcategory:u.subcategory||"",image_url:u.image_url||"",prompt:u.prompt||"",tags:Array.isArray(u.tags)?u.tags:(u.tags||"").split(",").map(l=>l.trim()).filter(Boolean),is_premium:!!u.is_premium,is_active:u.is_active!==!1})},[v,u,k]);const Ne=async l=>{Q(!0);const w=await y(l);w&&i(R=>({...R,image_url:w})),Q(!1)},ue=async()=>{await g(o)},Y=l=>{l&&!o.tags.includes(l)&&i({...o,tags:[...o.tags,l]})},W=l=>{i({...o,tags:o.tags.filter(w=>w!==l)})};return v?e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 md:p-6 bg-black/95 backdrop-blur-3xl overflow-hidden",children:e.jsxs("div",{className:"bg-[#0a0c0b] border border-[#1f2b24] rounded-[40px] w-full max-w-5xl max-h-[90vh] shadow-[0_0_100px_rgba(0,0,0,1)] overflow-hidden flex flex-col md:flex-row animate-in zoom-in-95 duration-300",children:[e.jsxs("div",{className:"w-full md:w-[35%] bg-white/5 p-8 flex flex-col items-center justify-start border-r border-[#1f2b24] relative overflow-y-auto no-scrollbar",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-full opacity-10 pointer-events-none",children:e.jsx("div",{className:"absolute top-[-100px] left-[-100px] w-[300px] h-[300px] bg-[#13ec80] blur-[150px] rounded-full"})}),e.jsxs("div",{className:"relative z-10 w-full mb-8",children:[e.jsxs("div",{className:"aspect-[4/5] rounded-[32px] overflow-hidden border-2 border-[#13ec80]/30 shadow-2xl relative group",children:[e.jsx("img",{src:o.image_url?o.image_url.startsWith("http")||o.image_url.startsWith("blob")||o.image_url.startsWith("/")?o.image_url:`/${o.image_url}`:"/placeholder-style.jpg",alt:"Preview",className:`w-full h-full object-cover group-hover:scale-110 transition-transform duration-1000 ${N?"opacity-30":"opacity-60"} group-hover:opacity-100`,onError:l=>{const w=l.target;w.src.includes("placeholder")||(w.src="/placeholder-style.jpg")}}),N&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-12 h-12 border-4 border-[#13ec80] border-t-transparent rounded-full animate-spin"})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#0a0c0b] via-transparent to-transparent opacity-80"}),e.jsx("div",{className:"absolute inset-x-0 bottom-0 p-6 flex flex-col items-center",children:e.jsxs("label",{className:"w-12 h-12 bg-[#13ec80] rounded-full flex items-center justify-center cursor-pointer hover:scale-110 active:scale-95 transition-all shadow-[0_0_20px_rgba(19,236,128,0.4)] group/btn",children:[e.jsx("span",{className:"material-symbols-outlined text-[#0a0c0b] group-hover:rotate-90 transition-transform",children:"add_a_photo"}),e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:Ne,disabled:N})]})})]}),e.jsxs("div",{className:"mt-6 text-center",children:[e.jsx("p",{className:"text-[10px] font-black text-[#13ec80] uppercase tracking-[4px] mb-2",children:"Protocolo Activo"}),e.jsx("h4",{className:"text-xl font-black text-white italic uppercase tracking-tighter",children:o.label||"Nueva Identidad"})]})]}),e.jsxs("div",{className:"w-full space-y-4 pt-4 border-t border-white/5",children:[e.jsxs("div",{className:"flex justify-between items-center text-[8px] font-black text-slate-500 uppercase tracking-widest",children:[e.jsx("span",{children:"Sync Status:"}),e.jsx("span",{className:N||j?"text-amber-400 animate-pulse":"text-[#13ec80]",children:N||j?"PROCESANDO...":"STANDBY"})]}),e.jsx("div",{className:"w-full h-1 bg-white/5 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full bg-[#13ec80] transition-all duration-500 ${N||j?"w-1/2 animate-pulse":"w-full opacity-50"}`})})]}),e.jsx("div",{className:"mt-auto pt-8 flex flex-col items-center",children:e.jsxs("p",{className:"text-[9px] font-bold text-slate-600 uppercase tracking-widest italic antialiased text-center",children:["IDENTITY PREVIEW MODULE ",e.jsx("br",{}),e.jsx("span",{className:"text-[#13ec80]/40",children:"V 1.5.0-STABLE"})]})})]}),e.jsxs("div",{className:"flex-1 p-6 md:p-10 overflow-y-auto no-scrollbar",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl md:text-2xl font-black text-white italic uppercase tracking-tighter",children:k?"Initialize Protocol":"Sync Identity Data"}),e.jsx("p",{className:"text-[8px] text-slate-500 font-bold uppercase tracking-[3px] mt-1 text-center md:text-left",children:"Sintonización de Red Neuronal"})]}),e.jsx("button",{onClick:x,className:"w-8 h-8 rounded-full bg-white/5 flex items-center justify-center text-slate-500 hover:text-white transition-colors",children:e.jsx("span",{className:"material-symbols-outlined !text-lg",children:"close"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[9px] font-black text-[#13ec80] uppercase tracking-widest ml-1",children:"Identity Handle (ID)"}),e.jsx("input",{className:"w-full bg-[#121413] border border-[#1f2b24] rounded-xl px-4 py-3 text-white outline-none focus:border-[#13ec80] font-mono text-xs",value:o.id,disabled:!k,onChange:l=>i({...o,id:l.target.value.toLowerCase()})})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest ml-1",children:"Visual Title"}),e.jsx("input",{className:"w-full bg-[#121413] border border-[#1f2b24] rounded-xl px-4 py-3 text-white outline-none focus:border-[#13ec80] text-sm",value:o.label,onChange:l=>i({...o,label:l.target.value})})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest ml-1",children:"System URL / Storage Path"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{className:"flex-1 bg-[#121413] border border-[#1f2b24] rounded-xl px-4 py-3 text-white outline-none focus:border-[#13ec80] font-mono text-[10px]",value:o.image_url,onChange:l=>i({...o,image_url:l.target.value})}),e.jsx("button",{onClick:()=>{o.image_url&&navigator.clipboard.writeText(o.image_url)},className:"px-3 bg-white/5 border border-white/10 rounded-xl text-slate-500 hover:text-[#13ec80] transition-colors",title:"Copiar URL",children:e.jsx("span",{className:"material-symbols-outlined !text-sm",children:"content_copy"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest ml-1",children:"Operational Category (Pack)"}),e.jsx("input",{list:"category-suggestions",className:"w-full bg-[#121413] border border-[#1f2b24] rounded-xl px-4 py-3 text-white outline-none focus:border-[#13ec80] text-xs",placeholder:"Escribir o seleccionar categoría...",value:o.category,onChange:l=>i({...o,category:l.target.value})}),e.jsx("datalist",{id:"category-suggestions",children:Array.from(new Set(C.map(l=>l.category).filter(Boolean).map(l=>l.toLowerCase()))).map(l=>e.jsx("option",{value:l},l))})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest ml-1",children:"Legacy Subcategory"}),e.jsx("input",{list:"subcategory-suggestions",className:"w-full bg-[#121413] border border-[#1f2b24] rounded-xl px-4 py-3 text-white outline-none focus:border-[#13ec80] font-mono text-[10px]",value:o.subcategory,onChange:l=>i({...o,subcategory:l.target.value})}),e.jsx("datalist",{id:"subcategory-suggestions",children:Array.from(new Set(C.filter(l=>{var w,R;return((w=l.category)==null?void 0:w.toLowerCase())===((R=o.category)==null?void 0:R.toLowerCase())}).map(l=>l.subcategory).filter(Boolean))).map(l=>e.jsx("option",{value:l},l))})]})]}),e.jsxs("div",{className:"bg-[#121413] border border-[#1f2b24] rounded-[24px] p-6 flex items-center justify-between group hover:border-[#13ec80]/30 transition-all",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${o.is_active?"bg-[#13ec80]/10 text-[#13ec80]":"bg-slate-500/10 text-slate-500"}`,children:e.jsx("span",{className:"material-symbols-outlined",children:o.is_active?"visibility":"visibility_off"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-black text-white uppercase tracking-widest block",children:"Visibility Status"}),e.jsx("span",{className:"text-[10px] text-slate-500 font-bold uppercase",children:o.is_active?"Active in application":"Hidden from users"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:o.is_active,onChange:l=>i({...o,is_active:l.target.checked})}),e.jsx("div",{className:"w-14 h-7 bg-white/5 border border-white/10 rounded-full peer peer-checked:after:translate-x-full peer-checked:bg-[#13ec80] after:content-[''] after:absolute after:top-[4px] after:left-[4px] after:bg-white after:rounded-full after:h-6 after:w-6 after:transition-all"})]})]}),e.jsxs("div",{className:"bg-[#121413] border border-[#1f2b24] rounded-[24px] p-6 flex items-center justify-between group hover:border-[#ff5500]/30 transition-all",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-[#ff5500]/10 flex items-center justify-center text-[#ff5500]",children:e.jsx("span",{className:"material-symbols-outlined",children:"workspace_premium"})}),e.jsx("span",{className:"text-xs font-black text-white uppercase tracking-widest",children:"Elevate to Premium Status (VIP Access Only)"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:o.is_premium,onChange:l=>i({...o,is_premium:l.target.checked})}),e.jsx("div",{className:"w-14 h-7 bg-white/5 border border-white/10 rounded-full peer peer-checked:after:translate-x-full peer-checked:bg-[#ff5500] after:content-[''] after:absolute after:top-[4px] after:left-[4px] after:bg-white after:rounded-full after:h-6 after:w-6 after:transition-all"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black text-[#13ec80] uppercase tracking-widest ml-1 block mb-1 underline decoration-2 underline-offset-4",children:"NEURO-CORE PROMPT (MASTER TEMPLATE)"}),e.jsx("p",{className:"text-[8px] text-slate-500 font-bold uppercase tracking-[2px]",children:"Estructura base de la red neuronal"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-[9px] font-black text-white leading-none",children:[((J=o.prompt)==null?void 0:J.split(/\s+/).filter(Boolean).length)||0," WORDS"]}),e.jsx("p",{className:"text-[7px] font-bold text-slate-650 uppercase",children:"Neural Load"})]}),e.jsx("div",{className:"w-px h-6 bg-white/10"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-[9px] font-black text-[#13ec80] leading-none",children:[((te=o.prompt)==null?void 0:te.length)||0," CHARS"]}),e.jsx("p",{className:"text-[7px] font-bold text-slate-650 uppercase",children:"Capacity"})]})]})]}),e.jsxs("div",{className:"relative group/prompt",children:[e.jsx("textarea",{className:"w-full bg-[#0a0c0b] border-2 border-[#1f2b24] group-hover/prompt:border-[#13ec80]/30 rounded-[32px] px-8 py-7 text-white outline-none focus:border-[#13ec80] text-sm leading-relaxed min-h-[160px] resize-none font-mono shadow-inner transition-all placeholder:text-slate-800",placeholder:"Inject system instructions here...",value:o.prompt,onChange:l=>i({...o,prompt:l.target.value})}),e.jsx("div",{className:"absolute right-6 top-6 opacity-20 group-hover/prompt:opacity-100 transition-opacity",children:e.jsx("div",{className:"size-2 rounded-full bg-[#13ec80] animate-pulse"})})]}),e.jsxs("div",{className:"bg-[#121413]/50 border border-[#1f2b24] rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"material-symbols-outlined !text-[14px] text-[#13ec80]",children:"bolt"}),e.jsx("span",{className:"text-[8px] font-black text-slate-500 uppercase tracking-widest",children:"Neural Boosters (Inject Tokens)"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{label:"Photorealistic",token:"hyper-realistic, photorealistic, 8k resolution, highly detailed"},{label:"Cinematic",token:"cinematic lighting, dramatic shadows, professional photography"},{label:"Sharp Focus",token:"sharp focus, masterpiece, intricate details"},{label:"Digital Art",token:"concept art, matte painting, trending on artstation"},{label:"Analog Style",token:"35mm film grain, analog photography, retro vintage feel"}].map(l=>e.jsx("button",{type:"button",onClick:()=>{const w=o.prompt||"",R=w&&!w.endsWith(",")&&!w.endsWith(", ")?", ":"";i({...o,prompt:w+R+l.token})},className:"px-3 py-1.5 bg-white/5 border border-white/10 rounded-lg text-[8px] font-black text-slate-400 uppercase tracking-widest hover:border-[#13ec80] hover:text-[#13ec80] transition-all",children:l.label},l.label))})]})]}),!k&&e.jsxs("div",{className:"space-y-4 pt-4 border-t border-[#1f2b24]",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest ml-1",children:"Real-World Outcomes (Recent Captures)"}),e.jsx("p",{className:"text-[8px] text-slate-600 font-bold uppercase tracking-[2px]",children:"Previsualización de ejecuciones reales con esta identidad"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[9px] font-black text-amber-500 uppercase tracking-widest",children:"Live Feed"}),e.jsx("div",{className:"size-1.5 rounded-full bg-amber-500 animate-pulse"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[c.allGenerations.filter(l=>l.style_id===u.id).slice(0,4).map((l,w)=>e.jsxs("div",{className:"aspect-square rounded-2xl overflow-hidden border border-white/5 bg-slate-900 group/outcome relative",children:[e.jsx("img",{src:l.image_url,className:"w-full h-full object-cover grayscale group-hover/outcome:grayscale-0 transition-all duration-700",alt:"Outcome"}),e.jsx("div",{className:"absolute inset-0 bg-blue-500/10 opacity-0 group-hover/outcome:opacity-100 transition-opacity"}),e.jsx("div",{className:"absolute bottom-1 right-1 opacity-0 group-hover/outcome:opacity-100 transition-opacity",children:e.jsx("button",{onClick:()=>window.open(l.image_url,"_blank"),className:"p-1 bg-black/60 rounded-md text-white",children:e.jsx("span",{className:"material-symbols-outlined !text-[12px]",children:"open_in_new"})})})]},w)),c.allGenerations.filter(l=>l.style_id===u.id).length===0&&e.jsx("div",{className:"col-span-4 h-24 rounded-2xl border border-dashed border-[#1f2b24] flex items-center justify-center",children:e.jsx("p",{className:"text-[9px] font-black text-slate-700 uppercase tracking-[2px]",children:"No hay ejecuciones recientes detectadas"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest ml-1",children:"Tactical Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:o.tags.map((l,w)=>e.jsxs("span",{className:"bg-white/5 border border-white/10 rounded-lg px-3 py-1.5 text-[10px] font-bold text-slate-300 flex items-center gap-2",children:[l.trim(),e.jsx("button",{onClick:()=>W(l),className:"text-slate-600 hover:text-white transition-colors",children:"×"})]},w))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{className:"flex-1 bg-[#121413] border border-[#1f2b24] rounded-2xl px-5 py-4 text-white outline-none focus:border-[#13ec80]",id:"new-tag-modal-input",placeholder:"Add tactical label...",onKeyDown:l=>{if(l.key==="Enter"){const w=l.target;Y(w.value.trim()),w.value=""}}}),e.jsx("button",{type:"button",onClick:()=>{const l=document.getElementById("new-tag-modal-input");Y(l.value.trim()),l.value=""},className:"bg-white/5 border border-white/10 text-white px-6 rounded-2xl font-black text-[10px] uppercase hover:bg-white/10 transition-all",children:"Add"})]})]}),e.jsxs("div",{className:"pt-8 flex gap-4",children:[e.jsx("button",{onClick:ue,disabled:j||N,className:"flex-1 py-6 bg-gradient-to-r from-orange-600 to-[#ff5500] text-white font-black rounded-[32px] text-xs tracking-[4px] shadow-[0_20px_40px_rgba(255,85,0,0.3)] hover:scale-[1.02] active:scale-95 transition-all uppercase italic disabled:opacity-50",children:j?"Sincronizando...":"Finalize Protocol Sync"}),!k&&h&&e.jsx("button",{onClick:()=>h(o.id),className:"px-6 border border-red-500/30 text-red-500 rounded-2xl font-black text-[10px] uppercase hover:bg-red-500/10 transition-all",disabled:j||N,children:"Purge"}),e.jsx("button",{onClick:x,className:"aspect-square w-16 bg-white/5 border border-white/10 rounded-[28px] flex items-center justify-center text-slate-500 hover:text-white transition-all",children:e.jsx("span",{className:"material-symbols-outlined",children:"query_stats"})})]})]})]})]})}):null},at=({isOpen:v,onClose:x,onConfirm:g,partnerName:h})=>e.jsx(ve,{children:v&&e.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-6 bg-black/80 backdrop-blur-md",children:e.jsxs(ne.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"bg-[#121413] border border-red-500/30 p-8 rounded-3xl w-full max-w-md shadow-[0_0_50px_rgba(239,68,68,0.2)] relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-red-500/10 blur-[60px] pointer-events-none"}),e.jsx("div",{className:"w-20 h-20 rounded-full bg-red-500/10 flex items-center justify-center text-red-500 mx-auto mb-6 border border-red-500/20",children:e.jsx("span",{className:"material-symbols-outlined !text-4xl",children:"warning"})}),e.jsxs("h3",{className:"text-2xl font-black text-white uppercase text-center mb-2 italic tracking-tighter",children:["Confirmar ",e.jsx("span",{className:"text-red-500",children:"Baja"})]}),e.jsxs("p",{className:"text-slate-400 text-sm text-center mb-8 px-4",children:["¿Estás seguro de que deseas dar de baja a ",e.jsx("span",{className:"text-white font-bold",children:h}),"?",e.jsx("br",{}),e.jsx("span",{className:"text-[10px] uppercase font-black text-red-500/60 tracking-[2px] mt-4 block p-2 bg-red-500/5 rounded-lg border border-red-500/10",children:"Esta acción desactivará su acceso de inmediato"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:x,className:"flex-1 py-4 text-[10px] font-black text-slate-500 hover:text-white transition-colors uppercase tracking-widest",children:"Cancelar"}),e.jsx("button",{onClick:g,className:"flex-1 py-4 bg-red-600 text-white font-black text-[10px] rounded-xl shadow-[0_10px_30px_rgba(220,38,38,0.2)] hover:scale-[1.05] active:scale-95 transition-all uppercase tracking-widest",children:"Confirmar Baja"})]})]})})}),xt=({onBack:v})=>{const[x,g]=m.useState("overview"),[h,y]=m.useState([]),[u,j]=m.useState([]),[C,c]=m.useState(!0),[k,o]=m.useState(!1),[i,N]=m.useState(null),[Q,Ne]=m.useState(1e3),[ue,Y]=m.useState(!1),[W,J]=m.useState(null),[te,l]=m.useState(""),[w,R]=m.useState(!1),[H,Ee]=m.useState({totalGenerations:0,totalPartners:0,totalCreditsSold:0,activeEvents:0,allGenerations:[]}),[O,Se]=m.useState({totalUsers:0,totalB2CCredits:0,totalB2CGenerations:0,topStyles:[],recentTransactions:[]}),[X,Pe]=m.useState({totalPartners:0,totalEvents:0,creditsInCirculation:0,avgConsumptionRate:0,topPartners:[]}),[be,Z]=m.useState(null),[se,oe]=m.useState(null),[Ae,ce]=m.useState(!1),[ae,Ie]=m.useState(!1),[q,re]=m.useState(null),[ee,ye]=m.useState({message:"",type:null}),f=(t,s="success")=>{ye({message:t,type:s}),setTimeout(()=>ye({message:"",type:null}),4e3)},[de,Le]=m.useState([]),[P,Re]=m.useState([]),[he,Ue]=m.useState(""),[E,Be]=m.useState("all"),[fe,Te]=m.useState("all");m.useEffect(()=>{A()},[]);const A=async()=>{try{c(!0);const[t,s,r,d,b,_]=await Promise.all([p.from("partners").select("*"),p.from("events").select("*"),p.from("profiles").select("*"),p.from("generations").select("id, created_at, style_id, event_id, user_id, image_url, events(event_name, partner_id), profiles(email)").order("created_at",{ascending:!1}).limit(200),p.from("styles_metadata").select("*"),p.from("identity_prompts").select("*")]);if(t.error)throw t.error;if(r.error)throw r.error;const D=t.data||[],B=r.data||[],G=s.data||[],$=d.data||[],z=B.filter(a=>a.role==="partner").filter(a=>!D.some(n=>{var S,I;return((S=n.contact_email)==null?void 0:S.toLowerCase())===((I=a.email)==null?void 0:I.toLowerCase())||n.user_id===a.id})).map(a=>({id:a.id,name:a.full_name||a.email.split("@")[0],business_name:a.full_name,contact_email:a.email,credits_total:a.credits||0,credits_used:a.total_generations||0,user_id:a.id,is_active:!0,is_from_profile:!0})),U=[...D,...z].map(a=>{const n=G.filter(S=>S.partner_id===a.id);return{...a,eventCount:n.length,activeEvents:n.filter(S=>S.is_active).length}});y(U);const M=B.filter(a=>a.role==="user"||!a.role);j(M);const V=(b==null?void 0:b.data)||[],xe=(_==null?void 0:_.data)||[],F=new Map;Je.forEach(a=>{const n=V.find(L=>L.id===a.id),S=xe.find(L=>L.id===a.id),I=V.find(L=>{var T,ie;return((T=L.id)==null?void 0:T.toLowerCase())===((ie=a.subCategory)==null?void 0:ie.toLowerCase())}),le=V.find(L=>{var T,ie;return((T=L.id)==null?void 0:T.toLowerCase())===((ie=a.category)==null?void 0:ie.toLowerCase())});let K=(le==null?void 0:le.is_active)===!1||(I==null?void 0:I.is_active)===!1;F.set(a.id,{id:a.id,label:(n==null?void 0:n.label)||a.title,category:(n==null?void 0:n.category)||a.category,subcategory:(n==null?void 0:n.subcategory)||a.subCategory,image_url:(n==null?void 0:n.image_url)||a.url,prompt:(S==null?void 0:S.master_prompt)||"",tags:(n==null?void 0:n.tags)||a.tags||[],is_premium:(n==null?void 0:n.is_premium)??a.isPremium,usage_count:(n==null?void 0:n.usage_count)||0,is_active:K?!1:(n==null?void 0:n.is_active)??!0,source:"static"})}),V.forEach(a=>{if(!(!a.label&&!a.image_url)&&!F.has(a.id)){const n=xe.find(K=>K.id===a.id),S=V.find(K=>{var L,T;return((L=K.id)==null?void 0:L.toLowerCase())===((T=a.subcategory)==null?void 0:T.toLowerCase())}),I=V.find(K=>{var L,T;return((L=K.id)==null?void 0:L.toLowerCase())===((T=a.category)==null?void 0:T.toLowerCase())});let le=(I==null?void 0:I.is_active)===!1||(S==null?void 0:S.is_active)===!1;F.set(a.id,{id:a.id,label:a.label||a.id,category:a.category||"General",subcategory:a.subcategory||"General",image_url:a.image_url||"/placeholder-style.jpg",prompt:(n==null?void 0:n.master_prompt)||"",tags:a.tags||[],is_premium:a.is_premium||!1,usage_count:a.usage_count||0,is_active:le?!1:a.is_active??!0,source:"db_metadata"})}});const Ve=Array.from(F.values()).filter(a=>{const n=["magia","urbano","superhéroes","series","sports","general","legacy","all","fantasy","cinema","f1","formula 1"],S=n.includes(a.id.toLowerCase())||n.includes((a.label||"").toLowerCase());return a.id&&!S});Re(Ve);const pe=U.reduce((a,n)=>a+(n.credits_total||0),0),ge=U.reduce((a,n)=>a+(n.credits_used||0),0),_e=M.reduce((a,n)=>a+(n.total_generations||0),0),Fe=ge+_e,We=G.filter(a=>a.is_active).length||0;Ee({totalGenerations:Fe,totalPartners:U.length,totalCreditsSold:pe,activeEvents:We,allGenerations:$});const He=M.reduce((a,n)=>a+(n.credits||0),0),Ke=_e,je={};$.forEach(a=>{a.style_id&&(je[a.style_id]=(je[a.style_id]||0)+1)});const Qe=Object.entries(je).map(([a,n])=>({id:a,count:n,label:a})).sort((a,n)=>n.count-a.count).slice(0,5);Se({totalUsers:M.length,totalB2CCredits:He,totalB2CGenerations:Ke,topStyles:Qe,recentTransactions:$.slice(0,5)});const Ye=pe>0?ge/pe*100:0;Pe({totalPartners:U.length,totalEvents:G.length,creditsInCirculation:pe-ge,avgConsumptionRate:Ye,topPartners:[...U].sort((a,n)=>(n.eventCount||0)-(a.eventCount||0)).slice(0,5)}),Le($.map(a=>{var n,S,I;return{id:a.id,type:"success",title:a.style_id?`AI Generation: ${a.style_id}`:"Generación Exitosa",text:a.event_id?`Evento: ${((n=a.events)==null?void 0:n.event_name)||"Desconocido"}`:"Uso Directo B2C",time:new Date(a.created_at).toLocaleString("es-AR",{hour:"2-digit",minute:"2-digit",second:"2-digit"}),event_id:a.event_id,partner_id:(S=a.events)==null?void 0:S.partner_id,email:((I=a.profiles)==null?void 0:I.email)||"Guest @ Event",cost:.12}}))}catch(t){console.error("Error fetching data:",t),f("Error al cargar datos: "+t.message,"error")}finally{c(!1)}},Ge=async t=>{if(W)try{R(!0);const{error:s}=await p.from("profiles").update({full_name:t.full_name,credits:Number(t.credits),unlocked_packs:t.unlocked_packs}).eq("id",W.id);if(s)throw s;f("Usuario actualizado correctamente"),J(null),A()}catch(s){console.error("Error updating user:",s),f("Error al actualizar usuario: "+s.message,"error")}finally{R(!1)}},$e=async t=>{try{R(!0);const{data:s}=await p.from("profiles").select("id").eq("email",t.email.toLowerCase()).maybeSingle();if(s){f("Este usuario ya existe en la base de datos.","info"),R(!1);return}const{error:r}=await p.from("profiles").insert({email:t.email.toLowerCase(),credits:Number(t.credits),unlocked_packs:t.unlocked_packs,role:"user"});if(r)throw r;f("Usuario B2C creado correctamente."),Y(!1),A()}catch(s){console.error("Error creating user:",s),f("Error al crear usuario: "+s.message,"error")}finally{R(!1)}},ze=async t=>{var s;try{c(!0);const{data:r}=await p.from("profiles").select("*").eq("email",t.email.toLowerCase()).maybeSingle();let d=r==null?void 0:r.id;if(!d){const{data:D,error:B}=await p.auth.signUp({email:t.email.toLowerCase(),password:t.password||"Partner123!"});if(B)throw B;d=(s=D.user)==null?void 0:s.id}if(!d)throw new Error("No se pudo obtener o crear el ID del usuario");await p.from("profiles").upsert({id:d,email:t.email.toLowerCase(),role:"partner",full_name:t.company_name},{onConflict:"id"});const b={company_name:t.company_name,contact_email:t.email.toLowerCase(),user_id:d,credits_total:Number(t.credits||1e3),credits_used:0,is_active:!0},{error:_}=await p.from("partners").insert(b);if(_)if(_.code==="23505")await p.from("partners").update(b).eq("contact_email",t.email.toLowerCase());else throw _;f("Partner creado con éxito."),o(!1),A()}catch(r){console.error("Error creating partner:",r),f("Error al crear partner: "+(r.message||"Error desconocido"),"error")}finally{c(!1)}},Me=async t=>{if(se)try{ce(!0);const{error:s}=await p.from("partners").update({company_name:t.company_name,contact_email:t.contact_email,contact_phone:t.contact_phone,is_active:t.is_active}).eq("id",se.id);if(s)throw s;f("Partner actualizado con éxito"),oe(null),A()}catch(s){console.error("Error updating partner:",s),f("Error al actualizar partner: "+s.message,"error")}finally{ce(!1)}},ke=async t=>{try{ce(!0);const s=h.find(d=>d.id===t);if(!s)throw new Error("Partner no encontrado");let r;if(s.is_from_profile){const{error:d}=await p.from("partners").insert({user_id:s.user_id||s.id,contact_email:s.contact_email,company_name:s.company_name||s.name||`Partner ${s.id.substring(0,8)}`,is_active:!1});r=d}else{const{error:d}=await p.from("partners").update({is_active:!1}).eq("id",s.id);r=d}if(r)throw r;f("Partner dado de baja correctamente"),oe(null),A()}catch(s){console.error("Error deactivating partner:",s),f("Error al desactivar partner: "+s.message,"error")}finally{ce(!1)}},Oe=async t=>{var r;const s=(r=t.target.files)==null?void 0:r[0];if(!s)return null;try{c(!0);const d=s.name.split(".").pop(),b=`styles-${Date.now()}.${d}`,_=`styles/${b}`,D=["public","styles","logos","generations"];let B=!1,G="",$="";for(const z of D)try{const{data:U,error:M}=await p.storage.from(z).upload(_,s,{upsert:!0});if(!M&&U){const{data:{publicUrl:F}}=p.storage.from(z).getPublicUrl(_);G=F,B=!0;break}const{data:V,error:xe}=await p.storage.from(z).upload(b,s,{upsert:!0});if(!xe&&V){const{data:{publicUrl:F}}=p.storage.from(z).getPublicUrl(b);G=F,B=!0;break}M&&($=M.message)}catch(U){$=U.message}return B?(f("Imagen vinculada al protocolo correctamente"),G):(f(`Falla de Almacenamiento: ${$||"Buckets no encontrados"}. Por favor creá el bucket 'public' en Supabase Storage.`,"error"),null)}catch(d){return console.error("Error uploading image:",d),f("Error al subir imagen: "+d.message,"error"),null}finally{c(!1)}},qe=async t=>{try{c(!0);const{error:s}=await p.from("styles_metadata").upsert({id:t.id,label:t.label,category:t.category,subcategory:t.subcategory,image_url:t.image_url,is_premium:t.is_premium,tags:Array.isArray(t.tags)?t.tags:(t.tags||"").split(",").map(r=>r.trim()).filter(Boolean),updated_at:new Date().toISOString()});if(s)throw s;if(t.prompt){const{error:r}=await p.from("identity_prompts").upsert({id:t.id,master_prompt:t.prompt,created_at:new Date().toISOString()});if(r)throw r}f("Estilo y Prompt actualizados correctamente"),Z(null),A()}catch(s){console.error("Error syncing style:",s),f("Error al sincronizar estilo: "+s.message,"error")}finally{c(!1)}},De=async t=>{if(i)try{c(!0);const s=h.find(r=>r.id===i.id);if(s)if(s.is_from_profile){const{error:r}=await p.from("profiles").update({credits:(s.credits_total||0)+t}).eq("id",s.id);if(r)throw r}else{const{error:r}=await p.from("partners").update({credits_total:(s.credits_total||0)+t}).eq("id",s.id);if(r)throw r.message.includes("credits_total")?new Error('La columna "credits_total" no existe en la tabla "partners".'):r;s.user_id&&await p.from("profiles").update({credits:(s.credits_total||0)+t}).eq("id",s.user_id)}else{const r=u.find(d=>d.id===i.id);if(r){const{error:d}=await p.from("profiles").update({credits:(r.credits||0)+t}).eq("id",r.id);if(d)throw d}}try{await p.from("wallet_transactions").insert({partner_id:i.id,amount:t,type:"top-up",description:"Recarga de créditos por Master Admin"})}catch(r){console.warn("Error recording wallet transaction:",r)}f("Créditos actualizados exitosamente"),N(null),A()}catch(s){console.error("Error al recargar créditos:",s),f("Error al recargar créditos: "+s.message,"error")}finally{c(!1)}};return e.jsxs("div",{className:"flex h-screen overflow-hidden bg-[#0a0c0b] text-slate-100 font-display relative",children:[e.jsx(Xe,{}),e.jsxs("aside",{className:"w-64 border-r border-[#1f2b24] bg-[#0a0c0b]/80 backdrop-blur-xl hidden md:flex flex-col z-20",children:[e.jsxs("div",{className:"p-6 border-b border-[#1f2b24] flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-[#13ec80] rounded flex items-center justify-center text-[#0a0c0b] shadow-[0_0_15px_rgba(19,236,128,0.4)]",children:e.jsx("span",{className:"material-symbols-outlined !text-[20px] font-bold",children:"visibility"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-sm font-bold tracking-tight text-white uppercase tracking-wider",children:"Eagle-Eye"}),e.jsx("p",{className:"text-[10px] text-[#13ec80]/70 uppercase font-medium tracking-[0.2em]",children:"Master Admin"})]})]}),e.jsxs("nav",{className:"flex-1 p-4 flex flex-col gap-1 overflow-y-auto custom-scrollbar",children:[e.jsx("p",{className:"px-3 py-2 text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"General"}),e.jsxs("button",{onClick:()=>g("overview"),className:`flex items-center gap-3 px-3 py-2 rounded-lg transition-all w-full text-left ${x==="overview"?"bg-[#13ec80]/10 text-[#13ec80] border border-[#13ec80]/20":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:[e.jsx("span",{className:"material-symbols-outlined",children:"dashboard"}),e.jsx("span",{className:"text-sm font-medium",children:"Vista General"})]}),e.jsxs("button",{onClick:()=>g("partners"),className:`flex items-center gap-3 px-3 py-2 rounded-lg transition-all w-full text-left ${x==="partners"?"bg-[#13ec80]/10 text-[#13ec80] border border-[#13ec80]/20":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:[e.jsx("span",{className:"material-symbols-outlined",children:"corporate_fare"}),e.jsx("span",{className:"text-sm font-medium",children:"Revendedores (SaaS)"})]}),e.jsxs("button",{onClick:()=>g("b2c"),className:`flex items-center gap-3 px-3 py-2 rounded-lg transition-all w-full text-left ${x==="b2c"?"bg-[#13ec80]/10 text-[#13ec80] border border-[#13ec80]/20":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:[e.jsx("span",{className:"material-symbols-outlined",children:"person"}),e.jsx("span",{className:"text-sm font-medium",children:"Usuarios App B2C"})]}),e.jsxs("button",{onClick:()=>g("styles"),className:`flex items-center gap-3 px-3 py-2 rounded-lg transition-all w-full text-left ${x==="styles"?"bg-[#13ec80]/10 text-[#13ec80] border border-[#13ec80]/20":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:[e.jsx("span",{className:"material-symbols-outlined",children:"auto_fix_high"}),e.jsx("span",{className:"text-sm font-medium",children:"Motor de Estilos IA"})]}),e.jsx("p",{className:"px-3 py-2 mt-4 text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Sistema"}),e.jsxs("button",{onClick:()=>g("settings"),className:`flex items-center gap-3 px-3 py-2 rounded-lg transition-all w-full text-left ${x==="settings"?"bg-[#13ec80]/10 text-[#13ec80] border border-[#13ec80]/20":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:[e.jsx("span",{className:"material-symbols-outlined",children:"settings"}),e.jsx("span",{className:"text-sm font-medium",children:"Ajustes"})]}),e.jsxs("button",{onClick:()=>g("logs"),className:`flex items-center gap-3 px-3 py-2 rounded-lg transition-all w-full text-left ${x==="logs"?"bg-[#13ec80]/10 text-[#13ec80] border border-[#13ec80]/20":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:[e.jsx("span",{className:"material-symbols-outlined",children:"terminal"}),e.jsx("span",{className:"text-sm font-medium",children:"Visor de Registros"})]})]}),e.jsxs("div",{className:"p-4 border-t border-[#1f2b24] bg-[#121413]/50",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-[#13ec80]/20 flex items-center justify-center border border-[#13ec80]/40",children:e.jsx("span",{className:"material-symbols-outlined !text-[18px]",children:"person"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-bold text-white truncate",children:"Admin_Root"}),e.jsx("p",{className:"text-[10px] text-slate-500 truncate",children:"Platform Owner"})]})]}),e.jsxs("button",{onClick:v,className:"w-full mt-2 py-2 flex items-center justify-center gap-2 text-xs font-bold text-slate-400 hover:text-white hover:bg-white/5 rounded-lg transition-all",children:[e.jsx("span",{className:"material-symbols-outlined !text-sm",children:"logout"})," Salir del Panel"]})]})]}),e.jsxs("main",{className:"flex-1 flex flex-col min-w-0 bg-[#0a0c0b]/50 backdrop-blur-sm z-10 transition-all duration-500 overflow-y-auto custom-scrollbar",children:[e.jsxs("header",{className:"h-16 border-b border-[#1f2b24] flex items-center justify-between px-8 bg-[#121413]/30 backdrop-blur-md sticky top-0 z-30",children:[e.jsxs("div",{className:"flex-1 max-w-2xl relative",children:[e.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-slate-500 !text-[18px]",children:"search"}),e.jsx("input",{className:"w-full bg-[#121413] border border-[#1f2b24] rounded-lg pl-10 pr-4 py-2 text-sm text-slate-200 focus:ring-1 focus:ring-[#13ec80] focus:border-[#13ec80] placeholder-slate-600 transition-all outline-none",placeholder:"Buscar en el motor...",type:"text"})]}),e.jsxs("div",{className:"flex items-center gap-4 ml-6",children:[e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase",children:"Hora del Sistema"}),e.jsxs("p",{className:"text-xs font-mono text-[#13ec80] leading-tight",children:[new Date().toLocaleTimeString("es-AR",{hour12:!1})," UTC"]})]}),e.jsx("div",{className:"h-8 w-px bg-[#1f2b24]"}),e.jsxs("button",{className:"relative p-2 text-slate-400 hover:text-white transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined",children:"notifications"}),e.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 bg-[#13ec80] rounded-full border-2 border-[#0a0c0b]"})]})]})]}),e.jsxs("div",{className:"p-8",children:[x==="overview"&&e.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"flex justify-between items-end mb-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black text-white tracking-tight uppercase",children:"Centro de Mando Ejecutivo"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Resumen táctico del ecosistema Metalab Creative Labs"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx("button",{onClick:()=>A(),className:"p-3 bg-white/5 border border-white/10 rounded-lg text-slate-400 hover:text-[#13ec80] transition-colors",children:e.jsx("span",{className:"material-symbols-outlined !text-xl",children:"sync"})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e.jsx(me,{label:"Ingresos Estimados",value:`$${(H.totalCreditsSold*.1).toLocaleString()}`,trend:"+15.2%",color:"#13ec80",icon:"payments"}),e.jsx(me,{label:"Generaciones Totales",value:H.totalGenerations.toLocaleString(),trend:"+8.4%",color:"#3b82f6",icon:"auto_awesome"}),e.jsx(me,{label:"Cuentas Activas",value:(O.totalUsers+X.totalPartners).toLocaleString(),color:"#f59e0b",icon:"hub"}),e.jsx(me,{label:"Eficiencia Motor",value:"99.8%",status:"OPERATIVO",color:"#13ec80",icon:"monitoring"})]}),e.jsxs("div",{className:"bg-[#121413] border border-[#1f2b24] rounded-[32px] p-8 mb-8 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute -right-20 -top-20 w-64 h-64 bg-[#13ec80]/5 blur-[100px] rounded-full pointer-events-none"}),e.jsxs("div",{className:"flex items-center justify-between mb-8 relative z-10",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-black text-white uppercase tracking-widest italic",children:"Actividad de Red Global"}),e.jsx("p",{className:"text-[10px] text-slate-500 uppercase font-bold mt-1 tracking-tighter",children:"Fotos creadas por día (Últimos 7 días)"})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"size-2 rounded-full bg-[#13ec80] animate-pulse"}),e.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Live Pulse"})]})})]}),e.jsx("div",{className:"h-40 flex items-end gap-3 px-2 relative z-10",children:Array.from({length:7}).map((t,s)=>{const r=new Date;r.setDate(r.getDate()-(6-s));const d=r.toISOString().split("T")[0],b=H.allGenerations.filter(G=>G.created_at.startsWith(d)).length,_=Array.from({length:7}).map((G,$)=>{const z=new Date;z.setDate(z.getDate()-(6-$));const U=z.toISOString().split("T")[0];return H.allGenerations.filter(M=>M.created_at.startsWith(U)).length}),D=Math.max(..._,1),B=b/D*100;return e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-4 group/bar",children:[e.jsxs("div",{className:"w-full relative h-[120px] flex items-end",children:[e.jsx(ne.div,{initial:{height:0},animate:{height:`${Math.max(B,5)}%`},transition:{duration:1,delay:s*.1,ease:"circOut"},className:`w-full rounded-t-xl transition-all duration-300 group-hover/bar:brightness-125 relative ${b>0?"bg-gradient-to-t from-[#0e5233] to-[#13ec80]":"bg-white/5"}`,children:b>0&&e.jsx("div",{className:"absolute inset-0 bg-white/20 opacity-0 group-hover/bar:opacity-100 transition-opacity rounded-t-xl"})}),b>0&&e.jsxs("div",{className:"absolute -top-10 left-1/2 -translate-x-1/2 bg-[#13ec80] text-[#0a0c0b] text-[9px] font-black px-3 py-1.5 rounded-lg opacity-0 group-hover/bar:opacity-100 transition-all scale-75 group-hover/bar:scale-100 whitespace-nowrap z-20 shadow-[0_5px_15px_rgba(19,236,128,0.4)]",children:[b," GENS"]})]}),e.jsx("span",{className:"text-[9px] font-black text-slate-600 uppercase tracking-widest group-hover/bar:text-slate-300 transition-colors",children:r.toLocaleDateString("es-AR",{weekday:"short"})})]},s)})})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-12 gap-8",children:[e.jsxs("div",{className:"xl:col-span-8 space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-[#121413] border border-[#1f2b24] rounded-2xl p-6 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-blue-500 opacity-50"}),e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-black uppercase text-sm tracking-tight mb-1",children:"Segmento B2C"}),e.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest",children:"Consumo en App Pública"})]}),e.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-500/10 flex items-center justify-center text-blue-400",children:e.jsx("span",{className:"material-symbols-outlined",children:"person"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase mb-1",children:"Usuarios"}),e.jsx("p",{className:"text-xl font-black text-white",children:O.totalUsers})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase mb-1",children:"Gens"}),e.jsx("p",{className:"text-xl font-black text-white",children:O.totalB2CGenerations})]})]}),e.jsx("button",{onClick:()=>g("b2c"),className:"w-full mt-6 py-2 border border-blue-500/20 bg-blue-500/5 text-blue-400 text-[10px] font-black uppercase rounded-lg hover:bg-blue-500/10 transition-colors",children:"Gestionar B2C"})]}),e.jsxs("div",{className:"bg-[#121413] border border-[#1f2b24] rounded-2xl p-6 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-[#13ec80] opacity-50"}),e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-black uppercase text-sm tracking-tight mb-1",children:"Red de Partners"}),e.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest",children:"SaaS & B2B Events"})]}),e.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#13ec80]/10 flex items-center justify-center text-[#13ec80]",children:e.jsx("span",{className:"material-symbols-outlined",children:"corporate_fare"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase mb-1",children:"Agencias"}),e.jsx("p",{className:"text-xl font-black text-white",children:X.totalPartners})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase mb-1",children:"Eventos"}),e.jsx("p",{className:"text-xl font-black text-white",children:X.totalEvents})]})]}),e.jsx("button",{onClick:()=>g("partners"),className:"w-full mt-6 py-2 border border-[#13ec80]/20 bg-[#13ec80]/5 text-[#13ec80] text-[10px] font-black uppercase rounded-lg hover:bg-[#13ec80]/10 transition-colors",children:"Ecosistema SaaS"})]})]}),e.jsxs("div",{className:"bg-[#121413] border border-[#1f2b24] rounded-2xl p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-white font-black uppercase text-sm tracking-tight",children:"👑 Ranking Global de Estilos"}),e.jsx("span",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest",children:"Rendimiento por IA Identity"})]}),e.jsx("div",{className:"space-y-4",children:O.topStyles.slice(0,4).map((t,s)=>{var r;return e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"w-8 h-8 rounded bg-white/5 border border-white/10 flex items-center justify-center text-xs font-black text-slate-500",children:["#",s+1]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between text-xs font-bold mb-1",children:[e.jsx("span",{className:"text-white",children:t.id}),e.jsxs("span",{className:"text-[#13ec80]",children:[t.count.toLocaleString()," gens"]})]}),e.jsx("div",{className:"h-1.5 w-full bg-[#0a0c0b] rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-[#13ec80]",style:{width:`${t.count/(((r=O.topStyles[0])==null?void 0:r.count)||1)*100}%`}})})]})]},s)})})]}),e.jsxs("div",{className:"bg-[#121413] border border-[#1f2b24] rounded-2xl p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 text-[#13ec80]",children:[e.jsx("h3",{className:"text-white font-black uppercase text-sm tracking-tight",children:"🏢 Ranking Facturación (SaaS)"}),e.jsx("span",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest",children:"Top Partners por Créditos"})]}),e.jsx("div",{className:"space-y-3",children:h.sort((t,s)=>(s.credits_total||0)-(t.credits_total||0)).slice(0,5).map((t,s)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/5 border border-white/5 rounded-xl group hover:border-[#13ec80]/30 transition-all",children:[e.jsxs("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-[#13ec80]/20 to-transparent flex items-center justify-center text-[10px] font-black text-[#13ec80] border border-[#13ec80]/20 shrink-0",children:["#",s+1]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("h4",{className:"text-[11px] font-black text-white uppercase truncate tracking-tight",children:t.company_name||t.name}),e.jsx("span",{className:"text-[10px] font-bold text-slate-400 font-mono",children:(t.credits_total||0).toLocaleString()})]}),e.jsx("div",{className:"w-full h-1 bg-white/5 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-[#13ec80] to-[#13ec80]/50",style:{width:`${Math.min(100,(t.credits_used||0)/Math.max(1,t.credits_total||1)*100)}%`}})})]})]},s))})]})]}),e.jsxs("div",{className:"xl:col-span-4 space-y-8",children:[e.jsx("div",{className:"h-[400px]",children:e.jsx(rt,{logs:de})}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500/10 to-transparent border border-purple-500/20 rounded-2xl p-6",children:[e.jsx("h3",{className:"text-white font-black uppercase text-sm tracking-tight mb-4",children:"Acciones Rápidas"}),e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsxs("button",{onClick:()=>{Z("new"),g("styles")},className:"flex items-center gap-3 p-3 bg-white/5 rounded-xl hover:bg-white/10 transition-all text-left group",children:[e.jsx("span",{className:"material-symbols-outlined text-purple-400",children:"auto_fix_high"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-white",children:"Inyectar Estilo"}),e.jsx("p",{className:"text-[9px] text-slate-500 uppercase",children:"Nueva identidad IA"})]})]}),e.jsxs("button",{onClick:()=>{o(!0),g("partners")},className:"flex items-center gap-3 p-3 bg-white/5 rounded-xl hover:bg-white/10 transition-all text-left group",children:[e.jsx("span",{className:"material-symbols-outlined text-amber-400",children:"add_business"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-white",children:"Onboarding Partner"}),e.jsx("p",{className:"text-[9px] text-slate-500 uppercase",children:"Nuevo contrato SaaS"})]})]})]})]})]})]})]}),x==="partners"&&e.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"flex justify-between items-end mb-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black text-white tracking-tight uppercase",children:"Resellers Management (SaaS)"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Control total sobre tu red de agencias y eventos"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{onClick:()=>Ie(!ae),className:`px-4 py-3 rounded-lg font-bold text-xs transition-all flex items-center gap-2 border ${ae?"border-[#13ec80] text-[#13ec80] bg-[#13ec80]/10":"border-[#1f2b24] text-slate-500"}`,children:[e.jsx("span",{className:"material-symbols-outlined !text-sm",children:ae?"visibility":"visibility_off"}),ae?"OCULTAR INACTIVOS":"VER INACTIVOS"]}),e.jsxs("button",{onClick:()=>o(!0),className:"bg-[#13ec80] text-[#0a0c0b] px-6 py-3 rounded-lg font-bold flex items-center gap-2 hover:scale-[1.02] transition-all shadow-[0_0_20px_rgba(19,236,128,0.3)]",children:[e.jsx("span",{className:"material-symbols-outlined",children:"add"})," New Reseller"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[e.jsxs("div",{className:"bg-[#121413] p-5 border border-[#1f2b24] rounded-xl relative overflow-hidden group",children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase mb-2",children:"Partners Activos"}),e.jsx("h3",{className:"text-2xl font-black text-white",children:h.filter(t=>t.is_active!==!1).length}),e.jsx("div",{className:"absolute top-0 right-0 w-12 h-12 bg-[#13ec80]/10 rounded-bl-full flex items-center justify-center translate-x-4 -translate-y-4 group-hover:translate-x-2 group-hover:-translate-y-2 transition-transform",children:e.jsx("span",{className:"material-symbols-outlined text-[#13ec80] !text-sm",children:"handshake"})})]}),e.jsxs("div",{className:"bg-[#121413] p-5 border border-[#1f2b24] rounded-xl relative overflow-hidden group",children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase mb-2",children:"Total Eventos Red"}),e.jsx("h3",{className:"text-2xl font-black text-[#13ec80]",children:X.totalEvents}),e.jsx("div",{className:"absolute top-0 right-0 w-12 h-12 bg-blue-500/10 rounded-bl-full flex items-center justify-center translate-x-4 -translate-y-4 group-hover:translate-x-2 group-hover:-translate-y-2 transition-transform",children:e.jsx("span",{className:"material-symbols-outlined text-blue-500 !text-sm",children:"event"})})]}),e.jsxs("div",{className:"bg-[#121413] p-5 border border-[#1f2b24] rounded-xl relative overflow-hidden group",children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase mb-2",children:"Créditos en Canales"}),e.jsx("h3",{className:"text-2xl font-black text-blue-400",children:(X.creditsInCirculation||0).toLocaleString()}),e.jsx("div",{className:"absolute top-0 right-0 w-12 h-12 bg-purple-500/10 rounded-bl-full flex items-center justify-center translate-x-4 -translate-y-4 group-hover:translate-x-2 group-hover:-translate-y-2 transition-transform",children:e.jsx("span",{className:"material-symbols-outlined text-purple-500 !text-sm",children:"account_balance_wallet"})})]}),e.jsxs("div",{className:"bg-[#121413] p-5 border border-[#1f2b24] rounded-xl relative overflow-hidden group",children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase mb-2",children:"Ratio de Consumo"}),e.jsxs("h3",{className:"text-2xl font-black text-amber-400",children:[X.avgConsumptionRate.toFixed(1),"%"]}),e.jsx("div",{className:"absolute top-0 right-0 w-12 h-12 bg-amber-500/10 rounded-bl-full flex items-center justify-center translate-x-4 -translate-y-4 group-hover:translate-x-2 group-hover:-translate-y-2 transition-transform",children:e.jsx("span",{className:"material-symbols-outlined text-amber-500 !text-sm",children:"trending_up"})})]})]}),e.jsx("div",{className:"bg-[#121413] border border-[#1f2b24] rounded-xl overflow-hidden shadow-2xl",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-[#0a0c0b] border-b border-[#1f2b24]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Partner / Agencia"}),e.jsx("th",{className:"px-6 py-4 text-[10px] font-bold text-slate-400 uppercase tracking-widest text-center",children:"Eventos"}),e.jsx("th",{className:"px-6 py-4 text-[10px] font-bold text-slate-400 uppercase tracking-widest text-center",children:"Billetera"}),e.jsx("th",{className:"px-6 py-4 text-[10px] font-bold text-slate-400 uppercase tracking-widest text-center",children:"Configuración"}),e.jsx("th",{className:"px-6 py-4 text-[10px] font-bold text-slate-400 uppercase tracking-widest text-right",children:"Acciones"})]})}),e.jsx("tbody",{className:"divide-y divide-[#1f2b24]/50",children:h.filter(t=>ae?!0:t.is_active!==!1).map(t=>{var d,b,_;const s=t.is_active===!1,r=((d=t.config)==null?void 0:d.primary_color)||((b=t.config)==null?void 0:b.logo_url);return e.jsxs("tr",{className:`hover:bg-white/[0.02] transition-colors group ${s?"opacity-50 grayscale":""}`,children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-[#13ec80]/20 to-transparent flex items-center justify-center text-[#13ec80] font-black border border-[#13ec80]/20 shadow-inner",children:(t.company_name||t.name||t.contact_email||"P")[0].toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-white group-hover:text-[#13ec80] transition-colors",children:t.company_name||t.name||((_=t.contact_email)==null?void 0:_.split("@")[0])||"Partner Sin Nombre"}),e.jsxs("p",{className:"text-[10px] text-slate-500 font-mono flex items-center gap-1",children:[e.jsx("span",{className:"w-1 h-1 rounded-full bg-[#13ec80]"}),t.contact_email]}),s&&e.jsx("span",{className:"mt-1 px-2 py-0.5 bg-red-500/10 text-red-500 text-[8px] font-black uppercase rounded border border-red-500/20 inline-block tracking-tighter",children:"Inactivo / De Baja"})]})]})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-sm font-bold text-white",children:t.eventCount||0}),e.jsx("span",{className:"text-[10px] text-slate-500 uppercase tracking-tighter",children:"Eventos creados"})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono text-white text-sm font-bold",children:((t.credits_total||0)-(t.credits_used||0)).toLocaleString()}),e.jsxs("span",{className:"text-[10px] text-slate-600",children:["/ ",(t.credits_total||0).toLocaleString()]})]}),e.jsx("div",{className:"w-24 h-1 bg-[#1f2b24] rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-[#13ec80]",style:{width:`${Math.min(100,t.credits_used/(t.credits_total||1)*100)}%`}})})]})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("span",{title:"Branding Configurado",className:`material-symbols-outlined !text-sm ${r?"text-blue-400":"text-white/10"}`,children:"palette"}),e.jsx("span",{title:"Subdominio Activo",className:"material-symbols-outlined !text-sm text-[#13ec80]",children:"language"}),e.jsx("span",{title:"Soporte VIP",className:"material-symbols-outlined !text-sm text-amber-400",children:"verified"})]})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>N({id:t.id,name:t.company_name||t.name}),className:"text-[10px] font-black text-[#13ec80] border border-[#13ec80]/30 px-4 py-2 rounded-lg hover:bg-[#13ec80]/10 transition-all flex items-center gap-2",children:"RECARGAR"}),e.jsx("button",{onClick:()=>{oe(t)},className:"w-8 h-8 flex items-center justify-center rounded-lg text-slate-500 hover:text-white hover:bg-white/5 transition-all",children:e.jsx("span",{className:"material-symbols-outlined !text-lg",children:"settings"})})]})})]},t.id)})})]})})]}),x==="b2c"&&e.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end mb-10 gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-3xl font-black text-white uppercase tracking-tight italic",children:["Active Operatives ",e.jsxs("span",{className:"text-[#13ec80]",children:["(",u.length,")"]})]}),e.jsx("p",{className:"text-slate-500 text-sm font-bold uppercase tracking-widest mt-1",children:"Gestión de identidades y créditos de la red pública"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 w-full md:w-auto",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ce,{className:"w-4 h-4 text-slate-500 absolute left-4 top-1/2 -translate-y-1/2"}),e.jsx("input",{type:"text",placeholder:"Buscar por email...",value:te,onChange:t=>l(t.target.value),className:"bg-[#121413] border border-[#1f2b24] rounded-2xl pl-12 pr-6 py-3 text-sm text-white focus:border-[#13ec80] outline-none w-full md:w-64 transition-all"})]}),e.jsxs("button",{onClick:()=>Y(!0),className:"bg-blue-600 text-white px-8 py-3 rounded-2xl font-black text-xs uppercase tracking-widest flex items-center justify-center gap-3 hover:scale-[1.05] transition-all shadow-[0_10px_30px_rgba(37,99,235,0.3)]",children:[e.jsx("span",{className:"material-symbols-outlined !text-lg",children:"person_add"})," Enrolar Usuario"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-4 gap-8",children:[e.jsx("div",{className:"xl:col-span-3",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:u.filter(t=>t.email.toLowerCase().includes(te.toLowerCase())).sort((t,s)=>(s.total_generations||0)-(t.total_generations||0)).map(t=>{var s,r,d;return e.jsxs("div",{className:"bg-[#121413] border border-[#1f2b24] rounded-[32px] p-6 hover:border-[#13ec80]/30 transition-all group relative overflow-hidden",children:[e.jsxs("div",{className:"flex items-start justify-between mb-6 relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-[#13ec80]/20 to-blue-500/20 flex items-center justify-center border border-white/5",children:e.jsx("span",{className:"text-xl font-black text-white uppercase",children:((s=t.full_name)==null?void 0:s[0])||t.email[0]})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-black text-white group-hover:text-[#13ec80] transition-colors line-clamp-1",children:t.full_name||t.email.split("@")[0]}),e.jsx("p",{className:"text-[10px] text-slate-500 font-mono italic",children:t.email})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>J(t),className:"w-8 h-8 rounded-full bg-white/5 border border-white/10 flex items-center justify-center text-slate-500 hover:text-white hover:bg-[#13ec80]/20 transition-all",children:e.jsx("span",{className:"material-symbols-outlined !text-sm",children:"edit"})}),e.jsx("button",{onClick:()=>N({id:t.id,name:t.email}),className:"px-3 h-8 rounded-full bg-[#13ec80]/10 border border-[#13ec80]/20 text-[#13ec80] text-[9px] font-black uppercase tracking-tighter hover:bg-[#13ec80] hover:text-black transition-all",children:"Saldo"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6 relative z-10",children:[e.jsxs("div",{className:"bg-white/5 border border-white/5 rounded-2xl p-4",children:[e.jsx("p",{className:"text-[8px] font-black text-slate-500 uppercase tracking-widest mb-1",children:"Balance Disponible"}),e.jsxs("p",{className:"text-lg font-black text-[#13ec80]",children:[((r=t.credits)==null?void 0:r.toLocaleString())||0," pts"]})]}),e.jsxs("div",{className:"bg-white/5 border border-white/5 rounded-2xl p-4",children:[e.jsx("p",{className:"text-[8px] font-black text-slate-500 uppercase tracking-widest mb-1",children:"Generaciones"}),e.jsx("p",{className:"text-lg font-black text-white",children:t.total_generations||0})]})]}),e.jsxs("div",{className:"space-y-4 relative z-10",children:[e.jsx("div",{className:"flex flex-wrap gap-1.5",children:(t.unlocked_packs||[]).length>0?(d=t.unlocked_packs)==null?void 0:d.map(b=>e.jsx("span",{className:"text-[8px] px-2 py-0.5 bg-blue-500/10 border border-blue-500/20 text-blue-400 rounded-md font-black uppercase tracking-tighter",children:b},b)):e.jsx("span",{className:"text-[8px] text-slate-700 font-black uppercase italic tracking-widest",children:"No active packs"})}),e.jsx("div",{className:"w-full h-1 bg-white/5 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-[#13ec80]",style:{width:`${Math.min(100,(t.total_generations||0)*2)}%`}})})]}),e.jsx("div",{className:"absolute -right-4 -bottom-4 w-32 h-32 bg-[#13ec80]/5 blur-[60px] rounded-full group-hover:bg-[#13ec80]/10 transition-colors pointer-events-none"})]},t.id)})})}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-[#121413] border border-[#1f2b24] rounded-[32px] p-8",children:[e.jsxs("h3",{className:"text-xs font-black text-white uppercase tracking-[4px] mb-8 flex items-center gap-3",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-[#13ec80] animate-pulse"}),"Market Analysis"]}),e.jsx("div",{className:"space-y-6",children:O.topStyles.slice(0,5).map((t,s)=>{var r;return e.jsxs("div",{className:"group",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest group-hover:text-white transition-colors",children:t.id}),e.jsxs("span",{className:"text-[10px] font-mono font-bold text-[#13ec80]",children:[t.count," GENS"]})]}),e.jsx("div",{className:"w-full h-1.5 bg-white/5 rounded-full overflow-hidden border border-white/5",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-[#13ec80] to-[#13ec80]/40 transition-all duration-1000",style:{width:`${t.count/(((r=O.topStyles[0])==null?void 0:r.count)||1)*100}%`}})})]},t.id)})})]}),e.jsx("div",{className:"bg-gradient-to-br from-[#13ec80]/20 to-blue-600/10 border border-[#13ec80]/30 rounded-[32px] p-8 shadow-[0_20px_50px_rgba(19,236,128,0.1)] relative overflow-hidden",children:e.jsxs("div",{className:"relative z-10",children:[e.jsx("h3",{className:"text-xs font-black text-white uppercase tracking-[4px] mb-2 font-black italic",children:"Network Load"}),e.jsxs("p",{className:"text-[11px] text-slate-300 leading-relaxed font-bold mb-6 italic opacity-80",children:["B2C SEGMENT REPRESENTS ",e.jsxs("span",{className:"text-[#13ec80]",children:[Math.min(100,O.totalB2CGenerations/Math.max(1,H.totalGenerations)*100).toFixed(1),"%"]})," OF TOTAL OPS."]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex-1 h-3 bg-black/40 rounded-full overflow-hidden p-0.5 border border-white/5",children:e.jsx("div",{className:"h-full bg-[#13ec80] rounded-full shadow-[0_0_15px_#13ec80]",style:{width:`${O.totalB2CGenerations/Math.max(1,H.totalGenerations)*100}%`}})}),e.jsx("span",{className:"text-[10px] font-mono font-black text-[#13ec80] tracking-tighter",children:"SECURED"})]})]})})]})]})]}),x==="styles"&&e.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end mb-8 gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-black text-white tracking-tight uppercase",children:["Identity Repository ",e.jsxs("span",{className:"text-[#13ec80]",children:["(",P.length,")"]})]}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Protocolo de gestión de identidades y mallas IA Maestro"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 w-full md:w-auto",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ce,{className:"w-4 h-4 text-slate-500 absolute left-3 top-1/2 -translate-y-1/2"}),e.jsx("input",{type:"text",placeholder:"Buscar identidad...",value:he,onChange:t=>Ue(t.target.value),className:"bg-[#121413] border border-[#1f2b24] rounded-xl pl-10 pr-4 py-2 text-sm text-white focus:border-[#13ec80] outline-none w-full md:w-64 transition-all"})]}),e.jsxs("button",{onClick:()=>{Z("new")},className:"bg-[#13ec80] text-[#0a0c0b] px-6 py-2 rounded-xl font-bold flex items-center justify-center gap-2 hover:scale-[1.02] transition-all shadow-[0_0_20px_rgba(19,236,128,0.3)]",children:[e.jsx("span",{className:"material-symbols-outlined",children:"add_box"})," Nueva Identidad"]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-8",children:[e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 no-scrollbar",children:["all",...Array.from(new Set(P.map(t=>{var s;return(s=t.category)==null?void 0:s.toLowerCase()}).filter(Boolean)))].map(t=>e.jsx("button",{onClick:()=>Be(t),className:`px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest transition-all whitespace-nowrap ${E===t?"bg-[#13ec80] text-black shadow-[0_0_15px_rgba(19,236,128,0.3)]":"bg-white/5 text-slate-500 border border-white/10 hover:border-white/20"}`,children:t==="all"?"Todas / All":t},t))}),E!=="all"&&e.jsxs("div",{className:"flex items-center gap-3 bg-white/5 border border-white/10 rounded-2xl px-4 py-2 animate-in zoom-in-95 duration-300",children:[e.jsxs("span",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest",children:["Grupo ",E,":"]}),e.jsxs("button",{onClick:async()=>{const s=!P.filter(r=>{var d;return((d=r.category)==null?void 0:d.toLowerCase())===E}).every(r=>r.is_active);try{c(!0);const{error:r}=await p.from("styles_metadata").update({is_active:s}).ilike("category",E);if(r)throw r;const{error:d}=await p.from("styles_metadata").upsert({id:E.toLowerCase(),is_active:s,category:E},{onConflict:"id"});if(d)throw d;f(`Categoría ${s?"activada":"ocultada"} correctamente`),A()}catch(r){f("Error: "+r.message,"error")}finally{c(!1)}},className:`flex items-center gap-2 px-3 py-1 rounded-lg text-[9px] font-black uppercase transition-all ${P.filter(t=>{var s;return((s=t.category)==null?void 0:s.toLowerCase())===E}).every(t=>t.is_active)?"bg-[#13ec80]/10 text-[#13ec80] border border-[#13ec80]/30 hover:bg-[#13ec80]/20":"bg-slate-500/10 text-slate-400 border border-slate-500/30 hover:bg-slate-500/20"}`,children:[e.jsx("span",{className:"material-symbols-outlined !text-sm",children:P.filter(t=>{var s;return((s=t.category)==null?void 0:s.toLowerCase())===E}).every(t=>t.is_active)?"visibility":"visibility_off"}),P.filter(t=>{var s;return((s=t.category)==null?void 0:s.toLowerCase())===E}).every(t=>t.is_active)?"Hide Category":"Show Category"]})]})]}),E!=="all"&&e.jsx("div",{className:"flex flex-wrap items-center gap-4 mb-8 pl-4 border-l-2 border-[#13ec80]/20 animate-in slide-in-from-left-4 duration-500",children:e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 no-scrollbar",children:Array.from(new Set(P.filter(t=>{var s;return((s=t.category)==null?void 0:s.toLowerCase())===E}).map(t=>t.subcategory).filter(Boolean))).map(t=>e.jsxs("button",{className:"px-3 py-1.5 rounded-xl text-[9px] font-black uppercase tracking-widest bg-white/5 text-slate-400 border border-white/10 hover:border-[#13ec80]/30 transition-all flex items-center gap-2 group/sub",children:[t,e.jsx("div",{onClick:async s=>{s.stopPropagation();const d=!P.filter(b=>{var _;return b.subcategory===t&&((_=b.category)==null?void 0:_.toLowerCase())===E}).every(b=>b.is_active);try{c(!0);const{error:b}=await p.from("styles_metadata").update({is_active:d}).eq("subcategory",t).ilike("category",E);if(b)throw b;const{error:_}=await p.from("styles_metadata").upsert({id:t.toLowerCase(),is_active:d,subcategory:t,category:E},{onConflict:"id"});if(_)throw _;f(`Subcategoría ${d?"activada":"ocultada"} correctamente`),A()}catch(b){f("Error: "+b.message,"error")}finally{c(!1)}},className:`w-5 h-5 rounded-full flex items-center justify-center transition-all ${P.filter(s=>{var r;return s.subcategory===t&&((r=s.category)==null?void 0:r.toLowerCase())===E}).every(s=>s.is_active)?"bg-[#13ec80]/10 text-[#13ec80] hover:bg-[#13ec80]/20":"bg-red-500/10 text-red-500 hover:bg-red-500/20"}`,title:P.filter(s=>{var r;return s.subcategory===t&&((r=s.category)==null?void 0:r.toLowerCase())===E}).every(s=>s.is_active)?"Ocultar Subcategoría":"Mostrar Subcategoría",children:e.jsx("span",{className:"material-symbols-outlined !text-[12px]",children:P.filter(s=>{var r;return s.subcategory===t&&((r=s.category)==null?void 0:r.toLowerCase())===E}).every(s=>s.is_active)?"visibility":"visibility_off"})})]},t))})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:P.filter(t=>{var d;const s=(t.label||"").toLowerCase().includes(he.toLowerCase())||(t.id||"").toLowerCase().includes(he.toLowerCase()),r=E==="all"||((d=t.category)==null?void 0:d.toLowerCase())===E;return s&&r}).map(t=>e.jsxs("div",{className:"bg-[#121413] border border-[#1f2b24] rounded-[32px] overflow-hidden group hover:border-[#13ec80]/50 transition-all cursor-pointer relative",children:[e.jsx("button",{onClick:async s=>{if(s.stopPropagation(),confirm(`🚨 PURGA CRÍTICA: ¿Estás seguro de eliminar "${t.id}" definitivamente?`))try{c(!0),await Promise.all([p.from("styles_metadata").delete().eq("id",t.id),p.from("identity_prompts").delete().eq("id",t.id)]),f("Identidad purgada del sistema"),A()}catch(r){f("Error al purgar: "+r.message,"error")}finally{c(!1)}},className:"absolute top-4 right-4 z-20 w-8 h-8 rounded-full bg-red-500/10 border border-red-500/20 text-red-500 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all hover:bg-red-500 hover:text-white",title:"Purgar Identidad",children:e.jsx("span",{className:"material-symbols-outlined !text-sm",children:"delete_forever"})}),e.jsxs("div",{onClick:()=>{Z(t)},children:[e.jsxs("div",{className:"aspect-[4/5] relative overflow-hidden",children:[e.jsx("img",{src:t.image_url?t.image_url.startsWith("http")||t.image_url.startsWith("blob")||t.image_url.startsWith("/")?t.image_url:`/${t.image_url}`:"/placeholder-style.jpg",alt:t.label,className:`w-full h-full object-cover group-hover:scale-110 transition-transform duration-700 ${t.is_active===!1?"grayscale brightness-50 opacity-40":"opacity-60 group-hover:opacity-100"}`,onError:s=>{const r=s.target;r.src.includes("placeholder")||(r.src="/placeholder-style.jpg")}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#0a0c0b] via-transparent to-transparent opacity-90 group-hover:opacity-40 transition-opacity"}),e.jsxs("div",{className:"absolute top-4 left-4 flex gap-2",children:[t.is_premium&&e.jsx("span",{className:"bg-[#ff5500] text-white text-[8px] font-black px-2 py-1 rounded-md uppercase tracking-tighter",children:"Premium"}),t.is_active===!1&&e.jsxs("span",{className:"bg-slate-600 text-white text-[8px] font-black px-2 py-1 rounded-md uppercase tracking-tighter flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined !text-[10px]",children:"visibility_off"}),"Hidden"]}),e.jsx("span",{className:"bg-[#1f2b24]/80 backdrop-blur-md text-white text-[8px] font-black px-2 py-1 rounded-md uppercase tracking-tighter border border-white/10",children:t.category})]})]}),e.jsxs("div",{className:"p-6 absolute bottom-0 left-0 right-0",children:[e.jsx("h4",{className:"text-xl font-black text-white italic uppercase tracking-tighter mb-1 group-hover:text-[#13ec80] transition-colors",children:t.label}),e.jsxs("p",{className:"text-[10px] text-slate-400 line-clamp-2 leading-relaxed italic opacity-60 group-hover:opacity-100 transition-opacity",children:['"',t.prompt||"Sin prompt definido...",'"']}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-white/5 flex items-center justify-between opacity-40 group-hover:opacity-100 transition-opacity",children:[e.jsxs("span",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest",children:["SUB: ",t.subcategory||"General"]}),e.jsx("span",{className:"material-symbols-outlined !text-sm text-slate-600",children:"chevron_right"})]})]})]})]},t.id))})]}),x==="settings"&&e.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-black text-white tracking-tight uppercase",children:"Ajustes del Sistema"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Configuración global de APIs, pasarelas de pago y parámetros del motor"})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-[#121413] border border-[#1f2b24] rounded-2xl overflow-hidden shadow-2xl",children:[e.jsxs("div",{className:"p-6 border-b border-[#1f2b24] bg-white/5 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-500/10 flex items-center justify-center text-blue-400",children:e.jsx("span",{className:"material-symbols-outlined",children:"payments"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-black text-white uppercase tracking-tight",children:"MercadoPago Cloud"}),e.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest",children:"Pasarela de Pagos B2C"})]})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest block mb-1",children:"Public Key (Producción)"}),e.jsx("input",{type:"text",className:"w-full bg-[#0a0c0b] border border-[#1f2b24] rounded-lg px-4 py-3 text-white outline-none focus:border-[#13ec80] font-mono text-xs",placeholder:"APP_USR-...",defaultValue:"APP_USR-78239012-4212-4211-9012-78239012"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest block mb-1",children:"Access Token (Secret)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"password",className:"w-full bg-[#0a0c0b] border border-[#1f2b24] rounded-lg px-4 py-3 text-white outline-none focus:border-[#13ec80] font-mono text-xs pr-10",placeholder:"APP_USR-...",defaultValue:"APP_USR-78239012-4212-4211-9012-HIDDEN"}),e.jsx("span",{className:"material-symbols-outlined absolute right-3 top-1/2 -translate-y-1/2 text-slate-600 cursor-pointer hover:text-white transition-colors",children:"visibility"})]})]}),e.jsxs("div",{className:"pt-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-[#13ec80]"}),e.jsx("span",{className:"text-[11px] font-bold text-slate-400 uppercase",children:"Estado: Conectado"})]}),e.jsx("button",{className:"text-[10px] font-black text-blue-400 hover:text-blue-300 transition-colors uppercase tracking-widest",children:"Probar Conexión"})]})]})]}),e.jsxs("div",{className:"bg-[#121413] border border-[#1f2b24] rounded-2xl overflow-hidden shadow-2xl",children:[e.jsxs("div",{className:"p-6 border-b border-[#1f2b24] bg-white/5 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-purple-500/10 flex items-center justify-center text-purple-400",children:e.jsx("span",{className:"material-symbols-outlined",children:"bolt"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-black text-white uppercase tracking-tight",children:"KIE Engine API"}),e.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest",children:"Motor de Generación IA"})]})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest block mb-1",children:"KIE API Endpoint"}),e.jsx("input",{type:"text",className:"w-full bg-[#0a0c0b] border border-[#1f2b24] rounded-lg px-4 py-3 text-white outline-none focus:border-[#13ec80] font-mono text-xs",placeholder:"https://api.kie.com/v1",defaultValue:"https://automatizaciones.metalab30.com/webhook/kie-pro"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest block mb-1",children:"Webhook Secret Key"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"password",className:"w-full bg-[#0a0c0b] border border-[#1f2b24] rounded-lg px-4 py-3 text-white outline-none focus:border-[#13ec80] font-mono text-xs pr-10",defaultValue:"KIE_PRO_MET_LAB_30"}),e.jsx("span",{className:"material-symbols-outlined absolute right-3 top-1/2 -translate-y-1/2 text-slate-600",children:"lock"})]})]}),e.jsx("div",{className:"pt-4",children:e.jsx("p",{className:"text-[10px] text-slate-600 leading-relaxed italic",children:"* El endpoint de KIE procesa todas las solicitudes de generación de imagen para Usuarios B2C y Partners."})})]})]}),e.jsxs("div",{className:"bg-[#121413] border border-[#1f2b24] rounded-2xl overflow-hidden shadow-2xl xl:col-span-2",children:[e.jsxs("div",{className:"p-6 border-b border-[#1f2b24] bg-white/5 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-amber-500/10 flex items-center justify-center text-amber-400",children:e.jsx("span",{className:"material-symbols-outlined",children:"settings_applications"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-black text-white uppercase tracking-tight",children:"Parámetros Globales"}),e.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest",children:"Control General de Plataforma"})]})]}),e.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs font-bold text-slate-300 uppercase tracking-tight",children:"Modo Mantenimiento"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-slate-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-500"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs font-bold text-slate-300 uppercase tracking-tight",children:"Registro de Usuarios B2C"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-slate-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[#13ec80]"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest block mb-1",children:"Precio Crédito (Base)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-slate-500 font-bold",children:"$"}),e.jsx("input",{type:"number",className:"bg-[#0a0c0b] border border-[#1f2b24] rounded-lg px-3 py-2 text-white outline-none focus:border-[#13ec80] w-full text-sm font-bold",defaultValue:"100.00"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest block mb-1",children:"Créditos por Invitación"}),e.jsx("input",{type:"number",className:"bg-[#0a0c0b] border border-[#1f2b24] rounded-lg px-3 py-2 text-white outline-none focus:border-[#13ec80] w-full text-sm font-bold",defaultValue:"10"})]})]}),e.jsx("div",{className:"flex flex-col justify-end",children:e.jsx("button",{className:"w-full py-4 bg-[#13ec80] text-[#0a0c0b] font-black rounded-xl shadow-[0_0_30px_rgba(19,236,128,0.2)] hover:scale-[1.02] transition-all uppercase text-xs tracking-widest",children:"Guardar Configuración Global"})})]})]})]})]}),x==="logs"&&e.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end mb-8 gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black text-white tracking-tight uppercase",children:"Visor de Registros Maestro"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Monitor de actividad y salud del motor en tiempo real"})]}),e.jsxs("div",{className:"flex gap-3 w-full md:w-auto",children:[e.jsx("div",{className:"relative flex-1 md:w-64",children:e.jsxs("select",{value:fe,onChange:t=>Te(t.target.value),className:"w-full bg-[#121413] border border-[#1f2b24] rounded-lg px-4 py-2.5 text-xs text-white appearance-none outline-none focus:ring-1 focus:ring-[#13ec80]",children:[e.jsx("option",{value:"all",children:"Todos los Partners"}),h.map(t=>e.jsx("option",{value:t.id,children:t.name||t.company_name||t.contact_email},t.id))]})}),e.jsx("button",{onClick:()=>A(),className:"p-2.5 bg-white/5 border border-white/10 rounded-lg text-slate-400 hover:text-[#13ec80] transition-colors flex items-center gap-2",children:e.jsx("span",{className:"material-symbols-outlined !text-xl",children:"refresh"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[e.jsxs("div",{className:"bg-[#121413] p-5 border border-[#1f2b24] rounded-xl",children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase mb-2",children:"Tasa de Éxito"}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("h3",{className:"text-2xl font-black text-white",children:"99.8%"}),e.jsx("span",{className:"text-[10px] text-[#13ec80] font-bold mb-1",children:"UP"})]})]}),e.jsxs("div",{className:"bg-[#121413] p-5 border border-[#1f2b24] rounded-xl",children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase mb-2",children:"Gens (Hoy)"}),e.jsx("h3",{className:"text-2xl font-black text-blue-400",children:de.filter(t=>{const s=t.time.split(":");return new Date().setHours(parseInt(s[0]),parseInt(s[1]),parseInt(s[2])),!0}).length})]}),e.jsxs("div",{className:"bg-[#121413] p-5 border border-[#1f2b24] rounded-xl",children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase mb-2",children:"Uso API"}),e.jsx("h3",{className:"text-2xl font-black text-purple-400",children:"Escalable"})]}),e.jsxs("div",{className:"bg-[#121413] p-5 border border-[#1f2b24] rounded-xl",children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase mb-2",children:"Estado Motor"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-[#13ec80] animate-pulse"}),e.jsx("h3",{className:"text-xl font-bold text-white uppercase tracking-tighter",children:"Latencia 2.4s"})]})]})]}),e.jsxs("div",{className:"bg-[#121413] border border-[#1f2b24] rounded-xl overflow-hidden shadow-2xl",children:[e.jsxs("div",{className:"p-4 border-b border-[#1f2b24] bg-white/5 flex justify-between items-center",children:[e.jsx("h3",{className:"text-xs font-bold text-white uppercase tracking-widest",children:"Actividad Reciente del Sistema"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("span",{className:"flex items-center gap-1.5 text-[10px] font-bold text-slate-500",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-[#13ec80]"})," Éxito"]}),e.jsxs("span",{className:"flex items-center gap-1.5 text-[10px] font-bold text-slate-500",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500"})," Proceso"]})]})]}),e.jsxs("div",{className:"divide-y divide-[#1f2b24]/50 max-h-[600px] overflow-y-auto custom-scrollbar",children:[de.filter(t=>fe==="all"||t.partner_id===fe).map(t=>e.jsxs("div",{onClick:()=>{t.event_id&&f(`Viendo detalles de: ${t.title}`,"info")},className:"p-4 hover:bg-white/[0.02] transition-all flex items-center justify-between group cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${t.type==="success"?"bg-[#13ec80]/10 text-[#13ec80]":"bg-amber-400/10 text-amber-400"}`,children:e.jsx("span",{className:"material-symbols-outlined !text-lg",children:t.type==="success"?"check_circle":"warning"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-bold text-white group-hover:text-[#13ec80] transition-colors",children:t.title}),e.jsx("span",{className:`text-[9px] px-1.5 py-0.5 rounded font-black uppercase tracking-tighter border ${t.text.includes("B2C")?"bg-blue-500/10 border-blue-500/20 text-blue-400":"bg-[#13ec80]/10 border-[#13ec80]/20 text-[#13ec80]"}`,children:t.type==="success"?"SUCCESS":"LOG"})]}),e.jsx("p",{className:"text-[11px] text-slate-500",children:t.text}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxs("span",{className:"text-[9px] font-bold text-slate-600 bg-white/5 px-1.5 py-0.5 rounded flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined !text-[10px]",children:"alternate_email"}),t.email]}),e.jsxs("span",{className:"text-[9px] font-bold text-amber-500/80 bg-amber-500/5 px-1.5 py-0.5 rounded flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined !text-[10px]",children:"payments"}),"Cost: $",t.cost.toFixed(2)]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-mono text-white/50",children:t.time}),e.jsxs("p",{className:"text-[9px] text-slate-700 font-bold uppercase tracking-widest group-hover:text-slate-500 transition-colors",children:["ID: ",t.id.substring(0,8)]})]})]},t.id)),de.length===0&&e.jsxs("div",{className:"py-20 text-center",children:[e.jsx("span",{className:"material-symbols-outlined !text-4xl text-white/5 mb-2",children:"history"}),e.jsx("p",{className:"text-slate-600 font-bold uppercase tracking-widest text-xs",children:"No se encontraron registros recientes"})]})]})]})]})]})]}),e.jsx(Ze,{isOpen:k||!!se,onClose:()=>{o(!1),oe(null)},partner:se,onSave:se?Me:ze,isSaving:C||Ae,onDelete:t=>re({id:t.id,name:t.company_name||t.name})}),e.jsx(et,{isOpen:!!i,onClose:()=>N(null),targetName:(i==null?void 0:i.name)||"",onTopUp:De}),e.jsx(st,{isOpen:!!be,onClose:()=>Z(null),style:be==="new"?"new":be,stylesMetadata:P,stats:{allGenerations:H.allGenerations},onImageUpload:Oe,onSave:qe,isSaving:C,onDelete:async t=>{if(confirm(`🚨 ¡ELIMINACIÓN CRÍTICA!

¿Estás seguro de purgar esta identidad de todos los registros del motor?`))try{c(!0),await Promise.all([p.from("styles_metadata").delete().eq("id",t),p.from("identity_prompts").delete().eq("id",t)]),f("Protocolo purgado correctamente"),Z(null),A()}catch(s){console.error(s),f("Falla al purgar: "+s.message,"error")}finally{c(!1)}}}),e.jsx(tt,{isOpen:ue||!!W,onClose:()=>{Y(!1),J(null)},user:W,stylesMetadata:P,onSave:W?Ge:$e,isSaving:w}),e.jsx(at,{isOpen:!!q,partnerName:(q==null?void 0:q.name)||"",onClose:()=>re(null),onConfirm:async()=>{q&&(await ke(q.id),re(null))}}),e.jsx("style",{children:`
                .custom-scrollbar::-webkit-scrollbar {
                    width: 4px;
                }
                .custom-scrollbar::-webkit-scrollbar-track {
                    background: transparent;
                }
                .custom-scrollbar::-webkit-scrollbar-thumb {
                    background: #1f2b24;
                    border-radius: 10px;
                }
                @keyframes pulse-green {
                    0% { box-shadow: 0 0 0 0 rgba(19, 236, 128, 0.7); }
                    70% { box-shadow: 0 0 0 6px rgba(19, 236, 128, 0); }
                    100% { box-shadow: 0 0 0 0 rgba(19, 236, 128, 0); }
                }
            `}),e.jsx(ve,{children:ee.type&&e.jsxs(ne.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.9},className:`fixed bottom-8 right-8 z-[200] px-6 py-4 rounded-2xl shadow-2xl flex items-center gap-4 backdrop-blur-xl border ${ee.type==="success"?"bg-[#13ec80]/10 border-[#13ec80]/30 text-[#13ec80]":ee.type==="error"?"bg-red-500/10 border-red-500/30 text-red-500":"bg-blue-500/10 border-blue-500/30 text-blue-400"}`,children:[e.jsx("span",{className:"material-symbols-outlined",children:ee.type==="success"?"check_circle":ee.type==="error"?"error":"info"}),e.jsx("p",{className:"text-[11px] font-black uppercase tracking-widest",children:ee.message})]})}),e.jsx(ve,{children:q&&e.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-6 bg-black/80 backdrop-blur-md",children:e.jsxs(ne.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"bg-[#121413] border border-red-500/30 p-8 rounded-3xl w-full max-w-md shadow-[0_0_50px_rgba(239,68,68,0.2)] relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-red-500/10 blur-[60px] pointer-events-none"}),e.jsx("div",{className:"w-20 h-20 rounded-full bg-red-500/10 flex items-center justify-center text-red-500 mx-auto mb-6 border border-red-500/20",children:e.jsx("span",{className:"material-symbols-outlined !text-4xl",children:"warning"})}),e.jsxs("h3",{className:"text-2xl font-black text-white uppercase text-center mb-2 italic tracking-tighter",children:["Confirmar ",e.jsx("span",{className:"text-red-500",children:"Baja"})]}),e.jsxs("p",{className:"text-slate-400 text-sm text-center mb-8 px-4",children:["¿Estás seguro de que deseas dar de baja a ",e.jsx("span",{className:"text-white font-bold",children:q.name}),"?",e.jsx("br",{}),e.jsx("span",{className:"text-[10px] uppercase font-black text-red-500/60 tracking-[2px] mt-4 block p-2 bg-red-500/5 rounded-lg border border-red-500/10",children:"Esta acción desactivará su acceso de inmediato"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>re(null),className:"flex-1 py-4 text-[10px] font-black text-slate-500 hover:text-white transition-colors uppercase tracking-widest",children:"Cancelar"}),e.jsx("button",{onClick:()=>{ke(q.id),re(null)},className:"flex-1 py-4 bg-red-600 text-white font-black text-[10px] rounded-xl shadow-[0_10px_30px_rgba(220,38,38,0.2)] hover:scale-[1.05] active:scale-95 transition-all uppercase tracking-widest",children:"Confirmar Baja"})]})]})})})]})},me=({label:v,value:x,trend:g,status:h,color:y,icon:u})=>e.jsxs("div",{className:"bg-[#121413] p-5 border border-[#1f2b24] rounded-xl hover:border-[#13ec80]/30 transition-all group overflow-hidden relative",children:[e.jsx("div",{className:"absolute -right-4 -top-4 opacity-[0.03] group-hover:opacity-[0.08] transition-opacity",children:e.jsx("span",{className:"material-symbols-outlined !text-8xl",children:u})}),e.jsxs("div",{className:"flex justify-between items-start mb-3 relative z-10",children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-wider",children:v}),g&&e.jsx("span",{className:"text-[10px] font-bold text-[#13ec80] px-1.5 py-0.5 bg-[#13ec80]/10 rounded tracking-tight",children:g}),h&&e.jsxs("span",{className:"flex items-center gap-1.5 text-[10px] font-bold text-[#13ec80] tracking-widest",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-[#13ec80] animate-pulse"})," ",h]})]}),e.jsx("div",{className:"flex items-baseline gap-2 relative z-10",children:e.jsx("h3",{className:"text-3xl font-black text-white leading-none",children:x})}),e.jsx("div",{className:"mt-4 border-t border-[#1f2b24] pt-3 relative z-10",children:e.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-medium text-slate-500",children:[e.jsx("span",{className:"material-symbols-outlined !text-[14px]",children:"arrow_outward"})," Sincronización en tiempo real"]})})]}),rt=({logs:v})=>e.jsxs("div",{className:"bg-[#121413] border border-[#1f2b24] rounded-xl flex flex-col h-full overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-[#1f2b24] bg-white/5 flex items-center justify-between",children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"System Pulse"}),e.jsx("span",{className:"material-symbols-outlined !text-[16px] text-[#13ec80] animate-pulse",children:"sensors"})]}),e.jsx("div",{className:"flex-1 p-4 space-y-4 overflow-y-auto custom-scrollbar",children:v.length>0?v.map(x=>e.jsx(lt,{type:x.type,title:x.title,text:x.text,time:x.time},x.id)):e.jsx("div",{className:"text-center py-10",children:e.jsxs("p",{className:"text-[10px] text-slate-600 font-bold uppercase tracking-widest leading-relaxed",children:["No hay actividad",e.jsx("br",{}),"reciente detectable"]})})}),e.jsx("div",{className:"p-3 border-t border-[#1f2b24] bg-[#0a0c0b]",children:e.jsx("button",{className:"w-full text-[9px] font-bold text-slate-500 uppercase tracking-widest hover:text-white transition-colors tracking-[0.2em]",children:"Abrir Centro de Comando"})})]}),lt=({type:v,title:x,text:g,time:h})=>{const y={success:"bg-[#13ec80]",info:"bg-blue-400",warning:"bg-amber-400",error:"bg-red-400"};return e.jsxs("div",{className:"flex gap-3 relative pb-2 group",children:[e.jsx("div",{className:`w-2 h-2 mt-1 rounded-full ${y[v]} shrink-0 shadow-[0_0_5px_currentColor] opacity-60 group-hover:opacity-100 transition-opacity`}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[11px] font-bold text-white leading-tight",children:x}),e.jsx("p",{className:"text-[10px] text-slate-500 mt-1 leading-relaxed",children:g}),e.jsx("p",{className:"text-[8px] font-mono text-slate-600 mt-1 uppercase",children:h})]})]})};export{xt as Admin};
