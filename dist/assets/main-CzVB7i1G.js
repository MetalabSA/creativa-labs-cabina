import{c as te,r as d,j as e,S as ce,a as Kt,b as Xt,R as fe,C as ut,M as Jt,d as At,L as ea,e as Ae,f as He,s as G,A as ta,T as Ke,g as aa,D as sa}from"./DashboardApp-2TNm4ACS.js";import{Q as et,D as Ge,a as at}from"./index-t21NXNdR.js";import{B as ra}from"./Background3D-D7c5W2cP.js";import{m as oe}from"./proxy-DmLuwt0U.js";import{X as xe,H as tt,S as na}from"./x-B4JqIYlf.js";import{A as Ve,I as We,C as Et,M as Mt,S as It}from"./constants-D_BaKZJe.js";import{Z as Le}from"./zap-DgjJkp8E.js";/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],Pt=te("arrow-down",la);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Lt=te("arrow-left",ca);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],oa=te("arrow-right",ia);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Xe=te("check",da);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ua=te("chevron-down",xa);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ma=te("chevron-right",ha);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ba=te("circle-alert",pa);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ga=te("circle-question-mark",fa);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],ht=te("heart",wa);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],ja=te("instagram",va);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ya=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],Na=te("layout-grid",ya);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],_a=te("lock-open",ka);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Sa=te("log-out",Ca);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ea=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],Ma=te("menu",Ea);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ia=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],$t=te("printer",Ia);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],ot=te("refresh-cw",Pa);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ra=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Aa=te("share-2",Ra);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const La=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],dt=te("smartphone",La);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Ta=te("user",$a),Je=({title:l,sampleImageUrl:c,isSelected:m,onSelect:f,isPremium:_,isUnlocked:M,usageCount:C,isTopStyle:y,tags:u,isFavorite:$,onToggleFavorite:T})=>{const[U,I]=d.useState(!1),[F,H]=d.useState(!1);return d.useEffect(()=>{I(!1),H(!1);const W=new Image,R=setTimeout(()=>{F||(console.warn(`Timeout al cargar imagen: ${c}`),W.src=c+"?t="+Date.now())},5e3);return W.crossOrigin="anonymous",W.src=c,W.onload=()=>{clearTimeout(R),console.log(`Imagen cargada con Ã©xito: ${c}`),H(!0)},W.onerror=re=>{clearTimeout(R),console.error(`Fallo al cargar imagen: ${c}`,re),I(!0)},()=>clearTimeout(R)},[c]),e.jsxs("div",{className:`relative w-full max-w-[200px] aspect-[4/5] rounded-[24px] overflow-hidden transition-all duration-700 ease-[cubic-bezier(0.23,1,0.32,1)] group
                  backdrop-blur-xl border-2 cursor-pointer
                  hover:-translate-y-4 hover:shadow-[0_40px_80px_rgba(0,0,0,0.9)]
                  ${m?"border-accent shadow-[0_0_50px_rgba(255,85,0,0.3)] scale-[1.05] z-10":"border-white/5 hover:border-white/20 bg-[#121215]"}`,onClick:f,children:[T&&e.jsx("button",{onClick:T,className:`absolute top-4 right-4 z-[30] w-8 h-8 flex items-center justify-center rounded-full backdrop-blur-md border transition-all duration-300
            ${$?"bg-red-500/20 border-red-500/50 text-red-500":"bg-black/40 border-white/10 text-white/40 hover:bg-white/10 hover:text-white"}`,children:e.jsx(ht,{className:`w-4 h-4 ${$?"fill-current":""}`})}),_&&e.jsxs("div",{className:"absolute top-6 left-6 z-[20] flex items-center gap-2 px-3 py-1 bg-gradient-to-r from-amber-500 to-yellow-300 rounded-full shadow-[0_0_20px_rgba(245,158,11,0.4)] animate-pulse",children:[e.jsx(ce,{className:"w-3 h-3 text-white"}),e.jsx("span",{className:"text-[8px] font-black text-white uppercase tracking-[1px]",children:"Premium"})]}),C!==void 0&&C>0&&e.jsxs("div",{className:`absolute left-6 z-[20] flex items-center gap-1.5 px-2.5 py-1 bg-black/60 backdrop-blur-md rounded-full border border-white/10 transition-all duration-500
          ${_?"top-16":"top-6"}
          ${m?"opacity-100":"opacity-0 group-hover:opacity-100"}`,children:[e.jsx("div",{className:"w-1 h-1 rounded-full bg-accent animate-pulse"}),e.jsxs("span",{className:"text-[7px] font-black text-white/70 uppercase tracking-[1px]",children:[C," usos"]})]}),y&&e.jsx("div",{className:"absolute top-6 right-16 z-[20] flex items-center justify-center w-8 h-8 bg-accent/20 backdrop-blur-xl border border-accent/40 rounded-full shadow-[0_0_15px_rgba(255,85,0,0.3)] animate-bounce duration-[2000ms]",children:e.jsx(ce,{className:"w-4 h-4 text-accent"})}),e.jsx("div",{className:`absolute top-0 left-0 w-full h-[2px] bg-accent/60 blur-[2px] z-[10] pointer-events-none transition-opacity duration-500
        ${m?"opacity-100 animate-[scan_3s_linear_infinite]":"opacity-0"}`}),e.jsx("div",{className:`absolute inset-0 transition-opacity duration-700 pointer-events-none z-0
        ${m?"opacity-100":"opacity-0"}`,style:{background:"radial-gradient(circle at 50% 100%, rgba(255, 85, 0, 0.2) 0%, transparent 70%)"}}),e.jsx("div",{className:`absolute inset-[1px] rounded-[22px] bg-gradient-to-br from-white/10 to-transparent z-[2] pointer-events-none transition-opacity
        ${m?"opacity-100":"opacity-40"}`}),e.jsxs("div",{className:"absolute inset-0 z-[1] overflow-hidden bg-[#0a0a0c]",children:[U?e.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center bg-gradient-to-br from-[#1a1a1e] to-[#0a0a0c] p-10 text-center animate-[fadeIn_0.5s_ease-out]",children:[e.jsx(ba,{className:"w-12 h-12 text-accent/40 mb-4"}),e.jsxs("div",{className:"text-[8px] tracking-[4px] text-white/40 font-black uppercase leading-relaxed",children:["Error de Archivo",e.jsx("br",{}),e.jsx("span",{className:"text-accent/60 mt-2 block lowercase font-mono opacity-80",children:c})]}),e.jsx("p",{className:"text-[6px] text-white/20 uppercase tracking-[2px] mt-4 max-w-[150px]",children:"AsegÃºrate de que el archivo estÃ© en la raÃ­z con este nombre exacto."})]}):e.jsx("img",{src:c,alt:l,className:`w-full h-full object-cover transition-all duration-1000 ease-in-out
              ${F?"opacity-100":"opacity-0"}
              ${m?"scale-105 brightness-110 saturate-[1.1]":"scale-100 brightness-[0.7] saturate-[0.8] group-hover:brightness-90 group-hover:scale-102"}`,onLoad:()=>H(!0),onError:()=>I(!0),crossOrigin:"anonymous"}),!F&&!U&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-[#121215] z-[3]",children:e.jsx("div",{className:"w-8 h-8 border-2 border-accent/20 border-t-accent rounded-full animate-spin shadow-[0_0_15px_rgba(255,85,0,0.2)]"})}),e.jsx("div",{className:`absolute inset-0 transition-all duration-700 pointer-events-none z-[4]
          ${m?"bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-90":"bg-black/20"}`})]}),e.jsx("div",{className:"relative z-[15] flex flex-col items-center justify-end w-full h-full px-4 py-8",children:e.jsxs("div",{className:`flex flex-col items-center transition-all duration-500 transform
          ${m?"translate-y-0 opacity-100":"translate-y-4 opacity-70 group-hover:translate-y-0 group-hover:opacity-100"}`,children:[e.jsx("div",{className:`text-[9px] font-black tracking-[2px] uppercase mb-4 transition-colors duration-300 text-center leading-tight
            ${m?"text-accent":"text-white/60"}`,children:l}),e.jsx("div",{className:`px-6 py-2.5 rounded-full border text-[9px] font-black tracking-[4px] uppercase transition-all duration-500 backdrop-blur-xl
            ${m?"bg-accent text-white border-accent shadow-[0_0_20px_rgba(255,85,0,0.4)]":"bg-black/60 text-white/40 border-white/10"}`,children:m?"ACTIVO":_&&!M?"DESBLOQUEAR":"SELECCIONAR"}),u&&u.length>0&&e.jsx("div",{className:`flex flex-wrap justify-center gap-1.5 mt-4 transition-opacity duration-500 ${m?"opacity-100":"opacity-0 group-hover:opacity-60"}`,children:u.slice(0,3).map(W=>e.jsxs("span",{className:"text-[7px] font-black uppercase tracking-[1px] px-2 py-0.5 bg-white/5 rounded-md text-white/40",children:["#",W]},W))})]})}),e.jsx("div",{className:"absolute top-4 left-4 w-2 h-2 border-t border-l border-white/20 z-[6]"}),e.jsx("div",{className:"absolute top-4 right-4 w-2 h-2 border-t border-r border-white/20 z-[6]"}),e.jsx("div",{className:"absolute bottom-4 left-4 w-2 h-2 border-b border-l border-white/20 z-[6]"}),e.jsx("div",{className:"absolute bottom-4 right-4 w-2 h-2 border-b border-r border-white/20 z-[6]"})]})};var mt={};(function l(c,m,f,_){var M=!!(c.Worker&&c.Blob&&c.Promise&&c.OffscreenCanvas&&c.OffscreenCanvasRenderingContext2D&&c.HTMLCanvasElement&&c.HTMLCanvasElement.prototype.transferControlToOffscreen&&c.URL&&c.URL.createObjectURL),C=typeof Path2D=="function"&&typeof DOMMatrix=="function",y=(function(){if(!c.OffscreenCanvas)return!1;try{var s=new OffscreenCanvas(1,1),t=s.getContext("2d");t.fillRect(0,0,1,1);var x=s.transferToImageBitmap();t.createPattern(x,"no-repeat")}catch{return!1}return!0})();function u(){}function $(s){var t=m.exports.Promise,x=t!==void 0?t:c.Promise;return typeof x=="function"?new x(s):(s(u,u),null)}var T=(function(s,t){return{transform:function(x){if(s)return x;if(t.has(x))return t.get(x);var b=new OffscreenCanvas(x.width,x.height),v=b.getContext("2d");return v.drawImage(x,0,0),t.set(x,b),b},clear:function(){t.clear()}}})(y,new Map),U=(function(){var s=Math.floor(16.666666666666668),t,x,b={},v=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(t=function(w){var P=Math.random();return b[P]=requestAnimationFrame(function g(N){v===N||v+s-1<N?(v=N,delete b[P],w()):b[P]=requestAnimationFrame(g)}),P},x=function(w){b[w]&&cancelAnimationFrame(b[w])}):(t=function(w){return setTimeout(w,s)},x=function(w){return clearTimeout(w)}),{frame:t,cancel:x}})(),I=(function(){var s,t,x={};function b(v){function w(P,g){v.postMessage({options:P||{},callback:g})}v.init=function(g){var N=g.transferControlToOffscreen();v.postMessage({canvas:N},[N])},v.fire=function(g,N,O){if(t)return w(g,null),t;var z=Math.random().toString(36).slice(2);return t=$(function(q){function A(Z){Z.data.callback===z&&(delete x[z],v.removeEventListener("message",A),t=null,T.clear(),O(),q())}v.addEventListener("message",A),w(g,z),x[z]=A.bind(null,{data:{callback:z}})}),t},v.reset=function(){v.postMessage({reset:!0});for(var g in x)x[g](),delete x[g]}}return function(){if(s)return s;if(!f&&M){var v=["var CONFETTI, SIZE = {}, module = {};","("+l.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{s=new Worker(URL.createObjectURL(new Blob([v])))}catch(w){return typeof console<"u"&&typeof console.warn=="function"&&console.warn("ðŸŽŠ Could not load worker",w),null}b(s)}return s}})(),F={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function H(s,t){return t?t(s):s}function W(s){return s!=null}function R(s,t,x){return H(s&&W(s[t])?s[t]:F[t],x)}function re(s){return s<0?0:Math.floor(s)}function Q(s,t){return Math.floor(Math.random()*(t-s))+s}function ue(s){return parseInt(s,16)}function Me(s){return s.map(ae)}function ae(s){var t=String(s).replace(/[^0-9a-f]/gi,"");return t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),{r:ue(t.substring(0,2)),g:ue(t.substring(2,4)),b:ue(t.substring(4,6))}}function ne(s){var t=R(s,"origin",Object);return t.x=R(t,"x",Number),t.y=R(t,"y",Number),t}function he(s){s.width=document.documentElement.clientWidth,s.height=document.documentElement.clientHeight}function _e(s){var t=s.getBoundingClientRect();s.width=t.width,s.height=t.height}function me(s){var t=document.createElement("canvas");return t.style.position="fixed",t.style.top="0px",t.style.left="0px",t.style.pointerEvents="none",t.style.zIndex=s,t}function ge(s,t,x,b,v,w,P,g,N){s.save(),s.translate(t,x),s.rotate(w),s.scale(b,v),s.arc(0,0,1,P,g,N),s.restore()}function Ce(s){var t=s.angle*(Math.PI/180),x=s.spread*(Math.PI/180);return{x:s.x,y:s.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:s.startVelocity*.5+Math.random()*s.startVelocity,angle2D:-t+(.5*x-Math.random()*x),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:s.color,shape:s.shape,tick:0,totalTicks:s.ticks,decay:s.decay,drift:s.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:s.gravity*3,ovalScalar:.6,scalar:s.scalar,flat:s.flat}}function Te(s,t){t.x+=Math.cos(t.angle2D)*t.velocity+t.drift,t.y+=Math.sin(t.angle2D)*t.velocity+t.gravity,t.velocity*=t.decay,t.flat?(t.wobble=0,t.wobbleX=t.x+10*t.scalar,t.wobbleY=t.y+10*t.scalar,t.tiltSin=0,t.tiltCos=0,t.random=1):(t.wobble+=t.wobbleSpeed,t.wobbleX=t.x+10*t.scalar*Math.cos(t.wobble),t.wobbleY=t.y+10*t.scalar*Math.sin(t.wobble),t.tiltAngle+=.1,t.tiltSin=Math.sin(t.tiltAngle),t.tiltCos=Math.cos(t.tiltAngle),t.random=Math.random()+2);var x=t.tick++/t.totalTicks,b=t.x+t.random*t.tiltCos,v=t.y+t.random*t.tiltSin,w=t.wobbleX+t.random*t.tiltCos,P=t.wobbleY+t.random*t.tiltSin;if(s.fillStyle="rgba("+t.color.r+", "+t.color.g+", "+t.color.b+", "+(1-x)+")",s.beginPath(),C&&t.shape.type==="path"&&typeof t.shape.path=="string"&&Array.isArray(t.shape.matrix))s.fill(pe(t.shape.path,t.shape.matrix,t.x,t.y,Math.abs(w-b)*.1,Math.abs(P-v)*.1,Math.PI/10*t.wobble));else if(t.shape.type==="bitmap"){var g=Math.PI/10*t.wobble,N=Math.abs(w-b)*.1,O=Math.abs(P-v)*.1,z=t.shape.bitmap.width*t.scalar,q=t.shape.bitmap.height*t.scalar,A=new DOMMatrix([Math.cos(g)*N,Math.sin(g)*N,-Math.sin(g)*O,Math.cos(g)*O,t.x,t.y]);A.multiplySelf(new DOMMatrix(t.shape.matrix));var Z=s.createPattern(T.transform(t.shape.bitmap),"no-repeat");Z.setTransform(A),s.globalAlpha=1-x,s.fillStyle=Z,s.fillRect(t.x-z/2,t.y-q/2,z,q),s.globalAlpha=1}else if(t.shape==="circle")s.ellipse?s.ellipse(t.x,t.y,Math.abs(w-b)*t.ovalScalar,Math.abs(P-v)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI):ge(s,t.x,t.y,Math.abs(w-b)*t.ovalScalar,Math.abs(P-v)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI);else if(t.shape==="star")for(var L=Math.PI/2*3,Y=4*t.scalar,de=8*t.scalar,se=t.x,ie=t.y,be=5,X=Math.PI/be;be--;)se=t.x+Math.cos(L)*de,ie=t.y+Math.sin(L)*de,s.lineTo(se,ie),L+=X,se=t.x+Math.cos(L)*Y,ie=t.y+Math.sin(L)*Y,s.lineTo(se,ie),L+=X;else s.moveTo(Math.floor(t.x),Math.floor(t.y)),s.lineTo(Math.floor(t.wobbleX),Math.floor(v)),s.lineTo(Math.floor(w),Math.floor(P)),s.lineTo(Math.floor(b),Math.floor(t.wobbleY));return s.closePath(),s.fill(),t.tick<t.totalTicks}function Ie(s,t,x,b,v){var w=t.slice(),P=s.getContext("2d"),g,N,O=$(function(z){function q(){g=N=null,P.clearRect(0,0,b.width,b.height),T.clear(),v(),z()}function A(){f&&!(b.width===_.width&&b.height===_.height)&&(b.width=s.width=_.width,b.height=s.height=_.height),!b.width&&!b.height&&(x(s),b.width=s.width,b.height=s.height),P.clearRect(0,0,b.width,b.height),w=w.filter(function(Z){return Te(P,Z)}),w.length?g=U.frame(A):q()}g=U.frame(A),N=q});return{addFettis:function(z){return w=w.concat(z),O},canvas:s,promise:O,reset:function(){g&&U.cancel(g),N&&N()}}}function h(s,t){var x=!s,b=!!R(t||{},"resize"),v=!1,w=R(t,"disableForReducedMotion",Boolean),P=M&&!!R(t||{},"useWorker"),g=P?I():null,N=x?he:_e,O=s&&g?!!s.__confetti_initialized:!1,z=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,q;function A(L,Y,de){for(var se=R(L,"particleCount",re),ie=R(L,"angle",Number),be=R(L,"spread",Number),X=R(L,"startVelocity",Number),st=R(L,"decay",Number),le=R(L,"gravity",Number),B=R(L,"drift",Number),Qe=R(L,"colors",Me),ve=R(L,"ticks",Number),je=R(L,"shapes"),De=R(L,"scalar"),p=!!R(L,"flat"),Fe=ne(L),qe=se,ke=[],rt=s.width*Fe.x,Ze=s.height*Fe.y;qe--;)ke.push(Ce({x:rt,y:Ze,angle:ie,spread:be,startVelocity:X,color:Qe[qe%Qe.length],shape:je[Q(0,je.length)],ticks:ve,decay:st,gravity:le,drift:B,scalar:De,flat:p}));return q?q.addFettis(ke):(q=Ie(s,ke,N,Y,de),q.promise)}function Z(L){var Y=w||R(L,"disableForReducedMotion",Boolean),de=R(L,"zIndex",Number);if(Y&&z)return $(function(X){X()});x&&q?s=q.canvas:x&&!s&&(s=me(de),document.body.appendChild(s)),b&&!O&&N(s);var se={width:s.width,height:s.height};g&&!O&&g.init(s),O=!0,g&&(s.__confetti_initialized=!0);function ie(){if(g){var X={getBoundingClientRect:function(){if(!x)return s.getBoundingClientRect()}};N(X),g.postMessage({resize:{width:X.width,height:X.height}});return}se.width=se.height=null}function be(){q=null,b&&(v=!1,c.removeEventListener("resize",ie)),x&&s&&(document.body.contains(s)&&document.body.removeChild(s),s=null,O=!1)}return b&&!v&&(v=!0,c.addEventListener("resize",ie,!1)),g?g.fire(L,se,be):A(L,se,be)}return Z.reset=function(){g&&g.reset(),q&&q.reset()},Z}var we;function i(){return we||(we=h(null,{useWorker:!0,resize:!0})),we}function pe(s,t,x,b,v,w,P){var g=new Path2D(s),N=new Path2D;N.addPath(g,new DOMMatrix(t));var O=new Path2D;return O.addPath(N,new DOMMatrix([Math.cos(P)*v,Math.sin(P)*v,-Math.sin(P)*w,Math.cos(P)*w,x,b])),O}function ze(s){if(!C)throw new Error("path confetti are not supported in this browser");var t,x;typeof s=="string"?t=s:(t=s.path,x=s.matrix);var b=new Path2D(t),v=document.createElement("canvas"),w=v.getContext("2d");if(!x){for(var P=1e3,g=P,N=P,O=0,z=0,q,A,Z=0;Z<P;Z+=2)for(var L=0;L<P;L+=2)w.isPointInPath(b,Z,L,"nonzero")&&(g=Math.min(g,Z),N=Math.min(N,L),O=Math.max(O,Z),z=Math.max(z,L));q=O-g,A=z-N;var Y=10,de=Math.min(Y/q,Y/A);x=[de,0,0,de,-Math.round(q/2+g)*de,-Math.round(A/2+N)*de]}return{type:"path",path:t,matrix:x}}function Se(s){var t,x=1,b="#000000",v='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof s=="string"?t=s:(t=s.text,x="scalar"in s?s.scalar:x,v="fontFamily"in s?s.fontFamily:v,b="color"in s?s.color:b);var w=10*x,P=""+w+"px "+v,g=new OffscreenCanvas(w,w),N=g.getContext("2d");N.font=P;var O=N.measureText(t),z=Math.ceil(O.actualBoundingBoxRight+O.actualBoundingBoxLeft),q=Math.ceil(O.actualBoundingBoxAscent+O.actualBoundingBoxDescent),A=2,Z=O.actualBoundingBoxLeft+A,L=O.actualBoundingBoxAscent+A;z+=A+A,q+=A+A,g=new OffscreenCanvas(z,q),N=g.getContext("2d"),N.font=P,N.fillStyle=b,N.fillText(t,Z,L);var Y=1/x;return{type:"bitmap",bitmap:g.transferToImageBitmap(),matrix:[Y,0,0,Y,-z*Y/2,-q*Y/2]}}m.exports=function(){return i().apply(this,arguments)},m.exports.reset=function(){i().reset()},m.exports.create=h,m.exports.shapeFromPath=ze,m.exports.shapeFromText=Se})((function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}})(),mt,!1);const xt=mt.exports;mt.exports.create;function Tt(l){var c,m,f="";if(typeof l=="string"||typeof l=="number")f+=l;else if(typeof l=="object")if(Array.isArray(l)){var _=l.length;for(c=0;c<_;c++)l[c]&&(m=Tt(l[c]))&&(f&&(f+=" "),f+=m)}else for(m in l)l[m]&&(f&&(f+=" "),f+=m);return f}function $e(){for(var l,c,m=0,f="",_=arguments.length;m<_;m++)(l=arguments[m])&&(c=Tt(l))&&(f&&(f+=" "),f+=c);return f}const za=({user:l,profile:c,onNavigate:m,onLogout:f,categories:_,currentView:M,eventConfig:C})=>{var F;const[y,u]=d.useState(!1),[$,T]=d.useState(!1),U=()=>u(!y),I=H=>{m(H),u(!1)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"fixed top-6 inset-x-0 z-[200] flex justify-center md:justify-end md:pr-12 px-4 pointer-events-none",children:e.jsx("div",{className:"pointer-events-auto relative",children:e.jsxs(oe.div,{layout:!0,className:$e("bg-black/60 backdrop-blur-3xl border border-white/20 shadow-[0_20px_50px_rgba(0,0,0,0.5)] overflow-hidden",y?"rounded-[32px] w-[320px]":"rounded-full w-auto"),initial:{borderRadius:50},animate:{width:y?320:"auto",borderRadius:y?32:999},transition:{type:"spring",stiffness:300,damping:30},children:[e.jsxs("div",{className:"flex items-center justify-between p-3 gap-4",children:[e.jsxs("div",{className:$e("flex items-center gap-3 transition-opacity duration-300","opacity-100"),onClick:()=>!y&&U(),children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-tr from-accent to-purple-600 rounded-full flex items-center justify-center shrink-0 shadow-lg shadow-accent/20 cursor-pointer",children:e.jsx("span",{className:"font-black italic text-white text-lg",children:"C"})}),!y&&e.jsxs("div",{className:"flex flex-col pr-4 cursor-pointer",onClick:U,children:[e.jsx("span",{className:"text-[10px] uppercase font-bold text-white/50 tracking-wider",children:C?"Event Credits":"CrÃ©ditos"}),e.jsx("span",{className:"text-sm font-black text-white leading-none",children:C?Math.max(0,(C.credits_allocated||0)-(C.credits_used||0)):c!=null&&c.is_master||(c==null?void 0:c.role)==="master"?"âˆž":(c==null?void 0:c.credits)||0})]}),y&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-bold text-white leading-tight",children:C?C.event_name:l?`Hola, ${(F=l.email)==null?void 0:F.split("@")[0]}`:"Invitado"}),e.jsx("span",{className:"text-[10px] text-accent font-black uppercase tracking-wider",children:C?`${Math.max(0,(C.credits_allocated||0)-(C.credits_used||0))} Disponibles`:`${c!=null&&c.is_master||(c==null?void 0:c.role)==="master"?"âˆž":(c==null?void 0:c.credits)||0} CrÃ©ditos`})]})]}),e.jsx("button",{onClick:U,className:"w-10 h-10 hover:bg-white/10 rounded-full flex items-center justify-center text-white transition-colors cursor-pointer shrink-0",children:y?e.jsx(xe,{className:"w-5 h-5"}):e.jsx(Ma,{className:"w-5 h-5"})})]}),e.jsx(Ve,{children:y&&e.jsx(oe.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"px-4 pb-6",children:e.jsxs("div",{className:"space-y-2 mt-4",children:[((c==null?void 0:c.is_master)||(c==null?void 0:c.role)==="master"||(c==null?void 0:c.role)==="partner"||(c==null?void 0:c.role)==="admin")&&e.jsx(Ee,{icon:Kt,label:"Dashboard Admin",onClick:()=>window.location.href="/dashboard.html",active:!1,highlight:!0}),e.jsxs("div",{className:"overflow-hidden rounded-xl bg-white/5 border border-white/5",children:[e.jsxs("button",{onClick:()=>T(!$),className:"w-full flex items-center justify-between p-3 text-sm font-medium text-white hover:bg-white/5 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Na,{className:"w-4 h-4 text-white/70"}),e.jsx("span",{children:"CategorÃ­as"})]}),e.jsx(ua,{className:$e("w-4 h-4 transition-transform",$&&"rotate-180")})]}),e.jsx(Ve,{children:$&&e.jsx(oe.div,{initial:{height:0},animate:{height:"auto"},exit:{height:0},className:"bg-black/20",children:e.jsxs("div",{className:"p-2 space-y-1",children:[_.map(H=>e.jsx(ct,{label:H.label,onClick:()=>I(`category_${H.id}`)},H.id)),!C&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-px bg-white/10 my-1"}),e.jsx(ct,{label:"Mis Favoritos",icon:ht,onClick:()=>I("favorites"),className:"text-pink-400 hover:text-pink-300"}),e.jsx(ct,{label:"Mis Fotos",icon:tt,onClick:()=>I("history"),className:"text-blue-400 hover:text-blue-300"})]})]})})})]}),C&&e.jsxs(e.Fragment,{children:[e.jsx(Ee,{icon:tt,label:"GalerÃ­a del Evento",onClick:()=>I("event-gallery"),active:M==="event-gallery",highlight:!0}),e.jsx(Ee,{icon:et,label:"Compartir Evento",onClick:()=>I("show-qr")})]}),!C&&e.jsx(Ee,{icon:ce,label:"Comprar CrÃ©ditos",onClick:()=>I("buy_credits"),highlight:!0}),e.jsx(Ee,{icon:na,label:"Packs",onClick:()=>I("packs"),active:M==="packs"}),!C&&e.jsx(Ee,{icon:Xt,label:"Ajustes",onClick:()=>I("settings"),active:M==="settings"}),e.jsx(Ee,{icon:ga,label:"Soporte",onClick:()=>I("support"),active:M==="support"}),l&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-px bg-white/10 my-2"}),e.jsxs("button",{onClick:f,className:"w-full flex items-center gap-3 p-3 rounded-xl text-sm font-medium text-red-400 hover:bg-red-500/10 hover:text-red-300 transition-colors",children:[e.jsx(Sa,{className:"w-4 h-4"}),e.jsx("span",{children:"Cerrar SesiÃ³n"})]})]})]})})})]})})})})},Ee=({icon:l,label:c,onClick:m,active:f,highlight:_})=>e.jsxs("button",{onClick:m,className:$e("w-full flex items-center gap-3 p-3 rounded-xl text-sm font-medium transition-all group",f?"bg-accent text-white":"text-white/80 hover:bg-white/10 hover:text-white",_&&!f&&"bg-gradient-to-r from-accent/20 to-transparent border border-accent/20 text-accent"),children:[e.jsx(l,{className:$e("w-4 h-4",f?"text-white":"text-white/70 group-hover:text-white")}),e.jsx("span",{children:c})]}),ct=({label:l,onClick:c,icon:m,className:f})=>e.jsxs("button",{onClick:c,className:$e("w-full flex items-center gap-3 p-2.5 rounded-lg text-xs font-medium pl-9 text-white/60 hover:bg-white/10 hover:text-white transition-colors",f),children:[m&&e.jsx(m,{className:"w-3 h-3"}),e.jsx("span",{children:l})]}),Da=({profile:l,session:c,onBack:m,onAddCredits:f,onUpdateProfile:_})=>{var T,U;const[M,C]=fe.useState((l==null?void 0:l.full_name)||""),[y,u]=fe.useState(!1),$=async()=>{u(!0),await _({full_name:M}),u(!1)};return e.jsxs("div",{className:"w-full max-w-2xl mx-auto pt-32 px-6 pb-12 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("button",{onClick:m,className:"flex items-center gap-2 text-white/60 hover:text-white mb-8 transition-colors",children:[e.jsx(ut,{className:"w-5 h-5"}),e.jsx("span",{children:"Volver"})]}),e.jsx("h2",{className:"text-3xl font-black italic uppercase mb-8 tracking-tighter",children:"Ajustes de Perfil"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-6 backdrop-blur-sm",children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx(Ta,{className:"w-5 h-5 text-accent"}),"InformaciÃ³n Personal"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs uppercase tracking-wider text-white/40 mb-1",children:"Email"}),e.jsxs("div",{className:"flex items-center gap-3 text-lg font-medium text-white/80",children:[e.jsx(Jt,{className:"w-5 h-5 text-white/40"}),(T=c==null?void 0:c.user)==null?void 0:T.email]})]}),e.jsxs("div",{className:"pt-4 border-t border-white/10",children:[e.jsx("label",{className:"block text-xs uppercase tracking-wider text-white/40 mb-3",children:"Nombre Completo"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"relative flex-1",children:e.jsx("input",{type:"text",value:M,onChange:I=>C(I.target.value),placeholder:"Tu nombre aquÃ­...",className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white placeholder:text-white/20 focus:outline-none focus:border-accent transition-colors"})}),e.jsx("button",{onClick:$,disabled:y||M===((l==null?void 0:l.full_name)||""),className:"px-6 py-3 bg-accent text-white rounded-xl font-bold uppercase tracking-wider text-xs hover:bg-white hover:text-black transition-all disabled:opacity-30 disabled:hover:bg-accent disabled:hover:text-white",children:y?"...":"Guardar"})]})]}),e.jsxs("div",{className:"pt-4 border-t border-white/10",children:[e.jsx("label",{className:"block text-xs uppercase tracking-wider text-white/40 mb-1",children:"ID de Usuario"}),e.jsx("code",{className:"text-xs text-white/30 font-mono",children:(U=c==null?void 0:c.user)==null?void 0:U.id})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-accent/20 to-transparent border border-accent/30 rounded-2xl p-6 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-accent/20 blur-[50px] rounded-full -translate-y-1/2 translate-x-1/2"}),e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2 relative z-10",children:[e.jsx(At,{className:"w-5 h-5 text-accent"}),"CrÃ©ditos y Consumo"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 relative z-10",children:[e.jsxs("div",{className:"bg-black/20 rounded-xl p-4",children:[e.jsx("span",{className:"block text-xs uppercase tracking-wider text-white/60 mb-1",children:"CrÃ©ditos Disponibles"}),e.jsx("span",{className:"text-3xl font-black text-accent",children:l!=null&&l.is_master?"âˆž":(l==null?void 0:l.credits)||0})]}),e.jsxs("div",{className:"bg-black/20 rounded-xl p-4",children:[e.jsx("span",{className:"block text-xs uppercase tracking-wider text-white/60 mb-1",children:"Total Generaciones"}),e.jsx("span",{className:"text-3xl font-black text-white",children:(l==null?void 0:l.total_generations)||0})]})]}),e.jsx("button",{onClick:f,className:"mt-6 w-full bg-white text-black font-black uppercase tracking-widest py-3 rounded-xl hover:bg-accent hover:text-white transition-all duration-300",children:"Cargar MÃ¡s CrÃ©ditos"})]})]})]})},it=3e3,Fa=({onBack:l,identities:c,unlockedPacks:m=[],userCredits:f,onUnlock:_,isUnlocking:M})=>{const C=d.useMemo(()=>{const u=new Map;return c.forEach($=>{u.has($.subCategory)||u.set($.subCategory,{id:$.subCategory,title:$.subCategory,preview:$.url,count:0}),u.get($.subCategory).count++}),Array.from(u.values())},[c]),y=u=>{_(u,it)};return e.jsxs("div",{className:"w-full max-w-7xl mx-auto pt-32 px-6 pb-24 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsxs("button",{onClick:l,className:"flex items-center gap-2 text-white/60 hover:text-white transition-colors",children:[e.jsx(ut,{className:"w-5 h-5"}),e.jsx("span",{children:"Volver"})]}),e.jsx("h2",{className:"text-3xl font-black italic uppercase tracking-tighter",children:"Tienda de Packs"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:C.map(u=>{const $=m.includes(u.id),T=f>=it;return e.jsxs("div",{className:"group relative bg-[#0a0a0a] border border-white/10 rounded-2xl overflow-hidden hover:border-accent/50 transition-all duration-300",children:[e.jsxs("div",{className:"h-48 overflow-hidden relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent z-10"}),e.jsx("img",{src:u.preview,alt:u.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700"}),$?e.jsxs("div",{className:"absolute top-4 right-4 z-20 bg-green-500/20 backdrop-blur-md border border-green-500/50 text-green-400 px-3 py-1 rounded-full text-xs font-bold uppercase flex items-center gap-1.5",children:[e.jsx(_a,{className:"w-3 h-3"}),"Adquirido"]}):e.jsxs("div",{className:"absolute top-4 right-4 z-20 bg-black/60 backdrop-blur-md border border-white/10 text-white/60 px-3 py-1 rounded-full text-xs font-bold uppercase flex items-center gap-1.5",children:[e.jsx(ea,{className:"w-3 h-3"}),"Premium"]})]}),e.jsxs("div",{className:"p-6 relative z-20",children:[e.jsx("div",{className:"flex justify-between items-start mb-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:u.title}),e.jsxs("p",{className:"text-white/40 text-sm",children:[u.count," Estilos incluidos"]})]})}),$?e.jsxs("button",{disabled:!0,className:"w-full py-4 rounded-xl font-black uppercase tracking-widest bg-white/5 text-green-400 opacity-50 flex items-center justify-center gap-2 cursor-default",children:[e.jsx(qa,{className:"w-5 h-5"}),"Disponible"]}):e.jsx("button",{onClick:()=>y(u.id),disabled:!T||M,className:`w-full py-4 rounded-xl font-black uppercase tracking-widest flex items-center justify-center gap-2 transition-all ${T?"bg-white text-black hover:bg-accent hover:text-white":"bg-white/5 text-white/20 cursor-not-allowed"}`,children:M?e.jsx(ce,{className:"w-5 h-5 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Desbloquear"}),e.jsxs("div",{className:"flex items-center gap-1 text-xs opacity-50 ml-2 border-l border-black/20 pl-2",children:[e.jsx(Le,{className:"w-3 h-3"}),it]})]})})]})]},u.id)})})]})},qa=({className:l})=>e.jsx("svg",{className:l,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),Oa=({eventConfig:l,supabase:c,onBack:m,onViewPhoto:f})=>{const[_,M]=d.useState([]),[C,y]=d.useState(!0),[u,$]=d.useState(!1),T=async(I=!1)=>{I?$(!0):y(!0);try{const{data:F,error:H}=await c.from("generations").select("id, image_url, style_id, created_at").eq("event_id",l.id).order("created_at",{ascending:!1});!H&&F&&M(F)}catch(F){console.error("Error fetching event gallery:",F)}finally{y(!1),$(!1)}};d.useEffect(()=>{T();const I=setInterval(()=>T(!0),3e4);return()=>clearInterval(I)},[l.id]);const U=(l.credits_allocated||0)-(l.credits_used||0);return e.jsxs("div",{className:"animate-[fadeIn_0.5s_ease-out] max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col items-center mb-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-accent/10 rounded-full flex items-center justify-center mb-6",children:e.jsx("span",{className:"text-3xl",children:"ðŸ“¸"})}),e.jsx("h2",{className:"text-3xl font-black uppercase italic tracking-tight text-white mb-2",children:l.event_name}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"h-[1px] w-8 bg-accent/50"}),e.jsx("p",{className:"text-[10px] tracking-[4px] text-white/40 uppercase",children:"GalerÃ­a del Evento"}),e.jsx("div",{className:"h-[1px] w-8 bg-accent/50"})]}),e.jsxs("div",{className:"flex items-center gap-6 mt-4",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-2xl font-black text-accent",children:_.length}),e.jsx("span",{className:"text-[8px] tracking-[2px] text-white/30 uppercase",children:"Fotos"})]}),e.jsx("div",{className:"w-px h-8 bg-white/10"}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-2xl font-black text-white",children:U}),e.jsx("span",{className:"text-[8px] tracking-[2px] text-white/30 uppercase",children:"CrÃ©ditos"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-6",children:[e.jsxs("button",{onClick:m,className:"flex items-center gap-2 px-5 py-2.5 bg-white/5 border border-white/10 rounded-xl hover:bg-white/10 transition-all text-white/60 hover:text-white text-[10px] font-bold tracking-[1px] uppercase",children:[e.jsx(Lt,{className:"w-4 h-4"}),"Volver"]}),e.jsxs("button",{onClick:()=>T(!0),className:`flex items-center gap-2 px-5 py-2.5 bg-accent/10 border border-accent/20 rounded-xl hover:bg-accent/20 transition-all text-accent text-[10px] font-bold tracking-[1px] uppercase ${u?"opacity-50":""}`,disabled:u,children:[e.jsx(ot,{className:`w-4 h-4 ${u?"animate-spin":""}`}),"Actualizar"]})]})]}),C?e.jsxs("div",{className:"flex flex-col items-center py-20 opacity-40",children:[e.jsx(Ae,{className:"w-10 h-10 animate-spin mb-4 text-accent"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-[2px]",children:"Cargando galerÃ­a..."})]}):_.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-32 border-2 border-dashed border-white/5 rounded-[40px] bg-white/[0.02]",children:[e.jsx(He,{className:"w-12 h-12 text-white/10 mb-6"}),e.jsx("p",{className:"text-white/30 text-xs font-black uppercase tracking-[4px] mb-4",children:"AÃºn no hay fotos en este evento"}),e.jsx("p",{className:"text-white/20 text-[10px] tracking-[1px] max-w-sm text-center",children:"Las fotos aparecerÃ¡n aquÃ­ a medida que los invitados las generen. Esta galerÃ­a se actualiza automÃ¡ticamente."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6",children:_.map(I=>e.jsxs("div",{className:"group relative aspect-[4/5] rounded-[24px] md:rounded-[32px] overflow-hidden border border-white/10 bg-[#0a0a0c] hover:border-accent/40 hover:shadow-[0_0_30px_rgba(0,0,0,0.5)] transition-all duration-500",children:[e.jsx("img",{src:I.image_url,alt:"Foto del evento",className:"w-full h-full object-cover opacity-80 group-hover:opacity-100 group-hover:scale-110 transition-all duration-700",crossOrigin:"anonymous",loading:"lazy"}),e.jsxs("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col justify-end p-4 md:p-6",children:[e.jsx("span",{className:"text-[8px] font-black uppercase tracking-[2px] text-accent mb-2 block",children:new Date(I.created_at).toLocaleTimeString("es-AR",{hour:"2-digit",minute:"2-digit"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>f(I.image_url),className:"flex-1 bg-white text-black py-3 rounded-xl text-[8px] font-black uppercase tracking-[1px] hover:bg-accent hover:text-white transition-colors flex items-center justify-center gap-2",children:e.jsx("span",{children:"Ver"})}),e.jsx("a",{href:I.image_url,target:"_blank",rel:"noreferrer",className:"p-3 bg-white/10 rounded-xl text-white hover:bg-white hover:text-black transition-colors",children:e.jsx(Ge,{className:"w-4 h-4"})})]})]})]},I.id))}),e.jsxs("div",{className:"flex items-center justify-center gap-2 mt-8 text-white/20",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500/50 animate-pulse"}),e.jsx("span",{className:"text-[9px] tracking-[1px]",children:"actualizaciÃ³n automÃ¡tica cada 30s"})]})]})]})},Ua=({eventConfig:l,onClose:c})=>{const m=d.useRef(null),f=`https://app.metalabia.com/?event=${l.event_slug}`,_=()=>{var Q;const C=(Q=m.current)==null?void 0:Q.querySelector("canvas");if(!C)return;const y=document.createElement("canvas"),u=y.getContext("2d");if(!u)return;const $=60,T=400,U=120,I=80,F=T+$*2,H=U+T+$+I;y.width=F,y.height=H,u.fillStyle="#0a0a0c",u.fillRect(0,0,F,H),u.strokeStyle="rgba(255, 85, 0, 0.3)",u.lineWidth=2,u.roundRect(4,4,F-8,H-8,20),u.stroke(),u.fillStyle="#ffffff",u.font="bold 28px system-ui, -apple-system, sans-serif",u.textAlign="center",u.fillText(l.event_name,F/2,55),u.fillStyle="rgba(255, 85, 0, 0.8)",u.font="bold 14px system-ui, -apple-system, sans-serif",u.fillText("ðŸ“¸  ESCANEÃ Y CREÃ TU FOTO CON IA",F/2,85);const W=(F-T-20)/2,R=U;u.fillStyle="#ffffff",u.beginPath(),u.roundRect(W,R,T+20,T+20,16),u.fill(),u.drawImage(C,W+10,R+10,T,T),u.fillStyle="rgba(255,255,255,0.3)",u.font="12px system-ui, -apple-system, sans-serif",u.fillText("Powered by MetaLab IA  â€¢  metalab30.com",F/2,H-30);const re=document.createElement("a");re.download=`qr-${l.event_slug}.png`,re.href=y.toDataURL("image/png"),re.click()},M=()=>{var u;const C=(u=m.current)==null?void 0:u.querySelector("canvas");if(!C)return;const y=window.open("","_blank");y&&(y.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>QR - ${l.event_name}</title>
          <style>
            * { margin: 0; padding: 0; box-sizing: border-box; }
            body { 
              display: flex; flex-direction: column; align-items: center; 
              justify-content: center; min-height: 100vh; font-family: system-ui;
              background: white; color: black;
            }
            h1 { font-size: 32px; font-weight: 900; margin-bottom: 8px; text-transform: uppercase; }
            p.sub { font-size: 16px; color: #666; margin-bottom: 40px; }
            .qr { margin-bottom: 40px; }
            .qr img { width: 300px; height: 300px; }
            p.url { font-size: 12px; color: #999; margin-bottom: 8px; }
            p.brand { font-size: 11px; color: #ccc; }
          </style>
        </head>
        <body>
          <h1>${l.event_name}</h1>
          <p class="sub">ðŸ“¸ EscaneÃ¡ y creÃ¡ tu foto con IA</p>
          <div class="qr"><img src="${C.toDataURL()}" /></div>
          <p class="url">${f}</p>
          <p class="brand">Powered by MetaLab IA</p>
          <script>window.onload = () => { window.print(); }<\/script>
        </body>
      </html>
    `),y.document.close())};return e.jsx("div",{className:"fixed inset-0 z-[500] bg-black/95 backdrop-blur-2xl flex items-center justify-center p-4 animate-[fadeIn_0.3s_ease-out]",children:e.jsxs("div",{className:"relative w-full max-w-sm bg-[#0a0a0c] rounded-[40px] p-10 border border-white/10 text-center flex flex-col items-center",children:[e.jsx("button",{onClick:c,className:"absolute top-6 right-6 w-10 h-10 rounded-full bg-white/5 flex items-center justify-center hover:bg-white/10 transition-colors",children:e.jsx(xe,{className:"w-5 h-5"})}),e.jsx("div",{className:"w-16 h-16 bg-accent/20 rounded-full flex items-center justify-center mb-6",children:e.jsx("span",{className:"text-3xl",children:"ðŸ“±"})}),e.jsx("h3",{className:"text-xl font-black mb-1 uppercase italic text-white",children:l.event_name}),e.jsx("p",{className:"text-accent text-[10px] uppercase tracking-[3px] mb-8 font-bold",children:"EscaneÃ¡ y creÃ¡ tu foto con IA"}),e.jsx("div",{ref:m,className:"p-5 bg-white rounded-3xl mb-8 shadow-[0_0_40px_rgba(255,85,0,0.15)]",children:e.jsx(at,{value:f,size:220,level:"H",includeMargin:!0,imageSettings:{src:"/icon-192x192.png",height:40,width:40,excavate:!0}})}),e.jsx("p",{className:"text-white/20 text-[9px] tracking-[1px] mb-8 break-all px-4",children:f}),e.jsxs("div",{className:"flex gap-3 w-full",children:[e.jsxs("button",{onClick:_,className:"flex-1 flex items-center justify-center gap-2 px-6 py-4 bg-accent text-white rounded-xl hover:bg-accent/80 transition-all text-[10px] font-black tracking-[2px] uppercase",children:[e.jsx(Ge,{className:"w-4 h-4"}),"Descargar"]}),e.jsxs("button",{onClick:M,className:"flex-1 flex items-center justify-center gap-2 px-6 py-4 bg-white/10 text-white border border-white/10 rounded-xl hover:bg-white/20 transition-all text-[10px] font-black tracking-[2px] uppercase",children:[e.jsx($t,{className:"w-4 h-4"}),"Imprimir"]})]}),e.jsx("p",{className:"text-white/15 text-[8px] tracking-[1px] mt-6 leading-relaxed",children:"ImprimÃ­ este QR y colocalo en las mesas del evento. Los invitados escanean y generan sus fotos al instante."})]})})},Ba=({eventConfig:l,supabase:c,onBackToMain:m})=>{var pe,ze,Se,s;const[f,_]=d.useState("WELCOME"),[M,C]=d.useState(null),[y,u]=d.useState(null),[$,T]=d.useState(!1),[U,I]=d.useState(null),[F,H]=d.useState(!1),[W,R]=d.useState(null),[re,Q]=d.useState(null),[ue,Me]=d.useState(0),[ae,ne]=d.useState(!1),he=d.useRef(null),_e=d.useRef(null),me=d.useRef(null),ge=["Invocando a los genios digitales... âœ¨","Analizando tu mejor Ã¡ngulo... ðŸ¤³","Mezclando pÃ­xeles y creatividad... ðŸŽ¨","Casi listo para la magia... ðŸª„","Tu retrato estÃ¡ en el horno digital... ðŸ¥¨","Ajustando las luces del multiverso... ðŸŒŒ"],Ce=fe.useMemo(()=>{var t;return((t=l==null?void 0:l.selected_styles)==null?void 0:t.length)>0?We.filter(x=>l.selected_styles.includes(x.id)):We.slice(0,8)},[l]);d.useEffect(()=>{if(F){const t=setInterval(()=>{Me(x=>(x+1)%ge.length)},5e3);return()=>clearInterval(t)}},[F]);const Te=async()=>{I(null);try{me.current&&me.current.getTracks().forEach(x=>x.stop());const t=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:1080},height:{ideal:1920}}});me.current=t,he.current&&(he.current.srcObject=t)}catch(t){console.error(t),I("No se pudo acceder a la cÃ¡mara. Verifica los permisos.")}};d.useEffect(()=>{f==="CAMERA"?Te():me.current&&(me.current.getTracks().forEach(t=>t.stop()),me.current=null)},[f]);const Ie=()=>{if(he.current&&_e.current){const t=_e.current,x=he.current,b=x.videoWidth,v=x.videoHeight;t.width=b,t.height=v;const w=t.getContext("2d");w&&(w.translate(t.width,0),w.scale(-1,1),w.drawImage(x,0,0,b,v),u(t.toDataURL("image/jpeg",.8)),_("CAMERA"))}},h=async()=>{var t;if(!(!M||!y)){_("PROCESSING"),H(!0),Q(null);try{const{data:x,error:b}=await c.functions.invoke("cabina-vision",{body:{user_photo:y,model_id:M.id,aspect_ratio:"9:16",event_id:l.id,guest_id:`guest_${Date.now()}`}});if(b)throw b;if(!(x!=null&&x.success))throw new Error((x==null?void 0:x.error)||"Error en el procesamiento");R(x.image_url),_("RESULT"),xt({particleCount:150,spread:70,origin:{y:.6},colors:[((t=l.config)==null?void 0:t.primary_color)||"#7f13ec","#ffffff"]})}catch(x){console.error(x),Q(x.message||"Lo sentimos, hubo un error. Intenta de nuevo."),_("RESULT")}finally{H(!1)}}},we=()=>{_("WELCOME"),C(null),u(null),R(null),Q(null)},i={"--accent-color":((pe=l==null?void 0:l.config)==null?void 0:pe.primary_color)||"#7f13ec","--accent-glow":`${((ze=l==null?void 0:l.config)==null?void 0:ze.primary_color)||"#7f13ec"}40`};return e.jsxs("div",{className:"fixed inset-0 bg-[#050505] text-white flex flex-col items-center overflow-hidden z-[100] font-sans selection:bg-accent/30",style:i,children:[e.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-[800px] h-[300px] bg-accent/10 blur-[150px] rounded-full -translate-y-1/2 pointer-events-none"}),e.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 w-[600px] h-[300px] bg-accent/5 blur-[120px] rounded-full translate-y-1/2 pointer-events-none"}),e.jsxs("main",{className:"relative flex-1 w-full max-w-lg flex flex-col p-6 overflow-y-auto no-scrollbar",children:[e.jsxs("div",{className:"flex flex-col items-center mb-8 pt-4",children:[(Se=l.config)!=null&&Se.logo_url?e.jsx(oe.img,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},src:l.config.logo_url,alt:"Logo",className:"h-12 w-auto object-contain mb-4 drop-shadow-2xl"}):e.jsx(ce,{className:"w-10 h-10 text-accent mb-4"}),e.jsx("h1",{className:"text-xl font-black italic uppercase tracking-tighter text-white/90",children:l.event_name})]}),e.jsxs(Ve,{mode:"wait",children:[f==="WELCOME"&&e.jsxs(oe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.05},className:"flex-1 flex flex-col items-center justify-center text-center space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-4xl font-extrabold tracking-tight leading-tight",children:((s=l.config)==null?void 0:s.welcome_text)||"Â¡Bienvenidos a la fiesta!"}),e.jsx("p",{className:"text-white/40 text-sm uppercase tracking-[4px] font-bold",children:"Transforma tu foto con IA en segundos"})]}),e.jsxs("div",{className:"w-full aspect-[4/5] bg-white/5 rounded-[40px] border border-white/10 flex items-center justify-center p-8 relative overflow-hidden group",children:[e.jsx(oe.div,{animate:{rotate:[0,5,-5,0]},transition:{duration:6,repeat:1/0,ease:"easeInOut"},className:"relative z-10",children:e.jsx(He,{className:"w-24 h-24 text-accent drop-shadow-[0_0_30px_rgba(var(--accent-rgb),0.5)]"})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-accent/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"})]}),e.jsxs("button",{onClick:()=>_("STYLE_SELECTION"),className:"w-full py-6 bg-accent rounded-3xl text-lg font-black uppercase tracking-[6px] shadow-[0_20px_40px_rgba(0,0,0,0.4)] hover:scale-105 active:scale-95 transition-all flex items-center justify-center gap-4",children:["Iniciar Experiencia",e.jsx(oa,{className:"w-6 h-6"})]})]},"welcome"),f==="STYLE_SELECTION"&&e.jsxs(oe.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("span",{className:"text-accent text-[10px] font-black uppercase tracking-[4px]",children:"Paso 01"}),e.jsx("h2",{className:"text-2xl font-black uppercase italic italic",children:"ElegÃ­ tu Estilo"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4 pb-24",children:Ce.map(t=>e.jsx(Je,{type:"character",title:t.title,sampleImageUrl:t.url,isSelected:(M==null?void 0:M.id)===t.id,onSelect:()=>{C(t),_("CAMERA")}},t.id))})]},"styles"),f==="CAMERA"&&e.jsxs(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.9},className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("span",{className:"text-accent text-[10px] font-black uppercase tracking-[4px]",children:"Paso 02"}),e.jsx("h2",{className:"text-2xl font-black uppercase italic",children:"Â¡SonrÃ­e!"})]}),e.jsxs("div",{className:"relative w-full aspect-[3/4] rounded-[40px] overflow-hidden bg-black border border-white/10 shadow-2xl",children:[y?e.jsx("img",{src:y,className:"w-full h-full object-cover",alt:"Captura"}):e.jsxs(e.Fragment,{children:[e.jsx("video",{ref:he,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover scale-x-[-1]"}),e.jsx("div",{className:"absolute inset-0 border-[20px] border-black/40 pointer-events-none",children:e.jsx("div",{className:"w-full h-full border border-white/5 flex items-center justify-center",children:e.jsx("div",{className:"w-48 h-64 border border-accent/30 rounded-[100px] border-dashed"})})})]}),U&&e.jsxs("div",{className:"absolute inset-0 bg-black/90 flex flex-col items-center justify-center p-8 text-center mt-[-40px]",children:[e.jsx(xe,{className:"w-12 h-12 text-red-500 mb-4"}),e.jsx("p",{className:"font-bold text-sm uppercase tracking-wider",children:U}),e.jsx("button",{onClick:Te,className:"mt-6 px-6 py-3 bg-white/10 rounded-full text-[10px] font-black uppercase",children:"Reintentar"})]})]}),e.jsx("div",{className:"mt-8 flex items-center justify-center gap-6",children:y?e.jsxs("div",{className:"w-full space-y-4",children:[e.jsxs("button",{onClick:h,className:"w-full py-6 bg-accent rounded-3xl text-lg font-black uppercase tracking-[6px] shadow-[0_20px_40px_rgba(0,0,0,0.4)] flex items-center justify-center gap-4",children:["Generar Arte",e.jsx(ce,{className:"w-6 h-6"})]}),e.jsx("button",{onClick:()=>u(null),className:"w-full py-4 bg-white/5 text-white/40 rounded-2xl text-[10px] font-black uppercase tracking-[4px]",children:"Tomar otra foto"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>_("STYLE_SELECTION"),className:"w-16 h-16 rounded-full bg-white/5 border border-white/10 flex items-center justify-center text-white/50 hover:bg-white/10",children:e.jsx(Lt,{className:"w-6 h-6"})}),e.jsx("button",{onClick:Ie,className:"w-24 h-24 rounded-full bg-white p-1.5 shadow-[0_0_40px_rgba(255,255,255,0.2)]",children:e.jsx("div",{className:"w-full h-full rounded-full border-4 border-black bg-black/5 flex items-center justify-center",children:e.jsx("div",{className:"w-6 h-6 bg-black rounded-full"})})}),e.jsx("div",{className:"w-16"})]})})]},"camera"),f==="PROCESSING"&&e.jsxs(oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex-1 flex flex-col items-center justify-center text-center p-8",children:[e.jsxs("div",{className:"relative mb-12",children:[e.jsx(oe.div,{animate:{rotate:360},transition:{duration:4,repeat:1/0,ease:"linear"},className:"w-48 h-48 rounded-full border-t-2 border-accent"}),e.jsx(oe.div,{animate:{rotate:-360},transition:{duration:3,repeat:1/0,ease:"linear"},className:"absolute inset-4 rounded-full border-r-2 border-accent/30"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(ce,{className:"w-12 h-12 text-accent animate-pulse"})})]}),e.jsx("h2",{className:"text-2xl font-black uppercase italic mb-4",children:"Procesando Alquimia..."}),e.jsxs("p",{className:"text-white/60 text-sm font-medium h-12 italic",children:['"',ge[ue],'"']})]},"processing"),f==="RESULT"&&e.jsx(oe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"flex-1 flex flex-col items-center",children:re?e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center space-y-6",children:[e.jsx("div",{className:"w-20 h-20 bg-red-500/10 border border-red-500/20 rounded-full flex items-center justify-center",children:e.jsx(xe,{className:"w-10 h-10 text-red-500"})}),e.jsx("h3",{className:"text-2xl font-black uppercase text-red-500 italic",children:"Algo saliÃ³ mal"}),e.jsx("p",{className:"text-white/40 text-sm",children:re}),e.jsx("button",{onClick:we,className:"px-8 py-4 bg-white/10 rounded-2xl text-[10px] font-black uppercase tracking-widest",children:"Reintentar"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-black uppercase italic text-accent leading-none",children:"Â¡IncreÃ­ble!"}),e.jsx("p",{className:"text-[10px] font-black text-white/30 uppercase tracking-[4px] mt-2",children:"Tu Alquimia Digital ha terminado"})]}),e.jsxs("div",{className:"relative w-full aspect-[3/4] rounded-[40px] overflow-hidden border-2 border-accent shadow-[0_0_50px_rgba(var(--accent-rgb),0.3)] bg-black mb-8 group",children:[e.jsx("img",{src:W||"",alt:"Resultado",className:"w-full h-full object-cover",crossOrigin:"anonymous"}),e.jsx("div",{className:"absolute top-4 right-4 z-20",children:e.jsx("button",{onClick:()=>ne(!0),className:"w-12 h-12 bg-black/60 backdrop-blur-xl border border-white/20 rounded-2xl flex items-center justify-center shadow-2xl",children:e.jsx(et,{className:"w-6 h-6 text-white"})})})]}),e.jsxs("div",{className:"w-full space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>{const t=document.createElement("a");t.href=W,t.download=`creativa-${Date.now()}.jpg`,t.click()},className:"py-5 bg-white text-black rounded-2xl font-black uppercase tracking-[2px] text-[10px] flex items-center justify-center gap-3",children:[e.jsx(Ge,{className:"w-4 h-4"}),"Descargar"]}),e.jsxs("button",{onClick:async()=>{var t;if(W)try{const b=await(await fetch(W,{mode:"cors"})).blob(),v=new File([b],`creativa-${Date.now()}.png`,{type:"image/png"});if(navigator.share&&((t=navigator.canShare)!=null&&t.call(navigator,{files:[v]})))await navigator.share({files:[v],title:l.event_name,text:`ðŸ“¸ Mi Alquimia en ${l.event_name} âœ¨ metalab30.com`});else{const w=encodeURIComponent(`ðŸ“¸ Â¡MirÃ¡ mi foto del evento ${l.event_name}! âœ¨ Creada por metalab30.com`);window.open(`https://wa.me/?text=${w}`,"_blank")}}catch{const b=encodeURIComponent(`ðŸ“¸ Â¡MirÃ¡ mi foto del evento ${l.event_name}! âœ¨ metalab30.com`);window.open(`https://wa.me/?text=${b}`,"_blank")}},className:"py-5 bg-accent text-white rounded-2xl font-black uppercase tracking-[2px] text-[10px] flex items-center justify-center gap-3",children:[e.jsx(Aa,{className:"w-4 h-4"}),"WhatsApp"]})]}),e.jsx("button",{onClick:we,className:"w-full py-4 bg-white/5 text-white/40 rounded-2xl text-[9px] font-black uppercase tracking-[4px]",children:"Hacer otra foto"})]})]})},"result")]})]}),e.jsx("footer",{className:"py-8 opacity-20 hover:opacity-100 transition-opacity",children:e.jsx("span",{className:"text-[7px] font-black uppercase tracking-[6px] italic",children:"Powered by Creativa Labs"})}),e.jsx(Ve,{children:ae&&W&&e.jsx(oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[200] bg-black/95 backdrop-blur-2xl flex items-center justify-center p-6",children:e.jsxs("div",{className:"relative w-full max-w-sm bg-[#0a0a0c] rounded-[48px] p-12 border border-white/10 text-center flex flex-col items-center shadow-[0_40px_100px_rgba(0,0,0,1)]",children:[e.jsx("button",{onClick:()=>ne(!1),className:"absolute top-8 right-8 w-12 h-12 rounded-full bg-white/5 flex items-center justify-center hover:bg-white/10",children:e.jsx(xe,{className:"w-6 h-6"})}),e.jsx(et,{className:"w-16 h-16 text-accent mb-6"}),e.jsx("h3",{className:"text-2xl font-black uppercase italic mb-2 tracking-tighter",children:"Escanea y GuardÃ¡"}),e.jsxs("p",{className:"text-white/40 text-[9px] uppercase tracking-[3px] mb-10 leading-relaxed",children:["ApuntÃ¡ con tu cÃ¡mara",e.jsx("br",{}),"para descargar tu Alquimia"]}),e.jsx("div",{className:"p-6 bg-white rounded-[40px] shadow-2xl mb-10",children:e.jsx(at,{value:W,size:220,level:"H",includeMargin:!0})}),e.jsx("button",{onClick:()=>ne(!1),className:"text-[10px] font-black uppercase tracking-[4px] text-accent hover:text-white",children:"Volver a la Foto"})]})})}),e.jsx("canvas",{ref:_e,className:"hidden"})]})},Wa=({eventConfig:l,supabase:c})=>{var T,U,I,F;const[m,f]=d.useState([]),[_,M]=d.useState(0),[C,y]=d.useState(!0);d.useEffect(()=>{(async()=>{const{data:R}=await c.from("generations").select("id, image_url, created_at").eq("event_id",l.id).order("created_at",{ascending:!1}).limit(50);R&&f(R),y(!1)})();const W=c.channel(`public-gallery-${l.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"generations",filter:`event_id=eq.${l.id}`},R=>{f(re=>[R.new,...re.slice(0,49)]),M(0)}).subscribe();return()=>{c.removeChannel(W)}},[l.id]),d.useEffect(()=>{if(m.length>1){const H=setInterval(()=>{M(W=>(W+1)%m.length)},8e3);return()=>clearInterval(H)}},[m.length]);const u={"--accent-color":((T=l==null?void 0:l.config)==null?void 0:T.primary_color)||"#7f13ec"},$=`${window.location.origin}/?event=${l.event_slug}`;return e.jsxs("div",{className:"fixed inset-0 bg-[#050505] text-white flex flex-col overflow-hidden z-[100] font-sans",style:u,children:[e.jsx("div",{className:"relative flex-1 flex items-center justify-center p-8 md:p-12",children:e.jsx(Ve,{mode:"wait",children:m.length>0?e.jsxs(oe.div,{initial:{opacity:0,scale:.9,rotate:-2},animate:{opacity:1,scale:1,rotate:0},exit:{opacity:0,scale:1.1,rotate:2},transition:{duration:.8,ease:"easeOut"},className:"relative w-full h-full max-w-4xl flex items-center justify-center",children:[e.jsxs("div",{className:"relative w-full h-full rounded-[40px] md:rounded-[60px] overflow-hidden border-[10px] border-white/5 shadow-[0_0_100px_rgba(0,0,0,0.8)]",children:[e.jsx("img",{src:(U=m[_])==null?void 0:U.image_url,alt:"Live Event",className:"w-full h-full object-cover",crossOrigin:"anonymous"}),e.jsx("div",{className:"absolute bottom-10 left-10 z-10",children:e.jsxs("div",{className:"flex items-center gap-4 bg-black/40 backdrop-blur-xl px-6 py-3 rounded-full border border-white/10",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),e.jsxs("span",{className:"text-xs font-black uppercase tracking-[4px]",children:["Live from ",l.event_name]})]})})]}),e.jsx("div",{className:"absolute -top-10 -right-10 w-40 h-40 bg-accent/20 blur-[80px] rounded-full pointer-events-none"}),e.jsx("div",{className:"absolute -bottom-10 -left-10 w-60 h-60 bg-accent/10 blur-[100px] rounded-full pointer-events-none"})]},(I=m[_])==null?void 0:I.id):e.jsxs("div",{className:"flex flex-col items-center gap-6 text-white/20",children:[e.jsx(He,{className:"w-24 h-24 animate-pulse"}),e.jsx("p",{className:"text-xl font-black uppercase tracking-[10px]",children:"Esperando la primera Alquimia..."})]})})}),e.jsxs("div",{className:"h-48 md:h-auto md:w-[400px] bg-black/40 backdrop-blur-3xl border-t md:border-t-0 md:border-l border-white/10 p-10 flex md:flex-col items-center justify-between md:justify-center gap-8 relative z-20",children:[e.jsxs("div",{className:"text-center md:mb-8",children:[(F=l.config)!=null&&F.logo_url?e.jsx("img",{src:l.config.logo_url,alt:"Logo",className:"h-16 w-auto object-contain mx-auto mb-6"}):e.jsx(ce,{className:"w-12 h-12 text-accent mx-auto mb-6"}),e.jsx("h2",{className:"hidden md:block text-2xl font-black uppercase italic tracking-tighter leading-none mb-2",children:"Â¡Hazte la Tuya!"}),e.jsx("p",{className:"hidden md:block text-[10px] font-bold text-white/40 uppercase tracking-[4px]",children:"Escanea el cÃ³digo QR"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-[40px] shadow-2xl relative",children:[e.jsx(at,{value:$,size:window.innerWidth<768?120:200,level:"H",includeMargin:!0}),e.jsx("div",{className:"absolute -inset-2 border-2 border-accent/30 rounded-[48px] animate-pulse pointer-events-none"})]}),e.jsx("div",{className:"hidden md:flex flex-col items-center gap-4 mt-8 opacity-40",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(dt,{className:"w-5 h-5"}),e.jsx("span",{className:"text-[9px] font-black uppercase tracking-[2px]",children:"Usa tu mÃ³vil"})]})}),e.jsxs("div",{className:"md:hidden text-right",children:[e.jsx("h2",{className:"text-lg font-black uppercase italic tracking-tighter text-accent leading-none",children:l.event_name}),e.jsx("p",{className:"text-[8px] font-bold text-white/40 uppercase tracking-[2px] mt-1",children:"Live Gallery"})]})]}),e.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-full bg-gradient-to-l from-accent/5 to-transparent pointer-events-none"})]})},Ha=(l,c)=>{if(!l||l[0]!=="#")return`rgba(255, 85, 0, ${c})`;const m=parseInt(l.slice(1,3),16),f=parseInt(l.slice(3,5),16),_=parseInt(l.slice(5,7),16);return`rgba(${m}, ${f}, ${_}, ${c})`},Ga=()=>{var kt,_t,Ct,St;const[l,c]=d.useState({selectedIdentity:null,details:"GeneraciÃ³n desde Cabina Creativa Labs",email:"booth@creativa.lab",aspectRatio:"9:16",resolution:"1K",outputFormat:"png"}),[m,f]=d.useState(!1),[_,M]=d.useState(!1),[C,y]=d.useState(!1),[u,$]=d.useState(null),[T,U]=d.useState(!1),[I,F]=d.useState(null),[H,W]=d.useState(!1),[R,re]=d.useState(!1),[Q,ue]=d.useState(null),[Me,ae]=d.useState(null),[ne,he]=d.useState(0),[_e,me]=d.useState(0),[ge,Ce]=d.useState([]),[Te,Ie]=d.useState(!1),[h,we]=d.useState(null),[i,pe]=d.useState(null),[ze,Se]=d.useState(!0),[s,t]=d.useState(!1),[x,b]=d.useState([]),[v,w]=d.useState(!1),[P,g]=d.useState(!1),[N,O]=d.useState(null),[z,q]=d.useState("all"),[A,Z]=d.useState(""),[L,Y]=d.useState(null),[de,se]=d.useState(!1),[ie,be]=d.useState(!1),[X,st]=d.useState([]),[le,B]=d.useState("gallery"),[Qe,ve]=d.useState([]),[je,De]=d.useState(null),[p,Fe]=d.useState(null),[qe,ke]=d.useState(null),[rt,Ze]=d.useState(()=>!!new URLSearchParams(window.location.search).get("event")),Pe=3e3,Oe=fe.useMemo(()=>{const a=We.map(r=>{const o=X.find(V=>V.id===r.id),j=X.find(V=>V.id===r.subCategory),D=X.find(V=>V.id===r.category);let S=r.isActive??!0;return D&&D.is_active===!1&&(S=!1),j&&j.is_active===!1&&(S=!1),o&&o.is_active===!1&&(S=!1),{...r,isPremium:o?o.is_premium:r.isPremium,usageCount:(o==null?void 0:o.usage_count)||0,isActive:S}}),n=X.filter(r=>!We.some(o=>o.id===r.id)).filter(r=>r.label&&r.image_url).map(r=>{const o=X.find(S=>S.id===r.category),j=X.find(S=>S.id===r.subcategory);let D=r.is_active??!0;return o&&o.is_active===!1&&(D=!1),j&&j.is_active===!1&&(D=!1),{id:r.id,title:r.label,category:r.category||"General",subCategory:r.subcategory||"General",url:r.image_url,isPremium:r.is_premium||!1,usageCount:r.usage_count||0,isActive:D,tags:Array.isArray(r.tags)?r.tags:[]}});return[...a,...n]},[X]),ye=fe.useMemo(()=>{let a=Oe.filter(n=>n.isActive);return p!=null&&p.selected_styles&&p.selected_styles.length>0&&(a=a.filter(n=>p.selected_styles.includes(n.id))),a},[Oe,p]),Dt=fe.useMemo(()=>{if(p)return[...ye].sort(()=>Math.random()-.5).slice(0,4);const a=["jhonw_a","sup_a","pb_a","f1_a","magic_a"];return ye.filter(n=>a.includes(n.id)).sort(()=>Math.random()-.5).slice(0,4)},[ye,p]),Ye=fe.useMemo(()=>[...ye].sort((a,n)=>(n.usageCount||0)-(a.usageCount||0)).slice(0,5).filter(a=>(a.usageCount||0)>0),[ye]),pt=fe.useMemo(()=>{const n=Array.from(new Set(ye.map(r=>r.category).filter(Boolean))).map(r=>{const o=Et.find(j=>j.id.toLowerCase()===(r==null?void 0:r.toLowerCase()));return{id:r,label:(o==null?void 0:o.label)||r.charAt(0).toUpperCase()+r.slice(1),icon:(o==null?void 0:o.icon)||ce}});return[Et.find(r=>r.id==="all"),...n.filter(r=>r.id!=="all")]},[ye]);d.useEffect(()=>{G.auth.getSession().then(({data:{session:n}})=>{we(n)});const{data:{subscription:a}}=G.auth.onAuthStateChange((n,r)=>{we(r)});return()=>a.unsubscribe()},[]),d.useEffect(()=>{if(!A.trim()||A.length<3)return;const a=setTimeout(async()=>{var n;try{await G.from("search_logs").insert({query:A.trim().toLowerCase(),user_id:(n=h==null?void 0:h.user)==null?void 0:n.id})}catch(r){console.error("Error logging search:",r)}},2e3);return()=>clearTimeout(a)},[A,(kt=h==null?void 0:h.user)==null?void 0:kt.id]),d.useEffect(()=>{bt();const a=G.channel("styles_sync").on("postgres_changes",{event:"*",schema:"public",table:"styles_metadata"},n=>{console.log("Realtime update received for styles_metadata:",n),bt()}).subscribe();return()=>{G.removeChannel(a)}},[s]),d.useEffect(()=>{h!=null&&h.user&&(ft(),gt(),Ot())},[h]);const Ft=new URLSearchParams(window.location.search).get("mode")==="gallery",qt=(i==null?void 0:i.is_master)||(i==null?void 0:i.role)==="partner"||(i==null?void 0:i.role)==="admin"||(i==null?void 0:i.role)==="master";d.useEffect(()=>{(async()=>{const r=new URLSearchParams(window.location.search).get("event");if(r){Ze(!0);try{const{data:o,error:j}=await G.from("events").select("*").eq("event_slug",r).maybeSingle();if(j)throw j;if(o){console.log("Evento detectado:",o.event_name);const D=new Date;if(o.start_date&&new Date(o.start_date)>D){const V=new Date(o.start_date).toLocaleDateString("es-AR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"});ke(`ðŸ—“ï¸ Este evento aÃºn no comenzÃ³. Arranca el ${V}`);return}if(o.end_date&&new Date(o.end_date)<D){ke("ðŸŽ¬ Este evento ya finalizÃ³. Â¡Gracias por participar!");return}if((o.credits_allocated||0)-(o.credits_used||0)<=0){ke(`ðŸŽŸï¸ Los crÃ©ditos de "${o.event_name}" se agotaron.`);return}Fe(o)}else ke("âŒ Evento no encontrado. VerificÃ¡ el link.")}catch(o){console.error("Error cargando evento:",o)}finally{Ze(!1)}}})()},[h]),d.useEffect(()=>{var a;if((a=p==null?void 0:p.config)!=null&&a.primary_color){const n=p.config.primary_color,r=Ha(n,.4);document.documentElement.style.setProperty("--accent-color",n),document.documentElement.style.setProperty("--accent-glow",r),console.log("ðŸŽ¨ Branding aplicado:",n)}else document.documentElement.style.setProperty("--accent-color","#ff5500"),document.documentElement.style.setProperty("--accent-glow","rgba(255, 85, 0, 0.4)")},[p]);const Ot=async()=>{if(h!=null&&h.user)try{Ie(!0);const{data:a,error:n}=await G.from("favorites").select("style_id").eq("user_id",h.user.id);if(n)throw n;Ce(a.map(r=>r.style_id))}catch(a){console.error("Error fetching favorites:",a)}finally{Ie(!1)}},Ut=async a=>{if(h!=null&&h.user)try{ge.includes(a)?(await G.from("favorites").delete().eq("user_id",h.user.id).eq("style_id",a),Ce(r=>r.filter(o=>o!==a))):(await G.from("favorites").insert({user_id:h.user.id,style_id:a}),Ce(r=>[...r,a]))}catch(n){console.error("Error toggling favorite:",n)}};d.useEffect(()=>{var r,o,j,D;const a=((o=(r=p==null?void 0:p.partner)==null?void 0:r.config)==null?void 0:o.primary_color)||((D=(j=i==null?void 0:i.partner)==null?void 0:j.config)==null?void 0:D.primary_color)||"#ff5500",n=(S,V)=>{parseInt((S.slice(1,4).length===2,S.slice(1,3)),16);const Ne=parseInt(S.substring(1,3),16),k=parseInt(S.substring(3,5),16),J=parseInt(S.substring(5,7),16);return`rgba(${Ne}, ${k}, ${J}, ${V})`};try{const S=n(a,.4);document.documentElement.style.setProperty("--accent-color",a),document.documentElement.style.setProperty("--accent-glow",S)}catch(S){console.error("Error applying dynamic colors:",S)}},[p,i]);const bt=async()=>{try{const{data:a,error:n}=await G.from("styles_metadata").select("*");if(n)throw n;st(a||[])}catch(a){console.error("Error fetching styles metadata:",a)}},ft=async()=>{try{Se(!0);const{data:a,error:n}=await G.from("profiles").select("credits, total_generations, is_master, role, partner_id, unlocked_packs, full_name").eq("id",h.user.id).single();if(n)throw n;pe(a)}catch(a){console.error("Error fetching profile:",a)}finally{Se(!1)}},Bt=async a=>{if(h!=null&&h.user)try{const{error:n}=await G.from("profiles").update(a).eq("id",h.user.id);if(n)throw n;pe(r=>r?{...r,...a}:null),ve(r=>[...r,{id:Date.now().toString(),message:"âœ… Perfil actualizado correctamente",type:"success"}])}catch(n){console.error("Error updating profile:",n),ve(r=>[...r,{id:Date.now().toString(),message:"âŒ Error al actualizar perfil",type:"error"}])}},gt=async()=>{var a;try{w(!0);let n=G.from("generations").select("*");if(p!=null&&p.id)n=n.eq("event_id",p.id);else if((a=h==null?void 0:h.user)!=null&&a.id)n=n.eq("user_id",h.user.id);else{w(!1);return}const{data:r,error:o}=await n.order("created_at",{ascending:!1}).limit(20);if(o)throw o;b(r||[])}catch(n){console.error("Error fetching generations:",n)}finally{w(!1)}},wt=async a=>{if(!(!i||!(h!=null&&h.user)))try{if(be(!0),i.credits<Pe){Y(null),g(!0);return}const n=[...i.unlocked_packs||[],a],r=i.credits-Pe,{error:o}=await G.from("profiles").update({credits:r,unlocked_packs:n}).eq("id",h.user.id);if(o)throw o;pe(k=>k?{...k,credits:r,unlocked_packs:n}:null),Y(null),ae(null);const j=3*1e3,D=Date.now()+j,S={startVelocity:30,spread:360,ticks:60,zIndex:500},V=(k,J)=>Math.random()*(J-k)+k,Ne=setInterval(function(){const k=D-Date.now();if(k<=0)return clearInterval(Ne);const J=50*(k/j);xt({...S,particleCount:J,origin:{x:V(.1,.3),y:Math.random()-.2},colors:["#ff5500","#ffffff","#00d2ff"]}),xt({...S,particleCount:J,origin:{x:V(.7,.9),y:Math.random()-.2},colors:["#ff5500","#ffffff","#00d2ff"]})},250)}catch(n){console.error("Error unlocking pack:",n),ae("No se pudo desbloquear el pack. Reintenta.")}finally{be(!1)}},vt=["Invocando a los genios digitales para tu retrato... âœ¨","Â¿SabÃ­as que la IA analiza miles de patrones para crear tu estilo? ðŸ§ ","Â¡EstÃ¡s quedando increÃ­ble! (O al menos eso dice nuestro algoritmo) ðŸ˜‰","Extrayendo creatividad del Ã©ter digital... ðŸŒŒ","Dato curioso: La IA no duerme, pero toma mucho cafÃ© virtual â˜•","Ajustando las luces y sombras para tu obra maestra... ðŸŽ¨","Casi listo... la perfecciÃ³n toma unos segundos extra âŒ›","Convirtiendo pÃ­xeles en arte puro para ti ðŸ’Ž","Esperamos que estÃ©s disfrutando de la magia de Creativa Labs ðŸš€","Buscando tu mejor Ã¡ngulo en el multiverso digital... ðŸŒ€"],Ue=d.useRef(null),nt=d.useRef(null),Be=d.useRef(null),jt=async()=>{F(null);try{Be.current&&Be.current.getTracks().forEach(o=>o.stop());const a=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:1280},height:{ideal:720}}});Be.current=a;let n=0;const r=()=>{Ue.current?Ue.current.srcObject=a:n<10&&(n++,setTimeout(r,100))};r()}catch(a){console.error(a),F("No se pudo acceder a la cÃ¡mara. Verifica los permisos.")}};d.useEffect(()=>{if(C&&T){const a=setTimeout(jt,300);return()=>clearTimeout(a)}},[C,T]),d.useEffect(()=>{let a,n;return m?(he(0),me(0),a=setInterval(()=>{he(r=>r+1)},1e3),n=setInterval(()=>{me(r=>(r+1)%vt.length)},6e3)):he(0),()=>{clearInterval(a),clearInterval(n)}},[m]);const Wt=()=>{y(!0),U(!0)},Ht=()=>{if(Ue.current&&nt.current){const a=nt.current,n=Ue.current,r=1024;let o=n.videoWidth,j=n.videoHeight;o>j?o>r&&(j*=r/o,o=r):j>r&&(o*=r/j,j=r),a.width=o,a.height=j;const D=a.getContext("2d");D&&(D.translate(a.width,0),D.scale(-1,1),D.drawImage(n,0,0,a.width,a.height),$(a.toDataURL("image/jpeg",.8)),U(!1),Be.current&&Be.current.getTracks().forEach(S=>S.stop()))}},Gt=async a=>{var o,j,D,S,V,Ne;a.preventDefault();const n=!!p,r=i==null?void 0:i.is_master;if(!(!l.selectedIdentity||!u)&&!(!n&&!(h!=null&&h.user))){if(n){if((p.credits_allocated||0)-(p.credits_used||0)<=0){ae("ðŸŽŸï¸ Los crÃ©ditos del evento se agotaron."),M(!0),B("result");return}}else if(!r&&(!i||i.credits<100)){ae(i&&i.total_generations>=5?"Ya gastaste tus 500 crÃ©ditos.":"Saldo insuficiente."),M(!0),B("result");return}if(f(!0),ue(null),ae(null),!n&&!r&&(h!=null&&h.user))try{const k=new Date;k.setHours(0,0,0,0);const{count:J,error:E}=await G.from("generations").select("*",{count:"exact",head:!0}).eq("user_id",h.user.id).gte("created_at",k.toISOString());if(E)throw E;if(J!==null&&J>=2){ae("MÃ¡ximo de impresiones del dÃ­a alcanzado."),M(!0),B("result"),f(!1);return}}catch(k){console.error("Error checking daily limit:",k)}if(!n&&!r&&(h!=null&&h.user))try{const{error:k}=await G.from("profiles").update({credits:i.credits-100}).eq("id",h.user.id);if(k)throw k;pe(J=>J?{...J,credits:J.credits-100}:null)}catch(k){console.error("Error deducting credit:",k),ae("Error al procesar crÃ©ditos. Intenta de nuevo."),f(!1);return}B("processing");try{const{data:k,error:J}=await G.functions.invoke("cabina-vision",{body:{user_photo:u,model_id:l.selectedIdentity,aspect_ratio:l.aspectRatio,user_id:((o=h==null?void 0:h.user)==null?void 0:o.id)||null,email:((j=h==null?void 0:h.user)==null?void 0:j.email)||null,guest_id:`cabina_${Date.now()}`,event_id:(p==null?void 0:p.id)||null}});if(J)throw console.warn("Invoke error (timeout), habilitando modo espera..."),await new Promise(K=>setTimeout(K,2e3)),new Error("VAR: Se perdiÃ³ la conexiÃ³n, pero tu Alquimia ya estÃ¡ en proceso en la nube. ðŸ‡¦ðŸ‡·âœ¨");if(!(k!=null&&k.success))throw new Error((k==null?void 0:k.error)||"Error al iniciar la IA");let E=k.image_url;if(!E&&k.taskId){console.log("Modo rescate activado para taskId:",k.taskId);for(let K=0;K<10;K++){await new Promise(Re=>setTimeout(Re,5e3));const{data:ee}=await G.functions.invoke("cabina-vision",{body:{action:"check",taskId:k.taskId,model_id:l.selectedIdentity}});if(ee!=null&&ee.success&&ee.state==="success"&&ee.image_url){E=ee.image_url;break}}}if(!E)throw new Error("VAR: Alquimia en proceso en la nube... âœ¨");ue(E),h!=null&&h.user&&i&&(await G.from("profiles").update({total_generations:(i.total_generations||0)+1}).eq("id",h.user.id),ft()),n&&Fe(K=>K&&{...K,credits_used:(K.credits_used||0)+1}),gt(),M(!0),B("result"),ve(K=>[...K,{id:Date.now().toString(),message:"ðŸª„ Â¡Tu foto estÃ¡ lista!",type:"success",action:()=>{B("result"),window.scrollTo({top:0,behavior:"smooth"})}}])}catch(k){console.error("Submission error:",k),((D=k.message)==null?void 0:D.includes("non-2xx"))||((S=k.message)==null?void 0:S.includes("timeout"))||((V=k.message)==null?void 0:V.includes("Failed to fetch"))||((Ne=k.message)==null?void 0:Ne.includes("VAR"))?ae("VAR: Se perdiÃ³ la conexiÃ³n, pero tu Alquimia ya estÃ¡ en proceso en la nube. ðŸ‡¦ðŸ‡·âœ¨"):(!n&&!r&&i&&(h!=null&&h.user)&&(await G.from("profiles").update({credits:i.credits}).eq("id",h.user.id),pe(E=>E?{...E,credits:i.credits}:null)),ae(k.message||"Error al procesar la imagen.")),M(!0),B("result")}finally{f(!1),De(null)}}},Vt=()=>{if(!Q)return;const a=window.open("","_blank");a&&(a.document.write(`
        <html>
          <head>
            <title>Imprimir Foto</title>
            <style>
              body { margin: 0; display: flex; align-items: center; justify-content: center; height: 100vh; background: #fff; }
              img { max-width: 100%; max-height: 100%; object-fit: contain; }
              @media print {
                body { background: none; }
                img { width: 100%; height: auto; }
              }
            </style>
          </head>
          <body>
            <img src="${Q}" onload="setTimeout(function(){window.print();}, 500);" />
          </body>
        </html>
      `),a.document.close())},Qt=async()=>{if(!Q)return;const a=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent);try{const n=`creativa-photo-${Date.now()}.png`,o=await(await fetch(Q,{mode:"cors"})).blob(),j=new File([o],n,{type:"image/png"});if(a&&navigator.share&&navigator.canShare&&navigator.canShare({files:[j]}))try{await navigator.share({files:[j],title:"Mi Foto Creativa",text:"Â¡Mira mi foto generada con IA por Creativa Labs!"});return}catch(V){if(V.name!=="AbortError")throw V;return}const D=window.URL.createObjectURL(o),S=document.createElement("a");S.href=D,S.download=n,document.body.appendChild(S),S.click(),document.body.removeChild(S),window.URL.revokeObjectURL(D)}catch(n){console.error("Download/Share error:",n),a?window.location.href=Q:window.open(Q,"_blank")}},Zt=[{id:"9:16",label:"9:16",icon:dt,desc:"Portrait"},{id:"16:9",label:"16:9",icon:Mt,desc:"Landscape"},{id:"4:5",label:"4:5",icon:ja,desc:"Classic"}],yt=()=>{$(null),ue(null),M(!1),f(!1),c(a=>({...a,selectedIdentity:null})),B("gallery"),ae(null),window.scrollTo({top:0,behavior:"smooth"})},lt=u&&l.selectedIdentity,Nt=async a=>{try{O(a.name),console.log("Iniciando pago para pack:",a.name);const{data:n,error:r}=await G.functions.invoke("mercadopago-payment",{body:{user_id:h.user.id,credits:a.credits,price:a.price,pack_name:a.name,redirect_url:window.location.origin}});if(r)throw console.error("Error invocando funciÃ³n:",r),r;if(console.log("Respuesta de funciÃ³n:",n),n!=null&&n.error){const j=n.message||"Error desconocido en el servidor.";ae(`Error de Pago: ${j}`),ve(D=>[...D,{id:Date.now().toString(),message:`âŒ ${j}`,type:"error"}]);return}const o=(n==null?void 0:n.init_point)||(n==null?void 0:n.sandbox_init_point);o?window.location.href=o:(console.error("No se recibiÃ³ URL de pago:",n),ae("No se pudo generar el enlace de pago."),ve(j=>[...j,{id:Date.now().toString(),message:"âŒ Error: No se recibiÃ³ link de pago",type:"error"}]))}catch(n){console.error("Error initiating payment:",n);let r=n.message||"No se pudo iniciar el proceso de pago.";if(n.context)try{const o=await n.context.json();r=o.message||o.error||r}catch{}ae(`Error: ${r}`),ve(o=>[...o,{id:Date.now().toString(),message:`âŒ ${r}`,type:"error"}])}finally{O(null)}};return rt?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-primary",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-white/5 border-t-[#7f13ec] rounded-full animate-spin"}),e.jsx(ce,{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-6 h-6 text-[#7f13ec] animate-pulse"})]}),e.jsx("div",{className:"mt-8 text-white font-bold tracking-[0.2em] animate-pulse uppercase text-[10px]",children:"Iniciando Experiencia AlquÃ­mica"})]}):qe?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-primary",children:e.jsxs("div",{className:"text-center max-w-md mx-auto px-6",children:[e.jsx("div",{className:"text-6xl mb-6",children:"ðŸŽ­"}),e.jsx("h2",{style:{fontFamily:"var(--font-display)",fontSize:"1.5rem",color:"white",marginBottom:"12px"},children:"Cabina de Fotos"}),e.jsx("p",{style:{color:"rgba(255,255,255,0.7)",fontSize:"1.1rem",lineHeight:"1.6",marginBottom:"24px"},children:qe}),e.jsx("a",{href:"https://metalab30.com",style:{color:"rgba(255,255,255,0.4)",fontSize:"0.8rem",textDecoration:"underline"},children:"metalab30.com"})]})}):!h&&!p?e.jsx(ta,{}):Ft&&p?e.jsx(Wa,{eventConfig:p,supabase:G}):p&&!qt?e.jsx(Ba,{eventConfig:p,supabase:G}):e.jsxs("div",{className:"relative w-full min-h-screen font-sans text-white bg-primary overflow-x-hidden",children:[e.jsx(ra,{}),h||p?e.jsx(za,{user:(h==null?void 0:h.user)||null,profile:i,eventConfig:p,onNavigate:a=>{a.startsWith("category_")?(q(a.replace("category_","")),B("gallery")):a==="favorites"?(q("favorites"),B("gallery")):a==="buy_credits"?g(!0):a==="show-qr"?re(!0):B(a),window.scrollTo({top:0,behavior:"smooth"})},onLogout:async()=>{await G.auth.signOut(),window.location.href="/"},categories:pt,currentView:le}):null,e.jsxs("div",{className:"fixed bottom-10 right-10 z-[500] flex flex-col gap-4",children:[Qe.map(a=>e.jsxs("div",{onClick:a.action,className:`flex items-center gap-4 px-8 py-4 rounded-2xl border backdrop-blur-2xl animate-[fadeInRight_0.5s_ease-out] shadow-2xl cursor-pointer hover:scale-105 transition-all
              ${a.type==="success"?"bg-accent/20 border-accent/40 text-white":"bg-red-500/20 border-red-500/40 text-red-100"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${a.type==="success"?"bg-accent":"bg-red-500"}`,children:a.type==="success"?e.jsx(Xe,{className:"w-5 h-5"}):e.jsx(Ke,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-black text-[10px] uppercase tracking-[2px]",children:a.message}),a.action&&e.jsx("span",{className:"text-[7px] font-bold text-accent uppercase tracking-[1px]",children:"Clic para ver"})]}),e.jsx("button",{onClick:n=>{n.stopPropagation(),ve(r=>r.filter(o=>o.id!==a.id))},className:"ml-4 opacity-40 hover:opacity-100",children:e.jsx(xe,{className:"w-4 h-4"})})]},a.id)),m&&(je==null?void 0:je.active)&&e.jsxs("div",{className:"bg-black/80 backdrop-blur-xl border border-white/10 p-6 rounded-[24px] shadow-2xl flex items-center gap-6 animate-[fadeInUp_0.5s_ease-out]",children:[e.jsxs("div",{className:"relative w-12 h-12 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 border-[1px] border-accent/20 rounded-full animate-spin"}),e.jsxs("span",{className:"text-[8px] font-black",children:[ne,"s"]})]}),e.jsxs("div",{className:"flex flex-col text-left",children:[e.jsx("span",{className:"text-white text-[10px] font-black uppercase tracking-[2px]",children:"Alquimia en progreso..."}),e.jsx("span",{className:"text-white/40 text-[7px] uppercase tracking-[1px]",children:"PodÃ©s seguir usando la app"})]}),e.jsx("button",{onClick:()=>{B("gallery"),De({active:!1,id:null,startTime:Date.now()})},className:"px-4 py-2 bg-accent text-white rounded-lg text-[8px] font-black uppercase tracking-[1px] hover:bg-white transition-colors",children:"Cerrar"})]})]}),m&&!(je!=null&&je.active)&&e.jsxs("div",{className:"fixed inset-0 z-[200] bg-black/90 backdrop-blur-2xl flex flex-col items-center justify-center p-6 text-center animate-[fadeIn_0.3s_ease-out]",children:[e.jsxs("div",{className:"relative mb-12",children:[e.jsx("div",{className:"absolute inset-0 bg-accent/20 blur-[100px] rounded-full animate-pulse"}),e.jsxs("div",{className:"relative w-32 h-32 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 border-[1px] border-accent/20 rounded-full animate-[ping_3s_linear_infinite]"}),e.jsx("div",{className:"absolute inset-[-10px] border-[1px] border-white/5 rounded-full animate-[ping_4s_linear_infinite]"}),e.jsx(Ae,{className:"w-full h-full text-accent animate-spin stroke-[1px] opacity-40"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(Mt,{className:"w-6 h-6 text-accent animate-pulse mb-1"}),e.jsx("span",{className:"text-xl font-black italic tracking-tighter text-white",children:"AI"}),e.jsx("span",{className:"text-[6px] font-black uppercase tracking-[2px] text-accent/60",children:"Scanning..."})]})})]})]}),e.jsxs("div",{className:"max-w-md space-y-8 relative z-10",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-accent text-[10px] font-black tracking-[5px] uppercase block animate-pulse",children:"Procesando Alquimia Digital"}),e.jsx("h3",{className:"text-2xl font-black italic uppercase tracking-tight h-20 flex items-center justify-center transition-all duration-500",children:vt[_e]})]}),e.jsxs("div",{className:"flex flex-col items-center gap-4 pt-8",children:[e.jsx("div",{className:"w-64 h-1.5 bg-white/5 rounded-full overflow-hidden border border-white/5",children:e.jsx("div",{className:"h-full bg-accent transition-all duration-300 ease-linear shadow-[0_0_15px_rgba(255,85,0,0.5)]",style:{width:`${ne<5?ne/5*30:ne<25?30+(ne-5)/20*50:ne<60?80+(ne-25)/35*15:Math.min(99,95+(ne-60)/60*4)}%`}})}),e.jsx("p",{className:"text-[8px] text-white/30 font-black tracking-[3px] uppercase",children:ne>30?"Finalizando detalles finales...":"Sincronizando con el servidor"})]}),e.jsxs("button",{onClick:()=>{De({active:!0,id:null,startTime:Date.now()}),B("gallery")},className:"px-8 py-4 mt-8 bg-white/5 border border-white/10 rounded-xl text-[10px] font-black uppercase tracking-[2px] hover:bg-white/10 transition-all flex items-center gap-3 group",children:[e.jsx(dt,{className:"w-4 h-4 text-accent group-hover:scale-110 transition-transform"}),"Procesar en Segundo Plano"]})]})]}),le==="gallery"&&e.jsx("section",{className:"relative h-[40vh] w-full flex flex-col items-center justify-center z-10 px-4",children:e.jsxs("div",{className:"text-center pointer-events-none",children:[e.jsxs("h1",{className:"font-black text-[clamp(2.5rem,10vw,10rem)] leading-none tracking-tighter uppercase select-none",children:[(p==null?void 0:p.event_name)||"Creativa"," ",e.jsx("span",{className:"text-white/20",children:p?"":"Labs"})]}),e.jsxs("div",{className:"mt-4 flex flex-col items-center gap-2",children:[e.jsx("div",{className:"h-[1px] w-16 bg-accent"}),e.jsx("div",{className:"text-[10px] tracking-[0.5rem] text-white/40 uppercase",children:((_t=p==null?void 0:p.config)==null?void 0:_t.welcome_text)||"Photo Booth Experience"})]})]})}),(le==="setup"||le==="result"||le==="history")&&e.jsx("div",{className:"fixed top-24 left-6 z-[160] animate-[fadeIn_0.5s_ease-out]",children:e.jsxs("button",{onClick:()=>{yt(),B("gallery")},className:"group flex items-center gap-4 px-6 py-3 bg-black/40 backdrop-blur-xl border border-white/5 rounded-full hover:bg-white/10 transition-all pointer-events-auto shadow-2xl",children:[e.jsx(Pt,{className:"w-4 h-4 text-accent rotate-90"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-[3px]",children:"Volver a Estilos"})]})}),e.jsx("section",{className:"relative min-h-screen w-full bg-[#050505]/95 backdrop-blur-md border-t border-white/5 py-20 px-6 z-20",children:e.jsxs("div",{className:"max-w-[1200px] mx-auto",children:[le==="gallery"&&e.jsxs("div",{className:"animate-[fadeIn_1s_ease-out]",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("span",{className:"inline-block px-4 py-1 rounded-full bg-accent/10 border border-accent/20 text-accent text-[10px] font-black tracking-[3px] uppercase mb-6",children:"Discovery"}),e.jsx("h2",{className:"text-4xl font-black tracking-tight uppercase mb-4 italic text-white",children:p?"Selecciona tu Estilo":"Elige tu destino"}),e.jsx("p",{className:"text-white/30 text-[10px] uppercase tracking-[4px]",children:p?"Personaliza tu experiencia exclusiva":"Navega por los universos visuales disponibles"}),p&&e.jsxs("button",{onClick:()=>B("event-gallery"),className:"mt-8 inline-flex items-center gap-2 px-6 py-3 bg-white/5 border border-white/10 rounded-2xl hover:bg-white/10 transition-all text-white/40 hover:text-white text-[10px] font-black tracking-[2px] uppercase blur-none",children:[e.jsx(tt,{className:"w-4 h-4"}),e.jsx("span",{children:"Ver GalerÃ­a del Evento"})]})]}),e.jsxs("div",{className:"max-w-xl mx-auto mb-12 relative group",children:[e.jsx("div",{className:"absolute inset-0 bg-accent/5 blur-2xl rounded-full opacity-0 group-focus-within:opacity-100 transition-opacity duration-700"}),e.jsxs("div",{className:"relative flex items-center bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl overflow-hidden focus-within:border-accent/50 transition-all duration-300",children:[e.jsx("div",{className:"pl-6 pointer-events-none",children:e.jsx(It,{className:`w-5 h-5 transition-colors ${A?"text-accent":"text-white/20"}`})}),e.jsx("input",{type:"text",value:A,onChange:a=>Z(a.target.value),placeholder:"Busca por estilo, pack o tags (ej: f1, traje, neon)...",className:"w-full bg-transparent border-none px-6 py-5 text-sm font-bold placeholder:text-white/10 focus:outline-none focus:ring-0 text-white"}),A&&e.jsx("button",{onClick:()=>Z(""),className:"pr-6 text-white/20 hover:text-white transition-colors",children:e.jsx(xe,{className:"w-4 h-4"})})]})]}),!A&&e.jsxs("div",{className:"mb-20 animate-[fadeIn_0.8s_ease-out]",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-8",children:[e.jsx(ce,{className:"w-4 h-4 text-amber-500 animate-pulse"}),e.jsx("h3",{className:"text-[10px] font-black tracking-[4px] uppercase text-white/40",children:"Recomendados para vos"}),e.jsx(ce,{className:"w-4 h-4 text-amber-500 animate-pulse"})]}),e.jsx("div",{className:"flex flex-nowrap overflow-x-auto pb-8 gap-3 px-4 no-scrollbar justify-center",children:Dt.map(a=>{var n;return e.jsx("div",{className:"min-w-[110px] sm:min-w-[120px] transform hover:scale-110 transition-all duration-500",children:e.jsx(Je,{type:"character",title:a.title,sampleImageUrl:a.url,isSelected:l.selectedIdentity===a.id,isPremium:a.isPremium,isUnlocked:((n=i==null?void 0:i.unlocked_packs)==null?void 0:n.includes(a.subCategory))||(i==null?void 0:i.is_master),usageCount:a.usageCount,isTopStyle:Ye.some(r=>r.id===a.id),tags:[],onSelect:()=>{var o;a.isPremium&&!((o=i==null?void 0:i.unlocked_packs)!=null&&o.includes(a.subCategory))&&!(i!=null&&i.is_master)?i&&i.credits>=Pe?Y(a):se(!0):(c(j=>({...j,selectedIdentity:a.id})),B("setup"),window.scrollTo({top:0,behavior:"smooth"}))}})},`rec-${a.id}`)})})]}),!A&&!p&&Ye.length>0&&e.jsxs("div",{className:"mb-20 animate-[fadeIn_1.2s_ease-out]",children:[e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-10",children:[e.jsx("div",{className:"h-[1px] w-12 bg-gradient-to-r from-transparent to-accent"}),e.jsx(Le,{className:"w-5 h-5 text-accent animate-pulse"}),e.jsx("h3",{className:"text-[12px] font-black tracking-[6px] uppercase text-white italic",children:"Los MÃ¡s Buscados"}),e.jsx(Le,{className:"w-5 h-5 text-accent animate-pulse"}),e.jsx("div",{className:"h-[1px] w-12 bg-gradient-to-l from-transparent to-accent"})]}),e.jsx("div",{className:"flex flex-nowrap overflow-x-auto pb-8 gap-4 px-4 no-scrollbar justify-center",children:Ye.map(a=>{var n;return e.jsx("div",{className:"min-w-[120px] sm:min-w-[140px] transform hover:scale-110 transition-all duration-500",children:e.jsx(Je,{type:"character",title:a.title,sampleImageUrl:a.url,isSelected:l.selectedIdentity===a.id,isPremium:a.isPremium,isUnlocked:((n=i==null?void 0:i.unlocked_packs)==null?void 0:n.includes(a.subCategory))||(i==null?void 0:i.is_master),usageCount:a.usageCount,isTopStyle:!0,tags:[],onSelect:()=>{var o;a.isPremium&&!((o=i==null?void 0:i.unlocked_packs)!=null&&o.includes(a.subCategory))&&!(i!=null&&i.is_master)?i&&i.credits>=Pe?Y(a):se(!0):(c(j=>({...j,selectedIdentity:a.id})),B("setup"),window.scrollTo({top:0,behavior:"smooth"}))}})},`top-${a.id}`)})})]}),e.jsxs("div",{className:"flex gap-4 overflow-x-auto pb-8 no-scrollbar -mx-4 px-4 mb-16",children:[pt.map(a=>e.jsxs("button",{onClick:()=>q(a.id),className:`flex-shrink-0 flex items-center gap-3 px-8 py-4 rounded-2xl font-black text-[10px] tracking-[4px] uppercase transition-all duration-500
                      ${z===a.id?"bg-accent text-white shadow-[0_0_40px_var(--accent-glow)] scale-105 border-accent":"bg-white/5 text-white/40 border border-white/5 hover:bg-white/10 hover:border-white/20"}`,children:[e.jsx(a.icon,{className:`w-4 h-4 ${z===a.id?"animate-pulse":"opacity-40"}`}),a.label]},a.id)),!p&&e.jsxs("button",{onClick:()=>q("favorites"),className:`flex-shrink-0 flex items-center gap-3 px-8 py-4 rounded-2xl border-2 transition-all duration-500
                      ${z==="favorites"?"bg-gradient-to-r from-pink-500 to-rose-500 border-pink-500 text-white shadow-[0_0_30px_rgba(244,63,94,0.3)] scale-105":"bg-white/5 border-white/5 text-white/40 hover:text-pink-400 hover:border-pink-500/30"}`,children:[e.jsx(ht,{className:`w-5 h-5 ${z==="favorites"?"fill-current animate-pulse":""}`}),e.jsx("span",{className:"font-black tracking-[2px] uppercase text-[10px]",children:"Favoritos"})]})]}),e.jsxs("div",{className:"space-y-20",children:[Array.from(new Set(ye.filter(a=>{const n=z==="favorites"?ge.includes(a.id):z==="all"||a.category===z,r=A.toLowerCase(),o=a.title.toLowerCase().includes(r)||a.subCategory.toLowerCase().includes(r)||a.tags.some(j=>j.toLowerCase().includes(r));return n&&o}).map(a=>a.subCategory))).sort((a,n)=>{const r=X.find(S=>S.id===a),o=X.find(S=>S.id===n),j=(r==null?void 0:r.sort_order)??999,D=(o==null?void 0:o.sort_order)??999;return j!==D?j-D:a.localeCompare(n)}).map(a=>{const n=()=>{const r=d.useRef(null),[o,j]=d.useState(!1),[D,S]=d.useState(!0),V=()=>{if(r.current){const{scrollLeft:E,scrollWidth:K,clientWidth:ee}=r.current;j(E>10),S(E<K-ee-10)}};d.useEffect(()=>{V();const E=setTimeout(V,500);return()=>clearTimeout(E)},[]);const Ne=E=>{if(r.current){const{clientWidth:K}=r.current,ee=E==="left"?-K*.8:K*.8;r.current.scrollBy({left:ee,behavior:"smooth"})}},k=ye.filter(E=>{const K=z==="favorites"?ge.includes(E.id):z==="all"||E.category===z,ee=A.toLowerCase();return E.subCategory===a&&K&&(E.title.toLowerCase().includes(ee)||E.subCategory.toLowerCase().includes(ee)||E.tags.some(Re=>Re.toLowerCase().includes(ee)))}),J=k.length;return e.jsxs("div",{className:"animate-[fadeIn_0.5s_ease-out]",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx("div",{className:"h-[2px] w-8 bg-accent"}),e.jsx("h3",{className:"text-sm font-black tracking-[4px] uppercase text-white/60 italic",children:a}),e.jsx("div",{className:"flex-grow h-[1px] bg-white/5"})]}),e.jsxs("div",{className:"relative group/carousel",children:[J>4&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>Ne("left"),className:`absolute -left-4 top-1/2 -translate-y-1/2 z-30 p-3 rounded-full bg-black/80 border border-accent/30 shadow-[0_0_20px_rgba(255,85,0,0.2)] backdrop-blur-xl transition-all duration-300 hover:scale-110 active:scale-95
                                    ${o?"opacity-100":"opacity-20 pointer-events-none"}`,children:e.jsx(ut,{className:"w-5 h-5 text-accent"})}),e.jsx("button",{onClick:()=>Ne("right"),className:`absolute -right-4 top-1/2 -translate-y-1/2 z-30 p-3 rounded-full bg-black/80 border border-accent/30 shadow-[0_0_20px_rgba(255,85,0,0.2)] backdrop-blur-xl transition-all duration-300 hover:scale-110 active:scale-95
                                    ${D?"opacity-100":"opacity-20 pointer-events-none"}`,children:e.jsx(ma,{className:"w-5 h-5 text-accent"})})]}),e.jsx("div",{ref:r,onScroll:V,className:`flex flex-nowrap overflow-x-auto pt-8 pb-12 gap-6 snap-x snap-mandatory no-scrollbar scroll-smooth px-4 ${J<=4?"justify-center":""}`,children:k.map(E=>{var K;return e.jsx("div",{className:"min-w-[130px] sm:min-w-[140px] lg:min-w-[150px] snap-center transform hover:scale-[1.08] transition-all duration-500",children:e.jsx(Je,{type:"character",title:E.title,sampleImageUrl:E.url,isSelected:l.selectedIdentity===E.id,isPremium:E.isPremium,isUnlocked:((K=i==null?void 0:i.unlocked_packs)==null?void 0:K.includes(E.subCategory))||(i==null?void 0:i.is_master),usageCount:E.usageCount,isTopStyle:Ye.some(ee=>ee.id===E.id),tags:E.tags,isFavorite:ge.includes(E.id),onToggleFavorite:ee=>{ee.stopPropagation(),Ut(E.id)},onSelect:()=>{var Re;E.isPremium&&!((Re=i==null?void 0:i.unlocked_packs)!=null&&Re.includes(E.subCategory))&&!(i!=null&&i.is_master)?i&&i.credits>=Pe?Y(E):se(!0):(c(Yt=>({...Yt,selectedIdentity:E.id})),B("setup"),window.scrollTo({top:0,behavior:"smooth"}))}})},E.id)})}),e.jsx("div",{className:"absolute left-0 top-0 bottom-12 w-20 bg-gradient-to-r from-[#050505]/80 to-transparent pointer-events-none z-[10] opacity-0 group-hover/carousel:opacity-100 transition-opacity"}),e.jsx("div",{className:"absolute right-0 top-0 bottom-12 w-20 bg-gradient-to-l from-[#050505]/80 to-transparent pointer-events-none z-[10] opacity-0 group-hover/carousel:opacity-100 transition-opacity"})]})]},a)};return e.jsx(n,{},a)}),A&&Oe.filter(a=>{const n=z==="all"||a.category===z,r=A.toLowerCase();return n&&(a.title.toLowerCase().includes(r)||a.subCategory.toLowerCase().includes(r)||a.tags.some(o=>o.toLowerCase().includes(r)))}).length===0&&e.jsxs("div",{className:"py-20 text-center animate-pulse",children:[e.jsx(It,{className:"w-12 h-12 text-white/5 mx-auto mb-4"}),e.jsxs("p",{className:"text-white/20 text-[10px] font-black uppercase tracking-[4px]",children:['No hay resultados para "',A,'"']}),e.jsx("button",{onClick:()=>Z(""),className:"mt-6 text-accent text-[8px] font-black uppercase tracking-[2px] hover:underline",children:"Limpiar bÃºsqueda"})]})]})]}),le==="setup"&&e.jsxs("div",{className:"animate-[fadeInDown_0.8s_ease-out]",children:[l.selectedIdentity&&e.jsxs("div",{className:"flex flex-col items-center mb-16",children:[e.jsx("div",{className:"w-32 h-32 rounded-3xl overflow-hidden border-2 border-accent mb-6 shadow-[0_0_30px_rgba(255,85,0,0.3)]",children:e.jsx("img",{src:(Ct=Oe.find(a=>a.id===l.selectedIdentity))==null?void 0:Ct.url,className:"w-full h-full object-cover",alt:"Estilo"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-accent text-[8px] font-black uppercase tracking-[4px]",children:"TransformaciÃ³n Elegida"}),e.jsx("h2",{className:"text-3xl font-black italic uppercase tracking-tighter text-white",children:(St=Oe.find(a=>a.id===l.selectedIdentity))==null?void 0:St.title})]})]}),e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("span",{className:"inline-block px-4 py-1 rounded-full bg-accent/10 border border-accent/20 text-accent text-[10px] font-black tracking-[3px] uppercase mb-6",children:"Paso 01"}),e.jsx("h2",{className:"text-2xl font-black tracking-[0.2em] uppercase mb-8",children:"Captura tu Rostro"}),e.jsx("p",{className:"text-white/30 text-[9px] uppercase tracking-[3px] mb-12",children:"Ubica tu cara en el centro para mejores resultados"}),e.jsx("div",{className:"flex flex-col items-center gap-8",children:u?e.jsxs("div",{className:"relative group",children:[e.jsxs("div",{className:"w-64 aspect-[4/5] rounded-3xl overflow-hidden border-2 border-accent shadow-[0_0_40px_rgba(255,85,0,0.3)] relative",children:[e.jsx("img",{src:u,className:"w-full h-full object-cover",alt:"Tu foto"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-[1px] bg-accent/50 animate-[scan_2s_linear_infinite]"})]}),e.jsx("button",{onClick:()=>$(null),className:"absolute -top-3 -right-3 w-10 h-10 bg-white text-black rounded-full flex items-center justify-center hover:bg-accent hover:text-white transition-all shadow-xl z-30",children:e.jsx(ot,{className:"w-5 h-5"})}),e.jsx("p",{className:"mt-4 text-[9px] font-black tracking-[3px] text-accent uppercase",children:"Foto Capturada"})]}):e.jsxs("button",{onClick:Wt,className:"group relative flex items-center justify-center gap-4 px-12 py-6 bg-white/5 border-2 border-white/10 rounded-2xl hover:bg-accent hover:border-accent transition-all duration-500 hover:scale-105",children:[e.jsx(He,{className:"w-6 h-6 text-accent group-hover:text-white"}),e.jsx("span",{className:"font-black tracking-[4px] uppercase text-sm text-white",children:"Iniciar CÃ¡mara"})]})})]}),e.jsxs("div",{className:"relative py-20 flex items-center justify-center",children:[e.jsx("div",{className:"absolute w-full h-[1px] bg-white/5"}),e.jsx(Pt,{className:`relative px-4 bg-[#050505] w-12 h-5 transition-colors duration-500 ${u?"text-accent":"text-white/10"}`})]}),e.jsx("div",{className:`transition-all duration-700 ${u?"opacity-100":"opacity-20 pointer-events-none grayscale"}`,children:e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("span",{className:"inline-block px-4 py-1 rounded-full bg-white/5 border border-white/10 text-white/40 text-[10px] font-black tracking-[3px] uppercase mb-6",children:"Paso 02"}),e.jsx("h2",{className:"text-2xl font-black tracking-[0.2em] uppercase mb-12",children:"Formato de Imagen"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-8 max-w-3xl mx-auto",children:Zt.map(a=>e.jsxs("button",{onClick:()=>c(n=>({...n,aspectRatio:a.id})),className:`relative group flex flex-col items-center p-8 rounded-[32px] border-2 transition-all duration-500
                          ${l.aspectRatio===a.id?"border-accent bg-accent/5 shadow-[0_0_40px_rgba(255,85,0,0.2)]":"border-white/5 bg-white/2 bg-[#121215] hover:border-white/20"}`,children:[e.jsx("div",{className:`mb-6 p-4 rounded-2xl transition-all duration-500
                          ${l.aspectRatio===a.id?"bg-accent text-white":"bg-white/5 text-white/40 group-hover:text-white"}`,children:e.jsx(a.icon,{className:"w-8 h-8"})}),e.jsx("span",{className:`text-xl font-black tracking-[4px] mb-2 ${l.aspectRatio===a.id?"text-white":"text-white/40"}`,children:a.label}),l.aspectRatio===a.id&&e.jsx(Xe,{className:"absolute top-4 right-4 w-5 h-5 text-accent"})]},a.id))})]})}),e.jsx("div",{className:`mt-32 max-w-sm mx-auto transition-all duration-700 ${lt?"opacity-100 scale-100":"opacity-30 scale-95 pointer-events-none"}`,children:e.jsxs("button",{onClick:Gt,disabled:m||!lt,className:"group relative w-full h-20 rounded-2xl overflow-hidden transition-all duration-500 shadow-2xl",children:[e.jsx("div",{className:`absolute inset-0 transition-all duration-500 ${lt?"bg-accent":"bg-white/10"}`}),e.jsx("div",{className:"relative flex items-center justify-center gap-4 font-black text-sm uppercase tracking-[6px] text-white",children:m?e.jsx("span",{children:"PROCESANDO..."}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"GENERAR ALQUIMIA"}),e.jsx(ce,{className:"w-5 h-5"})]})})]})})]}),le==="result"&&e.jsxs("div",{className:"mt-8 p-12 bg-accent/5 border border-accent/20 rounded-[40px] text-center max-w-2xl mx-auto backdrop-blur-3xl animate-[fadeIn_0.5s_ease-out] flex flex-col items-center",children:[Me?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-16 h-16 bg-red-500 rounded-full flex items-center justify-center mb-8",children:e.jsx(Ke,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"text-3xl font-black mb-4 uppercase italic text-red-500",children:"Error"}),e.jsx("p",{className:"text-white/70 text-xs font-bold uppercase tracking-[2px] leading-relaxed",children:Me})]}):Q?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-16 h-16 bg-accent rounded-full flex items-center justify-center mb-8 shadow-[0_0_30px_rgba(255,85,0,0.4)]",children:e.jsx(Xe,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"text-3xl font-black mb-10 uppercase italic text-white",children:"Â¡Tu Alquimia estÃ¡ Lista!"}),e.jsx("div",{className:"w-64 aspect-[4/5] rounded-3xl overflow-hidden border-2 border-accent shadow-[0_0_40px_rgba(255,85,0,0.3)] mb-10 bg-black",children:e.jsx("img",{src:Q,alt:"Resultado",className:"w-full h-full object-cover",crossOrigin:"anonymous"})}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[e.jsxs("button",{onClick:Vt,className:"group flex items-center gap-3 px-8 py-4 bg-white text-black rounded-xl hover:bg-accent hover:text-white transition-all shadow-lg hover:shadow-accent/50",children:[e.jsx($t,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs font-black tracking-[2px] uppercase",children:"Imprimir"})]}),e.jsxs("button",{onClick:Qt,className:"group flex items-center gap-3 px-8 py-4 bg-white/10 text-white border border-white/10 rounded-xl hover:bg-white/20 transition-all shadow-lg",children:[e.jsx(Ge,{className:"w-5 h-5 text-accent"}),e.jsx("span",{className:"text-xs font-black tracking-[2px] uppercase",children:"Descargar"})]}),e.jsxs("button",{onClick:async()=>{var a;if(Q)try{const r=await(await fetch(Q,{mode:"cors"})).blob(),o=new File([r],`creativa-${Date.now()}.png`,{type:"image/png"});if(navigator.share&&((a=navigator.canShare)!=null&&a.call(navigator,{files:[o]})))await navigator.share({files:[o],title:(p==null?void 0:p.event_name)||"Mi Foto Creativa",text:p?`ðŸ“¸ Mi foto del evento ${p.event_name} âœ¨ Creada con IA por metalab30.com`:"ðŸ“¸ Â¡Mi foto generada con IA! âœ¨ metalab30.com"});else{const j=encodeURIComponent(p?`ðŸ“¸ Â¡MirÃ¡ mi foto del evento ${p.event_name}! âœ¨ Creada con IA por metalab30.com`:"ðŸ“¸ Â¡MirÃ¡ mi foto generada con IA! âœ¨ metalab30.com");window.open(`https://wa.me/?text=${j}`,"_blank")}}catch(n){if(n.name!=="AbortError"){const r=encodeURIComponent("ðŸ“¸ Â¡MirÃ¡ mi foto generada con IA! âœ¨ metalab30.com");window.open(`https://wa.me/?text=${r}`,"_blank")}}},className:"group flex items-center gap-3 px-8 py-4 bg-[#25D366]/20 text-[#25D366] border border-[#25D366]/30 rounded-xl hover:bg-[#25D366]/30 transition-all shadow-lg",children:[e.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),e.jsx("span",{className:"text-xs font-black tracking-[2px] uppercase",children:"Compartir"})]})]}),p&&e.jsxs("button",{onClick:()=>{B("event-gallery")},className:"mt-6 flex items-center gap-2 px-6 py-3 bg-white/5 border border-white/10 rounded-xl hover:bg-white/10 transition-all text-white/60 hover:text-white mx-auto",children:[e.jsx("span",{className:"text-lg",children:"ðŸ“¸"}),e.jsx("span",{className:"text-[10px] font-bold tracking-[2px] uppercase",children:"Ver galerÃ­a del evento"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-16 h-16 bg-yellow-500 rounded-full flex items-center justify-center mb-8",children:e.jsx(Ke,{className:"w-8 h-8 text-white"})}),e.jsx("p",{children:"Respuesta inesperada del servidor."})]}),e.jsx("button",{onClick:yt,className:"mt-12 text-[9px] font-black tracking-[4px] uppercase text-white/30 hover:text-white transition-colors",children:"Reiniciar Proceso"})]}),le==="history"&&e.jsxs("div",{className:"animate-[fadeIn_0.5s_ease-out] max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col items-center mb-16 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-white/5 rounded-full flex items-center justify-center mb-6",children:e.jsx(tt,{className:"w-8 h-8 text-accent"})}),e.jsx("h2",{className:"text-3xl font-black uppercase italic tracking-tight text-white mb-2",children:"Mis Fotos"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-[1px] w-8 bg-accent/50"}),e.jsx("p",{className:"text-[10px] tracking-[4px] text-white/40 uppercase",children:"Historial de Generaciones"}),e.jsx("div",{className:"h-[1px] w-8 bg-accent/50"})]})]}),v?e.jsxs("div",{className:"flex flex-col items-center py-20 opacity-40",children:[e.jsx(Ae,{className:"w-10 h-10 animate-spin mb-4 text-accent"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-[2px]",children:"Cargando historial..."})]}):x.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-32 border-2 border-dashed border-white/5 rounded-[40px] bg-white/[0.02]",children:[e.jsx(He,{className:"w-12 h-12 text-white/10 mb-6"}),e.jsx("p",{className:"text-white/30 text-xs font-black uppercase tracking-[4px] mb-8",children:"AÃºn no has generado imÃ¡genes"}),e.jsx("button",{onClick:()=>B("gallery"),className:"px-8 py-4 bg-accent text-white rounded-xl text-[10px] font-black uppercase tracking-[2px] hover:bg-white hover:text-black transition-all",children:"Crear mi primera foto"})]}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:x.map(a=>e.jsxs("div",{className:"group relative aspect-[4/5] rounded-[32px] overflow-hidden border border-white/10 bg-[#0a0a0c] hover:border-accent/40 hover:shadow-[0_0_30px_rgba(0,0,0,0.5)] transition-all duration-500",children:[e.jsx("img",{src:a.image_url,alt:"GeneraciÃ³n",className:"w-full h-full object-cover opacity-80 group-hover:opacity-100 group-hover:scale-110 transition-all duration-700",crossOrigin:"anonymous"}),e.jsxs("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col justify-end p-6",children:[e.jsx("span",{className:"text-[8px] font-black uppercase tracking-[2px] text-accent mb-2 block",children:new Date(a.created_at).toLocaleDateString()}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{ue(a.image_url),M(!0),B("result"),window.scrollTo({top:0,behavior:"smooth"})},className:"flex-1 bg-white text-black py-3 rounded-xl text-[8px] font-black uppercase tracking-[1px] hover:bg-accent hover:text-white transition-colors flex items-center justify-center gap-2",children:e.jsx("span",{children:"Ver"})}),e.jsx("a",{href:a.image_url,target:"_blank",rel:"noreferrer",className:"p-3 bg-white/10 rounded-xl text-white hover:bg-white hover:text-black transition-colors",children:e.jsx(Ge,{className:"w-4 h-4"})})]})]})]},a.id))})]}),le==="event-gallery"&&p&&e.jsx(Oa,{eventConfig:p,supabase:G,onBack:()=>B("gallery"),onViewPhoto:a=>{ue(a),M(!0),B("result"),window.scrollTo({top:0,behavior:"smooth"})}}),le==="settings"&&e.jsx(Da,{profile:i,session:h,onBack:()=>B("gallery"),onAddCredits:()=>g(!0),onUpdateProfile:Bt}),le==="packs"&&e.jsx(Fa,{identities:We,unlockedPacks:i==null?void 0:i.unlocked_packs,userCredits:(i==null?void 0:i.credits)||0,onBack:()=>B("gallery"),onUnlock:wt,isUnlocking:ie}),le==="support"&&e.jsxs("div",{className:"flex flex-col items-center justify-center pt-32 pb-20 animate-[fadeIn_0.5s_ease-out]",children:[e.jsx("h2",{className:"text-3xl font-black italic uppercase text-white mb-6",children:"Soporte"}),e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-8 max-w-md w-full text-center",children:[e.jsx("p",{className:"text-white/60 text-sm mb-6",children:"Si tienes algÃºn problema o sugerencia, contÃ¡ctanos."}),e.jsx("a",{href:"mailto:support@metalab.ai",className:"inline-block px-8 py-4 bg-accent text-white rounded-xl font-black uppercase tracking-[2px] text-xs hover:bg-white hover:text-black transition-all",children:"Enviar Email"}),e.jsx("button",{onClick:()=>B("gallery"),className:"block w-full mt-6 text-[10px] font-black uppercase tracking-[2px] text-white/30 hover:text-white",children:"Volver"})]})]})]})}),C&&e.jsx("div",{className:"fixed inset-0 z-[100] bg-black/95 backdrop-blur-xl flex items-center justify-center p-4",children:e.jsxs("div",{className:"relative w-full max-w-md max-h-[90vh] aspect-[3/4] bg-primary rounded-[40px] overflow-hidden border border-white/10 flex flex-col",children:[e.jsxs("div",{className:"relative flex-1 bg-black overflow-hidden",children:[T?e.jsx("video",{ref:Ue,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover scale-x-[-1]"}):e.jsx("img",{src:u||"",className:"w-full h-full object-cover",alt:"PrevisualizaciÃ³n"}),I&&e.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/80 p-8 text-center",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(Ke,{className:"w-12 h-12 text-red-500 mb-4"}),e.jsx("p",{className:"text-white text-xs font-bold uppercase tracking-widest",children:I}),e.jsx("button",{onClick:jt,className:"mt-6 px-6 py-3 bg-white/10 hover:bg-white/20 rounded-full text-[10px] font-black uppercase tracking-widest transition-all",children:"Reintentar"})]})}),e.jsx("div",{className:"absolute inset-0 border-[20px] border-black/40 pointer-events-none",children:e.jsx("div",{className:"w-full h-full border border-white/5 relative flex items-center justify-center",children:e.jsx("div",{className:"w-48 h-64 border border-accent/20 rounded-[100px]"})})})]}),e.jsx("div",{className:"absolute bottom-10 left-0 w-full px-10 flex items-center justify-between z-20",children:T?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>y(!1),className:"w-12 h-12 rounded-full bg-white/5 flex items-center justify-center border border-white/10",children:e.jsx(xe,{className:"w-5 h-5"})}),e.jsx("button",{onClick:Ht,className:"w-20 h-20 rounded-full bg-white p-1 shadow-2xl",children:e.jsx("div",{className:"w-full h-full rounded-full border-4 border-black bg-black/5 flex items-center justify-center",children:e.jsx("div",{className:"w-4 h-4 bg-black rounded-full"})})}),e.jsx("div",{className:"w-12"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>U(!0),className:"flex flex-col items-center gap-2 group",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-white/5 border border-white/10 flex items-center justify-center group-hover:bg-white/10",children:e.jsx(ot,{className:"w-5 h-5"})}),e.jsx("span",{className:"text-[8px] font-black tracking-[2px] uppercase opacity-40",children:"Reintentar"})]}),e.jsxs("button",{onClick:()=>y(!1),className:"flex flex-col items-center gap-2 group",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-accent flex items-center justify-center shadow-lg",children:e.jsx(Xe,{className:"w-6 h-6"})}),e.jsx("span",{className:"text-[8px] font-black tracking-[2px] uppercase",children:"Listo"})]}),e.jsxs("button",{onClick:()=>{$(null),y(!1)},className:"flex flex-col items-center gap-2 group",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-white/5 border border-white/10 flex items-center justify-center group-hover:bg-white/10",children:e.jsx(xe,{className:"w-5 h-5"})}),e.jsx("span",{className:"text-[8px] font-black tracking-[2px] uppercase opacity-40",children:"Cerrar"})]})]})})]})}),H&&Q&&e.jsx("div",{className:"fixed inset-0 z-[110] bg-black/95 backdrop-blur-2xl flex items-center justify-center p-4",children:e.jsxs("div",{className:"relative w-full max-w-sm bg-[#0a0a0c] rounded-[40px] p-12 border border-white/10 text-center flex flex-col items-center",children:[e.jsx("button",{onClick:()=>W(!1),className:"absolute top-6 right-6 w-10 h-10 rounded-full bg-white/5 flex items-center justify-center hover:bg-white/10 transition-colors",children:e.jsx(xe,{className:"w-5 h-5"})}),e.jsx("div",{className:"w-16 h-16 bg-accent/20 rounded-full flex items-center justify-center mb-8",children:e.jsx(et,{className:"w-8 h-8 text-accent"})}),e.jsx("h3",{className:"text-2xl font-black mb-2 uppercase italic",children:"Escanear para Descargar"}),e.jsx("p",{className:"text-white/40 text-[10px] uppercase tracking-[2px] mb-8",children:"Escanea con tu cÃ¡mara para guardar en tu mÃ³vil"}),e.jsx("div",{className:"p-4 bg-white rounded-3xl mb-8",children:e.jsx(at,{value:Q,size:200,level:"H",includeMargin:!0})}),e.jsx("button",{onClick:()=>W(!1),className:"text-[10px] font-black tracking-[4px] uppercase text-accent hover:text-white transition-colors",children:"Cerrar"})]})}),R&&p&&e.jsx(Ua,{eventConfig:p,onClose:()=>re(!1)}),P&&e.jsx("div",{className:"fixed inset-0 z-[300] bg-black/40 backdrop-blur-md flex items-center justify-center p-4 animate-[fadeIn_0.3s_ease-out]",children:e.jsxs("div",{className:"relative w-full max-w-xl bg-white/5 backdrop-blur-[40px] rounded-[32px] p-6 md:p-8 border border-white/10 text-center shadow-2xl overflow-y-auto max-h-[95vh]",children:[e.jsx("button",{onClick:()=>g(!1),className:"absolute top-6 right-6 w-10 h-10 rounded-full bg-white/5 flex items-center justify-center hover:bg-white/10 transition-colors",children:e.jsx(xe,{className:"w-5 h-5"})}),e.jsx("div",{className:"w-16 h-16 bg-accent/20 rounded-full flex items-center justify-center mb-8 mx-auto",children:e.jsx(At,{className:"w-8 h-8 text-accent"})}),e.jsx("h3",{className:"text-xl md:text-2xl font-black mb-1 uppercase italic tracking-tight",children:"ElegÃ­ tu Pack"}),e.jsx("p",{className:"text-accent text-[7px] font-black uppercase tracking-[2px] mb-1",children:"Desbloquea todos los estilos Premium"}),e.jsx("p",{className:"text-white/40 text-[6px] uppercase tracking-[2px] mb-6",children:"ObtenÃ© crÃ©ditos para tus retratos con IA"}),e.jsx("div",{className:"flex flex-wrap items-center justify-center gap-3",children:[{name:"Starter",price:4e3,credits:500,bonus:"",color:"white/5",popular:!1,premium:!1},{name:"Standard",price:8e3,credits:1100,bonus:"+10%",color:"accent/5",popular:!0,premium:!1},{name:"Business",price:1e4,credits:1500,bonus:"+20%",color:"white/5",popular:!1,premium:!1}].map(a=>e.jsxs("div",{className:`relative w-full max-w-[150px] p-4 rounded-[24px] border transition-all duration-500 flex flex-col items-center group
                    ${a.popular?"bg-accent/10 border-accent shadow-[0_0_20px_rgba(255,85,0,0.1)] scale-105 z-10":"bg-white/5 border-white/5 hover:border-white/20"}`,children:[a.popular&&e.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-accent text-[8px] font-black uppercase tracking-[2px] px-4 py-1 rounded-full",children:"MÃ¡s Popular"}),a.premium&&e.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-gradient-to-r from-amber-500 to-yellow-300 text-[8px] font-black uppercase tracking-[2px] px-4 py-1 rounded-full text-black",children:"Especial Packs"}),e.jsx("span",{className:"text-[7px] font-black uppercase tracking-[1px] text-white/40 mb-3",children:a.name}),e.jsxs("div",{className:"flex flex-col items-center mb-4",children:[e.jsx("span",{className:`text-3xl font-black italic mb-1 ${a.premium?"text-amber-400":"text-white"}`,children:a.credits}),e.jsx("span",{className:"text-[7px] font-black uppercase tracking-[1px] text-accent",children:"CrÃ©ditos"}),a.bonus&&e.jsxs("div",{className:`mt-4 flex items-center gap-2 px-3 py-1 rounded-full ${a.premium?"bg-amber-500/20":"bg-accent/20"}`,children:[e.jsx(Le,{className:`w-3 h-3 ${a.premium?"text-amber-400":"text-accent"}`}),e.jsx("span",{className:`text-[8px] font-black uppercase tracking-[1px] ${a.premium?"text-amber-400":"text-accent"}`,children:a.bonus})]})]}),e.jsxs("div",{className:`text-lg font-black italic mb-4 ${a.premium?"text-amber-400":"text-white"}`,children:["$",a.price.toLocaleString()]}),e.jsx("button",{disabled:!!N,onClick:()=>Nt(a),className:`w-full py-4 rounded-xl text-xs font-black uppercase tracking-[2px] transition-all duration-300 flex items-center justify-center gap-2
                      ${a.popular?"bg-accent text-white hover:bg-white hover:text-black":"bg-white text-black hover:bg-accent hover:text-white"}
                      ${N===a.name?"opacity-50":""}`,children:N===a.name?e.jsx(Ae,{className:"w-4 h-4 animate-spin"}):"Comprar"})]},a.name))}),e.jsx("p",{className:"mt-12 text-[8px] font-black tracking-[4px] uppercase text-white/20",children:"Pagos protegidos por Mercado Pago"})]})}),L&&e.jsx("div",{className:"fixed inset-0 z-[400] bg-black/90 backdrop-blur-2xl flex items-center justify-center p-6 animate-[fadeIn_0.3s_ease-out]",children:e.jsxs("div",{className:"relative w-full max-w-md bg-[#0a0a0c] rounded-[40px] p-10 border border-white/10 text-center shadow-2xl",children:[e.jsx("div",{className:"w-16 h-16 bg-accent/20 rounded-full flex items-center justify-center mb-8 mx-auto",children:e.jsx(Le,{className:"w-8 h-8 text-accent animate-pulse"})}),e.jsx("h3",{className:"text-2xl font-black mb-2 uppercase italic",children:"Desbloquear Pack"}),e.jsxs("p",{className:"text-white/40 text-[10px] uppercase tracking-[2px] mb-8",children:["Â¿Quieres desbloquear el pack ",e.jsx("span",{className:"text-white font-bold",children:L.subCategory})," por ",e.jsxs("span",{className:"text-accent font-bold",children:[Pe," crÃ©ditos"]}),"?"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("button",{disabled:ie,onClick:()=>wt(L.subCategory),className:"w-full h-16 bg-accent text-white rounded-2xl font-black uppercase tracking-[4px] text-xs hover:bg-white hover:text-black transition-all flex items-center justify-center gap-3",children:ie?e.jsx(Ae,{className:"w-5 h-5 animate-spin"}):e.jsxs(e.Fragment,{children:["Confirmar Compra",e.jsx(ce,{className:"w-4 h-4"})]})}),e.jsx("button",{disabled:ie,onClick:()=>Y(null),className:"w-full py-4 text-[10px] font-black uppercase tracking-[3px] text-white/20 hover:text-white transition-colors",children:"Cancelar"})]}),e.jsxs("p",{className:"mt-8 text-[8px] font-black tracking-[3px] text-white/10 uppercase",children:["Tu saldo actual: ",i==null?void 0:i.credits," crÃ©ditos"]})]})}),de&&e.jsx("div",{className:"fixed inset-0 z-[400] bg-black/40 backdrop-blur-md flex items-center justify-center p-6 animate-[fadeIn_0.3s_ease-out]",children:e.jsxs("div",{className:"relative w-full max-w-[260px] bg-white/5 backdrop-blur-[40px] rounded-[32px] p-6 border border-amber-500/20 text-center shadow-[0_0_80px_rgba(251,191,36,0.1)]",children:[e.jsx("button",{onClick:()=>se(!1),className:"absolute top-4 right-4 w-8 h-8 rounded-full bg-white/5 flex items-center justify-center hover:bg-white/10 transition-colors",children:e.jsx(xe,{className:"w-4 h-4 text-white/40"})}),e.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-amber-500 to-yellow-300 rounded-2xl flex items-center justify-center mb-6 mx-auto rotate-6 shadow-xl shadow-amber-500/10",children:e.jsx(ce,{className:"w-7 h-7 text-black"})}),e.jsx("h3",{className:"text-2xl font-black mb-3 uppercase italic tracking-tighter text-transparent bg-clip-text bg-gradient-to-r from-amber-400 to-yellow-200",children:"Pack Premium"}),e.jsxs("div",{className:"bg-white/5 border border-white/5 rounded-2xl p-5 mb-6",children:[e.jsx("div",{className:"text-[8px] font-black text-white/40 uppercase tracking-[3px] mb-4 leading-relaxed",children:"Desbloquea estilos VIP + 3000 crÃ©ditos"}),e.jsx("div",{className:"flex flex-col items-center",children:e.jsxs("div",{className:"flex items-baseline gap-1.5",children:[e.jsx("span",{className:"text-4xl font-black italic text-white leading-none",children:"3000"}),e.jsx("span",{className:"text-[8px] font-black uppercase text-amber-500 tracking-widest",children:"CrÃ©ditos"})]})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"text-3xl font-black italic mb-1",children:"$20.000"}),e.jsx("div",{className:"text-[7px] font-black uppercase tracking-[2px] text-white/15",children:"Pago Ãšnico"})]}),e.jsx("button",{disabled:!!N,onClick:()=>{Nt({name:"Unlock Premium",price:2e4,credits:3e3}),se(!1)},className:"w-full h-14 bg-gradient-to-r from-amber-500 to-yellow-400 hover:from-white hover:to-white text-black font-black uppercase tracking-[4px] text-[10px] rounded-xl transition-all duration-500 shadow-[0_10px_20px_rgba(245,158,11,0.2)] active:scale-95 flex items-center justify-center gap-3",children:N?e.jsx(Ae,{className:"w-5 h-5 animate-spin"}):e.jsxs(e.Fragment,{children:["DESBLOQUEAR AHORA",e.jsx(Le,{className:"w-3.5 h-3.5 fill-black"})]})})]})}),e.jsx("canvas",{ref:nt,className:"hidden"}),e.jsx("footer",{className:"relative py-12 bg-primary border-t border-white/5 text-center z-20",children:e.jsx("div",{className:"text-white/10 text-[8px] uppercase tracking-[6px] font-bold italic",children:"Â© 2024 Creativa Labs â€” Digital Alchemy Studio"})})]})},zt=document.getElementById("root");if(!zt)throw new Error("Could not find root element to mount to");const Rt=window.location.hostname,Va=Rt.startsWith("kiosk")||Rt.startsWith("admin")||window.location.pathname.startsWith("/dashboard")||window.location.pathname.startsWith("/kiosk");class Qa extends fe.Component{constructor(c){super(c),this.state={hasError:!1,error:null}}static getDerivedStateFromError(c){return{hasError:!0,error:c}}componentDidCatch(c,m){console.error("ErrorBoundary caught an error",c,m)}render(){var c;return this.state.hasError?e.jsxs("div",{style:{padding:"20px",color:"white",background:"#222",minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center"},children:[e.jsx("h1",{style:{color:"#13ec80"},children:"Algo saliÃ³ mal"}),e.jsx("p",{children:((c=this.state.error)==null?void 0:c.message)||"Error desconocido"}),e.jsx("button",{onClick:()=>window.location.reload(),style:{padding:"10px 20px",background:"#13ec80",border:"none",color:"black",fontWeight:"bold",borderRadius:"8px",cursor:"pointer",marginTop:"20px"},children:"Reintentar"})]}):this.props.children}}const Za=aa.createRoot(zt);Za.render(e.jsx(fe.StrictMode,{children:e.jsx(Qa,{children:Va?e.jsx(sa,{}):e.jsx(Ga,{})})}));
