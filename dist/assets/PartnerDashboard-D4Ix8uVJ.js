import{c as ye,h as Ee,i as et,r as de,s as he,j as t,k as We,b as tt,l as Ae,P as Ge,m as Pe,T as Le,M as rt}from"./DashboardApp-C3FXKg7y.js";import{A as Ie,S as qe,P as st,M as at,a as it,I as Oe}from"./constants-P0HPlgIv.js";import{m as be}from"./proxy-B0t7yXbm.js";import{Z as ze,D as nt}from"./zap-BoVjp6P8.js";import{P as ot,a as Fe,E as He,U as lt}from"./upload-Jxrda0Jj.js";import{X as Be,S as ct,H as dt}from"./x-B-bKWCgL.js";/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],$e=ye("arrow-down-right",ht);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Re=ye("circle-check",ut);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],pt=ye("globe",ft);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Ke=ye("info",mt);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Ve=ye("layers",xt);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Ue=ye("shopping-cart",bt);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ye=ye("trash-2",gt);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],_t=ye("trending-up",vt);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],Xe=ye("wallet",wt);function De(Ce){throw new Error('Could not dynamically require "'+Ce+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Me={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var Je;function yt(){return Je||(Je=1,(function(Ce,me){(function(w){Ce.exports=w()})(function(){return(function w(F,j,d){function c(f,y){if(!j[f]){if(!F[f]){var x=typeof De=="function"&&De;if(!y&&x)return x(f,!0);if(a)return a(f,!0);var v=new Error("Cannot find module '"+f+"'");throw v.code="MODULE_NOT_FOUND",v}var i=j[f]={exports:{}};F[f][0].call(i.exports,function(p){var s=F[f][1][p];return c(s||p)},i,i.exports,w,F,j,d)}return j[f].exports}for(var a=typeof De=="function"&&De,l=0;l<d.length;l++)c(d[l]);return c})({1:[function(w,F,j){var d=w("./utils"),c=w("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";j.encode=function(l){for(var f,y,x,v,i,p,s,h=[],n=0,m=l.length,g=m,z=d.getTypeOf(l)!=="string";n<l.length;)g=m-n,x=z?(f=l[n++],y=n<m?l[n++]:0,n<m?l[n++]:0):(f=l.charCodeAt(n++),y=n<m?l.charCodeAt(n++):0,n<m?l.charCodeAt(n++):0),v=f>>2,i=(3&f)<<4|y>>4,p=1<g?(15&y)<<2|x>>6:64,s=2<g?63&x:64,h.push(a.charAt(v)+a.charAt(i)+a.charAt(p)+a.charAt(s));return h.join("")},j.decode=function(l){var f,y,x,v,i,p,s=0,h=0,n="data:";if(l.substr(0,n.length)===n)throw new Error("Invalid base64 input, it looks like a data url.");var m,g=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===a.charAt(64)&&g--,l.charAt(l.length-2)===a.charAt(64)&&g--,g%1!=0)throw new Error("Invalid base64 input, bad content length.");for(m=c.uint8array?new Uint8Array(0|g):new Array(0|g);s<l.length;)f=a.indexOf(l.charAt(s++))<<2|(v=a.indexOf(l.charAt(s++)))>>4,y=(15&v)<<4|(i=a.indexOf(l.charAt(s++)))>>2,x=(3&i)<<6|(p=a.indexOf(l.charAt(s++))),m[h++]=f,i!==64&&(m[h++]=y),p!==64&&(m[h++]=x);return m}},{"./support":30,"./utils":32}],2:[function(w,F,j){var d=w("./external"),c=w("./stream/DataWorker"),a=w("./stream/Crc32Probe"),l=w("./stream/DataLengthProbe");function f(y,x,v,i,p){this.compressedSize=y,this.uncompressedSize=x,this.crc32=v,this.compression=i,this.compressedContent=p}f.prototype={getContentWorker:function(){var y=new c(d.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),x=this;return y.on("end",function(){if(this.streamInfo.data_length!==x.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),y},getCompressedWorker:function(){return new c(d.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},f.createWorkerFrom=function(y,x,v){return y.pipe(new a).pipe(new l("uncompressedSize")).pipe(x.compressWorker(v)).pipe(new l("compressedSize")).withStreamInfo("compression",x)},F.exports=f},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(w,F,j){var d=w("./stream/GenericWorker");j.STORE={magic:"\0\0",compressWorker:function(){return new d("STORE compression")},uncompressWorker:function(){return new d("STORE decompression")}},j.DEFLATE=w("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(w,F,j){var d=w("./utils"),c=(function(){for(var a,l=[],f=0;f<256;f++){a=f;for(var y=0;y<8;y++)a=1&a?3988292384^a>>>1:a>>>1;l[f]=a}return l})();F.exports=function(a,l){return a!==void 0&&a.length?d.getTypeOf(a)!=="string"?(function(f,y,x,v){var i=c,p=v+x;f^=-1;for(var s=v;s<p;s++)f=f>>>8^i[255&(f^y[s])];return-1^f})(0|l,a,a.length,0):(function(f,y,x,v){var i=c,p=v+x;f^=-1;for(var s=v;s<p;s++)f=f>>>8^i[255&(f^y.charCodeAt(s))];return-1^f})(0|l,a,a.length,0):0}},{"./utils":32}],5:[function(w,F,j){j.base64=!1,j.binary=!1,j.dir=!1,j.createFolders=!0,j.date=null,j.compression=null,j.compressionOptions=null,j.comment=null,j.unixPermissions=null,j.dosPermissions=null},{}],6:[function(w,F,j){var d=null;d=typeof Promise<"u"?Promise:w("lie"),F.exports={Promise:d}},{lie:37}],7:[function(w,F,j){var d=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",c=w("pako"),a=w("./utils"),l=w("./stream/GenericWorker"),f=d?"uint8array":"array";function y(x,v){l.call(this,"FlateWorker/"+x),this._pako=null,this._pakoAction=x,this._pakoOptions=v,this.meta={}}j.magic="\b\0",a.inherits(y,l),y.prototype.processChunk=function(x){this.meta=x.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(f,x.data),!1)},y.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},y.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},y.prototype._createPako=function(){this._pako=new c[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var x=this;this._pako.onData=function(v){x.push({data:v,meta:x.meta})}},j.compressWorker=function(x){return new y("Deflate",x)},j.uncompressWorker=function(){return new y("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(w,F,j){function d(i,p){var s,h="";for(s=0;s<p;s++)h+=String.fromCharCode(255&i),i>>>=8;return h}function c(i,p,s,h,n,m){var g,z,N=i.file,T=i.compression,B=m!==f.utf8encode,Z=a.transformTo("string",m(N.name)),I=a.transformTo("string",f.utf8encode(N.name)),H=N.comment,ee=a.transformTo("string",m(H)),b=a.transformTo("string",f.utf8encode(H)),O=I.length!==N.name.length,r=b.length!==H.length,R="",se="",M="",ie=N.dir,q=N.date,re={crc32:0,compressedSize:0,uncompressedSize:0};p&&!s||(re.crc32=i.crc32,re.compressedSize=i.compressedSize,re.uncompressedSize=i.uncompressedSize);var E=0;p&&(E|=8),B||!O&&!r||(E|=2048);var S=0,X=0;ie&&(S|=16),n==="UNIX"?(X=798,S|=(function(U,te){var ue=U;return U||(ue=te?16893:33204),(65535&ue)<<16})(N.unixPermissions,ie)):(X=20,S|=(function(U){return 63&(U||0)})(N.dosPermissions)),g=q.getUTCHours(),g<<=6,g|=q.getUTCMinutes(),g<<=5,g|=q.getUTCSeconds()/2,z=q.getUTCFullYear()-1980,z<<=4,z|=q.getUTCMonth()+1,z<<=5,z|=q.getUTCDate(),O&&(se=d(1,1)+d(y(Z),4)+I,R+="up"+d(se.length,2)+se),r&&(M=d(1,1)+d(y(ee),4)+b,R+="uc"+d(M.length,2)+M);var K="";return K+=`
\0`,K+=d(E,2),K+=T.magic,K+=d(g,2),K+=d(z,2),K+=d(re.crc32,4),K+=d(re.compressedSize,4),K+=d(re.uncompressedSize,4),K+=d(Z.length,2),K+=d(R.length,2),{fileRecord:x.LOCAL_FILE_HEADER+K+Z+R,dirRecord:x.CENTRAL_FILE_HEADER+d(X,2)+K+d(ee.length,2)+"\0\0\0\0"+d(S,4)+d(h,4)+Z+R+ee}}var a=w("../utils"),l=w("../stream/GenericWorker"),f=w("../utf8"),y=w("../crc32"),x=w("../signature");function v(i,p,s,h){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=p,this.zipPlatform=s,this.encodeFileName=h,this.streamFiles=i,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(v,l),v.prototype.push=function(i){var p=i.meta.percent||0,s=this.entriesCount,h=this._sources.length;this.accumulate?this.contentBuffer.push(i):(this.bytesWritten+=i.data.length,l.prototype.push.call(this,{data:i.data,meta:{currentFile:this.currentFile,percent:s?(p+100*(s-h-1))/s:100}}))},v.prototype.openedSource=function(i){this.currentSourceOffset=this.bytesWritten,this.currentFile=i.file.name;var p=this.streamFiles&&!i.file.dir;if(p){var s=c(i,p,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:s.fileRecord,meta:{percent:0}})}else this.accumulate=!0},v.prototype.closedSource=function(i){this.accumulate=!1;var p=this.streamFiles&&!i.file.dir,s=c(i,p,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(s.dirRecord),p)this.push({data:(function(h){return x.DATA_DESCRIPTOR+d(h.crc32,4)+d(h.compressedSize,4)+d(h.uncompressedSize,4)})(i),meta:{percent:100}});else for(this.push({data:s.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},v.prototype.flush=function(){for(var i=this.bytesWritten,p=0;p<this.dirRecords.length;p++)this.push({data:this.dirRecords[p],meta:{percent:100}});var s=this.bytesWritten-i,h=(function(n,m,g,z,N){var T=a.transformTo("string",N(z));return x.CENTRAL_DIRECTORY_END+"\0\0\0\0"+d(n,2)+d(n,2)+d(m,4)+d(g,4)+d(T.length,2)+T})(this.dirRecords.length,s,i,this.zipComment,this.encodeFileName);this.push({data:h,meta:{percent:100}})},v.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},v.prototype.registerPrevious=function(i){this._sources.push(i);var p=this;return i.on("data",function(s){p.processChunk(s)}),i.on("end",function(){p.closedSource(p.previous.streamInfo),p._sources.length?p.prepareNextSource():p.end()}),i.on("error",function(s){p.error(s)}),this},v.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},v.prototype.error=function(i){var p=this._sources;if(!l.prototype.error.call(this,i))return!1;for(var s=0;s<p.length;s++)try{p[s].error(i)}catch{}return!0},v.prototype.lock=function(){l.prototype.lock.call(this);for(var i=this._sources,p=0;p<i.length;p++)i[p].lock()},F.exports=v},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(w,F,j){var d=w("../compressions"),c=w("./ZipFileWorker");j.generateWorker=function(a,l,f){var y=new c(l.streamFiles,f,l.platform,l.encodeFileName),x=0;try{a.forEach(function(v,i){x++;var p=(function(m,g){var z=m||g,N=d[z];if(!N)throw new Error(z+" is not a valid compression method !");return N})(i.options.compression,l.compression),s=i.options.compressionOptions||l.compressionOptions||{},h=i.dir,n=i.date;i._compressWorker(p,s).withStreamInfo("file",{name:v,dir:h,date:n,comment:i.comment||"",unixPermissions:i.unixPermissions,dosPermissions:i.dosPermissions}).pipe(y)}),y.entriesCount=x}catch(v){y.error(v)}return y}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(w,F,j){function d(){if(!(this instanceof d))return new d;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var c=new d;for(var a in this)typeof this[a]!="function"&&(c[a]=this[a]);return c}}(d.prototype=w("./object")).loadAsync=w("./load"),d.support=w("./support"),d.defaults=w("./defaults"),d.version="3.10.1",d.loadAsync=function(c,a){return new d().loadAsync(c,a)},d.external=w("./external"),F.exports=d},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(w,F,j){var d=w("./utils"),c=w("./external"),a=w("./utf8"),l=w("./zipEntries"),f=w("./stream/Crc32Probe"),y=w("./nodejsUtils");function x(v){return new c.Promise(function(i,p){var s=v.decompressed.getContentWorker().pipe(new f);s.on("error",function(h){p(h)}).on("end",function(){s.streamInfo.crc32!==v.decompressed.crc32?p(new Error("Corrupted zip : CRC32 mismatch")):i()}).resume()})}F.exports=function(v,i){var p=this;return i=d.extend(i||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),y.isNode&&y.isStream(v)?c.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):d.prepareContent("the loaded zip file",v,!0,i.optimizedBinaryString,i.base64).then(function(s){var h=new l(i);return h.load(s),h}).then(function(s){var h=[c.Promise.resolve(s)],n=s.files;if(i.checkCRC32)for(var m=0;m<n.length;m++)h.push(x(n[m]));return c.Promise.all(h)}).then(function(s){for(var h=s.shift(),n=h.files,m=0;m<n.length;m++){var g=n[m],z=g.fileNameStr,N=d.resolve(g.fileNameStr);p.file(N,g.decompressed,{binary:!0,optimizedBinaryString:!0,date:g.date,dir:g.dir,comment:g.fileCommentStr.length?g.fileCommentStr:null,unixPermissions:g.unixPermissions,dosPermissions:g.dosPermissions,createFolders:i.createFolders}),g.dir||(p.file(N).unsafeOriginalName=z)}return h.zipComment.length&&(p.comment=h.zipComment),p})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(w,F,j){var d=w("../utils"),c=w("../stream/GenericWorker");function a(l,f){c.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(f)}d.inherits(a,c),a.prototype._bindStream=function(l){var f=this;(this._stream=l).pause(),l.on("data",function(y){f.push({data:y,meta:{percent:0}})}).on("error",function(y){f.isPaused?this.generatedError=y:f.error(y)}).on("end",function(){f.isPaused?f._upstreamEnded=!0:f.end()})},a.prototype.pause=function(){return!!c.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},F.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(w,F,j){var d=w("readable-stream").Readable;function c(a,l,f){d.call(this,l),this._helper=a;var y=this;a.on("data",function(x,v){y.push(x)||y._helper.pause(),f&&f(v)}).on("error",function(x){y.emit("error",x)}).on("end",function(){y.push(null)})}w("../utils").inherits(c,d),c.prototype._read=function(){this._helper.resume()},F.exports=c},{"../utils":32,"readable-stream":16}],14:[function(w,F,j){F.exports={isNode:typeof Buffer<"u",newBufferFrom:function(d,c){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(d,c);if(typeof d=="number")throw new Error('The "data" argument must not be a number');return new Buffer(d,c)},allocBuffer:function(d){if(Buffer.alloc)return Buffer.alloc(d);var c=new Buffer(d);return c.fill(0),c},isBuffer:function(d){return Buffer.isBuffer(d)},isStream:function(d){return d&&typeof d.on=="function"&&typeof d.pause=="function"&&typeof d.resume=="function"}}},{}],15:[function(w,F,j){function d(N,T,B){var Z,I=a.getTypeOf(T),H=a.extend(B||{},y);H.date=H.date||new Date,H.compression!==null&&(H.compression=H.compression.toUpperCase()),typeof H.unixPermissions=="string"&&(H.unixPermissions=parseInt(H.unixPermissions,8)),H.unixPermissions&&16384&H.unixPermissions&&(H.dir=!0),H.dosPermissions&&16&H.dosPermissions&&(H.dir=!0),H.dir&&(N=n(N)),H.createFolders&&(Z=h(N))&&m.call(this,Z,!0);var ee=I==="string"&&H.binary===!1&&H.base64===!1;B&&B.binary!==void 0||(H.binary=!ee),(T instanceof x&&T.uncompressedSize===0||H.dir||!T||T.length===0)&&(H.base64=!1,H.binary=!0,T="",H.compression="STORE",I="string");var b=null;b=T instanceof x||T instanceof l?T:p.isNode&&p.isStream(T)?new s(N,T):a.prepareContent(N,T,H.binary,H.optimizedBinaryString,H.base64);var O=new v(N,b,H);this.files[N]=O}var c=w("./utf8"),a=w("./utils"),l=w("./stream/GenericWorker"),f=w("./stream/StreamHelper"),y=w("./defaults"),x=w("./compressedObject"),v=w("./zipObject"),i=w("./generate"),p=w("./nodejsUtils"),s=w("./nodejs/NodejsStreamInputAdapter"),h=function(N){N.slice(-1)==="/"&&(N=N.substring(0,N.length-1));var T=N.lastIndexOf("/");return 0<T?N.substring(0,T):""},n=function(N){return N.slice(-1)!=="/"&&(N+="/"),N},m=function(N,T){return T=T!==void 0?T:y.createFolders,N=n(N),this.files[N]||d.call(this,N,null,{dir:!0,createFolders:T}),this.files[N]};function g(N){return Object.prototype.toString.call(N)==="[object RegExp]"}var z={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(N){var T,B,Z;for(T in this.files)Z=this.files[T],(B=T.slice(this.root.length,T.length))&&T.slice(0,this.root.length)===this.root&&N(B,Z)},filter:function(N){var T=[];return this.forEach(function(B,Z){N(B,Z)&&T.push(Z)}),T},file:function(N,T,B){if(arguments.length!==1)return N=this.root+N,d.call(this,N,T,B),this;if(g(N)){var Z=N;return this.filter(function(H,ee){return!ee.dir&&Z.test(H)})}var I=this.files[this.root+N];return I&&!I.dir?I:null},folder:function(N){if(!N)return this;if(g(N))return this.filter(function(I,H){return H.dir&&N.test(I)});var T=this.root+N,B=m.call(this,T),Z=this.clone();return Z.root=B.name,Z},remove:function(N){N=this.root+N;var T=this.files[N];if(T||(N.slice(-1)!=="/"&&(N+="/"),T=this.files[N]),T&&!T.dir)delete this.files[N];else for(var B=this.filter(function(I,H){return H.name.slice(0,N.length)===N}),Z=0;Z<B.length;Z++)delete this.files[B[Z].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(N){var T,B={};try{if((B=a.extend(N||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:c.utf8encode})).type=B.type.toLowerCase(),B.compression=B.compression.toUpperCase(),B.type==="binarystring"&&(B.type="string"),!B.type)throw new Error("No output type specified.");a.checkSupport(B.type),B.platform!=="darwin"&&B.platform!=="freebsd"&&B.platform!=="linux"&&B.platform!=="sunos"||(B.platform="UNIX"),B.platform==="win32"&&(B.platform="DOS");var Z=B.comment||this.comment||"";T=i.generateWorker(this,B,Z)}catch(I){(T=new l("error")).error(I)}return new f(T,B.type||"string",B.mimeType)},generateAsync:function(N,T){return this.generateInternalStream(N).accumulate(T)},generateNodeStream:function(N,T){return(N=N||{}).type||(N.type="nodebuffer"),this.generateInternalStream(N).toNodejsStream(T)}};F.exports=z},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(w,F,j){F.exports=w("stream")},{stream:void 0}],17:[function(w,F,j){var d=w("./DataReader");function c(a){d.call(this,a);for(var l=0;l<this.data.length;l++)a[l]=255&a[l]}w("../utils").inherits(c,d),c.prototype.byteAt=function(a){return this.data[this.zero+a]},c.prototype.lastIndexOfSignature=function(a){for(var l=a.charCodeAt(0),f=a.charCodeAt(1),y=a.charCodeAt(2),x=a.charCodeAt(3),v=this.length-4;0<=v;--v)if(this.data[v]===l&&this.data[v+1]===f&&this.data[v+2]===y&&this.data[v+3]===x)return v-this.zero;return-1},c.prototype.readAndCheckSignature=function(a){var l=a.charCodeAt(0),f=a.charCodeAt(1),y=a.charCodeAt(2),x=a.charCodeAt(3),v=this.readData(4);return l===v[0]&&f===v[1]&&y===v[2]&&x===v[3]},c.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},F.exports=c},{"../utils":32,"./DataReader":18}],18:[function(w,F,j){var d=w("../utils");function c(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}c.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var l,f=0;for(this.checkOffset(a),l=this.index+a-1;l>=this.index;l--)f=(f<<8)+this.byteAt(l);return this.index+=a,f},readString:function(a){return d.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},F.exports=c},{"../utils":32}],19:[function(w,F,j){var d=w("./Uint8ArrayReader");function c(a){d.call(this,a)}w("../utils").inherits(c,d),c.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},F.exports=c},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(w,F,j){var d=w("./DataReader");function c(a){d.call(this,a)}w("../utils").inherits(c,d),c.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},c.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},c.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},c.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},F.exports=c},{"../utils":32,"./DataReader":18}],21:[function(w,F,j){var d=w("./ArrayReader");function c(a){d.call(this,a)}w("../utils").inherits(c,d),c.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},F.exports=c},{"../utils":32,"./ArrayReader":17}],22:[function(w,F,j){var d=w("../utils"),c=w("../support"),a=w("./ArrayReader"),l=w("./StringReader"),f=w("./NodeBufferReader"),y=w("./Uint8ArrayReader");F.exports=function(x){var v=d.getTypeOf(x);return d.checkSupport(v),v!=="string"||c.uint8array?v==="nodebuffer"?new f(x):c.uint8array?new y(d.transformTo("uint8array",x)):new a(d.transformTo("array",x)):new l(x)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(w,F,j){j.LOCAL_FILE_HEADER="PK",j.CENTRAL_FILE_HEADER="PK",j.CENTRAL_DIRECTORY_END="PK",j.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",j.ZIP64_CENTRAL_DIRECTORY_END="PK",j.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(w,F,j){var d=w("./GenericWorker"),c=w("../utils");function a(l){d.call(this,"ConvertWorker to "+l),this.destType=l}c.inherits(a,d),a.prototype.processChunk=function(l){this.push({data:c.transformTo(this.destType,l.data),meta:l.meta})},F.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(w,F,j){var d=w("./GenericWorker"),c=w("../crc32");function a(){d.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}w("../utils").inherits(a,d),a.prototype.processChunk=function(l){this.streamInfo.crc32=c(l.data,this.streamInfo.crc32||0),this.push(l)},F.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(w,F,j){var d=w("../utils"),c=w("./GenericWorker");function a(l){c.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}d.inherits(a,c),a.prototype.processChunk=function(l){if(l){var f=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=f+l.data.length}c.prototype.processChunk.call(this,l)},F.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(w,F,j){var d=w("../utils"),c=w("./GenericWorker");function a(l){c.call(this,"DataWorker");var f=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(y){f.dataIsReady=!0,f.data=y,f.max=y&&y.length||0,f.type=d.getTypeOf(y),f.isPaused||f._tickAndRepeat()},function(y){f.error(y)})}d.inherits(a,c),a.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,d.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(d.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,f=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,f);break;case"uint8array":l=this.data.subarray(this.index,f);break;case"array":case"nodebuffer":l=this.data.slice(this.index,f)}return this.index=f,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},F.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(w,F,j){function d(c){this.name=c||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}d.prototype={push:function(c){this.emit("data",c)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(c){this.emit("error",c)}return!0},error:function(c){return!this.isFinished&&(this.isPaused?this.generatedError=c:(this.isFinished=!0,this.emit("error",c),this.previous&&this.previous.error(c),this.cleanUp()),!0)},on:function(c,a){return this._listeners[c].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(c,a){if(this._listeners[c])for(var l=0;l<this._listeners[c].length;l++)this._listeners[c][l].call(this,a)},pipe:function(c){return c.registerPrevious(this)},registerPrevious:function(c){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=c.streamInfo,this.mergeStreamInfo(),this.previous=c;var a=this;return c.on("data",function(l){a.processChunk(l)}),c.on("end",function(){a.end()}),c.on("error",function(l){a.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var c=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),c=!0),this.previous&&this.previous.resume(),!c},flush:function(){},processChunk:function(c){this.push(c)},withStreamInfo:function(c,a){return this.extraStreamInfo[c]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var c in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,c)&&(this.streamInfo[c]=this.extraStreamInfo[c])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var c="Worker "+this.name;return this.previous?this.previous+" -> "+c:c}},F.exports=d},{}],29:[function(w,F,j){var d=w("../utils"),c=w("./ConvertWorker"),a=w("./GenericWorker"),l=w("../base64"),f=w("../support"),y=w("../external"),x=null;if(f.nodestream)try{x=w("../nodejs/NodejsStreamOutputAdapter")}catch{}function v(p,s){return new y.Promise(function(h,n){var m=[],g=p._internalType,z=p._outputType,N=p._mimeType;p.on("data",function(T,B){m.push(T),s&&s(B)}).on("error",function(T){m=[],n(T)}).on("end",function(){try{var T=(function(B,Z,I){switch(B){case"blob":return d.newBlob(d.transformTo("arraybuffer",Z),I);case"base64":return l.encode(Z);default:return d.transformTo(B,Z)}})(z,(function(B,Z){var I,H=0,ee=null,b=0;for(I=0;I<Z.length;I++)b+=Z[I].length;switch(B){case"string":return Z.join("");case"array":return Array.prototype.concat.apply([],Z);case"uint8array":for(ee=new Uint8Array(b),I=0;I<Z.length;I++)ee.set(Z[I],H),H+=Z[I].length;return ee;case"nodebuffer":return Buffer.concat(Z);default:throw new Error("concat : unsupported type '"+B+"'")}})(g,m),N);h(T)}catch(B){n(B)}m=[]}).resume()})}function i(p,s,h){var n=s;switch(s){case"blob":case"arraybuffer":n="uint8array";break;case"base64":n="string"}try{this._internalType=n,this._outputType=s,this._mimeType=h,d.checkSupport(n),this._worker=p.pipe(new c(n)),p.lock()}catch(m){this._worker=new a("error"),this._worker.error(m)}}i.prototype={accumulate:function(p){return v(this,p)},on:function(p,s){var h=this;return p==="data"?this._worker.on(p,function(n){s.call(h,n.data,n.meta)}):this._worker.on(p,function(){d.delay(s,arguments,h)}),this},resume:function(){return d.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(p){if(d.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new x(this,{objectMode:this._outputType!=="nodebuffer"},p)}},F.exports=i},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(w,F,j){if(j.base64=!0,j.array=!0,j.string=!0,j.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",j.nodebuffer=typeof Buffer<"u",j.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")j.blob=!1;else{var d=new ArrayBuffer(0);try{j.blob=new Blob([d],{type:"application/zip"}).size===0}catch{try{var c=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);c.append(d),j.blob=c.getBlob("application/zip").size===0}catch{j.blob=!1}}}try{j.nodestream=!!w("readable-stream").Readable}catch{j.nodestream=!1}},{"readable-stream":16}],31:[function(w,F,j){for(var d=w("./utils"),c=w("./support"),a=w("./nodejsUtils"),l=w("./stream/GenericWorker"),f=new Array(256),y=0;y<256;y++)f[y]=252<=y?6:248<=y?5:240<=y?4:224<=y?3:192<=y?2:1;f[254]=f[254]=1;function x(){l.call(this,"utf-8 decode"),this.leftOver=null}function v(){l.call(this,"utf-8 encode")}j.utf8encode=function(i){return c.nodebuffer?a.newBufferFrom(i,"utf-8"):(function(p){var s,h,n,m,g,z=p.length,N=0;for(m=0;m<z;m++)(64512&(h=p.charCodeAt(m)))==55296&&m+1<z&&(64512&(n=p.charCodeAt(m+1)))==56320&&(h=65536+(h-55296<<10)+(n-56320),m++),N+=h<128?1:h<2048?2:h<65536?3:4;for(s=c.uint8array?new Uint8Array(N):new Array(N),m=g=0;g<N;m++)(64512&(h=p.charCodeAt(m)))==55296&&m+1<z&&(64512&(n=p.charCodeAt(m+1)))==56320&&(h=65536+(h-55296<<10)+(n-56320),m++),h<128?s[g++]=h:(h<2048?s[g++]=192|h>>>6:(h<65536?s[g++]=224|h>>>12:(s[g++]=240|h>>>18,s[g++]=128|h>>>12&63),s[g++]=128|h>>>6&63),s[g++]=128|63&h);return s})(i)},j.utf8decode=function(i){return c.nodebuffer?d.transformTo("nodebuffer",i).toString("utf-8"):(function(p){var s,h,n,m,g=p.length,z=new Array(2*g);for(s=h=0;s<g;)if((n=p[s++])<128)z[h++]=n;else if(4<(m=f[n]))z[h++]=65533,s+=m-1;else{for(n&=m===2?31:m===3?15:7;1<m&&s<g;)n=n<<6|63&p[s++],m--;1<m?z[h++]=65533:n<65536?z[h++]=n:(n-=65536,z[h++]=55296|n>>10&1023,z[h++]=56320|1023&n)}return z.length!==h&&(z.subarray?z=z.subarray(0,h):z.length=h),d.applyFromCharCode(z)})(i=d.transformTo(c.uint8array?"uint8array":"array",i))},d.inherits(x,l),x.prototype.processChunk=function(i){var p=d.transformTo(c.uint8array?"uint8array":"array",i.data);if(this.leftOver&&this.leftOver.length){if(c.uint8array){var s=p;(p=new Uint8Array(s.length+this.leftOver.length)).set(this.leftOver,0),p.set(s,this.leftOver.length)}else p=this.leftOver.concat(p);this.leftOver=null}var h=(function(m,g){var z;for((g=g||m.length)>m.length&&(g=m.length),z=g-1;0<=z&&(192&m[z])==128;)z--;return z<0||z===0?g:z+f[m[z]]>g?z:g})(p),n=p;h!==p.length&&(c.uint8array?(n=p.subarray(0,h),this.leftOver=p.subarray(h,p.length)):(n=p.slice(0,h),this.leftOver=p.slice(h,p.length))),this.push({data:j.utf8decode(n),meta:i.meta})},x.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:j.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},j.Utf8DecodeWorker=x,d.inherits(v,l),v.prototype.processChunk=function(i){this.push({data:j.utf8encode(i.data),meta:i.meta})},j.Utf8EncodeWorker=v},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(w,F,j){var d=w("./support"),c=w("./base64"),a=w("./nodejsUtils"),l=w("./external");function f(s){return s}function y(s,h){for(var n=0;n<s.length;++n)h[n]=255&s.charCodeAt(n);return h}w("setimmediate"),j.newBlob=function(s,h){j.checkSupport("blob");try{return new Blob([s],{type:h})}catch{try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return n.append(s),n.getBlob(h)}catch{throw new Error("Bug : can't construct the Blob.")}}};var x={stringifyByChunk:function(s,h,n){var m=[],g=0,z=s.length;if(z<=n)return String.fromCharCode.apply(null,s);for(;g<z;)h==="array"||h==="nodebuffer"?m.push(String.fromCharCode.apply(null,s.slice(g,Math.min(g+n,z)))):m.push(String.fromCharCode.apply(null,s.subarray(g,Math.min(g+n,z)))),g+=n;return m.join("")},stringifyByChar:function(s){for(var h="",n=0;n<s.length;n++)h+=String.fromCharCode(s[n]);return h},applyCanBeUsed:{uint8array:(function(){try{return d.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return d.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}})()}};function v(s){var h=65536,n=j.getTypeOf(s),m=!0;if(n==="uint8array"?m=x.applyCanBeUsed.uint8array:n==="nodebuffer"&&(m=x.applyCanBeUsed.nodebuffer),m)for(;1<h;)try{return x.stringifyByChunk(s,n,h)}catch{h=Math.floor(h/2)}return x.stringifyByChar(s)}function i(s,h){for(var n=0;n<s.length;n++)h[n]=s[n];return h}j.applyFromCharCode=v;var p={};p.string={string:f,array:function(s){return y(s,new Array(s.length))},arraybuffer:function(s){return p.string.uint8array(s).buffer},uint8array:function(s){return y(s,new Uint8Array(s.length))},nodebuffer:function(s){return y(s,a.allocBuffer(s.length))}},p.array={string:v,array:f,arraybuffer:function(s){return new Uint8Array(s).buffer},uint8array:function(s){return new Uint8Array(s)},nodebuffer:function(s){return a.newBufferFrom(s)}},p.arraybuffer={string:function(s){return v(new Uint8Array(s))},array:function(s){return i(new Uint8Array(s),new Array(s.byteLength))},arraybuffer:f,uint8array:function(s){return new Uint8Array(s)},nodebuffer:function(s){return a.newBufferFrom(new Uint8Array(s))}},p.uint8array={string:v,array:function(s){return i(s,new Array(s.length))},arraybuffer:function(s){return s.buffer},uint8array:f,nodebuffer:function(s){return a.newBufferFrom(s)}},p.nodebuffer={string:v,array:function(s){return i(s,new Array(s.length))},arraybuffer:function(s){return p.nodebuffer.uint8array(s).buffer},uint8array:function(s){return i(s,new Uint8Array(s.length))},nodebuffer:f},j.transformTo=function(s,h){if(h=h||"",!s)return h;j.checkSupport(s);var n=j.getTypeOf(h);return p[n][s](h)},j.resolve=function(s){for(var h=s.split("/"),n=[],m=0;m<h.length;m++){var g=h[m];g==="."||g===""&&m!==0&&m!==h.length-1||(g===".."?n.pop():n.push(g))}return n.join("/")},j.getTypeOf=function(s){return typeof s=="string"?"string":Object.prototype.toString.call(s)==="[object Array]"?"array":d.nodebuffer&&a.isBuffer(s)?"nodebuffer":d.uint8array&&s instanceof Uint8Array?"uint8array":d.arraybuffer&&s instanceof ArrayBuffer?"arraybuffer":void 0},j.checkSupport=function(s){if(!d[s.toLowerCase()])throw new Error(s+" is not supported by this platform")},j.MAX_VALUE_16BITS=65535,j.MAX_VALUE_32BITS=-1,j.pretty=function(s){var h,n,m="";for(n=0;n<(s||"").length;n++)m+="\\x"+((h=s.charCodeAt(n))<16?"0":"")+h.toString(16).toUpperCase();return m},j.delay=function(s,h,n){setImmediate(function(){s.apply(n||null,h||[])})},j.inherits=function(s,h){function n(){}n.prototype=h.prototype,s.prototype=new n},j.extend=function(){var s,h,n={};for(s=0;s<arguments.length;s++)for(h in arguments[s])Object.prototype.hasOwnProperty.call(arguments[s],h)&&n[h]===void 0&&(n[h]=arguments[s][h]);return n},j.prepareContent=function(s,h,n,m,g){return l.Promise.resolve(h).then(function(z){return d.blob&&(z instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(z))!==-1)&&typeof FileReader<"u"?new l.Promise(function(N,T){var B=new FileReader;B.onload=function(Z){N(Z.target.result)},B.onerror=function(Z){T(Z.target.error)},B.readAsArrayBuffer(z)}):z}).then(function(z){var N=j.getTypeOf(z);return N?(N==="arraybuffer"?z=j.transformTo("uint8array",z):N==="string"&&(g?z=c.decode(z):n&&m!==!0&&(z=(function(T){return y(T,d.uint8array?new Uint8Array(T.length):new Array(T.length))})(z))),z):l.Promise.reject(new Error("Can't read the data of '"+s+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(w,F,j){var d=w("./reader/readerFor"),c=w("./utils"),a=w("./signature"),l=w("./zipEntry"),f=w("./support");function y(x){this.files=[],this.loadOptions=x}y.prototype={checkSignature:function(x){if(!this.reader.readAndCheckSignature(x)){this.reader.index-=4;var v=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+c.pretty(v)+", expected "+c.pretty(x)+")")}},isSignature:function(x,v){var i=this.reader.index;this.reader.setIndex(x);var p=this.reader.readString(4)===v;return this.reader.setIndex(i),p},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var x=this.reader.readData(this.zipCommentLength),v=f.uint8array?"uint8array":"array",i=c.transformTo(v,x);this.zipComment=this.loadOptions.decodeFileName(i)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var x,v,i,p=this.zip64EndOfCentralSize-44;0<p;)x=this.reader.readInt(2),v=this.reader.readInt(4),i=this.reader.readData(v),this.zip64ExtensibleData[x]={id:x,length:v,value:i}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var x,v;for(x=0;x<this.files.length;x++)v=this.files[x],this.reader.setIndex(v.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),v.readLocalPart(this.reader),v.handleUTF8(),v.processAttributes()},readCentralDir:function(){var x;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(x=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(x);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var x=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(x<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(x);var v=x;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===c.MAX_VALUE_16BITS||this.diskWithCentralDirStart===c.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===c.MAX_VALUE_16BITS||this.centralDirRecords===c.MAX_VALUE_16BITS||this.centralDirSize===c.MAX_VALUE_32BITS||this.centralDirOffset===c.MAX_VALUE_32BITS){if(this.zip64=!0,(x=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(x),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var i=this.centralDirOffset+this.centralDirSize;this.zip64&&(i+=20,i+=12+this.zip64EndOfCentralSize);var p=v-i;if(0<p)this.isSignature(v,a.CENTRAL_FILE_HEADER)||(this.reader.zero=p);else if(p<0)throw new Error("Corrupted zip: missing "+Math.abs(p)+" bytes.")},prepareReader:function(x){this.reader=d(x)},load:function(x){this.prepareReader(x),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},F.exports=y},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(w,F,j){var d=w("./reader/readerFor"),c=w("./utils"),a=w("./compressedObject"),l=w("./crc32"),f=w("./utf8"),y=w("./compressions"),x=w("./support");function v(i,p){this.options=i,this.loadOptions=p}v.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(i){var p,s;if(i.skip(22),this.fileNameLength=i.readInt(2),s=i.readInt(2),this.fileName=i.readData(this.fileNameLength),i.skip(s),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((p=(function(h){for(var n in y)if(Object.prototype.hasOwnProperty.call(y,n)&&y[n].magic===h)return y[n];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+c.pretty(this.compressionMethod)+" unknown (inner file : "+c.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,p,i.readData(this.compressedSize))},readCentralPart:function(i){this.versionMadeBy=i.readInt(2),i.skip(2),this.bitFlag=i.readInt(2),this.compressionMethod=i.readString(2),this.date=i.readDate(),this.crc32=i.readInt(4),this.compressedSize=i.readInt(4),this.uncompressedSize=i.readInt(4);var p=i.readInt(2);if(this.extraFieldsLength=i.readInt(2),this.fileCommentLength=i.readInt(2),this.diskNumberStart=i.readInt(2),this.internalFileAttributes=i.readInt(2),this.externalFileAttributes=i.readInt(4),this.localHeaderOffset=i.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");i.skip(p),this.readExtraFields(i),this.parseZIP64ExtraField(i),this.fileComment=i.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var i=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),i==0&&(this.dosPermissions=63&this.externalFileAttributes),i==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var i=d(this.extraFields[1].value);this.uncompressedSize===c.MAX_VALUE_32BITS&&(this.uncompressedSize=i.readInt(8)),this.compressedSize===c.MAX_VALUE_32BITS&&(this.compressedSize=i.readInt(8)),this.localHeaderOffset===c.MAX_VALUE_32BITS&&(this.localHeaderOffset=i.readInt(8)),this.diskNumberStart===c.MAX_VALUE_32BITS&&(this.diskNumberStart=i.readInt(4))}},readExtraFields:function(i){var p,s,h,n=i.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});i.index+4<n;)p=i.readInt(2),s=i.readInt(2),h=i.readData(s),this.extraFields[p]={id:p,length:s,value:h};i.setIndex(n)},handleUTF8:function(){var i=x.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=f.utf8decode(this.fileName),this.fileCommentStr=f.utf8decode(this.fileComment);else{var p=this.findExtraFieldUnicodePath();if(p!==null)this.fileNameStr=p;else{var s=c.transformTo(i,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(s)}var h=this.findExtraFieldUnicodeComment();if(h!==null)this.fileCommentStr=h;else{var n=c.transformTo(i,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(n)}}},findExtraFieldUnicodePath:function(){var i=this.extraFields[28789];if(i){var p=d(i.value);return p.readInt(1)!==1||l(this.fileName)!==p.readInt(4)?null:f.utf8decode(p.readData(i.length-5))}return null},findExtraFieldUnicodeComment:function(){var i=this.extraFields[25461];if(i){var p=d(i.value);return p.readInt(1)!==1||l(this.fileComment)!==p.readInt(4)?null:f.utf8decode(p.readData(i.length-5))}return null}},F.exports=v},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(w,F,j){function d(p,s,h){this.name=p,this.dir=h.dir,this.date=h.date,this.comment=h.comment,this.unixPermissions=h.unixPermissions,this.dosPermissions=h.dosPermissions,this._data=s,this._dataBinary=h.binary,this.options={compression:h.compression,compressionOptions:h.compressionOptions}}var c=w("./stream/StreamHelper"),a=w("./stream/DataWorker"),l=w("./utf8"),f=w("./compressedObject"),y=w("./stream/GenericWorker");d.prototype={internalStream:function(p){var s=null,h="string";try{if(!p)throw new Error("No output type specified.");var n=(h=p.toLowerCase())==="string"||h==="text";h!=="binarystring"&&h!=="text"||(h="string"),s=this._decompressWorker();var m=!this._dataBinary;m&&!n&&(s=s.pipe(new l.Utf8EncodeWorker)),!m&&n&&(s=s.pipe(new l.Utf8DecodeWorker))}catch(g){(s=new y("error")).error(g)}return new c(s,h,"")},async:function(p,s){return this.internalStream(p).accumulate(s)},nodeStream:function(p,s){return this.internalStream(p||"nodebuffer").toNodejsStream(s)},_compressWorker:function(p,s){if(this._data instanceof f&&this._data.compression.magic===p.magic)return this._data.getCompressedWorker();var h=this._decompressWorker();return this._dataBinary||(h=h.pipe(new l.Utf8EncodeWorker)),f.createWorkerFrom(h,p,s)},_decompressWorker:function(){return this._data instanceof f?this._data.getContentWorker():this._data instanceof y?this._data:new a(this._data)}};for(var x=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],v=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},i=0;i<x.length;i++)d.prototype[x[i]]=v;F.exports=d},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(w,F,j){(function(d){var c,a,l=d.MutationObserver||d.WebKitMutationObserver;if(l){var f=0,y=new l(p),x=d.document.createTextNode("");y.observe(x,{characterData:!0}),c=function(){x.data=f=++f%2}}else if(d.setImmediate||d.MessageChannel===void 0)c="document"in d&&"onreadystatechange"in d.document.createElement("script")?function(){var s=d.document.createElement("script");s.onreadystatechange=function(){p(),s.onreadystatechange=null,s.parentNode.removeChild(s),s=null},d.document.documentElement.appendChild(s)}:function(){setTimeout(p,0)};else{var v=new d.MessageChannel;v.port1.onmessage=p,c=function(){v.port2.postMessage(0)}}var i=[];function p(){var s,h;a=!0;for(var n=i.length;n;){for(h=i,i=[],s=-1;++s<n;)h[s]();n=i.length}a=!1}F.exports=function(s){i.push(s)!==1||a||c()}}).call(this,typeof Ee<"u"?Ee:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(w,F,j){var d=w("immediate");function c(){}var a={},l=["REJECTED"],f=["FULFILLED"],y=["PENDING"];function x(n){if(typeof n!="function")throw new TypeError("resolver must be a function");this.state=y,this.queue=[],this.outcome=void 0,n!==c&&s(this,n)}function v(n,m,g){this.promise=n,typeof m=="function"&&(this.onFulfilled=m,this.callFulfilled=this.otherCallFulfilled),typeof g=="function"&&(this.onRejected=g,this.callRejected=this.otherCallRejected)}function i(n,m,g){d(function(){var z;try{z=m(g)}catch(N){return a.reject(n,N)}z===n?a.reject(n,new TypeError("Cannot resolve promise with itself")):a.resolve(n,z)})}function p(n){var m=n&&n.then;if(n&&(typeof n=="object"||typeof n=="function")&&typeof m=="function")return function(){m.apply(n,arguments)}}function s(n,m){var g=!1;function z(B){g||(g=!0,a.reject(n,B))}function N(B){g||(g=!0,a.resolve(n,B))}var T=h(function(){m(N,z)});T.status==="error"&&z(T.value)}function h(n,m){var g={};try{g.value=n(m),g.status="success"}catch(z){g.status="error",g.value=z}return g}(F.exports=x).prototype.finally=function(n){if(typeof n!="function")return this;var m=this.constructor;return this.then(function(g){return m.resolve(n()).then(function(){return g})},function(g){return m.resolve(n()).then(function(){throw g})})},x.prototype.catch=function(n){return this.then(null,n)},x.prototype.then=function(n,m){if(typeof n!="function"&&this.state===f||typeof m!="function"&&this.state===l)return this;var g=new this.constructor(c);return this.state!==y?i(g,this.state===f?n:m,this.outcome):this.queue.push(new v(g,n,m)),g},v.prototype.callFulfilled=function(n){a.resolve(this.promise,n)},v.prototype.otherCallFulfilled=function(n){i(this.promise,this.onFulfilled,n)},v.prototype.callRejected=function(n){a.reject(this.promise,n)},v.prototype.otherCallRejected=function(n){i(this.promise,this.onRejected,n)},a.resolve=function(n,m){var g=h(p,m);if(g.status==="error")return a.reject(n,g.value);var z=g.value;if(z)s(n,z);else{n.state=f,n.outcome=m;for(var N=-1,T=n.queue.length;++N<T;)n.queue[N].callFulfilled(m)}return n},a.reject=function(n,m){n.state=l,n.outcome=m;for(var g=-1,z=n.queue.length;++g<z;)n.queue[g].callRejected(m);return n},x.resolve=function(n){return n instanceof this?n:a.resolve(new this(c),n)},x.reject=function(n){var m=new this(c);return a.reject(m,n)},x.all=function(n){var m=this;if(Object.prototype.toString.call(n)!=="[object Array]")return this.reject(new TypeError("must be an array"));var g=n.length,z=!1;if(!g)return this.resolve([]);for(var N=new Array(g),T=0,B=-1,Z=new this(c);++B<g;)I(n[B],B);return Z;function I(H,ee){m.resolve(H).then(function(b){N[ee]=b,++T!==g||z||(z=!0,a.resolve(Z,N))},function(b){z||(z=!0,a.reject(Z,b))})}},x.race=function(n){var m=this;if(Object.prototype.toString.call(n)!=="[object Array]")return this.reject(new TypeError("must be an array"));var g=n.length,z=!1;if(!g)return this.resolve([]);for(var N=-1,T=new this(c);++N<g;)B=n[N],m.resolve(B).then(function(Z){z||(z=!0,a.resolve(T,Z))},function(Z){z||(z=!0,a.reject(T,Z))});var B;return T}},{immediate:36}],38:[function(w,F,j){var d={};(0,w("./lib/utils/common").assign)(d,w("./lib/deflate"),w("./lib/inflate"),w("./lib/zlib/constants")),F.exports=d},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(w,F,j){var d=w("./zlib/deflate"),c=w("./utils/common"),a=w("./utils/strings"),l=w("./zlib/messages"),f=w("./zlib/zstream"),y=Object.prototype.toString,x=0,v=-1,i=0,p=8;function s(n){if(!(this instanceof s))return new s(n);this.options=c.assign({level:v,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:i,to:""},n||{});var m=this.options;m.raw&&0<m.windowBits?m.windowBits=-m.windowBits:m.gzip&&0<m.windowBits&&m.windowBits<16&&(m.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var g=d.deflateInit2(this.strm,m.level,m.method,m.windowBits,m.memLevel,m.strategy);if(g!==x)throw new Error(l[g]);if(m.header&&d.deflateSetHeader(this.strm,m.header),m.dictionary){var z;if(z=typeof m.dictionary=="string"?a.string2buf(m.dictionary):y.call(m.dictionary)==="[object ArrayBuffer]"?new Uint8Array(m.dictionary):m.dictionary,(g=d.deflateSetDictionary(this.strm,z))!==x)throw new Error(l[g]);this._dict_set=!0}}function h(n,m){var g=new s(m);if(g.push(n,!0),g.err)throw g.msg||l[g.err];return g.result}s.prototype.push=function(n,m){var g,z,N=this.strm,T=this.options.chunkSize;if(this.ended)return!1;z=m===~~m?m:m===!0?4:0,typeof n=="string"?N.input=a.string2buf(n):y.call(n)==="[object ArrayBuffer]"?N.input=new Uint8Array(n):N.input=n,N.next_in=0,N.avail_in=N.input.length;do{if(N.avail_out===0&&(N.output=new c.Buf8(T),N.next_out=0,N.avail_out=T),(g=d.deflate(N,z))!==1&&g!==x)return this.onEnd(g),!(this.ended=!0);N.avail_out!==0&&(N.avail_in!==0||z!==4&&z!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(c.shrinkBuf(N.output,N.next_out))):this.onData(c.shrinkBuf(N.output,N.next_out)))}while((0<N.avail_in||N.avail_out===0)&&g!==1);return z===4?(g=d.deflateEnd(this.strm),this.onEnd(g),this.ended=!0,g===x):z!==2||(this.onEnd(x),!(N.avail_out=0))},s.prototype.onData=function(n){this.chunks.push(n)},s.prototype.onEnd=function(n){n===x&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg},j.Deflate=s,j.deflate=h,j.deflateRaw=function(n,m){return(m=m||{}).raw=!0,h(n,m)},j.gzip=function(n,m){return(m=m||{}).gzip=!0,h(n,m)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(w,F,j){var d=w("./zlib/inflate"),c=w("./utils/common"),a=w("./utils/strings"),l=w("./zlib/constants"),f=w("./zlib/messages"),y=w("./zlib/zstream"),x=w("./zlib/gzheader"),v=Object.prototype.toString;function i(s){if(!(this instanceof i))return new i(s);this.options=c.assign({chunkSize:16384,windowBits:0,to:""},s||{});var h=this.options;h.raw&&0<=h.windowBits&&h.windowBits<16&&(h.windowBits=-h.windowBits,h.windowBits===0&&(h.windowBits=-15)),!(0<=h.windowBits&&h.windowBits<16)||s&&s.windowBits||(h.windowBits+=32),15<h.windowBits&&h.windowBits<48&&(15&h.windowBits)==0&&(h.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new y,this.strm.avail_out=0;var n=d.inflateInit2(this.strm,h.windowBits);if(n!==l.Z_OK)throw new Error(f[n]);this.header=new x,d.inflateGetHeader(this.strm,this.header)}function p(s,h){var n=new i(h);if(n.push(s,!0),n.err)throw n.msg||f[n.err];return n.result}i.prototype.push=function(s,h){var n,m,g,z,N,T,B=this.strm,Z=this.options.chunkSize,I=this.options.dictionary,H=!1;if(this.ended)return!1;m=h===~~h?h:h===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof s=="string"?B.input=a.binstring2buf(s):v.call(s)==="[object ArrayBuffer]"?B.input=new Uint8Array(s):B.input=s,B.next_in=0,B.avail_in=B.input.length;do{if(B.avail_out===0&&(B.output=new c.Buf8(Z),B.next_out=0,B.avail_out=Z),(n=d.inflate(B,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&I&&(T=typeof I=="string"?a.string2buf(I):v.call(I)==="[object ArrayBuffer]"?new Uint8Array(I):I,n=d.inflateSetDictionary(this.strm,T)),n===l.Z_BUF_ERROR&&H===!0&&(n=l.Z_OK,H=!1),n!==l.Z_STREAM_END&&n!==l.Z_OK)return this.onEnd(n),!(this.ended=!0);B.next_out&&(B.avail_out!==0&&n!==l.Z_STREAM_END&&(B.avail_in!==0||m!==l.Z_FINISH&&m!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(g=a.utf8border(B.output,B.next_out),z=B.next_out-g,N=a.buf2string(B.output,g),B.next_out=z,B.avail_out=Z-z,z&&c.arraySet(B.output,B.output,g,z,0),this.onData(N)):this.onData(c.shrinkBuf(B.output,B.next_out)))),B.avail_in===0&&B.avail_out===0&&(H=!0)}while((0<B.avail_in||B.avail_out===0)&&n!==l.Z_STREAM_END);return n===l.Z_STREAM_END&&(m=l.Z_FINISH),m===l.Z_FINISH?(n=d.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===l.Z_OK):m!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(B.avail_out=0))},i.prototype.onData=function(s){this.chunks.push(s)},i.prototype.onEnd=function(s){s===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=s,this.msg=this.strm.msg},j.Inflate=i,j.inflate=p,j.inflateRaw=function(s,h){return(h=h||{}).raw=!0,p(s,h)},j.ungzip=p},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(w,F,j){var d=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";j.assign=function(l){for(var f=Array.prototype.slice.call(arguments,1);f.length;){var y=f.shift();if(y){if(typeof y!="object")throw new TypeError(y+"must be non-object");for(var x in y)y.hasOwnProperty(x)&&(l[x]=y[x])}}return l},j.shrinkBuf=function(l,f){return l.length===f?l:l.subarray?l.subarray(0,f):(l.length=f,l)};var c={arraySet:function(l,f,y,x,v){if(f.subarray&&l.subarray)l.set(f.subarray(y,y+x),v);else for(var i=0;i<x;i++)l[v+i]=f[y+i]},flattenChunks:function(l){var f,y,x,v,i,p;for(f=x=0,y=l.length;f<y;f++)x+=l[f].length;for(p=new Uint8Array(x),f=v=0,y=l.length;f<y;f++)i=l[f],p.set(i,v),v+=i.length;return p}},a={arraySet:function(l,f,y,x,v){for(var i=0;i<x;i++)l[v+i]=f[y+i]},flattenChunks:function(l){return[].concat.apply([],l)}};j.setTyped=function(l){l?(j.Buf8=Uint8Array,j.Buf16=Uint16Array,j.Buf32=Int32Array,j.assign(j,c)):(j.Buf8=Array,j.Buf16=Array,j.Buf32=Array,j.assign(j,a))},j.setTyped(d)},{}],42:[function(w,F,j){var d=w("./common"),c=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{c=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var l=new d.Buf8(256),f=0;f<256;f++)l[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;function y(x,v){if(v<65537&&(x.subarray&&a||!x.subarray&&c))return String.fromCharCode.apply(null,d.shrinkBuf(x,v));for(var i="",p=0;p<v;p++)i+=String.fromCharCode(x[p]);return i}l[254]=l[254]=1,j.string2buf=function(x){var v,i,p,s,h,n=x.length,m=0;for(s=0;s<n;s++)(64512&(i=x.charCodeAt(s)))==55296&&s+1<n&&(64512&(p=x.charCodeAt(s+1)))==56320&&(i=65536+(i-55296<<10)+(p-56320),s++),m+=i<128?1:i<2048?2:i<65536?3:4;for(v=new d.Buf8(m),s=h=0;h<m;s++)(64512&(i=x.charCodeAt(s)))==55296&&s+1<n&&(64512&(p=x.charCodeAt(s+1)))==56320&&(i=65536+(i-55296<<10)+(p-56320),s++),i<128?v[h++]=i:(i<2048?v[h++]=192|i>>>6:(i<65536?v[h++]=224|i>>>12:(v[h++]=240|i>>>18,v[h++]=128|i>>>12&63),v[h++]=128|i>>>6&63),v[h++]=128|63&i);return v},j.buf2binstring=function(x){return y(x,x.length)},j.binstring2buf=function(x){for(var v=new d.Buf8(x.length),i=0,p=v.length;i<p;i++)v[i]=x.charCodeAt(i);return v},j.buf2string=function(x,v){var i,p,s,h,n=v||x.length,m=new Array(2*n);for(i=p=0;i<n;)if((s=x[i++])<128)m[p++]=s;else if(4<(h=l[s]))m[p++]=65533,i+=h-1;else{for(s&=h===2?31:h===3?15:7;1<h&&i<n;)s=s<<6|63&x[i++],h--;1<h?m[p++]=65533:s<65536?m[p++]=s:(s-=65536,m[p++]=55296|s>>10&1023,m[p++]=56320|1023&s)}return y(m,p)},j.utf8border=function(x,v){var i;for((v=v||x.length)>x.length&&(v=x.length),i=v-1;0<=i&&(192&x[i])==128;)i--;return i<0||i===0?v:i+l[x[i]]>v?i:v}},{"./common":41}],43:[function(w,F,j){F.exports=function(d,c,a,l){for(var f=65535&d|0,y=d>>>16&65535|0,x=0;a!==0;){for(a-=x=2e3<a?2e3:a;y=y+(f=f+c[l++]|0)|0,--x;);f%=65521,y%=65521}return f|y<<16|0}},{}],44:[function(w,F,j){F.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(w,F,j){var d=(function(){for(var c,a=[],l=0;l<256;l++){c=l;for(var f=0;f<8;f++)c=1&c?3988292384^c>>>1:c>>>1;a[l]=c}return a})();F.exports=function(c,a,l,f){var y=d,x=f+l;c^=-1;for(var v=f;v<x;v++)c=c>>>8^y[255&(c^a[v])];return-1^c}},{}],46:[function(w,F,j){var d,c=w("../utils/common"),a=w("./trees"),l=w("./adler32"),f=w("./crc32"),y=w("./messages"),x=0,v=4,i=0,p=-2,s=-1,h=4,n=2,m=8,g=9,z=286,N=30,T=19,B=2*z+1,Z=15,I=3,H=258,ee=H+I+1,b=42,O=113,r=1,R=2,se=3,M=4;function ie(e,D){return e.msg=y[D],D}function q(e){return(e<<1)-(4<e?9:0)}function re(e){for(var D=e.length;0<=--D;)e[D]=0}function E(e){var D=e.state,A=D.pending;A>e.avail_out&&(A=e.avail_out),A!==0&&(c.arraySet(e.output,D.pending_buf,D.pending_out,A,e.next_out),e.next_out+=A,D.pending_out+=A,e.total_out+=A,e.avail_out-=A,D.pending-=A,D.pending===0&&(D.pending_out=0))}function S(e,D){a._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,D),e.block_start=e.strstart,E(e.strm)}function X(e,D){e.pending_buf[e.pending++]=D}function K(e,D){e.pending_buf[e.pending++]=D>>>8&255,e.pending_buf[e.pending++]=255&D}function U(e,D){var A,u,o=e.max_chain_length,k=e.strstart,P=e.prev_length,L=e.nice_match,C=e.strstart>e.w_size-ee?e.strstart-(e.w_size-ee):0,G=e.window,V=e.w_mask,$=e.prev,Q=e.strstart+H,_=G[k+P-1],W=G[k+P];e.prev_length>=e.good_match&&(o>>=2),L>e.lookahead&&(L=e.lookahead);do if(G[(A=D)+P]===W&&G[A+P-1]===_&&G[A]===G[k]&&G[++A]===G[k+1]){k+=2,A++;do;while(G[++k]===G[++A]&&G[++k]===G[++A]&&G[++k]===G[++A]&&G[++k]===G[++A]&&G[++k]===G[++A]&&G[++k]===G[++A]&&G[++k]===G[++A]&&G[++k]===G[++A]&&k<Q);if(u=H-(Q-k),k=Q-H,P<u){if(e.match_start=D,L<=(P=u))break;_=G[k+P-1],W=G[k+P]}}while((D=$[D&V])>C&&--o!=0);return P<=e.lookahead?P:e.lookahead}function te(e){var D,A,u,o,k,P,L,C,G,V,$=e.w_size;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=$+($-ee)){for(c.arraySet(e.window,e.window,$,$,0),e.match_start-=$,e.strstart-=$,e.block_start-=$,D=A=e.hash_size;u=e.head[--D],e.head[D]=$<=u?u-$:0,--A;);for(D=A=$;u=e.prev[--D],e.prev[D]=$<=u?u-$:0,--A;);o+=$}if(e.strm.avail_in===0)break;if(P=e.strm,L=e.window,C=e.strstart+e.lookahead,G=o,V=void 0,V=P.avail_in,G<V&&(V=G),A=V===0?0:(P.avail_in-=V,c.arraySet(L,P.input,P.next_in,V,C),P.state.wrap===1?P.adler=l(P.adler,L,V,C):P.state.wrap===2&&(P.adler=f(P.adler,L,V,C)),P.next_in+=V,P.total_in+=V,V),e.lookahead+=A,e.lookahead+e.insert>=I)for(k=e.strstart-e.insert,e.ins_h=e.window[k],e.ins_h=(e.ins_h<<e.hash_shift^e.window[k+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[k+I-1])&e.hash_mask,e.prev[k&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=k,k++,e.insert--,!(e.lookahead+e.insert<I)););}while(e.lookahead<ee&&e.strm.avail_in!==0)}function ue(e,D){for(var A,u;;){if(e.lookahead<ee){if(te(e),e.lookahead<ee&&D===x)return r;if(e.lookahead===0)break}if(A=0,e.lookahead>=I&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+I-1])&e.hash_mask,A=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),A!==0&&e.strstart-A<=e.w_size-ee&&(e.match_length=U(e,A)),e.match_length>=I)if(u=a._tr_tally(e,e.strstart-e.match_start,e.match_length-I),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=I){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+I-1])&e.hash_mask,A=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,--e.match_length!=0;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else u=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(u&&(S(e,!1),e.strm.avail_out===0))return r}return e.insert=e.strstart<I-1?e.strstart:I-1,D===v?(S(e,!0),e.strm.avail_out===0?se:M):e.last_lit&&(S(e,!1),e.strm.avail_out===0)?r:R}function J(e,D){for(var A,u,o;;){if(e.lookahead<ee){if(te(e),e.lookahead<ee&&D===x)return r;if(e.lookahead===0)break}if(A=0,e.lookahead>=I&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+I-1])&e.hash_mask,A=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=I-1,A!==0&&e.prev_length<e.max_lazy_match&&e.strstart-A<=e.w_size-ee&&(e.match_length=U(e,A),e.match_length<=5&&(e.strategy===1||e.match_length===I&&4096<e.strstart-e.match_start)&&(e.match_length=I-1)),e.prev_length>=I&&e.match_length<=e.prev_length){for(o=e.strstart+e.lookahead-I,u=a._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-I),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=o&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+I-1])&e.hash_mask,A=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),--e.prev_length!=0;);if(e.match_available=0,e.match_length=I-1,e.strstart++,u&&(S(e,!1),e.strm.avail_out===0))return r}else if(e.match_available){if((u=a._tr_tally(e,0,e.window[e.strstart-1]))&&S(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return r}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(u=a._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<I-1?e.strstart:I-1,D===v?(S(e,!0),e.strm.avail_out===0?se:M):e.last_lit&&(S(e,!1),e.strm.avail_out===0)?r:R}function oe(e,D,A,u,o){this.good_length=e,this.max_lazy=D,this.nice_length=A,this.max_chain=u,this.func=o}function ce(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=m,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new c.Buf16(2*B),this.dyn_dtree=new c.Buf16(2*(2*N+1)),this.bl_tree=new c.Buf16(2*(2*T+1)),re(this.dyn_ltree),re(this.dyn_dtree),re(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new c.Buf16(Z+1),this.heap=new c.Buf16(2*z+1),re(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new c.Buf16(2*z+1),re(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function fe(e){var D;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=n,(D=e.state).pending=0,D.pending_out=0,D.wrap<0&&(D.wrap=-D.wrap),D.status=D.wrap?b:O,e.adler=D.wrap===2?0:1,D.last_flush=x,a._tr_init(D),i):ie(e,p)}function ve(e){var D=fe(e);return D===i&&(function(A){A.window_size=2*A.w_size,re(A.head),A.max_lazy_match=d[A.level].max_lazy,A.good_match=d[A.level].good_length,A.nice_match=d[A.level].nice_length,A.max_chain_length=d[A.level].max_chain,A.strstart=0,A.block_start=0,A.lookahead=0,A.insert=0,A.match_length=A.prev_length=I-1,A.match_available=0,A.ins_h=0})(e.state),D}function ge(e,D,A,u,o,k){if(!e)return p;var P=1;if(D===s&&(D=6),u<0?(P=0,u=-u):15<u&&(P=2,u-=16),o<1||g<o||A!==m||u<8||15<u||D<0||9<D||k<0||h<k)return ie(e,p);u===8&&(u=9);var L=new ce;return(e.state=L).strm=e,L.wrap=P,L.gzhead=null,L.w_bits=u,L.w_size=1<<L.w_bits,L.w_mask=L.w_size-1,L.hash_bits=o+7,L.hash_size=1<<L.hash_bits,L.hash_mask=L.hash_size-1,L.hash_shift=~~((L.hash_bits+I-1)/I),L.window=new c.Buf8(2*L.w_size),L.head=new c.Buf16(L.hash_size),L.prev=new c.Buf16(L.w_size),L.lit_bufsize=1<<o+6,L.pending_buf_size=4*L.lit_bufsize,L.pending_buf=new c.Buf8(L.pending_buf_size),L.d_buf=1*L.lit_bufsize,L.l_buf=3*L.lit_bufsize,L.level=D,L.strategy=k,L.method=A,ve(e)}d=[new oe(0,0,0,0,function(e,D){var A=65535;for(A>e.pending_buf_size-5&&(A=e.pending_buf_size-5);;){if(e.lookahead<=1){if(te(e),e.lookahead===0&&D===x)return r;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;var u=e.block_start+A;if((e.strstart===0||e.strstart>=u)&&(e.lookahead=e.strstart-u,e.strstart=u,S(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-ee&&(S(e,!1),e.strm.avail_out===0))return r}return e.insert=0,D===v?(S(e,!0),e.strm.avail_out===0?se:M):(e.strstart>e.block_start&&(S(e,!1),e.strm.avail_out),r)}),new oe(4,4,8,4,ue),new oe(4,5,16,8,ue),new oe(4,6,32,32,ue),new oe(4,4,16,16,J),new oe(8,16,32,32,J),new oe(8,16,128,128,J),new oe(8,32,128,256,J),new oe(32,128,258,1024,J),new oe(32,258,258,4096,J)],j.deflateInit=function(e,D){return ge(e,D,m,15,8,0)},j.deflateInit2=ge,j.deflateReset=ve,j.deflateResetKeep=fe,j.deflateSetHeader=function(e,D){return e&&e.state?e.state.wrap!==2?p:(e.state.gzhead=D,i):p},j.deflate=function(e,D){var A,u,o,k;if(!e||!e.state||5<D||D<0)return e?ie(e,p):p;if(u=e.state,!e.output||!e.input&&e.avail_in!==0||u.status===666&&D!==v)return ie(e,e.avail_out===0?-5:p);if(u.strm=e,A=u.last_flush,u.last_flush=D,u.status===b)if(u.wrap===2)e.adler=0,X(u,31),X(u,139),X(u,8),u.gzhead?(X(u,(u.gzhead.text?1:0)+(u.gzhead.hcrc?2:0)+(u.gzhead.extra?4:0)+(u.gzhead.name?8:0)+(u.gzhead.comment?16:0)),X(u,255&u.gzhead.time),X(u,u.gzhead.time>>8&255),X(u,u.gzhead.time>>16&255),X(u,u.gzhead.time>>24&255),X(u,u.level===9?2:2<=u.strategy||u.level<2?4:0),X(u,255&u.gzhead.os),u.gzhead.extra&&u.gzhead.extra.length&&(X(u,255&u.gzhead.extra.length),X(u,u.gzhead.extra.length>>8&255)),u.gzhead.hcrc&&(e.adler=f(e.adler,u.pending_buf,u.pending,0)),u.gzindex=0,u.status=69):(X(u,0),X(u,0),X(u,0),X(u,0),X(u,0),X(u,u.level===9?2:2<=u.strategy||u.level<2?4:0),X(u,3),u.status=O);else{var P=m+(u.w_bits-8<<4)<<8;P|=(2<=u.strategy||u.level<2?0:u.level<6?1:u.level===6?2:3)<<6,u.strstart!==0&&(P|=32),P+=31-P%31,u.status=O,K(u,P),u.strstart!==0&&(K(u,e.adler>>>16),K(u,65535&e.adler)),e.adler=1}if(u.status===69)if(u.gzhead.extra){for(o=u.pending;u.gzindex<(65535&u.gzhead.extra.length)&&(u.pending!==u.pending_buf_size||(u.gzhead.hcrc&&u.pending>o&&(e.adler=f(e.adler,u.pending_buf,u.pending-o,o)),E(e),o=u.pending,u.pending!==u.pending_buf_size));)X(u,255&u.gzhead.extra[u.gzindex]),u.gzindex++;u.gzhead.hcrc&&u.pending>o&&(e.adler=f(e.adler,u.pending_buf,u.pending-o,o)),u.gzindex===u.gzhead.extra.length&&(u.gzindex=0,u.status=73)}else u.status=73;if(u.status===73)if(u.gzhead.name){o=u.pending;do{if(u.pending===u.pending_buf_size&&(u.gzhead.hcrc&&u.pending>o&&(e.adler=f(e.adler,u.pending_buf,u.pending-o,o)),E(e),o=u.pending,u.pending===u.pending_buf_size)){k=1;break}k=u.gzindex<u.gzhead.name.length?255&u.gzhead.name.charCodeAt(u.gzindex++):0,X(u,k)}while(k!==0);u.gzhead.hcrc&&u.pending>o&&(e.adler=f(e.adler,u.pending_buf,u.pending-o,o)),k===0&&(u.gzindex=0,u.status=91)}else u.status=91;if(u.status===91)if(u.gzhead.comment){o=u.pending;do{if(u.pending===u.pending_buf_size&&(u.gzhead.hcrc&&u.pending>o&&(e.adler=f(e.adler,u.pending_buf,u.pending-o,o)),E(e),o=u.pending,u.pending===u.pending_buf_size)){k=1;break}k=u.gzindex<u.gzhead.comment.length?255&u.gzhead.comment.charCodeAt(u.gzindex++):0,X(u,k)}while(k!==0);u.gzhead.hcrc&&u.pending>o&&(e.adler=f(e.adler,u.pending_buf,u.pending-o,o)),k===0&&(u.status=103)}else u.status=103;if(u.status===103&&(u.gzhead.hcrc?(u.pending+2>u.pending_buf_size&&E(e),u.pending+2<=u.pending_buf_size&&(X(u,255&e.adler),X(u,e.adler>>8&255),e.adler=0,u.status=O)):u.status=O),u.pending!==0){if(E(e),e.avail_out===0)return u.last_flush=-1,i}else if(e.avail_in===0&&q(D)<=q(A)&&D!==v)return ie(e,-5);if(u.status===666&&e.avail_in!==0)return ie(e,-5);if(e.avail_in!==0||u.lookahead!==0||D!==x&&u.status!==666){var L=u.strategy===2?(function(C,G){for(var V;;){if(C.lookahead===0&&(te(C),C.lookahead===0)){if(G===x)return r;break}if(C.match_length=0,V=a._tr_tally(C,0,C.window[C.strstart]),C.lookahead--,C.strstart++,V&&(S(C,!1),C.strm.avail_out===0))return r}return C.insert=0,G===v?(S(C,!0),C.strm.avail_out===0?se:M):C.last_lit&&(S(C,!1),C.strm.avail_out===0)?r:R})(u,D):u.strategy===3?(function(C,G){for(var V,$,Q,_,W=C.window;;){if(C.lookahead<=H){if(te(C),C.lookahead<=H&&G===x)return r;if(C.lookahead===0)break}if(C.match_length=0,C.lookahead>=I&&0<C.strstart&&($=W[Q=C.strstart-1])===W[++Q]&&$===W[++Q]&&$===W[++Q]){_=C.strstart+H;do;while($===W[++Q]&&$===W[++Q]&&$===W[++Q]&&$===W[++Q]&&$===W[++Q]&&$===W[++Q]&&$===W[++Q]&&$===W[++Q]&&Q<_);C.match_length=H-(_-Q),C.match_length>C.lookahead&&(C.match_length=C.lookahead)}if(C.match_length>=I?(V=a._tr_tally(C,1,C.match_length-I),C.lookahead-=C.match_length,C.strstart+=C.match_length,C.match_length=0):(V=a._tr_tally(C,0,C.window[C.strstart]),C.lookahead--,C.strstart++),V&&(S(C,!1),C.strm.avail_out===0))return r}return C.insert=0,G===v?(S(C,!0),C.strm.avail_out===0?se:M):C.last_lit&&(S(C,!1),C.strm.avail_out===0)?r:R})(u,D):d[u.level].func(u,D);if(L!==se&&L!==M||(u.status=666),L===r||L===se)return e.avail_out===0&&(u.last_flush=-1),i;if(L===R&&(D===1?a._tr_align(u):D!==5&&(a._tr_stored_block(u,0,0,!1),D===3&&(re(u.head),u.lookahead===0&&(u.strstart=0,u.block_start=0,u.insert=0))),E(e),e.avail_out===0))return u.last_flush=-1,i}return D!==v?i:u.wrap<=0?1:(u.wrap===2?(X(u,255&e.adler),X(u,e.adler>>8&255),X(u,e.adler>>16&255),X(u,e.adler>>24&255),X(u,255&e.total_in),X(u,e.total_in>>8&255),X(u,e.total_in>>16&255),X(u,e.total_in>>24&255)):(K(u,e.adler>>>16),K(u,65535&e.adler)),E(e),0<u.wrap&&(u.wrap=-u.wrap),u.pending!==0?i:1)},j.deflateEnd=function(e){var D;return e&&e.state?(D=e.state.status)!==b&&D!==69&&D!==73&&D!==91&&D!==103&&D!==O&&D!==666?ie(e,p):(e.state=null,D===O?ie(e,-3):i):p},j.deflateSetDictionary=function(e,D){var A,u,o,k,P,L,C,G,V=D.length;if(!e||!e.state||(k=(A=e.state).wrap)===2||k===1&&A.status!==b||A.lookahead)return p;for(k===1&&(e.adler=l(e.adler,D,V,0)),A.wrap=0,V>=A.w_size&&(k===0&&(re(A.head),A.strstart=0,A.block_start=0,A.insert=0),G=new c.Buf8(A.w_size),c.arraySet(G,D,V-A.w_size,A.w_size,0),D=G,V=A.w_size),P=e.avail_in,L=e.next_in,C=e.input,e.avail_in=V,e.next_in=0,e.input=D,te(A);A.lookahead>=I;){for(u=A.strstart,o=A.lookahead-(I-1);A.ins_h=(A.ins_h<<A.hash_shift^A.window[u+I-1])&A.hash_mask,A.prev[u&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=u,u++,--o;);A.strstart=u,A.lookahead=I-1,te(A)}return A.strstart+=A.lookahead,A.block_start=A.strstart,A.insert=A.lookahead,A.lookahead=0,A.match_length=A.prev_length=I-1,A.match_available=0,e.next_in=L,e.input=C,e.avail_in=P,A.wrap=k,i},j.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(w,F,j){F.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(w,F,j){F.exports=function(d,c){var a,l,f,y,x,v,i,p,s,h,n,m,g,z,N,T,B,Z,I,H,ee,b,O,r,R;a=d.state,l=d.next_in,r=d.input,f=l+(d.avail_in-5),y=d.next_out,R=d.output,x=y-(c-d.avail_out),v=y+(d.avail_out-257),i=a.dmax,p=a.wsize,s=a.whave,h=a.wnext,n=a.window,m=a.hold,g=a.bits,z=a.lencode,N=a.distcode,T=(1<<a.lenbits)-1,B=(1<<a.distbits)-1;e:do{g<15&&(m+=r[l++]<<g,g+=8,m+=r[l++]<<g,g+=8),Z=z[m&T];t:for(;;){if(m>>>=I=Z>>>24,g-=I,(I=Z>>>16&255)===0)R[y++]=65535&Z;else{if(!(16&I)){if((64&I)==0){Z=z[(65535&Z)+(m&(1<<I)-1)];continue t}if(32&I){a.mode=12;break e}d.msg="invalid literal/length code",a.mode=30;break e}H=65535&Z,(I&=15)&&(g<I&&(m+=r[l++]<<g,g+=8),H+=m&(1<<I)-1,m>>>=I,g-=I),g<15&&(m+=r[l++]<<g,g+=8,m+=r[l++]<<g,g+=8),Z=N[m&B];r:for(;;){if(m>>>=I=Z>>>24,g-=I,!(16&(I=Z>>>16&255))){if((64&I)==0){Z=N[(65535&Z)+(m&(1<<I)-1)];continue r}d.msg="invalid distance code",a.mode=30;break e}if(ee=65535&Z,g<(I&=15)&&(m+=r[l++]<<g,(g+=8)<I&&(m+=r[l++]<<g,g+=8)),i<(ee+=m&(1<<I)-1)){d.msg="invalid distance too far back",a.mode=30;break e}if(m>>>=I,g-=I,(I=y-x)<ee){if(s<(I=ee-I)&&a.sane){d.msg="invalid distance too far back",a.mode=30;break e}if(O=n,(b=0)===h){if(b+=p-I,I<H){for(H-=I;R[y++]=n[b++],--I;);b=y-ee,O=R}}else if(h<I){if(b+=p+h-I,(I-=h)<H){for(H-=I;R[y++]=n[b++],--I;);if(b=0,h<H){for(H-=I=h;R[y++]=n[b++],--I;);b=y-ee,O=R}}}else if(b+=h-I,I<H){for(H-=I;R[y++]=n[b++],--I;);b=y-ee,O=R}for(;2<H;)R[y++]=O[b++],R[y++]=O[b++],R[y++]=O[b++],H-=3;H&&(R[y++]=O[b++],1<H&&(R[y++]=O[b++]))}else{for(b=y-ee;R[y++]=R[b++],R[y++]=R[b++],R[y++]=R[b++],2<(H-=3););H&&(R[y++]=R[b++],1<H&&(R[y++]=R[b++]))}break}}break}}while(l<f&&y<v);l-=H=g>>3,m&=(1<<(g-=H<<3))-1,d.next_in=l,d.next_out=y,d.avail_in=l<f?f-l+5:5-(l-f),d.avail_out=y<v?v-y+257:257-(y-v),a.hold=m,a.bits=g}},{}],49:[function(w,F,j){var d=w("../utils/common"),c=w("./adler32"),a=w("./crc32"),l=w("./inffast"),f=w("./inftrees"),y=1,x=2,v=0,i=-2,p=1,s=852,h=592;function n(b){return(b>>>24&255)+(b>>>8&65280)+((65280&b)<<8)+((255&b)<<24)}function m(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new d.Buf16(320),this.work=new d.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function g(b){var O;return b&&b.state?(O=b.state,b.total_in=b.total_out=O.total=0,b.msg="",O.wrap&&(b.adler=1&O.wrap),O.mode=p,O.last=0,O.havedict=0,O.dmax=32768,O.head=null,O.hold=0,O.bits=0,O.lencode=O.lendyn=new d.Buf32(s),O.distcode=O.distdyn=new d.Buf32(h),O.sane=1,O.back=-1,v):i}function z(b){var O;return b&&b.state?((O=b.state).wsize=0,O.whave=0,O.wnext=0,g(b)):i}function N(b,O){var r,R;return b&&b.state?(R=b.state,O<0?(r=0,O=-O):(r=1+(O>>4),O<48&&(O&=15)),O&&(O<8||15<O)?i:(R.window!==null&&R.wbits!==O&&(R.window=null),R.wrap=r,R.wbits=O,z(b))):i}function T(b,O){var r,R;return b?(R=new m,(b.state=R).window=null,(r=N(b,O))!==v&&(b.state=null),r):i}var B,Z,I=!0;function H(b){if(I){var O;for(B=new d.Buf32(512),Z=new d.Buf32(32),O=0;O<144;)b.lens[O++]=8;for(;O<256;)b.lens[O++]=9;for(;O<280;)b.lens[O++]=7;for(;O<288;)b.lens[O++]=8;for(f(y,b.lens,0,288,B,0,b.work,{bits:9}),O=0;O<32;)b.lens[O++]=5;f(x,b.lens,0,32,Z,0,b.work,{bits:5}),I=!1}b.lencode=B,b.lenbits=9,b.distcode=Z,b.distbits=5}function ee(b,O,r,R){var se,M=b.state;return M.window===null&&(M.wsize=1<<M.wbits,M.wnext=0,M.whave=0,M.window=new d.Buf8(M.wsize)),R>=M.wsize?(d.arraySet(M.window,O,r-M.wsize,M.wsize,0),M.wnext=0,M.whave=M.wsize):(R<(se=M.wsize-M.wnext)&&(se=R),d.arraySet(M.window,O,r-R,se,M.wnext),(R-=se)?(d.arraySet(M.window,O,r-R,R,0),M.wnext=R,M.whave=M.wsize):(M.wnext+=se,M.wnext===M.wsize&&(M.wnext=0),M.whave<M.wsize&&(M.whave+=se))),0}j.inflateReset=z,j.inflateReset2=N,j.inflateResetKeep=g,j.inflateInit=function(b){return T(b,15)},j.inflateInit2=T,j.inflate=function(b,O){var r,R,se,M,ie,q,re,E,S,X,K,U,te,ue,J,oe,ce,fe,ve,ge,e,D,A,u,o=0,k=new d.Buf8(4),P=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!b||!b.state||!b.output||!b.input&&b.avail_in!==0)return i;(r=b.state).mode===12&&(r.mode=13),ie=b.next_out,se=b.output,re=b.avail_out,M=b.next_in,R=b.input,q=b.avail_in,E=r.hold,S=r.bits,X=q,K=re,D=v;e:for(;;)switch(r.mode){case p:if(r.wrap===0){r.mode=13;break}for(;S<16;){if(q===0)break e;q--,E+=R[M++]<<S,S+=8}if(2&r.wrap&&E===35615){k[r.check=0]=255&E,k[1]=E>>>8&255,r.check=a(r.check,k,2,0),S=E=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&E)<<8)+(E>>8))%31){b.msg="incorrect header check",r.mode=30;break}if((15&E)!=8){b.msg="unknown compression method",r.mode=30;break}if(S-=4,e=8+(15&(E>>>=4)),r.wbits===0)r.wbits=e;else if(e>r.wbits){b.msg="invalid window size",r.mode=30;break}r.dmax=1<<e,b.adler=r.check=1,r.mode=512&E?10:12,S=E=0;break;case 2:for(;S<16;){if(q===0)break e;q--,E+=R[M++]<<S,S+=8}if(r.flags=E,(255&r.flags)!=8){b.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){b.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=E>>8&1),512&r.flags&&(k[0]=255&E,k[1]=E>>>8&255,r.check=a(r.check,k,2,0)),S=E=0,r.mode=3;case 3:for(;S<32;){if(q===0)break e;q--,E+=R[M++]<<S,S+=8}r.head&&(r.head.time=E),512&r.flags&&(k[0]=255&E,k[1]=E>>>8&255,k[2]=E>>>16&255,k[3]=E>>>24&255,r.check=a(r.check,k,4,0)),S=E=0,r.mode=4;case 4:for(;S<16;){if(q===0)break e;q--,E+=R[M++]<<S,S+=8}r.head&&(r.head.xflags=255&E,r.head.os=E>>8),512&r.flags&&(k[0]=255&E,k[1]=E>>>8&255,r.check=a(r.check,k,2,0)),S=E=0,r.mode=5;case 5:if(1024&r.flags){for(;S<16;){if(q===0)break e;q--,E+=R[M++]<<S,S+=8}r.length=E,r.head&&(r.head.extra_len=E),512&r.flags&&(k[0]=255&E,k[1]=E>>>8&255,r.check=a(r.check,k,2,0)),S=E=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(q<(U=r.length)&&(U=q),U&&(r.head&&(e=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),d.arraySet(r.head.extra,R,M,U,e)),512&r.flags&&(r.check=a(r.check,R,U,M)),q-=U,M+=U,r.length-=U),r.length))break e;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(q===0)break e;for(U=0;e=R[M+U++],r.head&&e&&r.length<65536&&(r.head.name+=String.fromCharCode(e)),e&&U<q;);if(512&r.flags&&(r.check=a(r.check,R,U,M)),q-=U,M+=U,e)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(q===0)break e;for(U=0;e=R[M+U++],r.head&&e&&r.length<65536&&(r.head.comment+=String.fromCharCode(e)),e&&U<q;);if(512&r.flags&&(r.check=a(r.check,R,U,M)),q-=U,M+=U,e)break e}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;S<16;){if(q===0)break e;q--,E+=R[M++]<<S,S+=8}if(E!==(65535&r.check)){b.msg="header crc mismatch",r.mode=30;break}S=E=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),b.adler=r.check=0,r.mode=12;break;case 10:for(;S<32;){if(q===0)break e;q--,E+=R[M++]<<S,S+=8}b.adler=r.check=n(E),S=E=0,r.mode=11;case 11:if(r.havedict===0)return b.next_out=ie,b.avail_out=re,b.next_in=M,b.avail_in=q,r.hold=E,r.bits=S,2;b.adler=r.check=1,r.mode=12;case 12:if(O===5||O===6)break e;case 13:if(r.last){E>>>=7&S,S-=7&S,r.mode=27;break}for(;S<3;){if(q===0)break e;q--,E+=R[M++]<<S,S+=8}switch(r.last=1&E,S-=1,3&(E>>>=1)){case 0:r.mode=14;break;case 1:if(H(r),r.mode=20,O!==6)break;E>>>=2,S-=2;break e;case 2:r.mode=17;break;case 3:b.msg="invalid block type",r.mode=30}E>>>=2,S-=2;break;case 14:for(E>>>=7&S,S-=7&S;S<32;){if(q===0)break e;q--,E+=R[M++]<<S,S+=8}if((65535&E)!=(E>>>16^65535)){b.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&E,S=E=0,r.mode=15,O===6)break e;case 15:r.mode=16;case 16:if(U=r.length){if(q<U&&(U=q),re<U&&(U=re),U===0)break e;d.arraySet(se,R,M,U,ie),q-=U,M+=U,re-=U,ie+=U,r.length-=U;break}r.mode=12;break;case 17:for(;S<14;){if(q===0)break e;q--,E+=R[M++]<<S,S+=8}if(r.nlen=257+(31&E),E>>>=5,S-=5,r.ndist=1+(31&E),E>>>=5,S-=5,r.ncode=4+(15&E),E>>>=4,S-=4,286<r.nlen||30<r.ndist){b.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;S<3;){if(q===0)break e;q--,E+=R[M++]<<S,S+=8}r.lens[P[r.have++]]=7&E,E>>>=3,S-=3}for(;r.have<19;)r.lens[P[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,A={bits:r.lenbits},D=f(0,r.lens,0,19,r.lencode,0,r.work,A),r.lenbits=A.bits,D){b.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;oe=(o=r.lencode[E&(1<<r.lenbits)-1])>>>16&255,ce=65535&o,!((J=o>>>24)<=S);){if(q===0)break e;q--,E+=R[M++]<<S,S+=8}if(ce<16)E>>>=J,S-=J,r.lens[r.have++]=ce;else{if(ce===16){for(u=J+2;S<u;){if(q===0)break e;q--,E+=R[M++]<<S,S+=8}if(E>>>=J,S-=J,r.have===0){b.msg="invalid bit length repeat",r.mode=30;break}e=r.lens[r.have-1],U=3+(3&E),E>>>=2,S-=2}else if(ce===17){for(u=J+3;S<u;){if(q===0)break e;q--,E+=R[M++]<<S,S+=8}S-=J,e=0,U=3+(7&(E>>>=J)),E>>>=3,S-=3}else{for(u=J+7;S<u;){if(q===0)break e;q--,E+=R[M++]<<S,S+=8}S-=J,e=0,U=11+(127&(E>>>=J)),E>>>=7,S-=7}if(r.have+U>r.nlen+r.ndist){b.msg="invalid bit length repeat",r.mode=30;break}for(;U--;)r.lens[r.have++]=e}}if(r.mode===30)break;if(r.lens[256]===0){b.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,A={bits:r.lenbits},D=f(y,r.lens,0,r.nlen,r.lencode,0,r.work,A),r.lenbits=A.bits,D){b.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,A={bits:r.distbits},D=f(x,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,A),r.distbits=A.bits,D){b.msg="invalid distances set",r.mode=30;break}if(r.mode=20,O===6)break e;case 20:r.mode=21;case 21:if(6<=q&&258<=re){b.next_out=ie,b.avail_out=re,b.next_in=M,b.avail_in=q,r.hold=E,r.bits=S,l(b,K),ie=b.next_out,se=b.output,re=b.avail_out,M=b.next_in,R=b.input,q=b.avail_in,E=r.hold,S=r.bits,r.mode===12&&(r.back=-1);break}for(r.back=0;oe=(o=r.lencode[E&(1<<r.lenbits)-1])>>>16&255,ce=65535&o,!((J=o>>>24)<=S);){if(q===0)break e;q--,E+=R[M++]<<S,S+=8}if(oe&&(240&oe)==0){for(fe=J,ve=oe,ge=ce;oe=(o=r.lencode[ge+((E&(1<<fe+ve)-1)>>fe)])>>>16&255,ce=65535&o,!(fe+(J=o>>>24)<=S);){if(q===0)break e;q--,E+=R[M++]<<S,S+=8}E>>>=fe,S-=fe,r.back+=fe}if(E>>>=J,S-=J,r.back+=J,r.length=ce,oe===0){r.mode=26;break}if(32&oe){r.back=-1,r.mode=12;break}if(64&oe){b.msg="invalid literal/length code",r.mode=30;break}r.extra=15&oe,r.mode=22;case 22:if(r.extra){for(u=r.extra;S<u;){if(q===0)break e;q--,E+=R[M++]<<S,S+=8}r.length+=E&(1<<r.extra)-1,E>>>=r.extra,S-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;oe=(o=r.distcode[E&(1<<r.distbits)-1])>>>16&255,ce=65535&o,!((J=o>>>24)<=S);){if(q===0)break e;q--,E+=R[M++]<<S,S+=8}if((240&oe)==0){for(fe=J,ve=oe,ge=ce;oe=(o=r.distcode[ge+((E&(1<<fe+ve)-1)>>fe)])>>>16&255,ce=65535&o,!(fe+(J=o>>>24)<=S);){if(q===0)break e;q--,E+=R[M++]<<S,S+=8}E>>>=fe,S-=fe,r.back+=fe}if(E>>>=J,S-=J,r.back+=J,64&oe){b.msg="invalid distance code",r.mode=30;break}r.offset=ce,r.extra=15&oe,r.mode=24;case 24:if(r.extra){for(u=r.extra;S<u;){if(q===0)break e;q--,E+=R[M++]<<S,S+=8}r.offset+=E&(1<<r.extra)-1,E>>>=r.extra,S-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){b.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(re===0)break e;if(U=K-re,r.offset>U){if((U=r.offset-U)>r.whave&&r.sane){b.msg="invalid distance too far back",r.mode=30;break}te=U>r.wnext?(U-=r.wnext,r.wsize-U):r.wnext-U,U>r.length&&(U=r.length),ue=r.window}else ue=se,te=ie-r.offset,U=r.length;for(re<U&&(U=re),re-=U,r.length-=U;se[ie++]=ue[te++],--U;);r.length===0&&(r.mode=21);break;case 26:if(re===0)break e;se[ie++]=r.length,re--,r.mode=21;break;case 27:if(r.wrap){for(;S<32;){if(q===0)break e;q--,E|=R[M++]<<S,S+=8}if(K-=re,b.total_out+=K,r.total+=K,K&&(b.adler=r.check=r.flags?a(r.check,se,K,ie-K):c(r.check,se,K,ie-K)),K=re,(r.flags?E:n(E))!==r.check){b.msg="incorrect data check",r.mode=30;break}S=E=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;S<32;){if(q===0)break e;q--,E+=R[M++]<<S,S+=8}if(E!==(4294967295&r.total)){b.msg="incorrect length check",r.mode=30;break}S=E=0}r.mode=29;case 29:D=1;break e;case 30:D=-3;break e;case 31:return-4;case 32:default:return i}return b.next_out=ie,b.avail_out=re,b.next_in=M,b.avail_in=q,r.hold=E,r.bits=S,(r.wsize||K!==b.avail_out&&r.mode<30&&(r.mode<27||O!==4))&&ee(b,b.output,b.next_out,K-b.avail_out)?(r.mode=31,-4):(X-=b.avail_in,K-=b.avail_out,b.total_in+=X,b.total_out+=K,r.total+=K,r.wrap&&K&&(b.adler=r.check=r.flags?a(r.check,se,K,b.next_out-K):c(r.check,se,K,b.next_out-K)),b.data_type=r.bits+(r.last?64:0)+(r.mode===12?128:0)+(r.mode===20||r.mode===15?256:0),(X==0&&K===0||O===4)&&D===v&&(D=-5),D)},j.inflateEnd=function(b){if(!b||!b.state)return i;var O=b.state;return O.window&&(O.window=null),b.state=null,v},j.inflateGetHeader=function(b,O){var r;return b&&b.state?(2&(r=b.state).wrap)==0?i:((r.head=O).done=!1,v):i},j.inflateSetDictionary=function(b,O){var r,R=O.length;return b&&b.state?(r=b.state).wrap!==0&&r.mode!==11?i:r.mode===11&&c(1,O,R,0)!==r.check?-3:ee(b,O,R,R)?(r.mode=31,-4):(r.havedict=1,v):i},j.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(w,F,j){var d=w("../utils/common"),c=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];F.exports=function(y,x,v,i,p,s,h,n){var m,g,z,N,T,B,Z,I,H,ee=n.bits,b=0,O=0,r=0,R=0,se=0,M=0,ie=0,q=0,re=0,E=0,S=null,X=0,K=new d.Buf16(16),U=new d.Buf16(16),te=null,ue=0;for(b=0;b<=15;b++)K[b]=0;for(O=0;O<i;O++)K[x[v+O]]++;for(se=ee,R=15;1<=R&&K[R]===0;R--);if(R<se&&(se=R),R===0)return p[s++]=20971520,p[s++]=20971520,n.bits=1,0;for(r=1;r<R&&K[r]===0;r++);for(se<r&&(se=r),b=q=1;b<=15;b++)if(q<<=1,(q-=K[b])<0)return-1;if(0<q&&(y===0||R!==1))return-1;for(U[1]=0,b=1;b<15;b++)U[b+1]=U[b]+K[b];for(O=0;O<i;O++)x[v+O]!==0&&(h[U[x[v+O]]++]=O);if(B=y===0?(S=te=h,19):y===1?(S=c,X-=257,te=a,ue-=257,256):(S=l,te=f,-1),b=r,T=s,ie=O=E=0,z=-1,N=(re=1<<(M=se))-1,y===1&&852<re||y===2&&592<re)return 1;for(;;){for(Z=b-ie,H=h[O]<B?(I=0,h[O]):h[O]>B?(I=te[ue+h[O]],S[X+h[O]]):(I=96,0),m=1<<b-ie,r=g=1<<M;p[T+(E>>ie)+(g-=m)]=Z<<24|I<<16|H|0,g!==0;);for(m=1<<b-1;E&m;)m>>=1;if(m!==0?(E&=m-1,E+=m):E=0,O++,--K[b]==0){if(b===R)break;b=x[v+h[O]]}if(se<b&&(E&N)!==z){for(ie===0&&(ie=se),T+=r,q=1<<(M=b-ie);M+ie<R&&!((q-=K[M+ie])<=0);)M++,q<<=1;if(re+=1<<M,y===1&&852<re||y===2&&592<re)return 1;p[z=E&N]=se<<24|M<<16|T-s|0}}return E!==0&&(p[T+E]=b-ie<<24|64<<16|0),n.bits=se,0}},{"../utils/common":41}],51:[function(w,F,j){F.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(w,F,j){var d=w("../utils/common"),c=0,a=1;function l(o){for(var k=o.length;0<=--k;)o[k]=0}var f=0,y=29,x=256,v=x+1+y,i=30,p=19,s=2*v+1,h=15,n=16,m=7,g=256,z=16,N=17,T=18,B=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Z=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ee=new Array(2*(v+2));l(ee);var b=new Array(2*i);l(b);var O=new Array(512);l(O);var r=new Array(256);l(r);var R=new Array(y);l(R);var se,M,ie,q=new Array(i);function re(o,k,P,L,C){this.static_tree=o,this.extra_bits=k,this.extra_base=P,this.elems=L,this.max_length=C,this.has_stree=o&&o.length}function E(o,k){this.dyn_tree=o,this.max_code=0,this.stat_desc=k}function S(o){return o<256?O[o]:O[256+(o>>>7)]}function X(o,k){o.pending_buf[o.pending++]=255&k,o.pending_buf[o.pending++]=k>>>8&255}function K(o,k,P){o.bi_valid>n-P?(o.bi_buf|=k<<o.bi_valid&65535,X(o,o.bi_buf),o.bi_buf=k>>n-o.bi_valid,o.bi_valid+=P-n):(o.bi_buf|=k<<o.bi_valid&65535,o.bi_valid+=P)}function U(o,k,P){K(o,P[2*k],P[2*k+1])}function te(o,k){for(var P=0;P|=1&o,o>>>=1,P<<=1,0<--k;);return P>>>1}function ue(o,k,P){var L,C,G=new Array(h+1),V=0;for(L=1;L<=h;L++)G[L]=V=V+P[L-1]<<1;for(C=0;C<=k;C++){var $=o[2*C+1];$!==0&&(o[2*C]=te(G[$]++,$))}}function J(o){var k;for(k=0;k<v;k++)o.dyn_ltree[2*k]=0;for(k=0;k<i;k++)o.dyn_dtree[2*k]=0;for(k=0;k<p;k++)o.bl_tree[2*k]=0;o.dyn_ltree[2*g]=1,o.opt_len=o.static_len=0,o.last_lit=o.matches=0}function oe(o){8<o.bi_valid?X(o,o.bi_buf):0<o.bi_valid&&(o.pending_buf[o.pending++]=o.bi_buf),o.bi_buf=0,o.bi_valid=0}function ce(o,k,P,L){var C=2*k,G=2*P;return o[C]<o[G]||o[C]===o[G]&&L[k]<=L[P]}function fe(o,k,P){for(var L=o.heap[P],C=P<<1;C<=o.heap_len&&(C<o.heap_len&&ce(k,o.heap[C+1],o.heap[C],o.depth)&&C++,!ce(k,L,o.heap[C],o.depth));)o.heap[P]=o.heap[C],P=C,C<<=1;o.heap[P]=L}function ve(o,k,P){var L,C,G,V,$=0;if(o.last_lit!==0)for(;L=o.pending_buf[o.d_buf+2*$]<<8|o.pending_buf[o.d_buf+2*$+1],C=o.pending_buf[o.l_buf+$],$++,L===0?U(o,C,k):(U(o,(G=r[C])+x+1,k),(V=B[G])!==0&&K(o,C-=R[G],V),U(o,G=S(--L),P),(V=Z[G])!==0&&K(o,L-=q[G],V)),$<o.last_lit;);U(o,g,k)}function ge(o,k){var P,L,C,G=k.dyn_tree,V=k.stat_desc.static_tree,$=k.stat_desc.has_stree,Q=k.stat_desc.elems,_=-1;for(o.heap_len=0,o.heap_max=s,P=0;P<Q;P++)G[2*P]!==0?(o.heap[++o.heap_len]=_=P,o.depth[P]=0):G[2*P+1]=0;for(;o.heap_len<2;)G[2*(C=o.heap[++o.heap_len]=_<2?++_:0)]=1,o.depth[C]=0,o.opt_len--,$&&(o.static_len-=V[2*C+1]);for(k.max_code=_,P=o.heap_len>>1;1<=P;P--)fe(o,G,P);for(C=Q;P=o.heap[1],o.heap[1]=o.heap[o.heap_len--],fe(o,G,1),L=o.heap[1],o.heap[--o.heap_max]=P,o.heap[--o.heap_max]=L,G[2*C]=G[2*P]+G[2*L],o.depth[C]=(o.depth[P]>=o.depth[L]?o.depth[P]:o.depth[L])+1,G[2*P+1]=G[2*L+1]=C,o.heap[1]=C++,fe(o,G,1),2<=o.heap_len;);o.heap[--o.heap_max]=o.heap[1],(function(W,Y){var ae,ne,pe,le,_e,we,xe=Y.dyn_tree,ke=Y.max_code,je=Y.stat_desc.static_tree,Te=Y.stat_desc.has_stree,Qe=Y.stat_desc.extra_bits,Ze=Y.stat_desc.extra_base,Ne=Y.stat_desc.max_length,Se=0;for(le=0;le<=h;le++)W.bl_count[le]=0;for(xe[2*W.heap[W.heap_max]+1]=0,ae=W.heap_max+1;ae<s;ae++)Ne<(le=xe[2*xe[2*(ne=W.heap[ae])+1]+1]+1)&&(le=Ne,Se++),xe[2*ne+1]=le,ke<ne||(W.bl_count[le]++,_e=0,Ze<=ne&&(_e=Qe[ne-Ze]),we=xe[2*ne],W.opt_len+=we*(le+_e),Te&&(W.static_len+=we*(je[2*ne+1]+_e)));if(Se!==0){do{for(le=Ne-1;W.bl_count[le]===0;)le--;W.bl_count[le]--,W.bl_count[le+1]+=2,W.bl_count[Ne]--,Se-=2}while(0<Se);for(le=Ne;le!==0;le--)for(ne=W.bl_count[le];ne!==0;)ke<(pe=W.heap[--ae])||(xe[2*pe+1]!==le&&(W.opt_len+=(le-xe[2*pe+1])*xe[2*pe],xe[2*pe+1]=le),ne--)}})(o,k),ue(G,_,o.bl_count)}function e(o,k,P){var L,C,G=-1,V=k[1],$=0,Q=7,_=4;for(V===0&&(Q=138,_=3),k[2*(P+1)+1]=65535,L=0;L<=P;L++)C=V,V=k[2*(L+1)+1],++$<Q&&C===V||($<_?o.bl_tree[2*C]+=$:C!==0?(C!==G&&o.bl_tree[2*C]++,o.bl_tree[2*z]++):$<=10?o.bl_tree[2*N]++:o.bl_tree[2*T]++,G=C,_=($=0)===V?(Q=138,3):C===V?(Q=6,3):(Q=7,4))}function D(o,k,P){var L,C,G=-1,V=k[1],$=0,Q=7,_=4;for(V===0&&(Q=138,_=3),L=0;L<=P;L++)if(C=V,V=k[2*(L+1)+1],!(++$<Q&&C===V)){if($<_)for(;U(o,C,o.bl_tree),--$!=0;);else C!==0?(C!==G&&(U(o,C,o.bl_tree),$--),U(o,z,o.bl_tree),K(o,$-3,2)):$<=10?(U(o,N,o.bl_tree),K(o,$-3,3)):(U(o,T,o.bl_tree),K(o,$-11,7));G=C,_=($=0)===V?(Q=138,3):C===V?(Q=6,3):(Q=7,4)}}l(q);var A=!1;function u(o,k,P,L){K(o,(f<<1)+(L?1:0),3),(function(C,G,V,$){oe(C),X(C,V),X(C,~V),d.arraySet(C.pending_buf,C.window,G,V,C.pending),C.pending+=V})(o,k,P)}j._tr_init=function(o){A||((function(){var k,P,L,C,G,V=new Array(h+1);for(C=L=0;C<y-1;C++)for(R[C]=L,k=0;k<1<<B[C];k++)r[L++]=C;for(r[L-1]=C,C=G=0;C<16;C++)for(q[C]=G,k=0;k<1<<Z[C];k++)O[G++]=C;for(G>>=7;C<i;C++)for(q[C]=G<<7,k=0;k<1<<Z[C]-7;k++)O[256+G++]=C;for(P=0;P<=h;P++)V[P]=0;for(k=0;k<=143;)ee[2*k+1]=8,k++,V[8]++;for(;k<=255;)ee[2*k+1]=9,k++,V[9]++;for(;k<=279;)ee[2*k+1]=7,k++,V[7]++;for(;k<=287;)ee[2*k+1]=8,k++,V[8]++;for(ue(ee,v+1,V),k=0;k<i;k++)b[2*k+1]=5,b[2*k]=te(k,5);se=new re(ee,B,x+1,v,h),M=new re(b,Z,0,i,h),ie=new re(new Array(0),I,0,p,m)})(),A=!0),o.l_desc=new E(o.dyn_ltree,se),o.d_desc=new E(o.dyn_dtree,M),o.bl_desc=new E(o.bl_tree,ie),o.bi_buf=0,o.bi_valid=0,J(o)},j._tr_stored_block=u,j._tr_flush_block=function(o,k,P,L){var C,G,V=0;0<o.level?(o.strm.data_type===2&&(o.strm.data_type=(function($){var Q,_=4093624447;for(Q=0;Q<=31;Q++,_>>>=1)if(1&_&&$.dyn_ltree[2*Q]!==0)return c;if($.dyn_ltree[18]!==0||$.dyn_ltree[20]!==0||$.dyn_ltree[26]!==0)return a;for(Q=32;Q<x;Q++)if($.dyn_ltree[2*Q]!==0)return a;return c})(o)),ge(o,o.l_desc),ge(o,o.d_desc),V=(function($){var Q;for(e($,$.dyn_ltree,$.l_desc.max_code),e($,$.dyn_dtree,$.d_desc.max_code),ge($,$.bl_desc),Q=p-1;3<=Q&&$.bl_tree[2*H[Q]+1]===0;Q--);return $.opt_len+=3*(Q+1)+5+5+4,Q})(o),C=o.opt_len+3+7>>>3,(G=o.static_len+3+7>>>3)<=C&&(C=G)):C=G=P+5,P+4<=C&&k!==-1?u(o,k,P,L):o.strategy===4||G===C?(K(o,2+(L?1:0),3),ve(o,ee,b)):(K(o,4+(L?1:0),3),(function($,Q,_,W){var Y;for(K($,Q-257,5),K($,_-1,5),K($,W-4,4),Y=0;Y<W;Y++)K($,$.bl_tree[2*H[Y]+1],3);D($,$.dyn_ltree,Q-1),D($,$.dyn_dtree,_-1)})(o,o.l_desc.max_code+1,o.d_desc.max_code+1,V+1),ve(o,o.dyn_ltree,o.dyn_dtree)),J(o),L&&oe(o)},j._tr_tally=function(o,k,P){return o.pending_buf[o.d_buf+2*o.last_lit]=k>>>8&255,o.pending_buf[o.d_buf+2*o.last_lit+1]=255&k,o.pending_buf[o.l_buf+o.last_lit]=255&P,o.last_lit++,k===0?o.dyn_ltree[2*P]++:(o.matches++,k--,o.dyn_ltree[2*(r[P]+x+1)]++,o.dyn_dtree[2*S(k)]++),o.last_lit===o.lit_bufsize-1},j._tr_align=function(o){K(o,2,3),U(o,g,ee),(function(k){k.bi_valid===16?(X(k,k.bi_buf),k.bi_buf=0,k.bi_valid=0):8<=k.bi_valid&&(k.pending_buf[k.pending++]=255&k.bi_buf,k.bi_buf>>=8,k.bi_valid-=8)})(o)}},{"../utils/common":41}],53:[function(w,F,j){F.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(w,F,j){(function(d){(function(c,a){if(!c.setImmediate){var l,f,y,x,v=1,i={},p=!1,s=c.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(c);h=h&&h.setTimeout?h:c,l={}.toString.call(c.process)==="[object process]"?function(z){process.nextTick(function(){m(z)})}:(function(){if(c.postMessage&&!c.importScripts){var z=!0,N=c.onmessage;return c.onmessage=function(){z=!1},c.postMessage("","*"),c.onmessage=N,z}})()?(x="setImmediate$"+Math.random()+"$",c.addEventListener?c.addEventListener("message",g,!1):c.attachEvent("onmessage",g),function(z){c.postMessage(x+z,"*")}):c.MessageChannel?((y=new MessageChannel).port1.onmessage=function(z){m(z.data)},function(z){y.port2.postMessage(z)}):s&&"onreadystatechange"in s.createElement("script")?(f=s.documentElement,function(z){var N=s.createElement("script");N.onreadystatechange=function(){m(z),N.onreadystatechange=null,f.removeChild(N),N=null},f.appendChild(N)}):function(z){setTimeout(m,0,z)},h.setImmediate=function(z){typeof z!="function"&&(z=new Function(""+z));for(var N=new Array(arguments.length-1),T=0;T<N.length;T++)N[T]=arguments[T+1];var B={callback:z,args:N};return i[v]=B,l(v),v++},h.clearImmediate=n}function n(z){delete i[z]}function m(z){if(p)setTimeout(m,0,z);else{var N=i[z];if(N){p=!0;try{(function(T){var B=T.callback,Z=T.args;switch(Z.length){case 0:B();break;case 1:B(Z[0]);break;case 2:B(Z[0],Z[1]);break;case 3:B(Z[0],Z[1],Z[2]);break;default:B.apply(a,Z)}})(N)}finally{n(z),p=!1}}}}function g(z){z.source===c&&typeof z.data=="string"&&z.data.indexOf(x)===0&&m(+z.data.slice(x.length))}})(typeof self>"u"?d===void 0?this:d:self)}).call(this,typeof Ee<"u"?Ee:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Me)),Me.exports}var kt=yt();const jt=et(kt),It=({user:Ce,profile:me,onBack:w,initialView:F="overview",onProxyClient:j})=>{var V,$,Q;const[d,c]=de.useState(F),[a,l]=de.useState(!1),[f,y]=de.useState(null),[x,v]=de.useState([]),[i,p]=de.useState([]),[s,h]=de.useState(""),[n,m]=de.useState(!1),[g,z]=de.useState(null),[N,T]=de.useState(null),[B,Z]=de.useState(100),[I,H]=de.useState([]),[ee,b]=de.useState(null),[O,r]=de.useState({message:"",type:null}),[R,se]=de.useState(null),[M,ie]=de.useState([]),[q,re]=de.useState(!1),[E,S]=de.useState(""),[X,K]=de.useState(""),U=(_,W="success")=>{r({message:_,type:W}),setTimeout(()=>r({message:"",type:null}),4e3)};de.useEffect(()=>{c(F)},[F]);const[te,ue]=de.useState({primary_color:"#135bec",logo_url:"",radius:"12px",style_presets:["Superhroes","John Wick","Urbano"]}),[J,oe]=de.useState({name:"",slug:"",client_email:"",credits:500,start_date:new Date().toISOString().split("T")[0],end_date:new Date(Date.now()+10080*60*1e3).toISOString().split("T")[0]});de.useEffect(()=>{ce()},[me.partner_id]);const ce=async()=>{try{l(!0);let _=me.partner_id,W=!1;if(!_){const{data:Y}=await he.from("partners").select("id").or(`user_id.eq.${me.id},contact_email.eq.${me.email}`).single();Y?_=Y.id:W=!0}if(W){y({id:me.id,name:me.full_name||me.email.split("@")[0],credits_total:me.credits||0,credits_used:me.total_generations||0,is_virtual:!0,config:{primary_color:"#135bec",logo_url:null}});const[Y,ae]=await Promise.all([he.from("events").select("*").eq("partner_id",me.id).order("created_at",{ascending:!1}),he.from("wallet_transactions").select("*").eq("partner_id",me.id).order("created_at",{ascending:!1})]);if(v(Y.data||[]),p(ae.data||[]),Y.data&&Y.data.length>0){const ne=Y.data.map(le=>le.id),{data:pe}=await he.from("generations").select("created_at, event_id").in("event_id",ne);H(pe||[])}}else{const[Y,ae,ne]=await Promise.all([he.from("partners").select("*").eq("id",_).single(),he.from("events").select("*").eq("partner_id",_).order("created_at",{ascending:!1}),he.from("wallet_transactions").select("*").eq("partner_id",_).order("created_at",{ascending:!1})]);if(Y.error)throw Y.error;if(y(Y.data),p(ne.data||[]),Y.data.config&&ue({primary_color:Y.data.config.primary_color||"#135bec",logo_url:Y.data.config.logo_url||"",radius:Y.data.config.radius||"12px",style_presets:Y.data.config.style_presets||["Superhroes","John Wick","Urbano"]}),ae.data&&ae.data.length>0){const pe=ae.data.map(_e=>_e.id),{data:le}=await he.from("generations").select("created_at, event_id").in("event_id",pe);H(le||[])}v(ae.data||[])}}catch(_){console.error("Error fetching partner data:",_)}finally{l(!1)}},fe=async()=>{if(f)try{const{error:_}=await he.from("partners").update({config:te}).eq("id",f.id);if(_)throw _;y({...f,config:te}),U("Configuracin de marca guardada")}catch(_){console.error("Error updating branding:",_)}},ve=async _=>{try{re(!0);const{data:W,error:Y}=await he.from("generations").select("*, profiles(email)").eq("event_id",_).order("created_at",{ascending:!1});if(Y)throw Y;ie(W||[])}catch(W){console.error("Error fetching photos:",W),U("No se pudieron cargar las fotos","error")}finally{re(!1)}},ge=async _=>{if(window.confirm("Ests seguro de que deseas eliminar esta foto de la galera?"))try{const{error:W}=await he.from("generations").delete().eq("id",_);if(W)throw W;ie(Y=>Y.filter(ae=>ae.id!==_)),U("Foto eliminada correctamente")}catch(W){console.error("Error deleting photo:",W),U("Error al eliminar la foto","error")}},e=async _=>{if(!_.target.files||_.target.files.length===0)return;const W=_.target.files[0],Y=W.name.split(".").pop(),ae=`${f==null?void 0:f.id}-${Date.now()}.${Y}`;try{l(!0);const{error:ne}=await he.storage.from("logos").upload(ae,W);if(ne){const{error:pe}=await he.storage.from("public").upload(`logos/${ae}`,W);if(pe)throw ne;const{data:le}=he.storage.from("public").getPublicUrl(`logos/${ae}`);ue({...te,logo_url:le.publicUrl})}else{const{data:pe}=he.storage.from("logos").getPublicUrl(ae);ue({...te,logo_url:pe.publicUrl})}}catch(ne){console.error("Error uploading logo:",ne),U("Error al subir logo: "+ne.message,"error")}finally{l(!1)}},D=async _=>{if(_.preventDefault(),!f)return;const W=Number(J.credits);if(W>f.credits_total-f.credits_used){U("Crditos insuficientes en tu balance mayorista.","error");return}try{l(!0);const{data:Y,error:ae}=await he.from("events").insert([{partner_id:f.id,event_name:J.name,client_email:J.client_email,event_slug:J.slug||J.name.toLowerCase().replace(/\s+/g,"-"),credits_allocated:W,credits_used:0,start_date:new Date(J.start_date).toISOString(),end_date:new Date(J.end_date).toISOString(),is_active:!0,selected_styles:te.style_presets}]).select();if(ae)throw ae;if(f.is_virtual){const{error:ne}=await he.from("profiles").update({credits:Math.max(0,f.credits_total-W)}).eq("id",me.id);if(ne)throw ne}else{const{error:ne}=await he.from("partners").update({credits_used:(f.credits_used||0)+W}).eq("id",f.id);if(ne)throw ne}m(!1),oe({name:"",slug:"",client_email:"",credits:500,start_date:"",end_date:""}),U("Evento creado con xito"),ce()}catch(Y){console.error("Error creating event:",Y),U("Error al crear el evento. "+(Y.message||"El slug podra estar duplicado."),"error")}finally{l(!1)}},A=async()=>{if(!N||!f)return;const _=Number(B),W=(f.credits_total||0)-(f.credits_used||0);if(_>W){U("No tienes crditos suficientes.","error");return}try{l(!0);const{error:Y}=await he.from("events").update({credits_allocated:(N.credits_allocated||0)+_}).eq("id",N.id);if(Y)throw Y;if(f.is_virtual){const{error:ae}=await he.from("profiles").update({credits:Math.max(0,f.credits_total-_)}).eq("id",me.id);if(ae)throw ae}else{const{error:ae}=await he.from("partners").update({credits_used:(f.credits_used||0)+_}).eq("id",f.id);if(ae)throw ae}await he.from("wallet_transactions").insert({partner_id:f.id,amount:_,type:"usage",description:`Transferencia a evento: ${N.event_name}`}),U(`Se han transferido ${_} crditos.`),T(null),ce()}catch(Y){U("Error: "+Y.message,"error")}finally{l(!1)}},u=async()=>{if(ee)try{l(!0);const{error:_}=await he.from("events").delete().eq("id",ee.id);if(_)throw _;U("Evento eliminado permanentemente"),b(null),ce()}catch(_){console.error("Error deleting event:",_),U("Error al eliminar evento: "+_.message,"error")}finally{l(!1)}},o=_=>{ue(W=>({...W,style_presets:W.style_presets.includes(_)?W.style_presets.filter(Y=>Y!==_):[...W.style_presets,_]}))},k=de.useMemo(()=>M.filter(_=>{var ne;const W=((ne=_.profiles)==null?void 0:ne.email)||"Annimo",Y=!E||_.id.toLowerCase().includes(E.toLowerCase())||W.toLowerCase().includes(E.toLowerCase()),ae=!X||_.created_at&&_.created_at.startsWith(X);return Y&&ae}),[M,E,X]),P=de.useMemo(()=>x.filter(_=>(_.event_name||"").toLowerCase().includes(s.toLowerCase())||(_.event_slug||"").toLowerCase().includes(s.toLowerCase())),[x,s]);if(a&&!f)return t.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] text-white space-y-4",children:[t.jsx("div",{className:"size-12 border-4 border-[#135bec] border-t-transparent rounded-full animate-spin"}),t.jsx("p",{className:"font-bold tracking-widest text-[10px] uppercase opacity-50",children:"Sincronizando con la red..."})]});const L=((f==null?void 0:f.credits_total)||0)-((f==null?void 0:f.credits_used)||0),C=f!=null&&f.credits_total?Math.round(f.credits_used/f.credits_total*100):0,G=(_,W,Y)=>{const ae=d===_;return t.jsxs("button",{onClick:()=>c(_),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-all text-sm font-bold border ${ae?"bg-[#135bec]/10 text-[#135bec] border-[#135bec]/30 shadow-[0_0_15px_rgba(19,91,236,0.1)]":"text-slate-400 border-transparent hover:text-white hover:bg-white/5"}`,children:[t.jsx(Y,{className:"size-4"}),W]},_)};return t.jsxs("div",{className:"space-y-8 animate-fade-in text-slate-100",children:[t.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-6 pb-6 border-b border-white/5",children:[t.jsxs(be.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},children:[t.jsxs("h1",{className:"text-3xl font-black tracking-tight text-white mb-1 flex items-center gap-3",children:[t.jsx("div",{className:"size-10 rounded-xl bg-gradient-to-br from-[#135bec] to-[#0a1f4d] flex items-center justify-center shadow-lg shadow-[#135bec]/20",children:t.jsx(We,{className:"text-white size-6"})}),"Panel de Partner ",t.jsxs("span",{className:"text-[#135bec] opacity-50 text-xl font-medium",children:["/ ",f==null?void 0:f.name]})]}),t.jsx("p",{className:"text-slate-400 text-sm",children:"Sistema de gestin de eventos y marca blanca corporativa."})]}),t.jsxs("div",{className:"flex items-center gap-2 bg-slate-900/50 p-1 rounded-xl border border-white/5",children:[G("overview","Vista General",We),G("events","Mis Eventos",Ae),G("wallet","Billetera",Xe),G("branding","Marca Blanca",Ge)]})]}),t.jsxs(Ie,{mode:"wait",children:[d==="overview"&&t.jsxs(be.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-8",children:[t.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"glass-card rounded-2xl p-6 flex flex-col justify-between group overflow-hidden relative border border-white/5 bg-gradient-to-br from-slate-900/80 to-slate-950/80 shadow-2xl",children:[t.jsx("div",{className:"absolute -right-4 -top-4 opacity-[0.03] group-hover:opacity-[0.1] transition-opacity duration-500",children:t.jsx(Xe,{className:"size-40"})}),t.jsxs("div",{className:"flex justify-between items-start mb-6 relative z-10",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("div",{className:"size-2 rounded-full bg-[#135bec] animate-pulse"}),t.jsx("p",{className:"text-slate-400 text-[10px] font-black uppercase tracking-[2px]",children:"Wallet Mayorista"})]}),t.jsx("h3",{className:"text-4xl font-black text-white",children:L.toLocaleString()}),t.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest mt-1",children:"Crditos Disponibles"})]}),t.jsx("div",{className:"p-3 bg-[#135bec]/10 border border-[#135bec]/20 rounded-xl text-[#135bec] shadow-inner",children:t.jsx(tt,{className:"w-6 h-6"})})]}),t.jsxs("div",{className:"space-y-3 relative z-10",children:[t.jsxs("div",{className:"flex justify-between text-[11px] font-bold",children:[t.jsx("span",{className:"text-slate-500 uppercase tracking-[1px]",children:"Consumo Global"}),t.jsxs("span",{className:"text-[#135bec]",children:[C,"%"]})]}),t.jsx("div",{className:"w-full bg-slate-800/50 h-2.5 rounded-full overflow-hidden p-0.5 border border-white/5",children:t.jsx(be.div,{initial:{width:0},animate:{width:`${C}%`},transition:{duration:1,ease:"easeOut"},className:"bg-gradient-to-r from-[#135bec] to-[#3b82f6] h-full rounded-full shadow-[0_0_15px_rgba(19,91,236,0.3)]"})}),t.jsxs("div",{className:"flex justify-between items-center text-[10px]",children:[t.jsxs("span",{className:"text-slate-500",children:["Total: ",(V=f==null?void 0:f.credits_total)==null?void 0:V.toLocaleString()]}),t.jsxs("span",{className:"text-slate-400 font-bold",children:["Usados: ",($=f==null?void 0:f.credits_used)==null?void 0:$.toLocaleString()]})]}),t.jsx("button",{onClick:()=>c("wallet"),className:"w-full py-2.5 bg-white/5 hover:bg-white/10 text-white text-[9px] font-black rounded-lg border border-white/5 transition-all uppercase tracking-[2px] mt-2 block text-center",children:"Ver Detalles de Billetera"})]})]}),t.jsxs("div",{className:"glass-card rounded-2xl p-6 flex flex-col justify-between group overflow-hidden relative border border-white/5 bg-gradient-to-br from-slate-900/80 to-slate-950/80",children:[t.jsx("div",{className:"absolute -right-4 -top-4 opacity-[0.03] group-hover:opacity-[0.1] transition-opacity duration-500",children:t.jsx(Ve,{className:"size-40"})}),t.jsxs("div",{className:"flex justify-between items-start mb-6 relative z-10",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-slate-400 text-[10px] font-black uppercase tracking-[2px] mb-1",children:"Instancias Activas"}),t.jsx("h3",{className:"text-4xl font-black text-white",children:x.filter(_=>_.is_active).length}),t.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest mt-1",children:"Eventos en curso"})]}),t.jsx("div",{className:"p-3 bg-emerald-500/10 border border-emerald-500/20 rounded-xl text-emerald-500",children:t.jsx(ze,{className:"w-6 h-6"})})]}),t.jsxs("button",{onClick:()=>c("events"),className:"w-full py-3 bg-emerald-500/10 hover:bg-emerald-500/20 text-emerald-500 text-[10px] font-black rounded-xl border border-emerald-500/20 transition-all uppercase tracking-[2px] flex items-center justify-center gap-2 group/btn",children:[t.jsx(Ae,{className:"size-4"}),"Gestionar Instancias"]})]}),t.jsxs("div",{className:"glass-card rounded-2xl p-6 flex flex-col justify-between group overflow-hidden relative border border-white/5 bg-gradient-to-br from-slate-900/80 to-slate-950/80",children:[t.jsx("div",{className:"absolute -right-4 -top-4 opacity-[0.03] group-hover:opacity-[0.1] transition-opacity duration-500",children:t.jsx(Ge,{className:"size-40"})}),t.jsxs("div",{className:"flex justify-between items-start mb-6 relative z-10",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-slate-400 text-[10px] font-black uppercase tracking-[2px] mb-1",children:"Identidad Visual"}),t.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[te.logo_url?t.jsx("img",{src:te.logo_url,className:"h-8 object-contain",alt:"Logo"}):t.jsx("div",{className:"size-8 rounded-lg bg-slate-800 flex items-center justify-center border border-white/5",children:t.jsx(Pe,{className:"size-4 text-slate-600"})}),t.jsx("div",{className:"size-6 rounded-full border border-white/20 shadow-lg",style:{backgroundColor:te.primary_color}})]})]}),t.jsx("div",{className:"p-3 bg-indigo-500/10 border border-indigo-500/20 rounded-xl text-indigo-500",children:t.jsx(Pe,{className:"w-6 h-6"})})]}),t.jsx("button",{onClick:()=>c("branding"),className:"w-full py-3 bg-slate-800 hover:bg-slate-700 text-slate-300 text-[10px] font-black rounded-xl border border-white/10 transition-all uppercase tracking-[2px]",children:"Editar Identidad Visual"})]})]}),t.jsxs("div",{className:"bg-slate-900/50 border border-white/5 rounded-[32px] p-8 glass-card",children:[t.jsxs("div",{className:"flex items-center justify-between mb-8",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-black text-white uppercase tracking-widest",children:"Actividad de Generacin"}),t.jsx("p",{className:"text-[10px] text-slate-500 uppercase font-bold mt-1",children:"Fotos creadas por da (ltimos 7 das)"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"size-2 rounded-full bg-[#135bec] animate-pulse"}),t.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Tiempo Real"})]})]}),t.jsx("div",{className:"h-48 flex items-end gap-2 px-2",children:Array.from({length:7}).map((_,W)=>{const Y=new Date;Y.setDate(Y.getDate()-(6-W));const ae=Y.toISOString().split("T")[0],ne=I.filter(we=>we.created_at.startsWith(ae)).length,pe=Array.from({length:7}).map((we,xe)=>{const ke=new Date;ke.setDate(ke.getDate()-(6-xe));const je=ke.toISOString().split("T")[0];return I.filter(Te=>Te.created_at.startsWith(je)).length}),le=Math.max(...pe,1),_e=ne/le*100;return t.jsxs("div",{className:"flex-1 flex flex-col items-center gap-3 group",children:[t.jsxs("div",{className:"w-full relative h-[140px] flex items-end",children:[t.jsx(be.div,{initial:{height:0},animate:{height:`${Math.max(_e,5)}%`},className:`w-full rounded-t-xl transition-all duration-500 hover:brightness-125 ${ne>0?"bg-gradient-to-t from-[#135bec] to-[#7f13ec]":"bg-white/5"}`}),ne>0&&t.jsxs("div",{className:"absolute -top-8 left-1/2 -translate-x-1/2 bg-white text-[#0f172a] text-[9px] font-black px-2 py-1 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-20",children:[ne," fotos"]})]}),t.jsx("span",{className:"text-[8px] font-black text-slate-600 uppercase",children:Y.toLocaleDateString("es-AR",{weekday:"short"})})]},W)})})]})]},"overview"),d==="events"&&t.jsxs(be.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between px-2",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-black text-white uppercase tracking-tighter",children:"Mis Eventos"}),t.jsx("p",{className:"text-slate-500 text-xs mt-1",children:"Gestiona las instancias activas y el consumo de crditos."})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"relative group",children:[t.jsx(qe,{className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-slate-500 group-focus-within:text-[#135bec] transition-colors"}),t.jsx("input",{type:"text",placeholder:"Buscar por nombre o slug...",value:s,onChange:_=>h(_.target.value),className:"bg-slate-900 border border-slate-800 rounded-xl pl-9 pr-4 py-2.5 text-xs text-white focus:ring-1 focus:ring-[#135bec] focus:border-[#135bec] w-64 transition-all outline-none"})]}),t.jsxs("button",{onClick:()=>m(!0),className:"px-6 py-2.5 bg-[#135bec] hover:bg-[#135bec]/90 text-white text-[10px] font-black rounded-xl shadow-lg shadow-[#135bec]/20 transition-all uppercase tracking-[2px] flex items-center gap-2",children:[t.jsx(ot,{className:"size-4"}),"Nuevo Evento"]})]})]}),t.jsx("div",{className:"glass-card rounded-2xl overflow-hidden border border-white/5 bg-slate-900/50 backdrop-blur-xl",children:t.jsxs("table",{className:"w-full text-left border-collapse",children:[t.jsx("thead",{className:"bg-white/[0.03] border-b border-white/5",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Identificacin"}),t.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Consumo de Crditos"}),t.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Estado"}),t.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-slate-500 uppercase tracking-widest text-right",children:"Panel de Control"})]})}),t.jsxs("tbody",{className:"divide-y divide-white/5",children:[P.map(_=>{const W=_.credits_allocated?Math.min(100,Math.round(_.credits_used/_.credits_allocated*100)):0;return t.jsxs("tr",{className:"hover:bg-white/[0.02] transition-colors group",children:[t.jsx("td",{className:"px-6 py-5",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"size-12 rounded-xl bg-gradient-to-br from-[#135bec]/20 to-[#0a1f4d]/20 border border-[#135bec]/20 flex items-center justify-center text-[#135bec] font-black text-sm group-hover:scale-110 transition-transform",children:((_==null?void 0:_.event_name)||"E").substring(0,2).toUpperCase()}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-bold text-white group-hover:text-[#135bec] transition-colors",children:_.event_name}),t.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[t.jsx(pt,{className:"size-3 text-slate-600"}),t.jsxs("p",{className:"text-[10px] text-slate-500 font-mono",children:["/",_.event_slug]})]})]})]})}),t.jsx("td",{className:"px-6 py-5",children:t.jsxs("div",{className:"w-48",children:[t.jsxs("div",{className:"flex justify-between text-[10px] mb-1.5 font-bold",children:[t.jsxs("span",{className:"text-slate-400",children:[_.credits_used.toLocaleString()," / ",_.credits_allocated.toLocaleString()]}),t.jsxs("span",{className:`${W>90?"text-rose-500":"text-emerald-500"}`,children:[W,"%"]})]}),t.jsx("div",{className:"w-full h-1.5 bg-slate-800 rounded-full overflow-hidden p-[1px]",children:t.jsx(be.div,{initial:{width:0},animate:{width:`${W}%`},transition:{duration:1,ease:"easeOut"},className:`h-full ${W>90?"bg-rose-500":"bg-[#135bec]"} rounded-full shadow-[0_0_8px_rgba(19,91,236,0.5)]`})})]})}),t.jsx("td",{className:"px-6 py-5",children:t.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-[10px] font-black uppercase tracking-wider ${_.is_active?"bg-emerald-500/10 text-emerald-500 border border-emerald-500/20":"bg-rose-500/10 text-rose-500 border border-rose-500/20"}`,children:[t.jsx("span",{className:`size-2 rounded-full ${_.is_active?"bg-emerald-500 animate-pulse":"bg-rose-500"}`}),_.is_active?"En Lnea":"Pausado"]})}),t.jsx("td",{className:"px-6 py-5 text-right",children:t.jsxs("div",{className:"flex items-center justify-end gap-3",children:[t.jsx("button",{onClick:()=>T(_),className:"p-2.5 bg-emerald-500/10 hover:bg-emerald-500 border border-emerald-500/20 rounded-xl text-emerald-500 hover:text-white transition-all group/action",title:"Cargar Crditos",children:t.jsx(Ue,{className:"w-4 h-4 group-hover/action:scale-110 transition-transform"})}),t.jsx("button",{onClick:()=>{se(_),ve(_.id),c("moderation")},className:"p-2.5 bg-indigo-500/10 hover:bg-indigo-500 border border-indigo-500/20 rounded-xl text-indigo-500 hover:text-white transition-all group/action",title:"Moderacin de Galera",children:t.jsx(st,{className:"w-4 h-4 group-hover/action:scale-110 transition-transform"})}),t.jsx("button",{onClick:()=>z(_),className:"p-2.5 bg-slate-800/50 hover:bg-slate-800 border border-white/5 rounded-xl text-slate-400 hover:text-white transition-all group/action",title:"Editar Evento",children:t.jsx(Fe,{className:"w-4 h-4 group-hover/action:rotate-12 transition-transform"})}),t.jsx("button",{onClick:()=>window.open(`https://photobooth.creativa-labs.com/?event=${_.event_slug}`,"_blank"),className:"p-2.5 bg-slate-800/50 hover:bg-slate-800 border border-white/5 rounded-xl text-slate-400 hover:text-white transition-all group/action",title:"Ver Kiosco (Pblico)",children:t.jsx(He,{className:"w-4 h-4 group-hover/action:scale-110 transition-transform"})}),j&&_.client_email&&t.jsx("button",{onClick:()=>j(_.client_email),className:"p-2.5 bg-[#135bec]/10 hover:bg-[#135bec] border border-[#135bec]/20 rounded-xl text-[#135bec] hover:text-white transition-all group/action",title:"Gestionar Branding como Cliente",children:t.jsx(at,{className:"w-4 h-4 group-hover/action:scale-110 transition-transform"})}),t.jsx("button",{onClick:()=>b({id:_.id,name:_.event_name}),className:"p-2.5 bg-rose-500/10 hover:bg-rose-500 border border-rose-500/20 rounded-xl text-rose-500 hover:text-white transition-all group/action",title:"Eliminar Instancia",children:t.jsx(Ye,{className:"w-4 h-4 group-hover/action:scale-110 transition-transform"})})]})})]},_.id)}),P.length===0&&t.jsx("tr",{children:t.jsx("td",{colSpan:4,className:"p-20 text-center",children:t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("div",{className:"size-16 rounded-2xl bg-slate-800/50 flex items-center justify-center mb-4",children:t.jsx(Ae,{className:"size-8 text-slate-600 opacity-20"})}),t.jsx("p",{className:"text-slate-400 text-sm font-bold uppercase tracking-widest",children:"No hay eventos para mostrar"}),t.jsx("p",{className:"text-slate-600 text-[10px] mt-1",children:"Crea tu primera instancia para comenzar."})]})})})]})]})})]},"events"),d==="moderation"&&t.jsxs(be.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.05},className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("button",{onClick:()=>c("events"),className:"p-2.5 bg-slate-800 hover:bg-slate-700 rounded-xl text-white transition-all border border-white/5",children:t.jsx($e,{className:"w-5 h-5 rotate-180"})}),t.jsxs("div",{children:[t.jsxs("h2",{className:"text-2xl font-black text-white uppercase tracking-tighter",children:["Galera: ",R==null?void 0:R.event_name]}),t.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.jsx("span",{className:`size-2 rounded-full ${k.length>0?"bg-emerald-500 animate-pulse":"bg-slate-700"}`}),t.jsxs("p",{className:"text-slate-500 text-[10px] font-black uppercase tracking-widest",children:[k.length," de ",M.length," Fotos"]})]})]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3 bg-slate-900/80 p-1.5 rounded-2xl border border-white/5 shadow-inner",children:[t.jsxs("div",{className:"relative",children:[t.jsx(qe,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 size-3.5 text-slate-600"}),t.jsx("input",{type:"text",placeholder:"Buscar email o ID...",className:"bg-slate-950/50 border border-white/5 rounded-xl py-2.5 pl-10 pr-4 text-[10px] text-white focus:border-[#135bec] outline-none transition-all w-52 placeholder:text-slate-700 font-bold uppercase tracking-widest",value:E,onChange:_=>S(_.target.value)})]}),t.jsxs("div",{className:"relative",children:[t.jsx(Ae,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 size-3.5 text-slate-600"}),t.jsx("input",{type:"date",className:"bg-slate-950/50 border border-white/5 rounded-xl py-2.5 pl-10 pr-4 text-[10px] text-white focus:border-[#135bec] outline-none transition-all w-40 font-bold",value:X,onChange:_=>K(_.target.value)})]}),(E||X)&&t.jsx("button",{onClick:()=>{S(""),K("")},className:"p-2.5 hover:bg-white/5 text-slate-500 hover:text-white transition-all rounded-xl",children:t.jsx(Be,{className:"size-4"})})]}),t.jsx("div",{className:"w-px h-8 bg-white/5 mx-1"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("button",{onClick:()=>{const _=k.map(ne=>ne.image_url).join(`
`);if(_.length===0)return U("No hay links para exportar","error");const W=new Blob([_],{type:"text/plain"}),Y=window.URL.createObjectURL(W),ae=document.createElement("a");ae.href=Y,ae.download=`links-${R==null?void 0:R.event_slug}-filtrados.txt`,ae.click(),window.URL.revokeObjectURL(Y),U("Links filtrados exportados")},className:"px-6 py-2.5 bg-slate-800 hover:bg-slate-700 text-white text-[10px] font-black rounded-xl border border-white/5 transition-all uppercase tracking-[2px] flex items-center gap-2",children:[t.jsx(nt,{className:"size-4"}),"Exportar Links"]}),t.jsxs("button",{onClick:async()=>{if(k.length===0)return U("No hay fotos para descargar","error");try{U("Preparando descarga ZIP (Filtrada)...","info");const _=new jt,W=_.folder(`${R==null?void 0:R.event_slug}-photos-filtered`);if(!W)throw new Error("No se pudo crear la carpeta en el ZIP");const Y=k.map(async(le,_e)=>{var we;try{const ke=await(await fetch(le.image_url)).blob(),je=((we=le.image_url.split(".").pop())==null?void 0:we.split("?")[0])||"jpg";W.file(`photo-${_e+1}.${je}`,ke)}catch(xe){console.error("Error al descargar foto para el ZIP:",xe)}});await Promise.all(Y);const ae=await _.generateAsync({type:"blob"}),ne=window.URL.createObjectURL(ae),pe=document.createElement("a");pe.href=ne,pe.download=`galeria-${R==null?void 0:R.event_slug}.zip`,pe.click(),window.URL.revokeObjectURL(ne),U("Galera completa descargada")}catch(_){console.error("Error al generar ZIP:",_),U("Error al generar el archivo ZIP","error")}},className:"px-6 py-2.5 bg-[#135bec] hover:bg-[#135bec]/90 text-white text-[10px] font-black rounded-xl shadow-lg border border-white/10 transition-all uppercase tracking-[2px] flex items-center gap-2",children:[t.jsx(Ve,{className:"size-4"}),"Descargar Todo (ZIP)"]})]})]})]}),q?t.jsxs("div",{className:"h-96 flex flex-col items-center justify-center gap-4",children:[t.jsx("div",{className:"size-12 border-4 border-[#135bec]/30 border-t-[#135bec] rounded-full animate-spin"}),t.jsx("p",{className:"text-slate-500 text-[10px] font-black uppercase tracking-widest",children:"Sincronizando Galera..."})]}):t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:[k.map(_=>{var W;return t.jsxs("div",{className:"group relative aspect-[3/4] rounded-2xl overflow-hidden border border-white/5 bg-slate-900 shadow-xl",children:[t.jsx("img",{src:_.image_url,alt:"Generation",className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"}),t.jsxs("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col justify-end p-4",children:[t.jsx("p",{className:"text-[8px] font-mono text-white/50 mb-1 truncate",children:_.id}),t.jsx("p",{className:"text-[10px] font-black text-white mb-4 truncate uppercase tracking-widest",children:((W=_.profiles)==null?void 0:W.email)||"Annimo"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>ge(_.id),className:"p-2.5 bg-rose-500/20 hover:bg-rose-500 border border-rose-500/30 rounded-xl text-rose-500 hover:text-white transition-all group/del",title:"Eliminar de la galera",children:t.jsx(Ye,{className:"size-4 group-hover/del:scale-110 transition-transform"})}),t.jsxs("button",{onClick:()=>window.open(_.image_url,"_blank"),className:"flex-1 py-2 bg-white/10 backdrop-blur-md border border-white/20 rounded-xl text-white text-[9px] font-black uppercase tracking-widest hover:bg-white/20 transition-all flex items-center justify-center gap-2",children:[t.jsx(He,{className:"size-3"}),"Ver Original"]})]})]})]},_.id)}),k.length===0&&t.jsxs("div",{className:"col-span-full h-64 flex flex-col items-center justify-center bg-slate-900/50 rounded-[32px] border border-dashed border-white/5",children:[t.jsx(Le,{className:"size-8 text-slate-800 mb-4"}),t.jsx("p",{className:"text-slate-500 text-xs font-black uppercase tracking-widest",children:"No hay fotos en este evento"})]})]})]},"moderation"),d==="wallet"&&t.jsxs(be.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.05},className:"space-y-8",children:[t.jsxs("section",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[t.jsxs("div",{className:"lg:col-span-2 glass-card rounded-3xl p-10 bg-gradient-to-br from-[#135bec] to-[#0a1f4d] border-none shadow-2xl shadow-[#135bec]/20 relative overflow-hidden",children:[t.jsx("div",{className:"absolute top-0 right-0 p-10 opacity-10",children:t.jsx(ct,{className:"size-64"})}),t.jsxs("div",{className:"relative z-10 flex flex-col h-full justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-white/60 text-[11px] font-black uppercase tracking-[3px] mb-2",children:"Crditos Totales Disponibles"}),t.jsxs("h2",{className:"text-7xl font-black text-white tracking-tighter",children:[L.toLocaleString(),t.jsx("span",{className:"text-2xl text-white/40 ml-4 font-medium uppercase tracking-widest",children:"unidades"})]})]}),t.jsxs("div",{className:"mt-12 flex flex-wrap gap-8 items-end",children:[t.jsxs("div",{className:"space-y-1",children:[t.jsx("p",{className:"text-white/40 text-[10px] font-bold uppercase",children:"Consumo Total"}),t.jsxs("div",{className:"flex items-center gap-2 text-white",children:[t.jsx(_t,{className:"size-5 text-emerald-400"}),t.jsx("span",{className:"text-2xl font-black",children:((Q=f==null?void 0:f.credits_used)==null?void 0:Q.toLocaleString())||0})]})]}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("p",{className:"text-white/40 text-[10px] font-bold uppercase",children:"Eventos Activos"}),t.jsxs("div",{className:"flex items-center gap-2 text-white/80",children:[t.jsx(ze,{className:"size-5 text-yellow-400"}),t.jsx("span",{className:"text-2xl font-black",children:x.filter(_=>_.is_active).length})]})]}),t.jsx("button",{className:"ml-auto px-8 py-4 bg-white text-[#135bec] font-black rounded-2xl hover:scale-105 transition-all text-xs uppercase tracking-[2px] shadow-xl",children:"Recargar Crditos"})]})]})]}),t.jsxs("div",{className:"glass-card rounded-3xl p-8 border border-white/5 bg-slate-900/50 backdrop-blur-xl flex flex-col justify-between",children:[t.jsxs("div",{children:[t.jsxs("h3",{className:"text-lg font-black text-white uppercase tracking-tighter mb-6 flex items-center gap-2",children:[t.jsx(dt,{className:"size-5 text-[#135bec]"}),"ltimas Recargas"]}),t.jsx("div",{className:"space-y-6 max-h-[400px] overflow-y-auto custom-scrollbar pr-2",children:i.length>0?i.map((_,W)=>t.jsxs("div",{className:"flex justify-between items-center bg-white/[0.02] p-4 rounded-2xl border border-white/5 group hover:border-[#135bec]/30 transition-all",children:[t.jsxs("div",{children:[t.jsxs("p",{className:"text-xs font-bold text-white",children:["+",_.amount.toLocaleString()," Crditos"]}),t.jsx("p",{className:"text-[10px] text-slate-500 mt-1",children:new Date(_.created_at).toLocaleDateString()})]}),t.jsx("span",{className:`text-[9px] font-black uppercase px-2 py-1 rounded-lg ${_.type==="top-up"?"text-emerald-500 bg-emerald-500/10":"text-blue-500 bg-blue-500/10"}`,children:_.type==="top-up"?"Carga":"Ajuste"})]},_.id)):t.jsx("div",{className:"text-center py-10 opacity-40",children:t.jsx("p",{className:"text-[10px] font-bold uppercase tracking-widest",children:"Sin movimientos"})})})]}),t.jsxs("p",{className:"text-[10px] text-slate-600 text-center mt-6",children:[t.jsx(Ke,{className:"size-3 inline mr-1"}),"Los crditos no poseen fecha de vencimiento."]})]})]}),t.jsxs("section",{className:"glass-card rounded-2xl p-8 border border-white/5 bg-slate-900/50 backdrop-blur-xl",children:[t.jsx("h3",{className:"text-lg font-black text-white uppercase tracking-tighter mb-8 bg-white/5 -mx-8 -mt-8 p-8 border-b border-white/5",children:"Consumo por Evento"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[x.map(_=>t.jsxs("div",{className:"p-6 rounded-2xl bg-white/[0.03] border border-white/5 hover:border-[#135bec]/30 transition-all group relative overflow-hidden",children:[t.jsx("div",{className:"absolute -right-4 -top-4 size-20 bg-[#135bec]/5 rounded-full blur-2xl group-hover:bg-[#135bec]/10 transition-all"}),t.jsxs("div",{className:"relative z-10",children:[t.jsx("p",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest mb-1 truncate pr-4",children:_.event_name}),t.jsxs("div",{className:"flex items-end justify-between",children:[t.jsx("h4",{className:"text-2xl font-black text-white",children:_.credits_used||0}),t.jsx("p",{className:"text-[10px] text-slate-600 font-bold",children:"utilizados"})]}),t.jsx("div",{className:"mt-4 w-full bg-slate-800 h-1 rounded-full overflow-hidden",children:t.jsx("div",{className:"bg-[#135bec] h-full",style:{width:`${Math.min(100,(_.credits_used||0)/(_.credits_allocated||1)*100)}%`}})}),t.jsxs("div",{className:"flex justify-between mt-2 text-[8px] font-bold uppercase tracking-widest text-slate-700",children:[t.jsxs("span",{children:[Math.round((_.credits_used||0)/(_.credits_allocated||1)*100),"%"]}),t.jsxs("span",{children:["de ",_.credits_allocated]})]})]})]},_.id)),x.length===0&&t.jsx("div",{className:"col-span-full py-10 text-center opacity-30",children:t.jsx("p",{className:"text-xs font-bold uppercase tracking-[2px]",children:"No hay datos de consumo disponibles"})})]})]})]},"wallet"),d==="branding"&&t.jsxs(be.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"grid grid-cols-1 xl:grid-cols-12 gap-8",children:[t.jsx("div",{className:"xl:col-span-8 space-y-8",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[t.jsxs("section",{className:"glass-card rounded-[32px] p-8 border border-white/5 bg-slate-900/50 backdrop-blur-xl shadow-2xl h-fit",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[t.jsx("div",{className:"p-3 bg-indigo-500/10 border border-indigo-500/20 rounded-xl text-indigo-500",children:t.jsx(Pe,{className:"w-6 h-6"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-black text-white uppercase tracking-tighter",children:"Identidad Visual"}),t.jsx("p",{className:"text-slate-500 text-xs",children:"Personaliza tu panel de control."})]})]}),t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[2px] block mb-4",children:"Logo Corporativo"}),t.jsxs("div",{className:"w-full border-2 border-dashed border-slate-800 rounded-2xl p-6 flex flex-col items-center justify-center bg-slate-950/50 hover:bg-slate-950 transition-all cursor-pointer group hover:border-[#135bec]/50 shadow-inner",onClick:()=>{var _;return(_=document.getElementById("brandingLogoInput"))==null?void 0:_.click()},children:[t.jsx("input",{type:"file",id:"brandingLogoInput",className:"hidden",accept:"image/*",onChange:e}),te.logo_url?t.jsxs("div",{className:"relative group/logo",children:[t.jsx("img",{src:te.logo_url,className:"h-12 object-contain mb-2 group-hover:opacity-50 transition-opacity",alt:"Logo"}),t.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover/logo:opacity-100 transition-opacity",children:t.jsx(Fe,{className:"size-5 text-white"})})]}):t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx(lt,{className:"w-8 h-8 text-slate-700 group-hover:text-[#135bec] mb-3 transition-colors"}),t.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest text-center",children:"Subir Identidad"})]})]})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[2px] block mb-4",children:"Color de Acento"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"size-12 rounded-xl border-2 border-white/10 shadow-2xl cursor-pointer hover:scale-105 transition-all",style:{backgroundColor:te.primary_color},onClick:()=>{var _;return(_=document.getElementById("brandingColorPicker"))==null?void 0:_.click()}}),t.jsx("input",{id:"brandingColorPicker",type:"color",className:"sr-only",value:te.primary_color,onChange:_=>ue({...te,primary_color:_.target.value})}),t.jsxs("div",{className:"flex-1 bg-slate-950 border border-slate-800 rounded-xl py-3 px-4 text-xs text-white font-mono flex items-center justify-between",children:[t.jsx("span",{children:te.primary_color.toUpperCase()}),t.jsx(Fe,{className:"size-3 text-slate-600"})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[2px] block mb-4",children:"Radio de Bordes"}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{className:"w-full bg-slate-950 border border-slate-800 rounded-xl py-3 px-4 text-xs text-white focus:ring-1 focus:ring-[#135bec] outline-none appearance-none cursor-pointer pr-10",value:te.radius,onChange:_=>ue({...te,radius:_.target.value}),children:[t.jsx("option",{value:"4px",children:"4px (Recto)"}),t.jsx("option",{value:"8px",children:"8px (Suave)"}),t.jsx("option",{value:"12px",children:"12px (Premium)"}),t.jsx("option",{value:"20px",children:"20px (Redondeado)"})]}),t.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none",children:t.jsx($e,{className:"size-3 text-slate-600"})})]})]})]}),t.jsxs("button",{onClick:fe,className:"w-full py-4 bg-white text-slate-900 text-[10px] font-black rounded-2xl transition-all shadow-xl hover:shadow-2xl active:scale-[0.98] uppercase tracking-[3px] flex items-center justify-center gap-2 group",children:[t.jsx(Re,{className:"size-4 group-hover:scale-110 transition-transform"}),"Sincronizar Panel"]})]})]}),t.jsxs("div",{className:"glass-card rounded-[32px] p-8 border border-white/5 bg-slate-900/50 backdrop-blur-xl shadow-2xl relative overflow-hidden h-fit",children:[t.jsx("div",{className:"flex items-center justify-between mb-8 relative z-10",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-3 bg-[#135bec]/10 border border-[#135bec]/20 rounded-xl text-[#135bec]",children:t.jsx(ze,{className:"w-6 h-6"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-black text-white uppercase tracking-tighter",children:"Estilos IA"}),t.jsx("p",{className:"text-slate-500 text-xs",children:"Packs activos para clientes."})]})]})}),t.jsx("div",{className:"grid grid-cols-2 gap-4 relative z-10",children:it.map(_=>{const W=Oe.find(Y=>Y.subCategory===_)||Oe[0];return t.jsxs("label",{className:"relative block cursor-pointer group",children:[t.jsx("input",{type:"checkbox",checked:te.style_presets.includes(_),onChange:()=>o(_),className:"peer sr-only"}),t.jsxs("div",{className:`aspect-square rounded-2xl overflow-hidden relative border-2 transition-all duration-300 ${te.style_presets.includes(_)?"border-[#135bec] scale-[1.02] shadow-xl shadow-[#135bec]/20":"border-white/5 opacity-40 hover:border-white/20 hover:opacity-80"}`,children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 to-transparent z-10"}),t.jsx("img",{alt:_,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700",src:W.url}),t.jsx("div",{className:"absolute bottom-2 left-3 z-20",children:t.jsx("p",{className:"text-[8px] font-black uppercase text-white tracking-[1px] leading-tight",children:_})}),te.style_presets.includes(_)&&t.jsx("div",{className:"absolute top-2 right-2 z-20",children:t.jsx("div",{className:"bg-[#135bec] rounded-full p-1 shadow-xl border border-white/20",children:t.jsx(Re,{className:"w-2.5 h-2.5 text-white"})})})]})]},_)})})]})]})}),t.jsx("div",{className:"xl:col-span-4 sticky top-8",children:t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsxs("div",{className:"mb-6 flex items-center gap-3",children:[t.jsx("div",{className:"size-1.5 rounded-full bg-emerald-500 animate-pulse"}),t.jsx("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[4px]",children:"Live Preview (Kiosk)"})]}),t.jsxs("div",{className:"relative w-[280px] h-[580px] bg-slate-800 rounded-[50px] p-3 border-[6px] border-slate-700 shadow-2xl overflow-hidden shadow-black/60",children:[t.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-32 h-6 bg-slate-700 rounded-b-2xl z-50"}),t.jsxs("div",{className:"w-full h-full bg-[#071121] rounded-[40px] overflow-hidden flex flex-col relative",children:[t.jsx("div",{className:"absolute inset-0 opacity-20",style:{background:`radial-gradient(circle at 50% 50%, ${te.primary_color}33 0%, transparent 70%)`}}),t.jsxs("div",{className:"p-6 flex flex-col items-center justify-center pt-10",children:[te.logo_url?t.jsx("img",{src:te.logo_url,className:"h-10 object-contain mb-4",alt:"Mockup Logo"}):t.jsx("div",{className:"h-10 w-32 bg-white/5 rounded-xl border border-white/10 flex items-center justify-center text-[8px] text-slate-600 font-black uppercase tracking-[2px]",children:"Your Logo Here"}),t.jsx("div",{className:"w-12 h-0.5",style:{background:`linear-gradient(90deg, transparent, ${te.primary_color}, transparent)`}})]}),t.jsxs("div",{className:"px-6 py-2 text-center",children:[t.jsx("h3",{className:"text-[14px] font-black text-white uppercase tracking-tighter italic",children:"Descubre tu Identidad"}),t.jsx("p",{className:"text-[8px] text-slate-500 uppercase font-black tracking-widest mt-1 opacity-60",children:"Selecciona un estandar de estilo"})]}),t.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4 no-scrollbar",children:t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[te.style_presets.slice(0,4).map((_,W)=>{const Y=Oe.find(ae=>ae.subCategory===_)||Oe[0];return t.jsxs("div",{className:"aspect-[3/4] overflow-hidden relative border shadow-lg",style:{borderRadius:te.radius,borderColor:W===0?te.primary_color:"rgba(255,255,255,0.05)"},children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent z-10"}),t.jsx("img",{src:Y.url,className:"w-full h-full object-cover"}),t.jsx("div",{className:"absolute bottom-2 left-2 z-20",children:t.jsx("p",{className:"text-[7px] font-black text-white uppercase",children:_})})]},W)}),te.style_presets.length<4&&Array.from({length:4-te.style_presets.length}).map((_,W)=>t.jsx("div",{className:"aspect-[3/4] bg-white/5 border border-dashed border-white/10 flex items-center justify-center text-slate-800",style:{borderRadius:te.radius},children:t.jsx("span",{className:"material-symbols-outlined !text-sm",children:"add"})},W))]})}),t.jsx("div",{className:"p-6",children:t.jsx("div",{className:"w-full py-3 text-center text-white text-[9px] font-black uppercase tracking-[2px] shadow-lg shadow-black/20",style:{backgroundColor:te.primary_color,borderRadius:te.radius},children:"Comenzar Experiencia"})})]})]})]})})]},"branding")]}),t.jsxs(Ie,{children:[n&&t.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-xl",children:t.jsxs(be.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"w-full max-w-md bg-slate-900 border border-white/10 rounded-2xl shadow-2xl overflow-hidden",children:[t.jsxs("div",{className:"flex items-center justify-between p-7 border-b border-white/5",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-black text-white uppercase tracking-tighter",children:"Crear Evento"}),t.jsx("p",{className:"text-xs text-slate-500 mt-1 uppercase tracking-widest font-bold",children:"Nueva instancia"})]}),t.jsx("button",{onClick:()=>m(!1),className:"size-10 flex items-center justify-center rounded-xl bg-slate-800 text-slate-500 hover:text-white transition-all",children:t.jsx(Be,{className:"w-5 h-5"})})]}),t.jsxs("form",{onSubmit:D,className:"p-7 space-y-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 mb-2 block",children:"Nombre del Evento"}),t.jsx("input",{required:!0,type:"text",placeholder:"Nombre comercial",className:"w-full bg-[#0a0a0b] border border-white/10 rounded-xl px-5 py-4 text-white focus:border-[#135bec] outline-none transition-all placeholder:text-slate-800",value:J.name,onChange:_=>oe({...J,name:_.target.value})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 mb-2 block",children:"Email del Cliente (Asignacin)"}),t.jsxs("div",{className:"relative",children:[t.jsx(rt,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-700 size-4"}),t.jsx("input",{required:!0,type:"email",placeholder:"cliente@ejemplo.com",className:"w-full bg-[#0a0a0b] border border-white/10 rounded-xl pl-11 pr-5 py-4 text-white focus:border-[#135bec] outline-none transition-all placeholder:text-slate-800 text-xs",value:J.client_email,onChange:_=>oe({...J,client_email:_.target.value.toLowerCase()})})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 mb-2 block",children:"Personalizado"}),t.jsx("input",{type:"text",placeholder:"slug",className:"w-full bg-[#0a0a0b] border border-white/10 rounded-xl px-4 py-3 text-white focus:border-[#135bec] outline-none transition-all text-xs font-mono",value:J.slug,onChange:_=>oe({...J,slug:_.target.value.toLowerCase().replace(/\s+/g,"-")})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 mb-2 block",children:"Crditos"}),t.jsxs("div",{className:"relative",children:[t.jsx(Ue,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-[#135bec] size-4"}),t.jsx("input",{required:!0,type:"number",className:"w-full bg-[#0a0a0b] border border-white/10 rounded-xl pl-11 pr-5 py-3 text-white focus:border-[#135bec] outline-none transition-all text-xs font-bold",value:J.credits,onChange:_=>oe({...J,credits:Number(_.target.value)})})]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 mb-2 block",children:"Inicio"}),t.jsx("input",{required:!0,type:"date",className:"w-full bg-[#0a0a0b] border border-white/10 rounded-xl px-4 py-3 text-white focus:border-[#135bec] outline-none transition-all text-xs",value:J.start_date,onChange:_=>oe({...J,start_date:_.target.value})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 mb-2 block",children:"Fin"}),t.jsx("input",{required:!0,type:"date",className:"w-full bg-[#0a0a0b] border border-white/10 rounded-xl px-4 py-3 text-white focus:border-[#135bec] outline-none transition-all text-xs",value:J.end_date,onChange:_=>oe({...J,end_date:_.target.value})})]})]}),t.jsxs("div",{className:"p-4 bg-[#135bec]/5 border border-[#135bec]/10 rounded-xl flex items-center gap-4",children:[t.jsx("div",{className:"size-8 rounded-lg bg-[#135bec]/10 flex items-center justify-center text-[#135bec]",children:t.jsx(Re,{className:"size-4"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-[9px] font-bold text-slate-500 uppercase tracking-widest leading-none",children:"Verificacin de Balance"}),t.jsxs("p",{className:"text-[11px] text-slate-400 mt-1 leading-tight",children:["Se deducirn ",J.credits," crditos de tu balance mayorista (",L," disponibles)."]})]})]})]}),t.jsx("button",{disabled:a,type:"submit",className:"w-full py-5 bg-[#135bec] hover:bg-[#135bec]/90 text-white text-[11px] font-black rounded-xl transition-all shadow-xl shadow-[#135bec]/20 uppercase tracking-widest disabled:opacity-50 disabled:cursor-not-allowed group/btn",children:a?"Creando...":t.jsxs("span",{className:"flex items-center justify-center gap-2",children:["Activar Instancia de Evento",t.jsx(ze,{className:"size-4 group-hover:scale-110 transition-transform"})]})})]})]})}),g&&t.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-xl",children:t.jsxs(be.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"w-full max-w-md bg-slate-900 border border-white/10 rounded-2xl shadow-2xl overflow-hidden",children:[t.jsxs("div",{className:"flex items-center justify-between p-7 border-b border-white/5",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-black text-white uppercase tracking-tighter",children:"Editar Evento"}),t.jsx("p",{className:"text-xs text-slate-500 mt-1 uppercase tracking-widest font-bold",children:"Modificar parmetros"})]}),t.jsx("button",{onClick:()=>z(null),className:"size-10 flex items-center justify-center rounded-xl bg-slate-800 text-slate-500 hover:text-white transition-all",children:t.jsx(Be,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"p-7 space-y-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 mb-2 block",children:"Nombre del Evento"}),t.jsx("input",{required:!0,type:"text",className:"w-full bg-[#0a0a0b] border border-white/10 rounded-xl px-5 py-4 text-white focus:border-[#135bec] outline-none transition-all placeholder:text-slate-800",value:g.event_name,onChange:_=>z({...g,event_name:_.target.value})})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 mb-2 block",children:"Inicio"}),t.jsx("input",{required:!0,type:"date",className:"w-full bg-[#0a0a0b] border border-white/10 rounded-xl px-4 py-3 text-white focus:border-[#135bec] outline-none transition-all text-xs",value:new Date(g.start_date).toISOString().split("T")[0],onChange:_=>z({...g,start_date:_.target.value})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 mb-2 block",children:"Fin"}),t.jsx("input",{required:!0,type:"date",className:"w-full bg-[#0a0a0b] border border-white/10 rounded-xl px-4 py-3 text-white focus:border-[#135bec] outline-none transition-all text-xs",value:new Date(g.end_date).toISOString().split("T")[0],onChange:_=>z({...g,end_date:_.target.value})})]})]}),t.jsxs("div",{className:"flex items-center gap-3 p-4 bg-white/5 rounded-2xl border border-white/5",children:[t.jsx("div",{className:`size-10 rounded-xl flex items-center justify-center ${g.is_active?"bg-emerald-500/10 text-emerald-500":"bg-rose-500/10 text-rose-500"}`,children:t.jsx(ze,{className:"size-5"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-[10px] font-black uppercase text-white tracking-widest leading-none",children:"Estado"}),t.jsx("p",{className:"text-[9px] text-slate-500 uppercase mt-1 leading-none",children:g.is_active?"En Lnea":"Inactivo"})]}),t.jsx("button",{onClick:()=>z({...g,is_active:!g.is_active}),className:`px-4 py-2 rounded-xl text-[10px] font-black uppercase transition-all ${g.is_active?"bg-rose-500/10 text-rose-500 hover:bg-rose-500 hover:text-white":"bg-emerald-500/10 text-emerald-500 hover:bg-emerald-500 hover:text-white"}`,children:g.is_active?"Pausar":"Activar"})]})]}),t.jsx("button",{disabled:a,onClick:async()=>{try{l(!0);const{error:_}=await he.from("events").update({event_name:g.event_name,start_date:new Date(g.start_date).toISOString(),end_date:new Date(g.end_date).toISOString(),is_active:g.is_active}).eq("id",g.id);if(_)throw _;U("Evento actualizado correctamente"),z(null),ce()}catch(_){U("Error al actualizar: "+_.message,"error")}finally{l(!1)}},className:"w-full py-5 bg-[#135bec] hover:bg-[#135bec]/90 text-white text-[11px] font-black rounded-xl transition-all shadow-xl shadow-[#135bec]/20 uppercase tracking-[3px] disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Sincronizando...":"Guardar Cambios"})]})]})}),N&&t.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-xl",children:t.jsxs(be.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"w-full max-w-sm bg-slate-900 border border-white/10 rounded-2xl shadow-2xl overflow-hidden",children:[t.jsxs("div",{className:"p-7 border-b border-white/5 flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-black text-white uppercase tracking-tighter",children:"Recargar Evento"}),t.jsx("p",{className:"text-[10px] text-slate-500 uppercase font-bold mt-1",children:N.event_name})]}),t.jsx("button",{onClick:()=>T(null),className:"size-8 flex items-center justify-center rounded-lg bg-slate-800 text-slate-500 hover:text-white transition-all",children:t.jsx(Be,{className:"w-4 h-4"})})]}),t.jsxs("div",{className:"p-7 space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 mb-2 block",children:"Cantidad de Crditos"}),t.jsxs("div",{className:"relative",children:[t.jsx(Ue,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-emerald-500 size-4"}),t.jsx("input",{type:"number",className:"w-full bg-[#0a0a0b] border border-white/10 rounded-xl pl-11 pr-5 py-4 text-white focus:border-emerald-500 outline-none transition-all font-bold text-center text-xl",value:B,onChange:_=>Z(Number(_.target.value))})]}),t.jsxs("p",{className:"text-[9px] text-slate-500 mt-3 text-center uppercase tracking-widest",children:["Disponibles: ",t.jsx("span",{className:"text-white",children:L.toLocaleString()})]})]}),t.jsx("button",{disabled:a||B<=0||B>L,onClick:A,className:"w-full py-5 bg-emerald-500 hover:bg-emerald-400 text-[#071121] text-[11px] font-black rounded-xl transition-all shadow-xl shadow-emerald-500/20 uppercase tracking-[3px] disabled:opacity-30 disabled:grayscale",children:a?"Procesando...":"Confirmar Transferencia"})]})]})})]}),t.jsx(Ie,{children:O.type&&t.jsx(be.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.9},className:"fixed bottom-8 right-8 z-[100]",children:t.jsxs("div",{className:`px-6 py-4 rounded-2xl shadow-2xl flex items-center gap-4 backdrop-blur-xl border ${O.type==="error"?"bg-rose-500/20 border-rose-500/30 text-rose-500":O.type==="info"?"bg-[#135bec]/20 border-[#135bec]/30 text-[#135bec]":"bg-[#13ec80]/20 border-[#13ec80]/30 text-[#13ec80]"}`,children:[O.type==="error"?t.jsx(Le,{className:"size-5"}):O.type==="info"?t.jsx(Ke,{className:"size-5"}):t.jsx(Re,{className:"size-5"}),t.jsx("p",{className:"text-xs font-black uppercase tracking-widest",children:O.message})]})})}),t.jsx(Ie,{children:ee&&t.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-xl",children:t.jsxs(be.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"w-full max-w-md bg-slate-900 border border-white/10 rounded-2xl shadow-2xl overflow-hidden",children:[t.jsxs("div",{className:"p-8 text-center",children:[t.jsx("div",{className:"size-20 bg-rose-500/10 rounded-full flex items-center justify-center mx-auto mb-6 border border-rose-500/20",children:t.jsx(Le,{className:"size-10 text-rose-500"})}),t.jsx("h3",{className:"text-2xl font-black text-white uppercase tracking-tighter mb-2",children:"Eliminar Evento?"}),t.jsxs("p",{className:"text-slate-400 text-sm leading-relaxed",children:["Esta accin es permanente. Se eliminar el evento ",t.jsxs("span",{className:"text-white font-bold",children:['"',ee.name,'"']})," y todos sus datos asociados."]})]}),t.jsxs("div",{className:"flex border-t border-white/5 p-4 bg-slate-950/50 gap-3",children:[t.jsx("button",{onClick:()=>b(null),className:"flex-1 py-4 bg-slate-800 hover:bg-slate-700 text-slate-300 text-[10px] font-black rounded-xl transition-all uppercase tracking-[2px]",children:"Cancelar"}),t.jsx("button",{onClick:u,className:"flex-1 py-4 bg-rose-500 hover:bg-rose-600 text-white text-[10px] font-black rounded-xl transition-all shadow-lg shadow-rose-500/20 uppercase tracking-[2px]",children:"Confirmar Baja"})]})]})})})]})};export{It as PartnerDashboard};
