import{c as R,r as f,s as y,j as e,m as S,h as $e,i as oe,P as ct,S as nt,M as ot,T as ke,k as dt,b as xt}from"./DashboardApp-DtYBqaq1.js";import{U as ce,T as je,P as Pe,a as ne,E as Ae,b as ve,J as pt,c as mt,C as Ne}from"./jszip.min-Bwim1H27.js";import{Z as M,D as we,C as ut}from"./zap-DvVVSlna.js";import{A as Ie,S as ht,H as bt}from"./shopping-bag-Xj6rAS9a.js";import{S as Me}from"./search-zkcDTvkM.js";import{P as gt,M as ft,X as _e,A as ie,a as H,I as le}from"./constants-BlCp8zC1.js";import{A as D}from"./AlquimiaModal-S_NoB3PE.js";/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],Re=R("arrow-down-right",jt);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Nt=R("globe",vt);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],ye=R("info",wt);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],kt=R("layers",yt);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],de=R("shopping-cart",_t);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],De=R("wallet",Ct),St=({profile:s,showToast:o})=>{const[t,l]=f.useState(!1),[i,m]=f.useState(null),[x,b]=f.useState([]),[d,a]=f.useState([]),[c,j]=f.useState([]),[r,n]=f.useState([]),[N,g]=f.useState([]),w=f.useCallback(async()=>{if(s)try{l(!0);let u=s.partner_id,p=!1;if(!u){const{data:v}=await y.from("partners").select("id").or(`user_id.eq.${s.id},contact_email.eq.${s.email}`).single();v?u=v.id:p=!0}if(p){m({id:s.id,name:s.full_name||s.email.split("@")[0],credits_total:s.credits||0,credits_used:s.total_generations||0,is_virtual:!0,config:{primary_color:"#135bec",logo_url:null}});const[v,h]=await Promise.all([y.from("events").select("*").eq("partner_id",s.id).order("created_at",{ascending:!1}),y.from("wallet_transactions").select("*").eq("partner_id",s.id).order("created_at",{ascending:!1})]);b(v.data||[]),a(h.data||[])}else{const[v,h,G]=await Promise.all([y.from("partners").select("*").eq("id",u).single(),y.from("events").select("*").eq("partner_id",u).order("created_at",{ascending:!1}),y.from("wallet_transactions").select("*").eq("partner_id",u).order("created_at",{ascending:!1})]);if(v.error)throw v.error;if(m(v.data),a(G.data||[]),h.data&&h.data.length>0){const xe=h.data.map(pe=>pe.id),Z=new Date;Z.setDate(Z.getDate()-7);const{data:$}=await y.from("generations").select("id, created_at, event_id, image_url").in("event_id",xe).gte("created_at",Z.toISOString()).order("created_at",{ascending:!1});n($||[]),g(($==null?void 0:$.slice(0,10))||[])}b(h.data||[]);const{data:K}=await y.from("clients").select("*").eq("partner_id",u).order("name");j(K||[])}}catch(u){console.error("Error fetching partner data:",u)}finally{l(!1)}},[s]);f.useEffect(()=>{w()},[w]);const k=f.useCallback(u=>{const p=c.find(h=>h.id===u||h.email===u);if(!p)return 0;const v=x.filter(h=>h.client_id===p.id||h.client_email===p.email).reduce((h,G)=>h+(G.credits_allocated||0),0);return p.credits_total-v},[c,x]);return{loading:t,partner:i,events:x,transactions:d,clients:c,generationsData:r,recentGlobalPhotos:N,fetchPartnerData:w,getClientBalance:k,handleCreateEvent:async u=>{if(!i)return;const p=c.find(h=>h.email===u.client_email),v=Number(u.credits);if(p){const h=k(p.id);if(v>h)return o(`CrÃ©ditos insuficientes en la cuenta del cliente (Disponibles: ${h}).`,"error"),!1}else if(v>i.credits_total-i.credits_used)return o("CrÃ©ditos insuficientes en tu balance mayorista.","error"),!1;try{l(!0);const{error:h}=await y.from("events").insert([{partner_id:i.id,client_id:(p==null?void 0:p.id)||null,event_name:u.name,client_email:u.client_email,event_slug:u.slug||u.name.toLowerCase().replace(/\s+/g,"-"),credits_allocated:v,credits_used:0,start_date:new Date(u.start_date).toISOString(),end_date:new Date(u.end_date).toISOString(),is_active:!0,selected_styles:u.selected_styles}]);if(h)throw h;return p||(i.is_virtual?await y.from("profiles").update({credits:Math.max(0,i.credits_total-v)}).eq("id",s.id):await y.from("partners").update({credits_used:(i.credits_used||0)+v}).eq("id",i.id)),o("Evento creado con Ã©xito"),w(),!0}catch(h){return o("Error al crear el evento: "+h.message,"error"),!1}finally{l(!1)}},handleUpdateEvent:async(u,p)=>{try{l(!0);const{error:v}=await y.from("events").update({event_name:p.event_name,event_slug:p.event_slug,start_date:new Date(p.start_date).toISOString(),end_date:new Date(p.end_date).toISOString(),is_active:p.is_active,selected_styles:p.selected_styles}).eq("id",u);if(v)throw v;return o("Evento actualizado"),w(),!0}catch(v){return o("Error al actualizar: "+v.message,"error"),!1}finally{l(!1)}},handleDeleteEvent:async u=>{try{const{error:p}=await y.from("events").delete().eq("id",u);if(p)throw p;return o("Evento eliminado"),w(),!0}catch(p){return o("Error al eliminar: "+p.message,"error"),!1}},handleCreateClient:async u=>{if(i)try{l(!0);const{error:p}=await y.from("clients").insert([{partner_id:i.id,name:u.name,email:u.email,contact_person:u.contact_person,phone:u.phone,contracted_styles:u.contracted_styles||brandingConfig.style_presets}]);if(p)throw p;return o("Cliente creado con Ã©xito"),w(),!0}catch(p){return o("Error: "+p.message,"error"),!1}finally{l(!1)}},handleUpdateClient:async(u,p)=>{try{l(!0);const{error:v}=await y.from("clients").update({name:p.name,email:p.email,contact_person:p.contact_person,phone:p.phone,contracted_styles:p.contracted_styles}).eq("id",u);if(v)throw v;return o("Cliente actualizado"),w(),!0}catch(v){return o("Error: "+v.message,"error"),!1}finally{l(!1)}},handleClientTopUp:async(u,p,v)=>{if(i)try{l(!0);const{error:h}=await y.rpc("transfer_credits_to_client",{p_partner_id:i.id,p_client_id:u,p_amount:v});if(h)throw h;return o(`Â¡${v} crÃ©ditos asignados a ${p}!`),w(),!0}catch(h){return o("Error: "+h.message,"error"),!1}finally{l(!1)}},handleTopUpEvent:async(u,p)=>{if(!i)return;const v=c.find(h=>h.id===u.client_id||h.email===u.client_email);if(v){const h=k(v.id);if(p>h)return o(`CrÃ©ditos insuficientes en la cuenta del cliente (Disponibles: ${h}).`,"error"),!1}else{const h=(i.credits_total||0)-(i.credits_used||0);if(p>h)return o("No tienes crÃ©ditos suficientes en tu balance mayorista.","error"),!1}try{l(!0);const{error:h}=await y.from("events").update({credits_allocated:(u.credits_allocated||0)+p}).eq("id",u.id);if(h)throw h;return v||(i.is_virtual?await y.from("profiles").update({credits:Math.max(0,i.credits_total-p)}).eq("id",s.id):await y.from("partners").update({credits_used:(i.credits_used||0)+p}).eq("id",i.id)),await y.from("wallet_transactions").insert({partner_id:i.id,amount:p,type:"usage",description:`Transferencia a evento: ${u.event_name}`+(v?` (Saldo Cliente: ${v.name})`:"")}),o(`Se han transferido ${p} crÃ©ditos.`),w(),!0}catch(h){return o("Error: "+h.message,"error"),!1}finally{l(!1)}},handlePurchase:async u=>{if(i)try{l(!0);const p=window.location.href,h=await(await fetch("https://elesttjfwfhvzdvldytn.supabase.co/functions/v1/mercadopago-payment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:i.id,credits:u.qty,price:u.price,pack_name:u.label,redirect_url:p})})).json();if(h.init_point)window.location.href=h.init_point;else throw new Error(h.message||"Error al iniciar pago")}catch(p){o(p.message,"error")}finally{l(!1)}}}},zt=({partner:s,initialConfig:o,showToast:t})=>{const[l,i]=f.useState(()=>{const r=o||{primary_color:"#135bec",logo_url:"",radius:"12px",style_presets:["SuperhÃ©roes","John Wick","Urbano"]};return r.style_presets||(r.style_presets=["SuperhÃ©roes","John Wick","Urbano"]),r});f.useEffect(()=>{if(o){const r={...o};r.style_presets||(r.style_presets=["SuperhÃ©roes","John Wick","Urbano"]),i(r)}},[o]);const[m,x]=f.useState(!1),[b,d]=f.useState(!1),a=f.useCallback(r=>{i(n=>({...n,style_presets:n.style_presets.includes(r)?n.style_presets.filter(N=>N!==r):[...n.style_presets,r]}))},[]);return{brandingConfig:l,setBrandingConfig:i,isSaving:m,isUploading:b,toggleStylePreset:a,handleUpdateBranding:async()=>{if(s)try{x(!0);const{error:r}=await y.from("partners").update({config:l}).eq("id",s.id);if(r)throw r;return t("Â¡ConfiguraciÃ³n sincronizada con Ã©xito! âœ¨"),!0}catch(r){return console.error("Error updating branding:",r),t("Error al guardar: "+r.message,"error"),!1}finally{x(!1)}},handleLogoUpload:async r=>{if(!r.target.files||r.target.files.length===0||!s)return;const n=r.target.files[0],N=n.name.split(".").pop(),g=`${s.id}-${Date.now()}.${N}`;try{d(!0);const{error:w}=await y.storage.from("logos").upload(g,n);if(w){const{error:k}=await y.storage.from("public").upload(`logos/${g}`,n);if(k)throw w;const{data:C}=y.storage.from("public").getPublicUrl(`logos/${g}`);i(E=>({...E,logo_url:C.publicUrl}))}else{const{data:k}=y.storage.from("logos").getPublicUrl(g);i(C=>({...C,logo_url:k.publicUrl}))}t("Logo subido con Ã©xito")}catch(w){t("Error al subir logo: "+w.message,"error")}finally{d(!1)}}}},Lt=({showToast:s})=>{const[o,t]=f.useState([]),[l,i]=f.useState([]),[m,x]=f.useState(!1),[b,d]=f.useState(!1),a=f.useCallback(async r=>{try{x(!0);const{data:n,error:N}=await y.from("generations").select("*, profiles(email)").eq("event_id",r).order("created_at",{ascending:!1});if(N)throw N;t(n||[])}catch(n){console.error("Error fetching photos:",n),s("No se pudieron cargar las fotos","error")}finally{x(!1)}},[s]);return{eventPhotos:o,setEventPhotos:t,loading:m,moderationLoading:b,selectedPhotos:l,setSelectedPhotos:i,fetchEventPhotos:a,handleDeletePhoto:async r=>{if(!window.confirm("Â¿EstÃ¡s seguro de que deseas eliminar esta foto de la galerÃ­a?"))return!1;try{const{error:n}=await y.from("generations").delete().eq("id",r);if(n)throw n;return t(N=>N.filter(g=>g.id!==r)),i(N=>N.filter(g=>g!==r)),s("Foto eliminada correctamente"),!0}catch{return s("Error al eliminar la foto","error"),!1}},handleBulkDelete:async()=>{if(l.length!==0&&window.confirm(`ðŸš¨ ACCIÃ“N MASIVA: Â¿EstÃ¡s seguro de eliminar ${l.length} fotos definitivamente?`))try{d(!0);const{error:r}=await y.from("generations").delete().in("id",l);if(r)throw r;s(`${l.length} fotos eliminadas`),t(n=>n.filter(N=>!l.includes(N.id))),i([])}catch(r){s(r.message,"error")}finally{d(!1)}}}},Et=({partnerName:s,view:o,setView:t})=>{const l=(i,m,x)=>{const b=o===i;return e.jsxs("button",{onClick:()=>t(i),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-all text-sm font-bold border ${b?"bg-[#135bec]/10 text-[#135bec] border-[#135bec]/30 shadow-[0_0_15px_rgba(19,91,236,0.1)]":"text-slate-400 border-transparent hover:text-white hover:bg-white/5"}`,children:[e.jsx(x,{className:"size-4"}),m]},i)};return e.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-6 pb-6 border-b border-white/5",children:[e.jsxs(S.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},children:[e.jsxs("h1",{className:"text-3xl font-black tracking-tight text-white mb-1 flex items-center gap-3",children:[e.jsx("div",{className:"size-10 rounded-xl bg-gradient-to-br from-[#135bec] to-[#0a1f4d] flex items-center justify-center shadow-lg shadow-[#135bec]/20",children:e.jsx($e,{className:"text-white size-6"})}),"Panel de Partner ",e.jsxs("span",{className:"text-[#135bec] opacity-50 text-xl font-medium",children:["/ ",s]})]}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Sistema de gestiÃ³n de eventos y marca blanca corporativa."})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-slate-900/50 p-1 rounded-xl border border-white/5",children:[l("overview","Vista General",$e),l("clients","Clientes",ce),l("events","Mis Eventos",oe),l("wallet","Billetera",De),l("branding","Marca Blanca",ct)]})]})},Ut=({partner:s,events:o,generationsData:t,setView:l})=>{const i=((s==null?void 0:s.credits_total)||0)-((s==null?void 0:s.credits_used)||0),m=i>0&&i<((s==null?void 0:s.credits_total)||0)*.2,x=i>0&&i<((s==null?void 0:s.credits_total)||0)*.1;return e.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-8",children:[e.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"glass-card rounded-[32px] p-8 border border-white/5 bg-slate-900/40 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-10 group-hover:opacity-20 transition-opacity",children:e.jsx(De,{className:"size-20 text-[#135bec]"})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[3px] mb-4",children:"Balance Mayorista"}),e.jsxs("div",{className:"flex items-baseline gap-2 mb-2",children:[e.jsx("h3",{className:"text-4xl font-black text-white tracking-tighter tabular-nums",children:i.toLocaleString()}),e.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:"CrÃ©ditos"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`size-2 rounded-full ${x?"bg-rose-500 animate-pulse":m?"bg-amber-500":"bg-emerald-500"}`}),e.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:x?"Balance CrÃ­tico":m?"Balance Bajo":"Estado Ã“ptimo"})]})]})]}),e.jsxs("div",{className:"glass-card rounded-[32px] p-8 border border-white/5 bg-slate-900/40 relative overflow-hidden group hover:border-[#135bec]/30 transition-all cursor-pointer",onClick:()=>l("events"),children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-10 group-hover:opacity-20 transition-opacity",children:e.jsx(oe,{className:"size-20 text-white"})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[3px] mb-4",children:"Total Proyectos"}),e.jsxs("div",{className:"flex items-baseline gap-2 mb-2",children:[e.jsx("h3",{className:"text-4xl font-black text-white tracking-tighter tabular-nums",children:o.length}),e.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:"Instancias"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"size-2 rounded-full bg-[#135bec]"}),e.jsxs("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:["Activos en ",new Set(o.map(b=>b.client_email)).size," Cuentas"]})]})]})]}),e.jsxs("div",{className:"glass-card rounded-[32px] p-8 border border-white/5 bg-slate-900/40 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-10 group-hover:opacity-20 transition-opacity",children:e.jsx(M,{className:"size-20 text-white"})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[3px] mb-4",children:"ProducciÃ³n IA"}),e.jsxs("div",{className:"flex items-baseline gap-2 mb-2",children:[e.jsx("h3",{className:"text-4xl font-black text-white tracking-tighter tabular-nums",children:(s==null?void 0:s.credits_used)||0}),e.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:"ImÃ¡genes"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-emerald-500",children:[e.jsx(je,{className:"size-3"}),e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"Crecimiento OrgÃ¡nico"})]})]})]})]}),e.jsxs("div",{className:"bg-slate-900/50 border border-white/5 rounded-[32px] p-8 glass-card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-black text-white uppercase tracking-widest",children:"Actividad de GeneraciÃ³n"}),e.jsx("p",{className:"text-[10px] text-slate-500 uppercase font-bold mt-1",children:"Fotos creadas por dÃ­a (Ãšltimos 7 dÃ­as)"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"size-2 rounded-full bg-[#135bec] animate-pulse"}),e.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Tiempo Real"})]})]}),e.jsx("div",{className:"h-48 flex items-end gap-2 px-2",children:Array.from({length:7}).map((b,d)=>{const a=new Date;a.setDate(a.getDate()-(6-d));const c=a.toISOString().split("T")[0],j=t.filter(N=>N.created_at.startsWith(c)).length,r=Math.max(...Array.from({length:7}).map((N,g)=>{const w=new Date;return w.setDate(w.getDate()-(6-g)),t.filter(k=>k.created_at.startsWith(w.toISOString().split("T")[0])).length}),1),n=j/r*100;return e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-3 group",children:[e.jsx("div",{className:"w-full relative h-[140px] flex items-end",children:e.jsx(S.div,{initial:{height:0},animate:{height:`${Math.max(n,5)}%`},className:`w-full rounded-t-xl transition-all duration-500 hover:brightness-125 ${j>0?"bg-gradient-to-t from-[#135bec] to-[#7f13ec]":"bg-white/5"}`})}),e.jsx("span",{className:"text-[8px] font-black text-slate-600 uppercase",children:a.toLocaleDateString("es-AR",{weekday:"short"})})]},d)})})]})]},"overview")},$t=({clients:s,events:o,setShowCreateClientModal:t,setEditingClient:l,setShowClientTopUpModal:i,setSelectedClientId:m,setView:x,exportClientReport:b})=>e.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black text-white uppercase tracking-tighter",children:"Cartera de Clientes"}),e.jsx("p",{className:"text-slate-500 text-xs uppercase tracking-[2px] mt-1 font-bold",children:"Administra tus cuentas corporativas y saldos asignados"})]}),e.jsxs("button",{onClick:()=>t(!0),className:"px-6 py-2.5 bg-[#135bec] hover:bg-[#135bec]/90 text-white text-[10px] font-black rounded-xl shadow-lg shadow-[#135bec]/20 transition-all uppercase tracking-[2px] flex items-center gap-2",children:[e.jsx(Pe,{className:"size-4"}),"Nuevo Cliente"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.map(d=>{const a=o.filter(j=>j.client_id===d.id||j.client_email===d.email),c=a.reduce((j,r)=>j+r.credits_used,0);return e.jsxs(S.div,{whileHover:{y:-5},className:`glass-card rounded-[32px] p-8 border bg-slate-900/40 relative overflow-hidden group transition-all duration-300 ${d.credits_total===0?"border-l-4 border-l-amber-500 border-white/5 shadow-[0_0_20px_rgba(245,158,11,0.05)]":"border-l-4 border-l-[#135bec] border-white/5"}`,children:[d.credits_total===0&&e.jsx("div",{className:"absolute top-0 right-0 pt-8 pr-8",children:e.jsxs("div",{className:"px-3 py-1 bg-amber-500/10 border border-amber-500/20 rounded-full flex items-center gap-1.5",children:[e.jsx(nt,{className:"size-3 text-amber-500"}),e.jsx("span",{className:"text-[8px] font-black text-amber-500 uppercase tracking-[2px]",children:"Nuevo Lead"})]})}),e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("div",{className:"p-4 bg-[#135bec]/10 rounded-2xl border border-[#135bec]/20",children:e.jsx(ce,{className:"size-6 text-[#135bec]"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>l(d),className:"p-2 bg-white/5 hover:bg-white/10 rounded-lg border border-white/10 text-slate-400 hover:text-white transition-all",title:"Editar Cliente",children:e.jsx(ne,{className:"size-3"})}),e.jsxs("div",{className:"px-3 py-1 bg-white/5 rounded-full border border-white/10 text-[9px] font-black text-slate-400 uppercase tracking-widest",children:[a.length," Proyectos"]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-black text-white uppercase tracking-tight truncate",children:d.name}),e.jsxs("p",{className:"text-xs text-slate-500 flex items-center gap-2 mt-1 lowercase",children:[e.jsx(ot,{className:"size-3"}),d.email||"Sin email"]})]}),e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between text-[10px] uppercase font-bold",children:[e.jsx("span",{className:"text-slate-500 tracking-widest",children:"Saldo Asignado"}),e.jsxs("span",{className:"text-white tracking-widest",children:[d.credits_total.toLocaleString()," Cds"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-[10px] uppercase font-bold text-slate-600",children:[e.jsx("span",{children:"Consumido"}),e.jsxs("span",{children:[c.toLocaleString()," (",d.credits_total>0?Math.round(c/d.credits_total*100):0,"%)"]})]}),e.jsx("div",{className:"w-full h-1.5 bg-white/5 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-[#135bec] to-[#00d2ff] rounded-full",style:{width:`${Math.min(100,c/d.credits_total*100||0)}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("button",{onClick:()=>{m(d.email||d.id),x("events")},className:"py-3 bg-[#135bec]/10 hover:bg-[#135bec]/20 text-[#135bec] border border-[#135bec]/30 rounded-xl text-[10px] font-black uppercase tracking-[2px] transition-all flex items-center justify-center gap-2",children:"Proyectos"}),e.jsx("button",{onClick:()=>i(d),className:"py-3 bg-emerald-500/10 hover:bg-emerald-500/20 text-emerald-500 border border-emerald-500/30 rounded-xl text-[10px] font-black uppercase tracking-[2px] transition-all flex items-center justify-center gap-2",children:"Asignar $"}),e.jsxs("button",{onClick:()=>b(d),className:"col-span-2 py-3 bg-white/5 hover:bg-white/10 text-slate-300 border border-white/10 rounded-xl text-[10px] font-black uppercase tracking-[2px] transition-all flex items-center justify-center gap-2",children:[e.jsx(we,{className:"size-3"}),"Exportar Reporte"]})]})]},d.id)}),s.length===0&&e.jsxs("div",{className:"col-span-full py-20 text-center glass-card rounded-[40px] border-dashed border-white/10",children:[e.jsx(ce,{className:"size-12 text-slate-700 mx-auto mb-4 opacity-20"}),e.jsx("p",{className:"text-slate-500 font-black uppercase tracking-widest",children:"No hay clientes registrados"}),e.jsx("button",{onClick:()=>t(!0),className:"text-[#135bec] text-xs font-bold mt-4 hover:underline",children:"Crear primer cliente corporativo"})]})]})]},"clients"),Pt=({events:s,filteredEvents:o,searchTerm:t,setSearchTerm:l,selectedClientId:i,setSelectedClientId:m,setShowCreateEventModal:x,setEventToTopUp:b,setEventToModerate:d,setView:a,setEditingEvent:c,setEventToDelete:j,onProxyClient:r})=>e.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between px-2",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black text-white uppercase tracking-tighter",children:i?`Proyectos: ${i.split("@")[0]}`:"Mis Eventos"}),i?e.jsxs("button",{onClick:()=>m(null),className:"flex items-center gap-2 text-[#135bec] text-[10px] font-black uppercase tracking-[2px] mt-1 hover:text-[#135bec]/80 transition-colors group",children:[e.jsx(Ie,{className:"size-3 group-hover:-translate-x-1 transition-transform"}),"Volver a todos los proyectos"]}):e.jsx("p",{className:"text-slate-500 text-xs mt-1",children:"Gestiona las instancias activas y el consumo de crÃ©ditos."})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx(Me,{className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-slate-500 group-focus-within:text-[#135bec] transition-colors"}),e.jsx("input",{type:"text",placeholder:"Buscar por nombre o slug...",value:t,onChange:n=>l(n.target.value),className:"bg-slate-900 border border-slate-800 rounded-xl pl-9 pr-4 py-2.5 text-xs text-white focus:ring-1 focus:ring-[#135bec] focus:border-[#135bec] w-64 transition-all outline-none"})]}),e.jsxs("button",{onClick:()=>x(!0),className:"px-6 py-2.5 bg-[#135bec] hover:bg-[#135bec]/90 text-white text-[10px] font-black rounded-xl shadow-lg shadow-[#135bec]/20 transition-all uppercase tracking-[2px] flex items-center gap-2",children:[e.jsx(Pe,{className:"size-4"}),"Nuevo Evento"]})]})]}),e.jsx("div",{className:"glass-card rounded-2xl overflow-hidden border border-white/5 bg-slate-900/50 backdrop-blur-xl",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{className:"bg-white/[0.03] border-b border-white/5",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"IdentificaciÃ³n"}),e.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Consumo de CrÃ©ditos"}),e.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Estado"}),e.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-slate-500 uppercase tracking-widest text-right",children:"Panel de Control"})]})}),e.jsxs("tbody",{className:"divide-y divide-white/5",children:[o.map(n=>{const N=n.credits_allocated?Math.min(100,Math.round(n.credits_used/n.credits_allocated*100)):0;return e.jsxs("tr",{className:"hover:bg-white/[0.02] transition-colors group",children:[e.jsx("td",{className:"px-6 py-5",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"size-12 rounded-xl bg-gradient-to-br from-[#135bec]/20 to-[#0a1f4d]/20 border border-[#135bec]/20 flex items-center justify-center text-[#135bec] font-black text-sm group-hover:scale-110 transition-transform",children:((n==null?void 0:n.event_name)||"E").substring(0,2).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-white group-hover:text-[#135bec] transition-colors",children:n.event_name}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[e.jsx(Nt,{className:"size-3 text-slate-600"}),e.jsxs("p",{className:"text-[10px] text-slate-500 font-mono",children:["/",n.event_slug]})]})]})]})}),e.jsx("td",{className:"px-6 py-5",children:e.jsxs("div",{className:"w-48",children:[e.jsxs("div",{className:"flex justify-between text-[10px] mb-1.5 font-bold",children:[e.jsxs("span",{className:"text-slate-400",children:[n.credits_used.toLocaleString()," / ",n.credits_allocated.toLocaleString()]}),e.jsxs("span",{className:`${N>90?"text-rose-500":"text-emerald-500"}`,children:[N,"%"]})]}),e.jsx("div",{className:"w-full h-1.5 bg-slate-800 rounded-full overflow-hidden p-[1px]",children:e.jsx(S.div,{initial:{width:0},animate:{width:`${N}%`},transition:{duration:1,ease:"easeOut"},className:`h-full ${N>90?"bg-rose-500":"bg-[#135bec]"} rounded-full shadow-[0_0_8px_rgba(19,91,236,0.5)]`})})]})}),e.jsx("td",{className:"px-6 py-5",children:e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-[10px] font-black uppercase tracking-wider ${n.is_active?"bg-emerald-500/10 text-emerald-500 border border-emerald-500/20":"bg-rose-500/10 text-rose-500 border border-rose-500/20"}`,children:[e.jsx("span",{className:`size-2 rounded-full ${n.is_active?"bg-emerald-500 animate-pulse":"bg-rose-500"}`}),n.is_active?"En LÃ­nea":"Pausado"]})}),e.jsx("td",{className:"px-6 py-5 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-3",children:[e.jsx("button",{onClick:()=>b(n),className:"p-2.5 bg-emerald-500/10 hover:bg-emerald-500 border border-emerald-500/20 rounded-xl text-emerald-500 hover:text-white transition-all group/action",title:"Cargar CrÃ©ditos",children:e.jsx(de,{className:"w-4 h-4 group-hover/action:scale-110 transition-transform"})}),e.jsx("button",{onClick:()=>{d(n),a("moderation")},className:"p-2.5 bg-indigo-500/10 hover:bg-indigo-500 border border-indigo-500/20 rounded-xl text-indigo-500 hover:text-white transition-all group/action",title:"ModeraciÃ³n de GalerÃ­a",children:e.jsx(gt,{className:"w-4 h-4 group-hover/action:scale-110 transition-transform"})}),e.jsx("button",{onClick:()=>c(n),className:"p-2.5 bg-slate-800/50 hover:bg-slate-800 border border-white/5 rounded-xl text-slate-400 hover:text-white transition-all group/action",title:"Editar Evento",children:e.jsx(ne,{className:"w-4 h-4 group-hover/action:rotate-12 transition-transform"})}),e.jsx("button",{onClick:()=>window.open(`https://photobooth.creativa-labs.com/?event=${n.event_slug}`,"_blank"),className:"p-2.5 bg-slate-800/50 hover:bg-slate-800 border border-white/5 rounded-xl text-slate-400 hover:text-white transition-all group/action",title:"Ver Kiosco (PÃºblico)",children:e.jsx(Ae,{className:"w-4 h-4 group-hover/action:scale-110 transition-transform"})}),r&&n.client_email&&e.jsx("button",{onClick:()=>r(n.client_email),className:"p-2.5 bg-[#135bec]/10 hover:bg-[#135bec] border border-[#135bec]/20 rounded-xl text-[#135bec] hover:text-white transition-all group/action",title:"Gestionar Branding como Cliente",children:e.jsx(ft,{className:"w-4 h-4 group-hover/action:scale-110 transition-transform"})}),e.jsx("button",{onClick:()=>j({id:n.id,name:n.event_name}),className:"p-2.5 bg-rose-500/10 hover:bg-rose-500 border border-rose-500/20 rounded-xl text-rose-500 hover:text-white transition-all group/action",title:"Eliminar Instancia",children:e.jsx(ve,{className:"w-4 h-4 group-hover/action:scale-110 transition-transform"})})]})})]},n.id)}),o.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"p-20 text-center",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"size-16 rounded-2xl bg-slate-800/50 flex items-center justify-center mb-4",children:e.jsx(oe,{className:"size-8 text-slate-600 opacity-20"})}),e.jsx("p",{className:"text-slate-400 text-sm font-bold uppercase tracking-widest",children:"No hay eventos para mostrar"}),e.jsx("p",{className:"text-slate-600 text-[10px] mt-1",children:"Crea tu primera instancia para comenzar."})]})})})]})]})})]},"events"),At=({eventToModerate:s,setView:o,filteredPhotos:t,eventPhotos:l,moderationSearchTerm:i,setModerationSearchTerm:m,moderationDateFilter:x,setModerationDateFilter:b,showToast:d,handleDeletePhoto:a,loading:c,selectedPhotos:j,setSelectedPhotos:r,handleBulkDelete:n})=>{const N=async(g,w)=>{if(g.length===0)return d("No hay fotos para descargar","error");try{d("Preparando descarga ZIP...","info");const k=new pt,C=k.folder(w);if(!C)throw new Error("No se pudo crear la carpeta en el ZIP");const E=g.map(async(O,I)=>{var B;try{const p=await(await fetch(O.image_url)).blob(),v=((B=O.image_url.split(".").pop())==null?void 0:B.split("?")[0])||"jpg";C.file(`photo-${I+1}.${v}`,p)}catch(u){console.error("Error al descargar foto para el ZIP:",u)}});await Promise.all(E);const J=await k.generateAsync({type:"blob"}),q=window.URL.createObjectURL(J),A=document.createElement("a");A.href=q,A.download=`${w}.zip`,A.click(),window.URL.revokeObjectURL(q),d("Archivo ZIP descargado con Ã©xito")}catch(k){console.error("Error al generar ZIP:",k),d("Error al generar el archivo ZIP","error")}};return e.jsxs(S.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.05},className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>o("events"),className:"p-2.5 bg-slate-800 hover:bg-slate-700 rounded-xl text-white transition-all border border-white/5",children:e.jsx(Re,{className:"w-5 h-5 rotate-180"})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-black text-white uppercase tracking-tighter",children:["GalerÃ­a: ",s==null?void 0:s.event_name]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:`size-2 rounded-full ${t.length>0?"bg-emerald-500 animate-pulse":"bg-slate-700"}`}),e.jsxs("p",{className:"text-slate-500 text-[10px] font-black uppercase tracking-widest",children:[t.length," de ",l.length," Fotos"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 bg-slate-900/80 p-1.5 rounded-2xl border border-white/5 shadow-inner",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Me,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 size-3.5 text-slate-600"}),e.jsx("input",{type:"text",placeholder:"Buscar email o ID...",className:"bg-slate-950/50 border border-white/5 rounded-xl py-2.5 pl-10 pr-4 text-[10px] text-white focus:border-[#135bec] outline-none transition-all w-52 placeholder:text-slate-700 font-bold uppercase tracking-widest",value:i,onChange:g=>m(g.target.value)})]}),e.jsxs("div",{className:"relative",children:[e.jsx(oe,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 size-3.5 text-slate-600"}),e.jsx("input",{type:"date",className:"bg-slate-950/50 border border-white/5 rounded-xl py-2.5 pl-10 pr-4 text-[10px] text-white focus:border-[#135bec] outline-none transition-all w-40 font-bold",value:x,onChange:g=>b(g.target.value)})]}),(i||x)&&e.jsx("button",{onClick:()=>{m(""),b("")},className:"p-2.5 hover:bg-white/5 text-slate-500 hover:text-white transition-all rounded-xl",children:e.jsx(_e,{className:"size-4"})})]}),e.jsx("div",{className:"w-px h-8 bg-white/5 mx-1"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>{const g=t.map(E=>E.image_url).join(`
`);if(g.length===0)return d("No hay links para exportar","error");const w=new Blob([g],{type:"text/plain"}),k=window.URL.createObjectURL(w),C=document.createElement("a");C.href=k,C.download=`links-${s==null?void 0:s.event_slug}-filtrados.txt`,C.click(),window.URL.revokeObjectURL(k),d("Links filtrados exportados")},className:"px-6 py-2.5 bg-slate-800 hover:bg-slate-700 text-white text-[10px] font-black rounded-xl border border-white/5 transition-all uppercase tracking-[2px] flex items-center gap-2",children:[e.jsx(we,{className:"size-4"}),"Exportar Links"]}),e.jsxs("button",{onClick:()=>N(t,`galeria-${s==null?void 0:s.event_slug}`),className:"px-6 py-2.5 bg-[#135bec] hover:bg-[#135bec]/90 text-white text-[10px] font-black rounded-xl shadow-lg border border-white/10 transition-all uppercase tracking-[2px] flex items-center gap-2",children:[e.jsx(kt,{className:"size-4"}),"Descargar Todo (ZIP)"]})]})]})]}),e.jsx(ie,{children:j.length>0&&e.jsxs(S.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},className:"fixed bottom-10 left-1/2 -translate-x-1/2 z-[60] bg-slate-900/90 backdrop-blur-2xl border border-[#135bec]/30 rounded-2xl px-8 py-4 flex items-center gap-8 shadow-[0_20px_50px_rgba(0,0,0,0.5)]",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] font-black text-[#135bec] uppercase tracking-widest",children:"SelecciÃ³n Activa"}),e.jsxs("span",{className:"text-xl font-black text-white",children:[j.length," ",e.jsx("span",{className:"text-xs text-slate-500 font-medium",children:"Fotos"})]})]}),e.jsx("div",{className:"w-px h-10 bg-white/10"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>r([]),className:"px-4 py-2 text-[10px] font-black text-slate-400 uppercase tracking-widest hover:text-white transition-colors",children:"Cancelar"}),e.jsxs("button",{onClick:()=>{const g=l.filter(w=>j.includes(w.id));N(g,"seleccion-fotos")},className:"px-6 py-2.5 bg-white text-black text-[10px] font-black rounded-xl hover:bg-slate-200 transition-all uppercase tracking-[2px] flex items-center gap-2",children:[e.jsx(we,{className:"size-4"}),"Descargar ZIP"]}),e.jsxs("button",{onClick:n,className:"px-6 py-2.5 bg-rose-500 text-white text-[10px] font-black rounded-xl hover:bg-rose-600 transition-all uppercase tracking-[2px] flex items-center gap-2",children:[e.jsx(ve,{className:"size-4"}),"Eliminar Seleccionadas"]})]})]})}),c?e.jsxs("div",{className:"h-96 flex flex-col items-center justify-center gap-4",children:[e.jsx("div",{className:"size-12 border-4 border-[#135bec]/30 border-t-[#135bec] rounded-full animate-spin"}),e.jsx("p",{className:"text-slate-500 text-[10px] font-black uppercase tracking-widest",children:"Sincronizando GalerÃ­a..."})]}):e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:[t.map(g=>{var w;return e.jsxs("div",{onClick:()=>{j.includes(g.id)?r(k=>k.filter(C=>C!==g.id)):r(k=>[...k,g.id])},className:`group relative aspect-[3/4] rounded-2xl overflow-hidden border transition-all duration-300 cursor-pointer shadow-xl ${j.includes(g.id)?"border-[#135bec] scale-[0.98] ring-4 ring-[#135bec]/20":"border-white/5 bg-slate-900"}`,children:[e.jsx("div",{className:`absolute top-4 left-4 z-20 size-5 rounded-md border flex items-center justify-center transition-all ${j.includes(g.id)?"bg-[#135bec] border-[#135bec] text-white":"bg-black/20 border-white/20 text-transparent opacity-0 group-hover:opacity-100"}`,children:e.jsx("span",{className:"text-[14px] font-black",children:"âœ“"})}),e.jsx("img",{src:g.image_url,alt:"Generation",className:`w-full h-full object-cover transition-transform duration-700 group-hover:scale-110 ${j.includes(g.id)?"opacity-50":""}`}),e.jsxs("div",{className:"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent p-4 translate-y-2 group-hover:translate-y-0 transition-transform",children:[e.jsx("p",{className:"text-[8px] font-mono text-white/50 mb-0.5 truncate",children:g.id}),e.jsx("p",{className:"text-[10px] font-black text-white mb-3 truncate uppercase tracking-widest",children:((w=g.profiles)==null?void 0:w.email)||"AnÃ³nimo"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:k=>{k.stopPropagation(),a(g.id)},className:"p-2.5 bg-rose-500/20 hover:bg-rose-500 border border-rose-500/30 rounded-xl text-rose-500 hover:text-white transition-all group/del",title:"Eliminar de la galerÃ­a",children:e.jsx(ve,{className:"size-4 group-hover/del:scale-110 transition-transform"})}),e.jsxs("button",{onClick:k=>{k.stopPropagation(),window.open(g.image_url,"_blank")},className:"flex-1 py-2 bg-white/10 backdrop-blur-md border border-white/20 rounded-xl text-white text-[9px] font-black uppercase tracking-widest hover:bg-white/20 transition-all flex items-center justify-center gap-2",children:[e.jsx(Ae,{className:"size-3"}),"Ver Original"]})]})]})]},g.id)}),t.length===0&&e.jsxs("div",{className:"col-span-full h-64 flex flex-col items-center justify-center bg-slate-900/50 rounded-[32px] border border-dashed border-white/5",children:[e.jsx(ke,{className:"size-8 text-slate-800 mb-4"}),e.jsx("p",{className:"text-slate-500 text-[10px] font-black uppercase tracking-widest",children:"No hay fotos en este evento"})]})]})]},"moderation")},It=({brandingConfig:s,setBrandingConfig:o,handleLogoUpload:t,handleUpdateBranding:l,isSavingBranding:i,toggleStylePreset:m,recentGlobalPhotos:x,events:b,setView:d})=>e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-12 gap-8",children:[e.jsx("div",{className:"xl:col-span-8 space-y-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("section",{className:"glass-card rounded-[32px] p-8 border border-white/5 bg-slate-900/50 backdrop-blur-xl shadow-2xl h-fit",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx("div",{className:"p-3 bg-indigo-500/10 border border-indigo-500/20 rounded-xl text-indigo-500",children:e.jsx(dt,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-black text-white uppercase tracking-tighter",children:"Identidad Visual"}),e.jsx("p",{className:"text-slate-500 text-xs",children:"Personaliza tu panel de control."})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[2px] block mb-4",children:"Logo Corporativo"}),e.jsxs("div",{className:"w-full border-2 border-dashed border-slate-800 rounded-2xl p-6 flex flex-col items-center justify-center bg-slate-950/50 hover:bg-slate-950 transition-all cursor-pointer group hover:border-[#135bec]/50 shadow-inner",onClick:()=>{var a;return(a=document.getElementById("brandingLogoInput"))==null?void 0:a.click()},children:[e.jsx("input",{type:"file",id:"brandingLogoInput",className:"hidden",accept:"image/*",onChange:t}),s.logo_url?e.jsxs("div",{className:"relative group/logo",children:[e.jsx("img",{src:s.logo_url,className:"h-12 object-contain mb-2 group-hover:opacity-50 transition-opacity",alt:"Logo"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover/logo:opacity-100 transition-opacity",children:e.jsx(ne,{className:"size-5 text-white"})})]}):e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(mt,{className:"w-8 h-8 text-slate-700 group-hover:text-[#135bec] mb-3 transition-colors"}),e.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest text-center",children:"Subir Identidad"})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[2px] block mb-4",children:"Color de Acento"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"size-12 rounded-xl border-2 border-white/10 shadow-2xl cursor-pointer hover:scale-105 transition-all",style:{backgroundColor:s.primary_color},onClick:()=>{var a;return(a=document.getElementById("brandingColorPicker"))==null?void 0:a.click()}}),e.jsx("input",{id:"brandingColorPicker",type:"color",className:"sr-only",value:s.primary_color,onChange:a=>o({...s,primary_color:a.target.value})}),e.jsxs("div",{className:"flex-1 bg-slate-950 border border-slate-800 rounded-xl py-3 px-4 text-xs text-white font-mono flex items-center justify-between",children:[e.jsx("span",{children:s.primary_color.toUpperCase()}),e.jsx(ne,{className:"size-3 text-slate-600"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[2px] block mb-4",children:"Radio de Bordes"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{className:"w-full bg-slate-950 border border-slate-800 rounded-xl py-3 px-4 text-xs text-white focus:ring-1 focus:ring-[#135bec] outline-none appearance-none cursor-pointer pr-10",value:s.radius,onChange:a=>o({...s,radius:a.target.value}),children:[e.jsx("option",{value:"4px",children:"4px (Recto)"}),e.jsx("option",{value:"8px",children:"8px (Suave)"}),e.jsx("option",{value:"12px",children:"12px (Premium)"}),e.jsx("option",{value:"20px",children:"20px (Redondeado)"})]}),e.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none",children:e.jsx(Re,{className:"size-3 text-slate-600"})})]})]})]}),e.jsxs("button",{onClick:l,disabled:i,className:`w-full py-4 bg-white text-slate-900 text-[10px] font-black rounded-2xl transition-all shadow-xl hover:shadow-2xl active:scale-[0.98] uppercase tracking-[3px] flex items-center justify-center gap-2 group ${i?"opacity-50 cursor-not-allowed":""}`,children:[i?e.jsx("div",{className:"size-4 border-2 border-slate-900 border-t-transparent rounded-full animate-spin"}):e.jsx(Ne,{className:"size-4 group-hover:scale-110 transition-transform"}),i?"Sincronizando...":"Sincronizar Panel"]})]})]}),e.jsxs("div",{className:"glass-card rounded-[32px] p-8 border border-white/5 bg-slate-900/50 backdrop-blur-xl shadow-2xl relative overflow-hidden h-fit",children:[e.jsx("div",{className:"flex items-center justify-between mb-8 relative z-10",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-[#135bec]/10 border border-[#135bec]/20 rounded-xl text-[#135bec]",children:e.jsx(M,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-black text-white uppercase tracking-tighter",children:"Estilos IA"}),e.jsx("p",{className:"text-slate-500 text-xs",children:"Packs activos para clientes."})]})]})}),e.jsx("div",{className:"grid grid-cols-2 gap-4 relative z-10",children:H.map(a=>{const c=le.find(j=>j.subCategory===a)||le[0];return e.jsxs("label",{className:"relative block cursor-pointer group",children:[e.jsx("input",{type:"checkbox",checked:s.style_presets.includes(a),onChange:()=>m(a),className:"peer sr-only"}),e.jsxs("div",{className:`aspect-square rounded-2xl overflow-hidden relative border-2 transition-all duration-300 ${s.style_presets.includes(a)?"border-[#135bec] scale-[1.02] shadow-xl shadow-[#135bec]/20":"border-white/5 opacity-40 hover:border-white/20 hover:opacity-80"}`,children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 to-transparent z-10"}),e.jsx("img",{alt:a,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700",src:c.url}),e.jsx("div",{className:"absolute bottom-2 left-3 z-20",children:e.jsx("p",{className:"text-[8px] font-black uppercase text-white tracking-[1px] leading-tight",children:a})}),s.style_presets.includes(a)&&e.jsx("div",{className:"absolute top-2 right-2 z-20",children:e.jsx("div",{className:"bg-[#135bec] rounded-full p-1 shadow-xl border border-white/20",children:e.jsx(Ne,{className:"w-2.5 h-2.5 text-white"})})})]})]},a)})})]})]})}),e.jsxs("div",{className:"xl:col-span-4 sticky top-8",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("div",{className:"mb-6 flex items-center gap-3",children:[e.jsx("div",{className:"size-1.5 rounded-full bg-emerald-500 animate-pulse"}),e.jsx("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[4px]",children:"Live Preview (Kiosk)"})]}),e.jsxs("div",{className:"relative w-[280px] h-[580px] bg-slate-800 rounded-[50px] p-3 border-[6px] border-slate-700 shadow-2xl overflow-hidden shadow-black/60",children:[e.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-32 h-6 bg-slate-700 rounded-b-2xl z-50"}),e.jsxs("div",{className:"w-full h-full bg-[#071121] rounded-[40px] overflow-hidden flex flex-col relative",children:[e.jsx("div",{className:"absolute inset-0 opacity-20",style:{background:`radial-gradient(circle at 50% 50%, ${s.primary_color}33 0%, transparent 70%)`}}),e.jsxs("div",{className:"p-6 flex flex-col items-center justify-center pt-10",children:[s.logo_url?e.jsx("img",{src:s.logo_url,className:"h-10 object-contain mb-4",alt:"Mockup Logo"}):e.jsx("div",{className:"h-10 w-32 bg-white/5 rounded-xl border border-white/10 flex items-center justify-center text-[8px] text-slate-600 font-black uppercase tracking-[2px]",children:"Your Logo Here"}),e.jsx("div",{className:"w-12 h-0.5",style:{background:`linear-gradient(90deg, transparent, ${s.primary_color}, transparent)`}})]}),e.jsxs("div",{className:"px-6 py-2 text-center",children:[e.jsx("h3",{className:"text-[14px] font-black text-white uppercase tracking-tighter italic",children:"Descubre tu Identidad"}),e.jsx("p",{className:"text-[8px] text-slate-500 uppercase font-black tracking-widest mt-1 opacity-60",children:"Selecciona un estandar de estilo"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4 no-scrollbar",children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.style_presets.slice(0,4).map((a,c)=>{const j=le.find(r=>r.subCategory===a)||le[0];return e.jsxs("div",{className:"aspect-[3/4] overflow-hidden relative border shadow-lg",style:{borderRadius:s.radius,borderColor:c===0?s.primary_color:"rgba(255,255,255,0.05)"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent z-10"}),e.jsx("img",{src:j.url,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute bottom-2 left-2 z-20",children:e.jsx("p",{className:"text-[7px] font-black text-white uppercase",children:a})})]},c)}),s.style_presets.length<4&&Array.from({length:4-s.style_presets.length}).map((a,c)=>e.jsx("div",{className:"aspect-[3/4] bg-white/5 border border-dashed border-white/10 flex items-center justify-center text-slate-800",style:{borderRadius:s.radius},children:e.jsx("span",{className:"text-sm",children:"+"})},c))]})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"w-full py-3 text-center text-white text-[9px] font-black uppercase tracking-[2px] shadow-lg shadow-black/20",style:{backgroundColor:s.primary_color,borderRadius:s.radius},children:"Comenzar Experiencia"})})]})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 px-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"size-8 rounded-lg bg-orange-500/10 flex items-center justify-center text-orange-500",children:e.jsx(M,{className:"size-4"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-black text-white uppercase tracking-widest",children:"Global Live Feed"}),e.jsx("p",{className:"text-[9px] text-slate-500 font-bold uppercase tracking-[2px]",children:"Ãšltimas capturas en tus eventos"})]})]}),e.jsx("button",{onClick:()=>d("events"),className:"text-[9px] font-black text-[#135bec] uppercase tracking-widest hover:underline",children:"Ver todos los eventos"})]}),e.jsxs("div",{className:"relative group/feed",children:[e.jsx("div",{className:"flex gap-4 overflow-x-auto pb-6 pt-2 no-scrollbar scroll-smooth",children:x.length>0?x.map((a,c)=>{var j;return e.jsxs(S.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:c*.1},className:"min-w-[140px] md:min-w-[180px] aspect-[3/4] rounded-2xl overflow-hidden border border-white/5 bg-slate-900 shadow-xl relative group/item",children:[e.jsx("img",{src:a.image_url,alt:"Recent",className:"w-full h-full object-cover grayscale-[0.5] group-hover/item:grayscale-0 transition-all duration-500"}),e.jsxs("div",{className:"absolute inset-x-0 bottom-0 p-3 bg-gradient-to-t from-black/80 to-transparent",children:[e.jsx("p",{className:"text-[7px] font-black text-white/50 uppercase tracking-widest mb-0.5",children:((j=b.find(r=>r.id===a.event_id))==null?void 0:j.event_name)||"Evento"}),e.jsxs("p",{className:"text-[8px] font-bold text-white uppercase",children:["Hace ",Math.floor((Date.now()-new Date(a.created_at).getTime())/6e4),"m"]})]})]},a.id)}):e.jsxs("div",{className:"w-full h-40 rounded-[32px] border border-dashed border-white/10 flex flex-col items-center justify-center text-slate-600",children:[e.jsx(_e,{className:"size-8 mb-2 opacity-20"}),e.jsx("p",{className:"text-[10px] font-black uppercase tracking-[2px]",children:"Esperando actividad..."})]})}),e.jsx("div",{className:"absolute inset-y-0 left-0 w-20 bg-gradient-to-r from-[#0a0c0b]/50 to-transparent pointer-events-none opacity-0 group-hover/feed:opacity-100 transition-opacity"}),e.jsx("div",{className:"absolute inset-y-0 right-0 w-20 bg-gradient-to-l from-[#0a0c0b]/50 to-transparent pointer-events-none opacity-0 group-hover/feed:opacity-100 transition-opacity"})]})]})]})]}),Mt=({availableCredits:s,partner:o,events:t,transactions:l,setShowTopUpModal:i})=>{var m;return e.jsxs(S.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.05},className:"space-y-8",children:[e.jsxs("section",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 glass-card rounded-3xl p-10 bg-gradient-to-br from-[#135bec] to-[#0a1f4d] border-none shadow-2xl shadow-[#135bec]/20 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-10 opacity-10",children:e.jsx(ht,{className:"size-64"})}),e.jsxs("div",{className:"relative z-10 flex flex-col h-full justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white/60 text-[11px] font-black uppercase tracking-[3px] mb-2",children:"CrÃ©ditos Totales Disponibles"}),e.jsxs("h2",{className:"text-7xl font-black text-white tracking-tighter",children:[s.toLocaleString(),e.jsx("span",{className:"text-2xl text-white/40 ml-4 font-medium uppercase tracking-widest",children:"unidades"})]})]}),e.jsxs("div",{className:"mt-12 flex flex-wrap gap-8 items-end",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-white/40 text-[10px] font-bold uppercase",children:"Consumo Total"}),e.jsxs("div",{className:"flex items-center gap-2 text-white",children:[e.jsx(je,{className:"size-5 text-emerald-400"}),e.jsx("span",{className:"text-2xl font-black",children:((m=o==null?void 0:o.credits_used)==null?void 0:m.toLocaleString())||0})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-white/40 text-[10px] font-bold uppercase",children:"Eventos Activos"}),e.jsxs("div",{className:"flex items-center gap-2 text-white/80",children:[e.jsx(M,{className:"size-5 text-yellow-400"}),e.jsx("span",{className:"text-2xl font-black",children:t.filter(x=>x.is_active).length})]})]}),e.jsx("button",{onClick:()=>i(!0),className:"ml-auto px-8 py-4 bg-white text-[#135bec] font-black rounded-2xl hover:scale-105 transition-all text-xs uppercase tracking-[2px] shadow-xl",children:"Recargar CrÃ©ditos"})]})]})]}),e.jsxs("div",{className:"glass-card rounded-3xl p-8 border border-white/5 bg-slate-900/50 backdrop-blur-xl flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-black text-white uppercase tracking-tighter mb-6 flex items-center gap-2",children:[e.jsx(bt,{className:"size-5 text-[#135bec]"}),"Ãšltimas Recargas"]}),e.jsx("div",{className:"space-y-6 max-h-[400px] overflow-y-auto custom-scrollbar pr-2",children:l.length>0?l.map((x,b)=>e.jsxs("div",{className:"flex justify-between items-center bg-white/[0.02] p-4 rounded-2xl border border-white/5 group hover:border-[#135bec]/30 transition-all",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-bold text-white",children:["+",x.amount.toLocaleString()," CrÃ©ditos"]}),e.jsx("p",{className:"text-[10px] text-slate-500 mt-1",children:new Date(x.created_at).toLocaleDateString()})]}),e.jsx("span",{className:`text-[9px] font-black uppercase px-2 py-1 rounded-lg ${x.type==="top-up"?"text-emerald-500 bg-emerald-500/10":"text-blue-500 bg-blue-500/10"}`,children:x.type==="top-up"?"Carga":"Ajuste"})]},x.id)):e.jsx("div",{className:"text-center py-10 opacity-40",children:e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-widest",children:"Sin movimientos"})})})]}),e.jsxs("p",{className:"text-[10px] text-slate-600 text-center mt-6",children:[e.jsx(ye,{className:"size-3 inline mr-1"}),"Los crÃ©ditos no poseen fecha de vencimiento."]})]})]}),e.jsxs("section",{className:"glass-card rounded-[40px] p-10 border border-white/5 bg-slate-900/40 backdrop-blur-3xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-10",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-black text-white uppercase tracking-tighter",children:"AnalÃ­ticas de Consumo"}),e.jsx("p",{className:"text-slate-500 text-[9px] font-black uppercase tracking-[3px] mt-1",children:"Monitoreo de energÃ­a AI por evento activo"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("div",{className:"px-3 py-1 bg-emerald-500/10 border border-emerald-500/20 rounded-full flex items-center gap-2",children:[e.jsx("div",{className:"size-1.5 bg-emerald-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-[9px] font-black text-emerald-500 uppercase",children:"Live Metrics"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8",children:[t.map((x,b)=>{var c;const d=Math.min(100,(x.credits_used||0)/(x.credits_allocated||1)*100),a=[20,45,30,60,40,75,d].map((j,r)=>`${r*20},${80-j*.6}`).join(" ");return e.jsx(S.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:b*.05},className:"group relative h-full",children:e.jsxs("div",{className:"p-8 rounded-[32px] bg-gradient-to-br from-white/[0.03] to-transparent border border-white/5 group-hover:border-[#135bec]/40 transition-all overflow-hidden h-full flex flex-col",children:[e.jsx("div",{className:"absolute inset-x-0 bottom-0 h-24 opacity-20 pointer-events-none",children:e.jsxs("svg",{className:"w-full h-full",preserveAspectRatio:"none",viewBox:"0 0 120 80",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:`grad-${b}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#135bec",stopOpacity:"0.5"}),e.jsx("stop",{offset:"100%",stopColor:"#135bec",stopOpacity:"0"})]})}),e.jsx("path",{d:`M0,80 L${a} L120,80 Z`,fill:`url(#grad-${b})`,className:"group-hover:opacity-100 transition-opacity"}),e.jsx(S.path,{d:`M0,${80-20*.6} L${a}`,fill:"none",stroke:"#135bec",strokeWidth:"2",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:1.5,delay:.5}})]})}),e.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("div",{className:"p-2.5 bg-white/5 rounded-xl",children:e.jsx(je,{className:`size-4 ${d>80?"text-amber-500":"text-emerald-500"}`})}),e.jsx("p",{className:"text-[10px] font-black text-white/20 uppercase tracking-[2px]",children:x.event_slug})]}),e.jsx("h4",{className:"text-[11px] font-black text-white uppercase tracking-widest mb-1 truncate group-hover:text-[#135bec] transition-colors",children:x.event_name}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-black text-white",children:((c=x.credits_used)==null?void 0:c.toLocaleString())||0}),e.jsx("span",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Usados"})]}),e.jsx("div",{className:"mt-4 w-full bg-white/5 h-1.5 rounded-full overflow-hidden",children:e.jsx(S.div,{initial:{width:0},animate:{width:`${d}%`},className:`h-full rounded-full ${d>90?"bg-rose-500":d>70?"bg-amber-500":"bg-[#135bec]"}`})}),e.jsxs("div",{className:"flex justify-between mt-3",children:[e.jsxs("span",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest",children:[Math.round(d),"% Cap"]}),e.jsxs("span",{className:"text-[9px] font-black text-white/30 uppercase tracking-widest",children:["Limite: ",x.credits_allocated]})]})]})]})]})},x.id)}),t.length===0&&e.jsxs("div",{className:"col-span-full py-20 text-center border-2 border-dashed border-white/5 rounded-[40px]",children:[e.jsx("div",{className:"size-16 bg-white/5 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ye,{className:"size-8 text-slate-600"})}),e.jsx("p",{className:"text-xs font-black text-slate-600 uppercase tracking-[3px]",children:"Sin actividad de consumo para reportar"})]})]})]})]},"wallet")},Rt=({isOpen:s,onClose:o,newEvent:t,setNewEvent:l,clients:i,partner:m,brandingConfig:x,getClientBalance:b,onEventCreate:d,loading:a})=>{var c,j;return e.jsx(D,{isOpen:s,onClose:o,title:"Crear Evento",description:"Nueva instancia",children:e.jsxs("form",{onSubmit:d,className:"p-7 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 mb-2 block",children:"Nombre del Evento"}),e.jsx("input",{required:!0,type:"text",placeholder:"Nombre comercial",className:"w-full bg-[#0a0a0b] border border-white/10 rounded-xl px-5 py-4 text-white focus:border-[#135bec] outline-none transition-all placeholder:text-slate-800",value:t.name,onChange:r=>l({...t,name:r.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 mb-2 block",children:"Asignar a Cliente"}),e.jsxs("div",{className:"relative",children:[e.jsx(ce,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-700 size-4"}),e.jsxs("select",{required:!0,className:"w-full bg-[#0a0a0b] border border-white/10 rounded-xl pl-11 pr-5 py-4 text-white focus:border-[#135bec] outline-none transition-all text-xs appearance-none",value:t.client_email,onChange:r=>{var N;const n=i.find(g=>g.email===r.target.value);l({...t,client_email:r.target.value,selected_styles:(n==null?void 0:n.contracted_styles)||(((N=x.style_presets)==null?void 0:N.length)>0?x.style_presets:H)})},children:[e.jsx("option",{value:"",children:"Consumo Directo (Mayorista)"}),i.map(r=>e.jsxs("option",{value:r.email,children:[r.name," (",r.email,")"]},r.id))]}),e.jsx(ut,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-700 size-4 rotate-90"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 mb-2 block",children:"Personalizado"}),e.jsx("input",{type:"text",placeholder:"slug",className:"w-full bg-[#0a0a0b] border border-white/10 rounded-xl px-4 py-3 text-white focus:border-[#135bec] outline-none transition-all text-xs font-mono",value:t.slug,onChange:r=>l({...t,slug:r.target.value.toLowerCase().replace(/\s+/g,"-")})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 mb-2 block",children:"CrÃ©ditos"}),e.jsxs("div",{className:"relative",children:[e.jsx(de,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-[#135bec] size-4"}),e.jsx("input",{required:!0,type:"number",className:"w-full bg-[#0a0a0b] border border-white/10 rounded-xl pl-11 pr-5 py-3 text-white focus:border-[#135bec] outline-none transition-all text-xs font-bold",value:t.credits,onChange:r=>l({...t,credits:Number(r.target.value)})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 mb-2 block",children:"Inicio"}),e.jsx("input",{required:!0,type:"date",className:"w-full bg-[#0a0a0b] border border-white/10 rounded-xl px-4 py-3 text-white focus:border-[#135bec] outline-none transition-all text-xs",value:t.start_date,onChange:r=>l({...t,start_date:r.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 mb-2 block",children:"Fin"}),e.jsx("input",{required:!0,type:"date",className:"w-full bg-[#0a0a0b] border border-white/10 rounded-xl px-4 py-3 text-white focus:border-[#135bec] outline-none transition-all text-xs",value:t.end_date,onChange:r=>l({...t,end_date:r.target.value})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 block",children:"Estilos para este Evento"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:(t.client_email&&((c=i.find(r=>r.email===t.client_email))==null?void 0:c.contracted_styles)||H).map(r=>{const n=t.selected_styles.includes(r);return e.jsx("button",{type:"button",onClick:()=>{const N=n?t.selected_styles.filter(g=>g!==r):[...t.selected_styles,r];l({...t,selected_styles:N})},className:`py-2 px-1 rounded-lg border text-[8px] font-bold uppercase transition-all ${n?"bg-[#135bec]/20 border-[#135bec] text-white":"bg-white/5 border-white/5 text-slate-500"}`,children:r},r)})})]}),e.jsxs("div",{className:"p-4 bg-[#135bec]/5 border border-[#135bec]/10 rounded-xl flex items-center gap-4",children:[e.jsx("div",{className:"size-8 rounded-lg bg-[#135bec]/10 flex items-center justify-center text-[#135bec]",children:e.jsx(xt,{className:"size-4"})}),e.jsx("div",{children:t.client_email&&i.find(r=>r.email===t.client_email)?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-[9px] font-bold text-slate-500 uppercase tracking-widest leading-none",children:"Saldo Cliente"}),e.jsxs("p",{className:"text-[11px] text-slate-400 mt-1 leading-tight",children:["Se utilizarÃ¡n ",t.credits," del saldo de ",(j=i.find(r=>r.email===t.client_email))==null?void 0:j.name," (",b(t.client_email)," disponibles)."]})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-[9px] font-bold text-slate-500 uppercase tracking-widest leading-none",children:"VerificaciÃ³n de Balance"}),e.jsxs("p",{className:"text-[11px] text-slate-400 mt-1 leading-tight",children:["Se deducirÃ¡n ",t.credits," crÃ©ditos de tu balance mayorista (",m?m.credits_total-m.credits_used:0," disponibles)."]})]})})]})]}),e.jsx("button",{disabled:a,type:"submit",className:"w-full py-5 bg-[#135bec] hover:bg-[#135bec]/90 text-white text-[11px] font-black rounded-xl transition-all shadow-xl shadow-[#135bec]/20 uppercase tracking-widest disabled:opacity-50 disabled:cursor-not-allowed group/btn",children:a?"Creando...":e.jsxs("span",{className:"flex items-center justify-center gap-2",children:["Activar Instancia de Evento",e.jsx(M,{className:"size-4 group-hover:scale-110 transition-transform"})]})})]})})},Dt=({isOpen:s,onClose:o,editingEvent:t,setEditingEvent:l,clients:i,brandingConfig:m,onEventUpdate:x,loading:b})=>{var d,a;return t?e.jsx(D,{isOpen:s,onClose:o,title:"Editar Evento",description:"Modificar parÃ¡metros",children:e.jsxs("form",{onSubmit:x,className:"p-7 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 mb-2 block",children:"Nombre del Evento"}),e.jsx("input",{required:!0,type:"text",className:"w-full bg-[#0a0a0b] border border-white/10 rounded-xl px-5 py-4 text-white focus:border-[#135bec] outline-none transition-all placeholder:text-slate-800",value:t.event_name,onChange:c=>l({...t,event_name:c.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 mb-2 block",children:"Inicio"}),e.jsx("input",{required:!0,type:"date",className:"w-full bg-[#0a0a0b] border border-white/10 rounded-xl px-4 py-3 text-white focus:border-[#135bec] outline-none transition-all text-xs",value:t.start_date?new Date(t.start_date).toISOString().split("T")[0]:"",onChange:c=>l({...t,start_date:c.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 mb-2 block",children:"Fin"}),e.jsx("input",{required:!0,type:"date",className:"w-full bg-[#0a0a0b] border border-white/10 rounded-xl px-4 py-3 text-white focus:border-[#135bec] outline-none transition-all text-xs",value:t.end_date?new Date(t.end_date).toISOString().split("T")[0]:"",onChange:c=>l({...t,end_date:c.target.value})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 block",children:"Estilos para este Evento"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:(t.client_id&&((d=i.find(c=>c.id===t.client_id))==null?void 0:d.contracted_styles)||(((a=m.style_presets)==null?void 0:a.length)>0?m.style_presets:H)).map(c=>{var r;const j=(r=t.selected_styles)==null?void 0:r.includes(c);return e.jsx("button",{type:"button",onClick:()=>{const n=j?t.selected_styles.filter(N=>N!==c):[...t.selected_styles||[],c];l({...t,selected_styles:n})},className:`py-2 px-1 rounded-lg border text-[8px] font-bold uppercase transition-all ${j?"bg-[#135bec]/20 border-[#135bec] text-white":"bg-white/5 border-white/5 text-slate-500"}`,children:c},c)})})]}),e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-white/5 rounded-2xl border border-white/5",children:[e.jsx("div",{className:`size-10 rounded-xl flex items-center justify-center ${t.is_active?"bg-emerald-500/10 text-emerald-500":"bg-rose-500/10 text-rose-500"}`,children:e.jsx(M,{className:"size-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-[10px] font-black uppercase text-white tracking-widest leading-none",children:"Estado"}),e.jsx("p",{className:"text-[9px] text-slate-500 uppercase mt-1 leading-none",children:t.is_active?"En LÃ­nea":"Inactivo"})]}),e.jsx("button",{type:"button",onClick:()=>l({...t,is_active:!t.is_active}),className:`px-4 py-2 rounded-xl text-[10px] font-black uppercase transition-all ${t.is_active?"bg-rose-500/10 text-rose-500 hover:bg-rose-500 hover:text-white":"bg-emerald-500/10 text-emerald-500 hover:bg-emerald-500 hover:text-white"}`,children:t.is_active?"Pausar":"Activar"})]})]}),e.jsx("button",{disabled:b,type:"submit",className:"w-full py-5 bg-[#135bec] hover:bg-[#135bec]/90 text-white text-[11px] font-black rounded-xl transition-all shadow-xl shadow-[#135bec]/20 uppercase tracking-[3px] disabled:opacity-50 disabled:cursor-not-allowed",children:b?"Sincronizando...":"Guardar Cambios"})]})}):null},qt=({isOpen:s,onClose:o,editingClient:t,newClient:l,setNewClient:i,setEditingClient:m,onClientCreate:x,onClientUpdate:b,loading:d})=>{const a=!!t;return e.jsx(D,{isOpen:s,onClose:o,title:a?"Editar Cliente":"Nuevo Cliente",description:"Cuenta corporativa",children:e.jsxs("form",{onSubmit:c=>{c.preventDefault(),a?b(t):x(l)},className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 mb-2 block",children:"Nombre de la Empresa"}),e.jsx("input",{required:!0,type:"text",className:"w-full bg-[#0a0a0b] border border-white/10 rounded-xl px-5 py-4 text-white focus:border-[#135bec] outline-none transition-all",value:a?t.name:l.name,onChange:c=>a?m({...t,name:c.target.value}):i({...l,name:c.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 mb-2 block",children:"Email de la Cuenta"}),e.jsx("input",{required:!0,type:"email",className:"w-full bg-[#0a0a0b] border border-white/10 rounded-xl px-5 py-4 text-white focus:border-[#135bec] outline-none transition-all text-xs",value:a?t.email:l.email,onChange:c=>a?m({...t,email:c.target.value}):i({...l,email:c.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 mb-2 block",children:"Persona de Contacto"}),e.jsx("input",{type:"text",className:"w-full bg-[#0a0a0b] border border-white/10 rounded-xl px-4 py-3 text-white focus:border-[#135bec] outline-none transition-all text-xs",value:a?t.contact_person:l.contact_person,onChange:c=>a?m({...t,contact_person:c.target.value}):i({...l,contact_person:c.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 mb-2 block",children:"TelÃ©fono"}),e.jsx("input",{type:"text",className:"w-full bg-[#0a0a0b] border border-white/10 rounded-xl px-4 py-3 text-white focus:border-[#135bec] outline-none transition-all text-xs",value:a?t.phone:l.phone,onChange:c=>a?m({...t,phone:c.target.value}):i({...l,phone:c.target.value})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 mb-3 block",children:"Estilos Contratados"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:H.map(c=>{const j=a?t.contracted_styles:l.contracted_styles,r=j==null?void 0:j.includes(c);return e.jsx("button",{type:"button",onClick:()=>{const n=r?j.filter(N=>N!==c):[...j||[],c];a?m({...t,contracted_styles:n}):i({...l,contracted_styles:n})},className:`py-2 px-1 rounded-lg border text-[8px] font-bold uppercase tracking-wider transition-all ${r?"bg-[#135bec]/20 border-[#135bec] text-white":"bg-white/5 border-white/5 text-slate-500"}`,children:c},c)})})]})]}),e.jsx("button",{disabled:d,type:"submit",className:"w-full py-5 bg-[#135bec] hover:bg-[#135bec]/90 text-white text-[11px] font-black rounded-xl transition-all shadow-xl shadow-[#135bec]/20 uppercase tracking-widest disabled:opacity-50",children:d?"Sincronizando...":a?"Guardar Cambios":"Registrar Cliente"})]})})},Ot=({isOpen:s,onClose:o,client:t,amount:l,setAmount:i,partner:m,onTopUp:x,loading:b})=>t?e.jsx(D,{isOpen:s,onClose:o,title:"Asignar Saldo",description:t.name||"",maxWidth:"max-w-sm",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 mb-2 block",children:"Cantidad a Transferir"}),e.jsxs("div",{className:"relative",children:[e.jsx(de,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-emerald-500 size-4"}),e.jsx("input",{type:"number",className:"w-full bg-[#0a0a0b] border border-white/10 rounded-xl pl-11 pr-5 py-4 text-white focus:border-emerald-500 outline-none transition-all font-bold text-center text-xl",value:l,onChange:d=>i(Number(d.target.value))})]}),e.jsxs("div",{className:"flex flex-col gap-2 mt-4 p-4 bg-white/5 rounded-xl border border-white/5",children:[e.jsxs("p",{className:"text-[9px] text-slate-500 uppercase tracking-widest flex justify-between",children:["Tu Disponible: ",e.jsx("span",{className:"text-white",children:(((m==null?void 0:m.credits_total)||0)-((m==null?void 0:m.credits_used)||0)).toLocaleString()})]}),e.jsxs("p",{className:"text-[9px] text-slate-500 uppercase tracking-widest flex justify-between",children:["Nuevo Saldo Cliente: ",e.jsx("span",{className:"text-emerald-500",children:((t.credits_total||0)+l).toLocaleString()})]})]})]}),e.jsx("button",{disabled:b||l<=0,onClick:x,className:"w-full py-5 bg-emerald-500 hover:bg-emerald-400 text-[#071121] text-[11px] font-black rounded-xl transition-all shadow-xl shadow-emerald-500/20 uppercase tracking-[3px] disabled:opacity-30 disabled:grayscale",children:b?"Transfiriendo...":"Confirmar AsignaciÃ³n"})]})}):null,Bt=({isOpen:s,onClose:o,event:t,amount:l,setAmount:i,availableCredits:m,onTopUp:x,loading:b})=>t?e.jsx(D,{isOpen:s,onClose:o,title:"Recargar Evento",description:t.event_name||"",maxWidth:"max-w-sm",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 mb-2 block",children:"Cantidad de CrÃ©ditos"}),e.jsxs("div",{className:"relative",children:[e.jsx(de,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-emerald-500 size-4"}),e.jsx("input",{type:"number",className:"w-full bg-[#0a0a0b] border border-white/10 rounded-xl pl-11 pr-5 py-4 text-white focus:border-emerald-500 outline-none transition-all font-bold text-center text-xl",value:l,onChange:d=>i(Number(d.target.value))})]}),e.jsxs("p",{className:"text-[9px] text-slate-500 mt-3 text-center uppercase tracking-widest",children:["Disponibles: ",e.jsx("span",{className:"text-white",children:m.toLocaleString()})]})]}),e.jsx("button",{disabled:b||l<=0||l>m,onClick:x,className:"w-full py-5 bg-emerald-500 hover:bg-emerald-400 text-[#071121] text-[11px] font-black rounded-xl transition-all shadow-xl shadow-emerald-500/20 uppercase tracking-[3px] disabled:opacity-30 disabled:grayscale",children:b?"Procesando...":"Confirmar Transferencia"})]})}):null,Gt=({isOpen:s,onClose:o,eventToDelete:t,onConfirm:l})=>e.jsx(D,{isOpen:s,onClose:o,title:"Â¿Eliminar Evento?",description:"Esta acciÃ³n es permanente",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"size-20 bg-rose-500/10 rounded-full flex items-center justify-center mx-auto mb-6 border border-rose-500/20",children:e.jsx(ke,{className:"size-10 text-rose-500"})}),e.jsxs("p",{className:"text-slate-400 text-sm leading-relaxed mb-8",children:["Se eliminarÃ¡ el evento ",e.jsxs("span",{className:"text-white font-bold",children:['"',t==null?void 0:t.event_name,'"']})," y todos sus datos asociados."]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:o,className:"flex-1 py-4 bg-slate-800 hover:bg-slate-700 text-slate-300 text-[10px] font-black rounded-xl transition-all uppercase tracking-[2px]",children:"Cancelar"}),e.jsx("button",{onClick:l,className:"flex-1 py-4 bg-rose-500 hover:bg-rose-600 text-white text-[10px] font-black rounded-xl transition-all shadow-lg shadow-rose-500/20 uppercase tracking-[2px]",children:"Confirmar Baja"})]})]})}),Xt=({user:s,profile:o,onBack:t,initialView:l="overview",onProxyClient:i})=>{const[m,x]=f.useState({message:"",type:null}),b=f.useCallback((_,z="success")=>{x({message:_,type:z}),setTimeout(()=>x({message:"",type:null}),4e3)},[]),{loading:d,partner:a,events:c,transactions:j,clients:r,generationsData:n,recentGlobalPhotos:N,fetchPartnerData:g,getClientBalance:w,handleCreateEvent:k,handleUpdateEvent:C,handleDeleteEvent:E,handleCreateClient:J,handleUpdateClient:q,handleClientTopUp:A,handleTopUpEvent:O}=St({profile:o,showToast:b}),{brandingConfig:I,setBrandingConfig:B,isSaving:u,isUploading:p,toggleStylePreset:v,handleUpdateBranding:h,handleLogoUpload:G}=zt({partner:a,initialConfig:a==null?void 0:a.config,showToast:b}),{eventPhotos:K,loading:xe,moderationLoading:Z,fetchEventPhotos:$,handleDeletePhoto:pe,handleBulkDelete:qe,selectedPhotos:Oe,setSelectedPhotos:Be}=Lt({showToast:b}),Ce=xe||Z,[P,L]=f.useState(l),[X,Ge]=f.useState(""),[Y,Se]=f.useState(null),[Ze,Zt]=f.useState(!1),[Te,me]=f.useState(!1),[T,Q]=f.useState(null),[ee,ue]=f.useState(null),[ze,Fe]=f.useState(100),[te,he]=f.useState(null),[F,We]=f.useState(null),[Ve,be]=f.useState(!1),[se,ae]=f.useState(null),[W,ge]=f.useState(null),[Le,He]=f.useState(1e3),[re,Je]=f.useState(""),[fe,Ke]=f.useState(""),[Ee,Ue]=f.useState({name:"",slug:"",client_email:"",credits:500,start_date:new Date().toISOString().split("T")[0],end_date:new Date(Date.now()+10080*60*1e3).toISOString().split("T")[0],selected_styles:[]}),[Xe,Ye]=f.useState({name:"",email:"",contact_person:"",phone:"",contracted_styles:[]}),V=d||Ze||u||p||Ce,Qe=f.useMemo(()=>c.filter(_=>{const z=(_.event_name||"").toLowerCase().includes(X.toLowerCase())||(_.event_slug||"").toLowerCase().includes(X.toLowerCase()),U=!Y||_.client_email===Y;return z&&U}),[c,X,Y]);f.useEffect(()=>{const _=new URLSearchParams(window.location.search),z=_.get("status")||_.get("collection_status");if(z==="approved"||z==="success"){b("Â¡Recarga acreditada con Ã©xito! ðŸŽ‰","success");const U=window.location.pathname;window.history.replaceState({},document.title,U),g()}else if(z==="failure"){b("El pago no pudo procesarse. Reintenta.","error");const U=window.location.pathname;window.history.replaceState({},document.title,U)}},[g,b]),f.useEffect(()=>{L(l)},[l]),f.useEffect(()=>{F&&$(F.id)},[F,$]),f.useEffect(()=>{g()},[o.partner_id,g]);const et=async _=>{await J(_)&&be(!1)},tt=async _=>{if(!se)return;await q(se.id,_)&&ae(null)},st=async _=>{_.preventDefault(),await k(Ee)&&(me(!1),Ue({name:"",slug:"",client_email:"",credits:500,start_date:"",end_date:"",selected_styles:[]}))},at=async _=>{if(_.preventDefault(),!T)return;await C(T.id,T)&&Q(null)},rt=async()=>{if(!W)return;await A(W.id,W.name,Le)&&ge(null)},lt=async()=>{if(!ee)return;await O(ee,ze)&&ue(null)},it=async()=>{if(!te)return;await E(te.id)&&he(null)};return e.jsxs("div",{className:"min-h-screen bg-[#071121] text-white font-['Outfit'] selection:bg-[#135bec]/30 p-4 md:p-8",children:[e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[e.jsxs("button",{onClick:t,className:"group flex items-center gap-3 text-slate-500 hover:text-white transition-all text-[11px] font-black uppercase tracking-[3px]",children:[e.jsx("div",{className:"size-8 rounded-full border border-white/5 flex items-center justify-center group-hover:bg-white/5 transition-all",children:e.jsx(Ie,{className:"size-4 group-hover:-translate-x-1 transition-transform"})}),"Volver al Inicio"]}),e.jsx(Et,{partnerName:a==null?void 0:a.name,view:P,setView:L}),e.jsx("main",{children:e.jsxs(ie,{mode:"wait",children:[P==="overview"&&e.jsx(Ut,{partner:a,events:c,generationsData:n,setView:L}),P==="clients"&&e.jsx($t,{clients:r,events:c,setShowCreateClientModal:be,setEditingClient:ae,setShowClientTopUpModal:ge,setSelectedClientId:Se,setView:L,exportClientReport:_=>{b(`Exportando reporte de ${_.name}...`,"info")}}),P==="events"&&e.jsx(Pt,{events:c,filteredEvents:Qe,searchTerm:X,setSearchTerm:Ge,selectedClientId:Y,setSelectedClientId:Se,setShowCreateEventModal:me,setEditingEvent:Q,setEventToTopUp:ue,setEventToDelete:he,setEventToModerate:_=>{We(_),L("moderation")},setView:L}),P==="wallet"&&e.jsx(Mt,{availableCredits:((a==null?void 0:a.credits_total)||0)-((a==null?void 0:a.credits_used)||0),partner:a,events:c,transactions:j,setShowTopUpModal:()=>L("wallet")}),P==="branding"&&e.jsx(It,{brandingConfig:I,setBrandingConfig:B,isSavingBranding:u,handleLogoUpload:G,handleUpdateBranding:h,toggleStylePreset:v,recentGlobalPhotos:N,events:c,setView:L}),P==="moderation"&&F&&e.jsx(At,{eventToModerate:F,setView:L,filteredPhotos:K.filter(_=>{var z,U;return(!re||((U=(z=_.profiles)==null?void 0:z.email)==null?void 0:U.toLowerCase().includes(re.toLowerCase()))||_.id.includes(re))&&(!fe||_.created_at.startsWith(fe))}),eventPhotos:K,moderationSearchTerm:re,setModerationSearchTerm:Je,moderationDateFilter:fe,setModerationDateFilter:Ke,showToast:b,handleDeletePhoto:pe,loading:Ce,selectedPhotos:Oe,setSelectedPhotos:Be,handleBulkDelete:qe})]})})]}),e.jsxs(ie,{children:[e.jsx(Rt,{isOpen:Te,onClose:()=>me(!1),newEvent:Ee,setNewEvent:Ue,clients:r,partner:a,brandingConfig:I,getClientBalance:w,onEventCreate:st,loading:V},"create-event-modal"),e.jsx(Dt,{isOpen:!!T,onClose:()=>Q(null),editingEvent:T,setEditingEvent:Q,clients:r,brandingConfig:I,onEventUpdate:at,loading:V},"edit-event-modal"),e.jsx(qt,{isOpen:Ve||!!se,onClose:()=>{be(!1),ae(null)},editingClient:se,newClient:Xe,setNewClient:Ye,setEditingClient:ae,onClientCreate:et,onClientUpdate:tt,loading:V},"client-modal"),e.jsx(Ot,{isOpen:!!W,onClose:()=>ge(null),client:W,amount:Le,setAmount:He,partner:a,onTopUp:rt,loading:V},"client-topup-modal"),e.jsx(Bt,{isOpen:!!ee,onClose:()=>ue(null),event:ee,amount:ze,setAmount:Fe,availableCredits:((a==null?void 0:a.credits_total)||0)-((a==null?void 0:a.credits_used)||0),onTopUp:lt,loading:V},"event-topup-modal"),e.jsx(Gt,{isOpen:!!te,onClose:()=>he(null),eventToDelete:te,onConfirm:it},"delete-event-modal")]}),e.jsx(ie,{children:m.type&&e.jsx(S.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.9},className:"fixed bottom-8 right-8 z-[100]",children:e.jsxs("div",{className:`flex items-center gap-4 px-6 py-4 rounded-2xl border backdrop-blur-xl shadow-2xl ${m.type==="success"?"bg-emerald-500/10 border-emerald-500/20 text-emerald-500":m.type==="error"?"bg-rose-500/10 border-rose-500/20 text-rose-500":"bg-[#135bec]/10 border-[#135bec]/20 text-blue-400"}`,children:[m.type==="success"?e.jsx(Ne,{className:"size-5"}):m.type==="error"?e.jsx(ke,{className:"size-5"}):e.jsx(ye,{className:"size-5"}),e.jsx("p",{className:"text-sm font-bold",children:m.message}),e.jsx("button",{onClick:()=>x({message:"",type:null}),className:"ml-2 opacity-50 hover:opacity-100",children:e.jsx(_e,{className:"size-4"})})]})})})]})};export{Xt as PartnerDashboard};
