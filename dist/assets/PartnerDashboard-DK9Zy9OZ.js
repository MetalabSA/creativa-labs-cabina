import{c as Se,h as Pe,i as lt,r as le,s as fe,j as e,k as Xe,b as ct,l as Le,P as Je,m as Ue,T as $e,M as dt}from"./DashboardApp-D_novLpt.js";import{A as Oe,S as Qe,P as ht,M as ut,a as ft,I as Fe}from"./constants-CAMXW0iA.js";import{m as be}from"./proxy-BMIMIqzB.js";import{Z as Re,D as et}from"./zap-Ck8ND5Qm.js";import{P as pt,a as Ge,E as tt,U as mt}from"./upload-BPNXfrJi.js";import{X as Te,S as xt,H as bt}from"./x-DEEez0Jn.js";/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],rt=Se("arrow-down-right",gt);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],wt=Se("arrow-up-right",vt);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Me=Se("circle-check",_t);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],kt=Se("globe",yt);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],qe=Se("info",jt);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],st=Se("layers",Nt);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],He=Se("shopping-cart",zt);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ve=Se("trash-2",St);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],at=Se("trending-up",Ct);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],Ke=Se("wallet",Et);function Ze(De){throw new Error('Could not dynamically require "'+De+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ye={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var it;function At(){return it||(it=1,(function(De,_e){(function(_){De.exports=_()})(function(){return(function _(U,j,d){function c(h,y){if(!j[h]){if(!U[h]){var b=typeof Ze=="function"&&Ze;if(!y&&b)return b(h,!0);if(a)return a(h,!0);var w=new Error("Cannot find module '"+h+"'");throw w.code="MODULE_NOT_FOUND",w}var i=j[h]={exports:{}};U[h][0].call(i.exports,function(p){var s=U[h][1][p];return c(s||p)},i,i.exports,_,U,j,d)}return j[h].exports}for(var a=typeof Ze=="function"&&Ze,l=0;l<d.length;l++)c(d[l]);return c})({1:[function(_,U,j){var d=_("./utils"),c=_("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";j.encode=function(l){for(var h,y,b,w,i,p,s,f=[],o=0,m=l.length,v=m,S=d.getTypeOf(l)!=="string";o<l.length;)v=m-o,b=S?(h=l[o++],y=o<m?l[o++]:0,o<m?l[o++]:0):(h=l.charCodeAt(o++),y=o<m?l.charCodeAt(o++):0,o<m?l.charCodeAt(o++):0),w=h>>2,i=(3&h)<<4|y>>4,p=1<v?(15&y)<<2|b>>6:64,s=2<v?63&b:64,f.push(a.charAt(w)+a.charAt(i)+a.charAt(p)+a.charAt(s));return f.join("")},j.decode=function(l){var h,y,b,w,i,p,s=0,f=0,o="data:";if(l.substr(0,o.length)===o)throw new Error("Invalid base64 input, it looks like a data url.");var m,v=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===a.charAt(64)&&v--,l.charAt(l.length-2)===a.charAt(64)&&v--,v%1!=0)throw new Error("Invalid base64 input, bad content length.");for(m=c.uint8array?new Uint8Array(0|v):new Array(0|v);s<l.length;)h=a.indexOf(l.charAt(s++))<<2|(w=a.indexOf(l.charAt(s++)))>>4,y=(15&w)<<4|(i=a.indexOf(l.charAt(s++)))>>2,b=(3&i)<<6|(p=a.indexOf(l.charAt(s++))),m[f++]=h,i!==64&&(m[f++]=y),p!==64&&(m[f++]=b);return m}},{"./support":30,"./utils":32}],2:[function(_,U,j){var d=_("./external"),c=_("./stream/DataWorker"),a=_("./stream/Crc32Probe"),l=_("./stream/DataLengthProbe");function h(y,b,w,i,p){this.compressedSize=y,this.uncompressedSize=b,this.crc32=w,this.compression=i,this.compressedContent=p}h.prototype={getContentWorker:function(){var y=new c(d.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),b=this;return y.on("end",function(){if(this.streamInfo.data_length!==b.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),y},getCompressedWorker:function(){return new c(d.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},h.createWorkerFrom=function(y,b,w){return y.pipe(new a).pipe(new l("uncompressedSize")).pipe(b.compressWorker(w)).pipe(new l("compressedSize")).withStreamInfo("compression",b)},U.exports=h},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(_,U,j){var d=_("./stream/GenericWorker");j.STORE={magic:"\0\0",compressWorker:function(){return new d("STORE compression")},uncompressWorker:function(){return new d("STORE decompression")}},j.DEFLATE=_("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(_,U,j){var d=_("./utils"),c=(function(){for(var a,l=[],h=0;h<256;h++){a=h;for(var y=0;y<8;y++)a=1&a?3988292384^a>>>1:a>>>1;l[h]=a}return l})();U.exports=function(a,l){return a!==void 0&&a.length?d.getTypeOf(a)!=="string"?(function(h,y,b,w){var i=c,p=w+b;h^=-1;for(var s=w;s<p;s++)h=h>>>8^i[255&(h^y[s])];return-1^h})(0|l,a,a.length,0):(function(h,y,b,w){var i=c,p=w+b;h^=-1;for(var s=w;s<p;s++)h=h>>>8^i[255&(h^y.charCodeAt(s))];return-1^h})(0|l,a,a.length,0):0}},{"./utils":32}],5:[function(_,U,j){j.base64=!1,j.binary=!1,j.dir=!1,j.createFolders=!0,j.date=null,j.compression=null,j.compressionOptions=null,j.comment=null,j.unixPermissions=null,j.dosPermissions=null},{}],6:[function(_,U,j){var d=null;d=typeof Promise<"u"?Promise:_("lie"),U.exports={Promise:d}},{lie:37}],7:[function(_,U,j){var d=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",c=_("pako"),a=_("./utils"),l=_("./stream/GenericWorker"),h=d?"uint8array":"array";function y(b,w){l.call(this,"FlateWorker/"+b),this._pako=null,this._pakoAction=b,this._pakoOptions=w,this.meta={}}j.magic="\b\0",a.inherits(y,l),y.prototype.processChunk=function(b){this.meta=b.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(h,b.data),!1)},y.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},y.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},y.prototype._createPako=function(){this._pako=new c[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var b=this;this._pako.onData=function(w){b.push({data:w,meta:b.meta})}},j.compressWorker=function(b){return new y("Deflate",b)},j.uncompressWorker=function(){return new y("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(_,U,j){function d(i,p){var s,f="";for(s=0;s<p;s++)f+=String.fromCharCode(255&i),i>>>=8;return f}function c(i,p,s,f,o,m){var v,S,N=i.file,P=i.compression,B=m!==h.utf8encode,M=a.transformTo("string",m(N.name)),O=a.transformTo("string",h.utf8encode(N.name)),G=N.comment,J=a.transformTo("string",m(G)),g=a.transformTo("string",h.utf8encode(G)),R=O.length!==N.name.length,r=g.length!==G.length,T="",re="",F="",se=N.dir,W=N.date,te={crc32:0,compressedSize:0,uncompressedSize:0};p&&!s||(te.crc32=i.crc32,te.compressedSize=i.compressedSize,te.uncompressedSize=i.uncompressedSize);var I=0;p&&(I|=8),B||!R&&!r||(I|=2048);var E=0,X=0;se&&(E|=16),o==="UNIX"?(X=798,E|=(function(V,me){var ce=V;return V||(ce=me?16893:33204),(65535&ce)<<16})(N.unixPermissions,se)):(X=20,E|=(function(V){return 63&(V||0)})(N.dosPermissions)),v=W.getUTCHours(),v<<=6,v|=W.getUTCMinutes(),v<<=5,v|=W.getUTCSeconds()/2,S=W.getUTCFullYear()-1980,S<<=4,S|=W.getUTCMonth()+1,S<<=5,S|=W.getUTCDate(),R&&(re=d(1,1)+d(y(M),4)+O,T+="up"+d(re.length,2)+re),r&&(F=d(1,1)+d(y(J),4)+g,T+="uc"+d(F.length,2)+F);var K="";return K+=`
\0`,K+=d(I,2),K+=P.magic,K+=d(v,2),K+=d(S,2),K+=d(te.crc32,4),K+=d(te.compressedSize,4),K+=d(te.uncompressedSize,4),K+=d(M.length,2),K+=d(T.length,2),{fileRecord:b.LOCAL_FILE_HEADER+K+M+T,dirRecord:b.CENTRAL_FILE_HEADER+d(X,2)+K+d(J.length,2)+"\0\0\0\0"+d(E,4)+d(f,4)+M+T+J}}var a=_("../utils"),l=_("../stream/GenericWorker"),h=_("../utf8"),y=_("../crc32"),b=_("../signature");function w(i,p,s,f){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=p,this.zipPlatform=s,this.encodeFileName=f,this.streamFiles=i,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(w,l),w.prototype.push=function(i){var p=i.meta.percent||0,s=this.entriesCount,f=this._sources.length;this.accumulate?this.contentBuffer.push(i):(this.bytesWritten+=i.data.length,l.prototype.push.call(this,{data:i.data,meta:{currentFile:this.currentFile,percent:s?(p+100*(s-f-1))/s:100}}))},w.prototype.openedSource=function(i){this.currentSourceOffset=this.bytesWritten,this.currentFile=i.file.name;var p=this.streamFiles&&!i.file.dir;if(p){var s=c(i,p,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:s.fileRecord,meta:{percent:0}})}else this.accumulate=!0},w.prototype.closedSource=function(i){this.accumulate=!1;var p=this.streamFiles&&!i.file.dir,s=c(i,p,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(s.dirRecord),p)this.push({data:(function(f){return b.DATA_DESCRIPTOR+d(f.crc32,4)+d(f.compressedSize,4)+d(f.uncompressedSize,4)})(i),meta:{percent:100}});else for(this.push({data:s.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},w.prototype.flush=function(){for(var i=this.bytesWritten,p=0;p<this.dirRecords.length;p++)this.push({data:this.dirRecords[p],meta:{percent:100}});var s=this.bytesWritten-i,f=(function(o,m,v,S,N){var P=a.transformTo("string",N(S));return b.CENTRAL_DIRECTORY_END+"\0\0\0\0"+d(o,2)+d(o,2)+d(m,4)+d(v,4)+d(P.length,2)+P})(this.dirRecords.length,s,i,this.zipComment,this.encodeFileName);this.push({data:f,meta:{percent:100}})},w.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},w.prototype.registerPrevious=function(i){this._sources.push(i);var p=this;return i.on("data",function(s){p.processChunk(s)}),i.on("end",function(){p.closedSource(p.previous.streamInfo),p._sources.length?p.prepareNextSource():p.end()}),i.on("error",function(s){p.error(s)}),this},w.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},w.prototype.error=function(i){var p=this._sources;if(!l.prototype.error.call(this,i))return!1;for(var s=0;s<p.length;s++)try{p[s].error(i)}catch{}return!0},w.prototype.lock=function(){l.prototype.lock.call(this);for(var i=this._sources,p=0;p<i.length;p++)i[p].lock()},U.exports=w},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(_,U,j){var d=_("../compressions"),c=_("./ZipFileWorker");j.generateWorker=function(a,l,h){var y=new c(l.streamFiles,h,l.platform,l.encodeFileName),b=0;try{a.forEach(function(w,i){b++;var p=(function(m,v){var S=m||v,N=d[S];if(!N)throw new Error(S+" is not a valid compression method !");return N})(i.options.compression,l.compression),s=i.options.compressionOptions||l.compressionOptions||{},f=i.dir,o=i.date;i._compressWorker(p,s).withStreamInfo("file",{name:w,dir:f,date:o,comment:i.comment||"",unixPermissions:i.unixPermissions,dosPermissions:i.dosPermissions}).pipe(y)}),y.entriesCount=b}catch(w){y.error(w)}return y}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(_,U,j){function d(){if(!(this instanceof d))return new d;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var c=new d;for(var a in this)typeof this[a]!="function"&&(c[a]=this[a]);return c}}(d.prototype=_("./object")).loadAsync=_("./load"),d.support=_("./support"),d.defaults=_("./defaults"),d.version="3.10.1",d.loadAsync=function(c,a){return new d().loadAsync(c,a)},d.external=_("./external"),U.exports=d},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(_,U,j){var d=_("./utils"),c=_("./external"),a=_("./utf8"),l=_("./zipEntries"),h=_("./stream/Crc32Probe"),y=_("./nodejsUtils");function b(w){return new c.Promise(function(i,p){var s=w.decompressed.getContentWorker().pipe(new h);s.on("error",function(f){p(f)}).on("end",function(){s.streamInfo.crc32!==w.decompressed.crc32?p(new Error("Corrupted zip : CRC32 mismatch")):i()}).resume()})}U.exports=function(w,i){var p=this;return i=d.extend(i||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),y.isNode&&y.isStream(w)?c.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):d.prepareContent("the loaded zip file",w,!0,i.optimizedBinaryString,i.base64).then(function(s){var f=new l(i);return f.load(s),f}).then(function(s){var f=[c.Promise.resolve(s)],o=s.files;if(i.checkCRC32)for(var m=0;m<o.length;m++)f.push(b(o[m]));return c.Promise.all(f)}).then(function(s){for(var f=s.shift(),o=f.files,m=0;m<o.length;m++){var v=o[m],S=v.fileNameStr,N=d.resolve(v.fileNameStr);p.file(N,v.decompressed,{binary:!0,optimizedBinaryString:!0,date:v.date,dir:v.dir,comment:v.fileCommentStr.length?v.fileCommentStr:null,unixPermissions:v.unixPermissions,dosPermissions:v.dosPermissions,createFolders:i.createFolders}),v.dir||(p.file(N).unsafeOriginalName=S)}return f.zipComment.length&&(p.comment=f.zipComment),p})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(_,U,j){var d=_("../utils"),c=_("../stream/GenericWorker");function a(l,h){c.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(h)}d.inherits(a,c),a.prototype._bindStream=function(l){var h=this;(this._stream=l).pause(),l.on("data",function(y){h.push({data:y,meta:{percent:0}})}).on("error",function(y){h.isPaused?this.generatedError=y:h.error(y)}).on("end",function(){h.isPaused?h._upstreamEnded=!0:h.end()})},a.prototype.pause=function(){return!!c.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},U.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(_,U,j){var d=_("readable-stream").Readable;function c(a,l,h){d.call(this,l),this._helper=a;var y=this;a.on("data",function(b,w){y.push(b)||y._helper.pause(),h&&h(w)}).on("error",function(b){y.emit("error",b)}).on("end",function(){y.push(null)})}_("../utils").inherits(c,d),c.prototype._read=function(){this._helper.resume()},U.exports=c},{"../utils":32,"readable-stream":16}],14:[function(_,U,j){U.exports={isNode:typeof Buffer<"u",newBufferFrom:function(d,c){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(d,c);if(typeof d=="number")throw new Error('The "data" argument must not be a number');return new Buffer(d,c)},allocBuffer:function(d){if(Buffer.alloc)return Buffer.alloc(d);var c=new Buffer(d);return c.fill(0),c},isBuffer:function(d){return Buffer.isBuffer(d)},isStream:function(d){return d&&typeof d.on=="function"&&typeof d.pause=="function"&&typeof d.resume=="function"}}},{}],15:[function(_,U,j){function d(N,P,B){var M,O=a.getTypeOf(P),G=a.extend(B||{},y);G.date=G.date||new Date,G.compression!==null&&(G.compression=G.compression.toUpperCase()),typeof G.unixPermissions=="string"&&(G.unixPermissions=parseInt(G.unixPermissions,8)),G.unixPermissions&&16384&G.unixPermissions&&(G.dir=!0),G.dosPermissions&&16&G.dosPermissions&&(G.dir=!0),G.dir&&(N=o(N)),G.createFolders&&(M=f(N))&&m.call(this,M,!0);var J=O==="string"&&G.binary===!1&&G.base64===!1;B&&B.binary!==void 0||(G.binary=!J),(P instanceof b&&P.uncompressedSize===0||G.dir||!P||P.length===0)&&(G.base64=!1,G.binary=!0,P="",G.compression="STORE",O="string");var g=null;g=P instanceof b||P instanceof l?P:p.isNode&&p.isStream(P)?new s(N,P):a.prepareContent(N,P,G.binary,G.optimizedBinaryString,G.base64);var R=new w(N,g,G);this.files[N]=R}var c=_("./utf8"),a=_("./utils"),l=_("./stream/GenericWorker"),h=_("./stream/StreamHelper"),y=_("./defaults"),b=_("./compressedObject"),w=_("./zipObject"),i=_("./generate"),p=_("./nodejsUtils"),s=_("./nodejs/NodejsStreamInputAdapter"),f=function(N){N.slice(-1)==="/"&&(N=N.substring(0,N.length-1));var P=N.lastIndexOf("/");return 0<P?N.substring(0,P):""},o=function(N){return N.slice(-1)!=="/"&&(N+="/"),N},m=function(N,P){return P=P!==void 0?P:y.createFolders,N=o(N),this.files[N]||d.call(this,N,null,{dir:!0,createFolders:P}),this.files[N]};function v(N){return Object.prototype.toString.call(N)==="[object RegExp]"}var S={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(N){var P,B,M;for(P in this.files)M=this.files[P],(B=P.slice(this.root.length,P.length))&&P.slice(0,this.root.length)===this.root&&N(B,M)},filter:function(N){var P=[];return this.forEach(function(B,M){N(B,M)&&P.push(M)}),P},file:function(N,P,B){if(arguments.length!==1)return N=this.root+N,d.call(this,N,P,B),this;if(v(N)){var M=N;return this.filter(function(G,J){return!J.dir&&M.test(G)})}var O=this.files[this.root+N];return O&&!O.dir?O:null},folder:function(N){if(!N)return this;if(v(N))return this.filter(function(O,G){return G.dir&&N.test(O)});var P=this.root+N,B=m.call(this,P),M=this.clone();return M.root=B.name,M},remove:function(N){N=this.root+N;var P=this.files[N];if(P||(N.slice(-1)!=="/"&&(N+="/"),P=this.files[N]),P&&!P.dir)delete this.files[N];else for(var B=this.filter(function(O,G){return G.name.slice(0,N.length)===N}),M=0;M<B.length;M++)delete this.files[B[M].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(N){var P,B={};try{if((B=a.extend(N||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:c.utf8encode})).type=B.type.toLowerCase(),B.compression=B.compression.toUpperCase(),B.type==="binarystring"&&(B.type="string"),!B.type)throw new Error("No output type specified.");a.checkSupport(B.type),B.platform!=="darwin"&&B.platform!=="freebsd"&&B.platform!=="linux"&&B.platform!=="sunos"||(B.platform="UNIX"),B.platform==="win32"&&(B.platform="DOS");var M=B.comment||this.comment||"";P=i.generateWorker(this,B,M)}catch(O){(P=new l("error")).error(O)}return new h(P,B.type||"string",B.mimeType)},generateAsync:function(N,P){return this.generateInternalStream(N).accumulate(P)},generateNodeStream:function(N,P){return(N=N||{}).type||(N.type="nodebuffer"),this.generateInternalStream(N).toNodejsStream(P)}};U.exports=S},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(_,U,j){U.exports=_("stream")},{stream:void 0}],17:[function(_,U,j){var d=_("./DataReader");function c(a){d.call(this,a);for(var l=0;l<this.data.length;l++)a[l]=255&a[l]}_("../utils").inherits(c,d),c.prototype.byteAt=function(a){return this.data[this.zero+a]},c.prototype.lastIndexOfSignature=function(a){for(var l=a.charCodeAt(0),h=a.charCodeAt(1),y=a.charCodeAt(2),b=a.charCodeAt(3),w=this.length-4;0<=w;--w)if(this.data[w]===l&&this.data[w+1]===h&&this.data[w+2]===y&&this.data[w+3]===b)return w-this.zero;return-1},c.prototype.readAndCheckSignature=function(a){var l=a.charCodeAt(0),h=a.charCodeAt(1),y=a.charCodeAt(2),b=a.charCodeAt(3),w=this.readData(4);return l===w[0]&&h===w[1]&&y===w[2]&&b===w[3]},c.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},U.exports=c},{"../utils":32,"./DataReader":18}],18:[function(_,U,j){var d=_("../utils");function c(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}c.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var l,h=0;for(this.checkOffset(a),l=this.index+a-1;l>=this.index;l--)h=(h<<8)+this.byteAt(l);return this.index+=a,h},readString:function(a){return d.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},U.exports=c},{"../utils":32}],19:[function(_,U,j){var d=_("./Uint8ArrayReader");function c(a){d.call(this,a)}_("../utils").inherits(c,d),c.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},U.exports=c},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(_,U,j){var d=_("./DataReader");function c(a){d.call(this,a)}_("../utils").inherits(c,d),c.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},c.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},c.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},c.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},U.exports=c},{"../utils":32,"./DataReader":18}],21:[function(_,U,j){var d=_("./ArrayReader");function c(a){d.call(this,a)}_("../utils").inherits(c,d),c.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},U.exports=c},{"../utils":32,"./ArrayReader":17}],22:[function(_,U,j){var d=_("../utils"),c=_("../support"),a=_("./ArrayReader"),l=_("./StringReader"),h=_("./NodeBufferReader"),y=_("./Uint8ArrayReader");U.exports=function(b){var w=d.getTypeOf(b);return d.checkSupport(w),w!=="string"||c.uint8array?w==="nodebuffer"?new h(b):c.uint8array?new y(d.transformTo("uint8array",b)):new a(d.transformTo("array",b)):new l(b)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(_,U,j){j.LOCAL_FILE_HEADER="PK",j.CENTRAL_FILE_HEADER="PK",j.CENTRAL_DIRECTORY_END="PK",j.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",j.ZIP64_CENTRAL_DIRECTORY_END="PK",j.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(_,U,j){var d=_("./GenericWorker"),c=_("../utils");function a(l){d.call(this,"ConvertWorker to "+l),this.destType=l}c.inherits(a,d),a.prototype.processChunk=function(l){this.push({data:c.transformTo(this.destType,l.data),meta:l.meta})},U.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(_,U,j){var d=_("./GenericWorker"),c=_("../crc32");function a(){d.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}_("../utils").inherits(a,d),a.prototype.processChunk=function(l){this.streamInfo.crc32=c(l.data,this.streamInfo.crc32||0),this.push(l)},U.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(_,U,j){var d=_("../utils"),c=_("./GenericWorker");function a(l){c.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}d.inherits(a,c),a.prototype.processChunk=function(l){if(l){var h=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=h+l.data.length}c.prototype.processChunk.call(this,l)},U.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(_,U,j){var d=_("../utils"),c=_("./GenericWorker");function a(l){c.call(this,"DataWorker");var h=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(y){h.dataIsReady=!0,h.data=y,h.max=y&&y.length||0,h.type=d.getTypeOf(y),h.isPaused||h._tickAndRepeat()},function(y){h.error(y)})}d.inherits(a,c),a.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,d.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(d.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,h=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,h);break;case"uint8array":l=this.data.subarray(this.index,h);break;case"array":case"nodebuffer":l=this.data.slice(this.index,h)}return this.index=h,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},U.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(_,U,j){function d(c){this.name=c||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}d.prototype={push:function(c){this.emit("data",c)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(c){this.emit("error",c)}return!0},error:function(c){return!this.isFinished&&(this.isPaused?this.generatedError=c:(this.isFinished=!0,this.emit("error",c),this.previous&&this.previous.error(c),this.cleanUp()),!0)},on:function(c,a){return this._listeners[c].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(c,a){if(this._listeners[c])for(var l=0;l<this._listeners[c].length;l++)this._listeners[c][l].call(this,a)},pipe:function(c){return c.registerPrevious(this)},registerPrevious:function(c){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=c.streamInfo,this.mergeStreamInfo(),this.previous=c;var a=this;return c.on("data",function(l){a.processChunk(l)}),c.on("end",function(){a.end()}),c.on("error",function(l){a.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var c=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),c=!0),this.previous&&this.previous.resume(),!c},flush:function(){},processChunk:function(c){this.push(c)},withStreamInfo:function(c,a){return this.extraStreamInfo[c]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var c in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,c)&&(this.streamInfo[c]=this.extraStreamInfo[c])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var c="Worker "+this.name;return this.previous?this.previous+" -> "+c:c}},U.exports=d},{}],29:[function(_,U,j){var d=_("../utils"),c=_("./ConvertWorker"),a=_("./GenericWorker"),l=_("../base64"),h=_("../support"),y=_("../external"),b=null;if(h.nodestream)try{b=_("../nodejs/NodejsStreamOutputAdapter")}catch{}function w(p,s){return new y.Promise(function(f,o){var m=[],v=p._internalType,S=p._outputType,N=p._mimeType;p.on("data",function(P,B){m.push(P),s&&s(B)}).on("error",function(P){m=[],o(P)}).on("end",function(){try{var P=(function(B,M,O){switch(B){case"blob":return d.newBlob(d.transformTo("arraybuffer",M),O);case"base64":return l.encode(M);default:return d.transformTo(B,M)}})(S,(function(B,M){var O,G=0,J=null,g=0;for(O=0;O<M.length;O++)g+=M[O].length;switch(B){case"string":return M.join("");case"array":return Array.prototype.concat.apply([],M);case"uint8array":for(J=new Uint8Array(g),O=0;O<M.length;O++)J.set(M[O],G),G+=M[O].length;return J;case"nodebuffer":return Buffer.concat(M);default:throw new Error("concat : unsupported type '"+B+"'")}})(v,m),N);f(P)}catch(B){o(B)}m=[]}).resume()})}function i(p,s,f){var o=s;switch(s){case"blob":case"arraybuffer":o="uint8array";break;case"base64":o="string"}try{this._internalType=o,this._outputType=s,this._mimeType=f,d.checkSupport(o),this._worker=p.pipe(new c(o)),p.lock()}catch(m){this._worker=new a("error"),this._worker.error(m)}}i.prototype={accumulate:function(p){return w(this,p)},on:function(p,s){var f=this;return p==="data"?this._worker.on(p,function(o){s.call(f,o.data,o.meta)}):this._worker.on(p,function(){d.delay(s,arguments,f)}),this},resume:function(){return d.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(p){if(d.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new b(this,{objectMode:this._outputType!=="nodebuffer"},p)}},U.exports=i},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(_,U,j){if(j.base64=!0,j.array=!0,j.string=!0,j.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",j.nodebuffer=typeof Buffer<"u",j.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")j.blob=!1;else{var d=new ArrayBuffer(0);try{j.blob=new Blob([d],{type:"application/zip"}).size===0}catch{try{var c=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);c.append(d),j.blob=c.getBlob("application/zip").size===0}catch{j.blob=!1}}}try{j.nodestream=!!_("readable-stream").Readable}catch{j.nodestream=!1}},{"readable-stream":16}],31:[function(_,U,j){for(var d=_("./utils"),c=_("./support"),a=_("./nodejsUtils"),l=_("./stream/GenericWorker"),h=new Array(256),y=0;y<256;y++)h[y]=252<=y?6:248<=y?5:240<=y?4:224<=y?3:192<=y?2:1;h[254]=h[254]=1;function b(){l.call(this,"utf-8 decode"),this.leftOver=null}function w(){l.call(this,"utf-8 encode")}j.utf8encode=function(i){return c.nodebuffer?a.newBufferFrom(i,"utf-8"):(function(p){var s,f,o,m,v,S=p.length,N=0;for(m=0;m<S;m++)(64512&(f=p.charCodeAt(m)))==55296&&m+1<S&&(64512&(o=p.charCodeAt(m+1)))==56320&&(f=65536+(f-55296<<10)+(o-56320),m++),N+=f<128?1:f<2048?2:f<65536?3:4;for(s=c.uint8array?new Uint8Array(N):new Array(N),m=v=0;v<N;m++)(64512&(f=p.charCodeAt(m)))==55296&&m+1<S&&(64512&(o=p.charCodeAt(m+1)))==56320&&(f=65536+(f-55296<<10)+(o-56320),m++),f<128?s[v++]=f:(f<2048?s[v++]=192|f>>>6:(f<65536?s[v++]=224|f>>>12:(s[v++]=240|f>>>18,s[v++]=128|f>>>12&63),s[v++]=128|f>>>6&63),s[v++]=128|63&f);return s})(i)},j.utf8decode=function(i){return c.nodebuffer?d.transformTo("nodebuffer",i).toString("utf-8"):(function(p){var s,f,o,m,v=p.length,S=new Array(2*v);for(s=f=0;s<v;)if((o=p[s++])<128)S[f++]=o;else if(4<(m=h[o]))S[f++]=65533,s+=m-1;else{for(o&=m===2?31:m===3?15:7;1<m&&s<v;)o=o<<6|63&p[s++],m--;1<m?S[f++]=65533:o<65536?S[f++]=o:(o-=65536,S[f++]=55296|o>>10&1023,S[f++]=56320|1023&o)}return S.length!==f&&(S.subarray?S=S.subarray(0,f):S.length=f),d.applyFromCharCode(S)})(i=d.transformTo(c.uint8array?"uint8array":"array",i))},d.inherits(b,l),b.prototype.processChunk=function(i){var p=d.transformTo(c.uint8array?"uint8array":"array",i.data);if(this.leftOver&&this.leftOver.length){if(c.uint8array){var s=p;(p=new Uint8Array(s.length+this.leftOver.length)).set(this.leftOver,0),p.set(s,this.leftOver.length)}else p=this.leftOver.concat(p);this.leftOver=null}var f=(function(m,v){var S;for((v=v||m.length)>m.length&&(v=m.length),S=v-1;0<=S&&(192&m[S])==128;)S--;return S<0||S===0?v:S+h[m[S]]>v?S:v})(p),o=p;f!==p.length&&(c.uint8array?(o=p.subarray(0,f),this.leftOver=p.subarray(f,p.length)):(o=p.slice(0,f),this.leftOver=p.slice(f,p.length))),this.push({data:j.utf8decode(o),meta:i.meta})},b.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:j.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},j.Utf8DecodeWorker=b,d.inherits(w,l),w.prototype.processChunk=function(i){this.push({data:j.utf8encode(i.data),meta:i.meta})},j.Utf8EncodeWorker=w},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(_,U,j){var d=_("./support"),c=_("./base64"),a=_("./nodejsUtils"),l=_("./external");function h(s){return s}function y(s,f){for(var o=0;o<s.length;++o)f[o]=255&s.charCodeAt(o);return f}_("setimmediate"),j.newBlob=function(s,f){j.checkSupport("blob");try{return new Blob([s],{type:f})}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return o.append(s),o.getBlob(f)}catch{throw new Error("Bug : can't construct the Blob.")}}};var b={stringifyByChunk:function(s,f,o){var m=[],v=0,S=s.length;if(S<=o)return String.fromCharCode.apply(null,s);for(;v<S;)f==="array"||f==="nodebuffer"?m.push(String.fromCharCode.apply(null,s.slice(v,Math.min(v+o,S)))):m.push(String.fromCharCode.apply(null,s.subarray(v,Math.min(v+o,S)))),v+=o;return m.join("")},stringifyByChar:function(s){for(var f="",o=0;o<s.length;o++)f+=String.fromCharCode(s[o]);return f},applyCanBeUsed:{uint8array:(function(){try{return d.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return d.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}})()}};function w(s){var f=65536,o=j.getTypeOf(s),m=!0;if(o==="uint8array"?m=b.applyCanBeUsed.uint8array:o==="nodebuffer"&&(m=b.applyCanBeUsed.nodebuffer),m)for(;1<f;)try{return b.stringifyByChunk(s,o,f)}catch{f=Math.floor(f/2)}return b.stringifyByChar(s)}function i(s,f){for(var o=0;o<s.length;o++)f[o]=s[o];return f}j.applyFromCharCode=w;var p={};p.string={string:h,array:function(s){return y(s,new Array(s.length))},arraybuffer:function(s){return p.string.uint8array(s).buffer},uint8array:function(s){return y(s,new Uint8Array(s.length))},nodebuffer:function(s){return y(s,a.allocBuffer(s.length))}},p.array={string:w,array:h,arraybuffer:function(s){return new Uint8Array(s).buffer},uint8array:function(s){return new Uint8Array(s)},nodebuffer:function(s){return a.newBufferFrom(s)}},p.arraybuffer={string:function(s){return w(new Uint8Array(s))},array:function(s){return i(new Uint8Array(s),new Array(s.byteLength))},arraybuffer:h,uint8array:function(s){return new Uint8Array(s)},nodebuffer:function(s){return a.newBufferFrom(new Uint8Array(s))}},p.uint8array={string:w,array:function(s){return i(s,new Array(s.length))},arraybuffer:function(s){return s.buffer},uint8array:h,nodebuffer:function(s){return a.newBufferFrom(s)}},p.nodebuffer={string:w,array:function(s){return i(s,new Array(s.length))},arraybuffer:function(s){return p.nodebuffer.uint8array(s).buffer},uint8array:function(s){return i(s,new Uint8Array(s.length))},nodebuffer:h},j.transformTo=function(s,f){if(f=f||"",!s)return f;j.checkSupport(s);var o=j.getTypeOf(f);return p[o][s](f)},j.resolve=function(s){for(var f=s.split("/"),o=[],m=0;m<f.length;m++){var v=f[m];v==="."||v===""&&m!==0&&m!==f.length-1||(v===".."?o.pop():o.push(v))}return o.join("/")},j.getTypeOf=function(s){return typeof s=="string"?"string":Object.prototype.toString.call(s)==="[object Array]"?"array":d.nodebuffer&&a.isBuffer(s)?"nodebuffer":d.uint8array&&s instanceof Uint8Array?"uint8array":d.arraybuffer&&s instanceof ArrayBuffer?"arraybuffer":void 0},j.checkSupport=function(s){if(!d[s.toLowerCase()])throw new Error(s+" is not supported by this platform")},j.MAX_VALUE_16BITS=65535,j.MAX_VALUE_32BITS=-1,j.pretty=function(s){var f,o,m="";for(o=0;o<(s||"").length;o++)m+="\\x"+((f=s.charCodeAt(o))<16?"0":"")+f.toString(16).toUpperCase();return m},j.delay=function(s,f,o){setImmediate(function(){s.apply(o||null,f||[])})},j.inherits=function(s,f){function o(){}o.prototype=f.prototype,s.prototype=new o},j.extend=function(){var s,f,o={};for(s=0;s<arguments.length;s++)for(f in arguments[s])Object.prototype.hasOwnProperty.call(arguments[s],f)&&o[f]===void 0&&(o[f]=arguments[s][f]);return o},j.prepareContent=function(s,f,o,m,v){return l.Promise.resolve(f).then(function(S){return d.blob&&(S instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(S))!==-1)&&typeof FileReader<"u"?new l.Promise(function(N,P){var B=new FileReader;B.onload=function(M){N(M.target.result)},B.onerror=function(M){P(M.target.error)},B.readAsArrayBuffer(S)}):S}).then(function(S){var N=j.getTypeOf(S);return N?(N==="arraybuffer"?S=j.transformTo("uint8array",S):N==="string"&&(v?S=c.decode(S):o&&m!==!0&&(S=(function(P){return y(P,d.uint8array?new Uint8Array(P.length):new Array(P.length))})(S))),S):l.Promise.reject(new Error("Can't read the data of '"+s+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(_,U,j){var d=_("./reader/readerFor"),c=_("./utils"),a=_("./signature"),l=_("./zipEntry"),h=_("./support");function y(b){this.files=[],this.loadOptions=b}y.prototype={checkSignature:function(b){if(!this.reader.readAndCheckSignature(b)){this.reader.index-=4;var w=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+c.pretty(w)+", expected "+c.pretty(b)+")")}},isSignature:function(b,w){var i=this.reader.index;this.reader.setIndex(b);var p=this.reader.readString(4)===w;return this.reader.setIndex(i),p},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var b=this.reader.readData(this.zipCommentLength),w=h.uint8array?"uint8array":"array",i=c.transformTo(w,b);this.zipComment=this.loadOptions.decodeFileName(i)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var b,w,i,p=this.zip64EndOfCentralSize-44;0<p;)b=this.reader.readInt(2),w=this.reader.readInt(4),i=this.reader.readData(w),this.zip64ExtensibleData[b]={id:b,length:w,value:i}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var b,w;for(b=0;b<this.files.length;b++)w=this.files[b],this.reader.setIndex(w.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),w.readLocalPart(this.reader),w.handleUTF8(),w.processAttributes()},readCentralDir:function(){var b;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(b=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(b);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var b=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(b<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(b);var w=b;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===c.MAX_VALUE_16BITS||this.diskWithCentralDirStart===c.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===c.MAX_VALUE_16BITS||this.centralDirRecords===c.MAX_VALUE_16BITS||this.centralDirSize===c.MAX_VALUE_32BITS||this.centralDirOffset===c.MAX_VALUE_32BITS){if(this.zip64=!0,(b=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(b),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var i=this.centralDirOffset+this.centralDirSize;this.zip64&&(i+=20,i+=12+this.zip64EndOfCentralSize);var p=w-i;if(0<p)this.isSignature(w,a.CENTRAL_FILE_HEADER)||(this.reader.zero=p);else if(p<0)throw new Error("Corrupted zip: missing "+Math.abs(p)+" bytes.")},prepareReader:function(b){this.reader=d(b)},load:function(b){this.prepareReader(b),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},U.exports=y},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(_,U,j){var d=_("./reader/readerFor"),c=_("./utils"),a=_("./compressedObject"),l=_("./crc32"),h=_("./utf8"),y=_("./compressions"),b=_("./support");function w(i,p){this.options=i,this.loadOptions=p}w.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(i){var p,s;if(i.skip(22),this.fileNameLength=i.readInt(2),s=i.readInt(2),this.fileName=i.readData(this.fileNameLength),i.skip(s),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((p=(function(f){for(var o in y)if(Object.prototype.hasOwnProperty.call(y,o)&&y[o].magic===f)return y[o];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+c.pretty(this.compressionMethod)+" unknown (inner file : "+c.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,p,i.readData(this.compressedSize))},readCentralPart:function(i){this.versionMadeBy=i.readInt(2),i.skip(2),this.bitFlag=i.readInt(2),this.compressionMethod=i.readString(2),this.date=i.readDate(),this.crc32=i.readInt(4),this.compressedSize=i.readInt(4),this.uncompressedSize=i.readInt(4);var p=i.readInt(2);if(this.extraFieldsLength=i.readInt(2),this.fileCommentLength=i.readInt(2),this.diskNumberStart=i.readInt(2),this.internalFileAttributes=i.readInt(2),this.externalFileAttributes=i.readInt(4),this.localHeaderOffset=i.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");i.skip(p),this.readExtraFields(i),this.parseZIP64ExtraField(i),this.fileComment=i.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var i=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),i==0&&(this.dosPermissions=63&this.externalFileAttributes),i==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var i=d(this.extraFields[1].value);this.uncompressedSize===c.MAX_VALUE_32BITS&&(this.uncompressedSize=i.readInt(8)),this.compressedSize===c.MAX_VALUE_32BITS&&(this.compressedSize=i.readInt(8)),this.localHeaderOffset===c.MAX_VALUE_32BITS&&(this.localHeaderOffset=i.readInt(8)),this.diskNumberStart===c.MAX_VALUE_32BITS&&(this.diskNumberStart=i.readInt(4))}},readExtraFields:function(i){var p,s,f,o=i.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});i.index+4<o;)p=i.readInt(2),s=i.readInt(2),f=i.readData(s),this.extraFields[p]={id:p,length:s,value:f};i.setIndex(o)},handleUTF8:function(){var i=b.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=h.utf8decode(this.fileName),this.fileCommentStr=h.utf8decode(this.fileComment);else{var p=this.findExtraFieldUnicodePath();if(p!==null)this.fileNameStr=p;else{var s=c.transformTo(i,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(s)}var f=this.findExtraFieldUnicodeComment();if(f!==null)this.fileCommentStr=f;else{var o=c.transformTo(i,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(o)}}},findExtraFieldUnicodePath:function(){var i=this.extraFields[28789];if(i){var p=d(i.value);return p.readInt(1)!==1||l(this.fileName)!==p.readInt(4)?null:h.utf8decode(p.readData(i.length-5))}return null},findExtraFieldUnicodeComment:function(){var i=this.extraFields[25461];if(i){var p=d(i.value);return p.readInt(1)!==1||l(this.fileComment)!==p.readInt(4)?null:h.utf8decode(p.readData(i.length-5))}return null}},U.exports=w},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(_,U,j){function d(p,s,f){this.name=p,this.dir=f.dir,this.date=f.date,this.comment=f.comment,this.unixPermissions=f.unixPermissions,this.dosPermissions=f.dosPermissions,this._data=s,this._dataBinary=f.binary,this.options={compression:f.compression,compressionOptions:f.compressionOptions}}var c=_("./stream/StreamHelper"),a=_("./stream/DataWorker"),l=_("./utf8"),h=_("./compressedObject"),y=_("./stream/GenericWorker");d.prototype={internalStream:function(p){var s=null,f="string";try{if(!p)throw new Error("No output type specified.");var o=(f=p.toLowerCase())==="string"||f==="text";f!=="binarystring"&&f!=="text"||(f="string"),s=this._decompressWorker();var m=!this._dataBinary;m&&!o&&(s=s.pipe(new l.Utf8EncodeWorker)),!m&&o&&(s=s.pipe(new l.Utf8DecodeWorker))}catch(v){(s=new y("error")).error(v)}return new c(s,f,"")},async:function(p,s){return this.internalStream(p).accumulate(s)},nodeStream:function(p,s){return this.internalStream(p||"nodebuffer").toNodejsStream(s)},_compressWorker:function(p,s){if(this._data instanceof h&&this._data.compression.magic===p.magic)return this._data.getCompressedWorker();var f=this._decompressWorker();return this._dataBinary||(f=f.pipe(new l.Utf8EncodeWorker)),h.createWorkerFrom(f,p,s)},_decompressWorker:function(){return this._data instanceof h?this._data.getContentWorker():this._data instanceof y?this._data:new a(this._data)}};for(var b=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],w=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},i=0;i<b.length;i++)d.prototype[b[i]]=w;U.exports=d},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(_,U,j){(function(d){var c,a,l=d.MutationObserver||d.WebKitMutationObserver;if(l){var h=0,y=new l(p),b=d.document.createTextNode("");y.observe(b,{characterData:!0}),c=function(){b.data=h=++h%2}}else if(d.setImmediate||d.MessageChannel===void 0)c="document"in d&&"onreadystatechange"in d.document.createElement("script")?function(){var s=d.document.createElement("script");s.onreadystatechange=function(){p(),s.onreadystatechange=null,s.parentNode.removeChild(s),s=null},d.document.documentElement.appendChild(s)}:function(){setTimeout(p,0)};else{var w=new d.MessageChannel;w.port1.onmessage=p,c=function(){w.port2.postMessage(0)}}var i=[];function p(){var s,f;a=!0;for(var o=i.length;o;){for(f=i,i=[],s=-1;++s<o;)f[s]();o=i.length}a=!1}U.exports=function(s){i.push(s)!==1||a||c()}}).call(this,typeof Pe<"u"?Pe:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(_,U,j){var d=_("immediate");function c(){}var a={},l=["REJECTED"],h=["FULFILLED"],y=["PENDING"];function b(o){if(typeof o!="function")throw new TypeError("resolver must be a function");this.state=y,this.queue=[],this.outcome=void 0,o!==c&&s(this,o)}function w(o,m,v){this.promise=o,typeof m=="function"&&(this.onFulfilled=m,this.callFulfilled=this.otherCallFulfilled),typeof v=="function"&&(this.onRejected=v,this.callRejected=this.otherCallRejected)}function i(o,m,v){d(function(){var S;try{S=m(v)}catch(N){return a.reject(o,N)}S===o?a.reject(o,new TypeError("Cannot resolve promise with itself")):a.resolve(o,S)})}function p(o){var m=o&&o.then;if(o&&(typeof o=="object"||typeof o=="function")&&typeof m=="function")return function(){m.apply(o,arguments)}}function s(o,m){var v=!1;function S(B){v||(v=!0,a.reject(o,B))}function N(B){v||(v=!0,a.resolve(o,B))}var P=f(function(){m(N,S)});P.status==="error"&&S(P.value)}function f(o,m){var v={};try{v.value=o(m),v.status="success"}catch(S){v.status="error",v.value=S}return v}(U.exports=b).prototype.finally=function(o){if(typeof o!="function")return this;var m=this.constructor;return this.then(function(v){return m.resolve(o()).then(function(){return v})},function(v){return m.resolve(o()).then(function(){throw v})})},b.prototype.catch=function(o){return this.then(null,o)},b.prototype.then=function(o,m){if(typeof o!="function"&&this.state===h||typeof m!="function"&&this.state===l)return this;var v=new this.constructor(c);return this.state!==y?i(v,this.state===h?o:m,this.outcome):this.queue.push(new w(v,o,m)),v},w.prototype.callFulfilled=function(o){a.resolve(this.promise,o)},w.prototype.otherCallFulfilled=function(o){i(this.promise,this.onFulfilled,o)},w.prototype.callRejected=function(o){a.reject(this.promise,o)},w.prototype.otherCallRejected=function(o){i(this.promise,this.onRejected,o)},a.resolve=function(o,m){var v=f(p,m);if(v.status==="error")return a.reject(o,v.value);var S=v.value;if(S)s(o,S);else{o.state=h,o.outcome=m;for(var N=-1,P=o.queue.length;++N<P;)o.queue[N].callFulfilled(m)}return o},a.reject=function(o,m){o.state=l,o.outcome=m;for(var v=-1,S=o.queue.length;++v<S;)o.queue[v].callRejected(m);return o},b.resolve=function(o){return o instanceof this?o:a.resolve(new this(c),o)},b.reject=function(o){var m=new this(c);return a.reject(m,o)},b.all=function(o){var m=this;if(Object.prototype.toString.call(o)!=="[object Array]")return this.reject(new TypeError("must be an array"));var v=o.length,S=!1;if(!v)return this.resolve([]);for(var N=new Array(v),P=0,B=-1,M=new this(c);++B<v;)O(o[B],B);return M;function O(G,J){m.resolve(G).then(function(g){N[J]=g,++P!==v||S||(S=!0,a.resolve(M,N))},function(g){S||(S=!0,a.reject(M,g))})}},b.race=function(o){var m=this;if(Object.prototype.toString.call(o)!=="[object Array]")return this.reject(new TypeError("must be an array"));var v=o.length,S=!1;if(!v)return this.resolve([]);for(var N=-1,P=new this(c);++N<v;)B=o[N],m.resolve(B).then(function(M){S||(S=!0,a.resolve(P,M))},function(M){S||(S=!0,a.reject(P,M))});var B;return P}},{immediate:36}],38:[function(_,U,j){var d={};(0,_("./lib/utils/common").assign)(d,_("./lib/deflate"),_("./lib/inflate"),_("./lib/zlib/constants")),U.exports=d},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(_,U,j){var d=_("./zlib/deflate"),c=_("./utils/common"),a=_("./utils/strings"),l=_("./zlib/messages"),h=_("./zlib/zstream"),y=Object.prototype.toString,b=0,w=-1,i=0,p=8;function s(o){if(!(this instanceof s))return new s(o);this.options=c.assign({level:w,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:i,to:""},o||{});var m=this.options;m.raw&&0<m.windowBits?m.windowBits=-m.windowBits:m.gzip&&0<m.windowBits&&m.windowBits<16&&(m.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var v=d.deflateInit2(this.strm,m.level,m.method,m.windowBits,m.memLevel,m.strategy);if(v!==b)throw new Error(l[v]);if(m.header&&d.deflateSetHeader(this.strm,m.header),m.dictionary){var S;if(S=typeof m.dictionary=="string"?a.string2buf(m.dictionary):y.call(m.dictionary)==="[object ArrayBuffer]"?new Uint8Array(m.dictionary):m.dictionary,(v=d.deflateSetDictionary(this.strm,S))!==b)throw new Error(l[v]);this._dict_set=!0}}function f(o,m){var v=new s(m);if(v.push(o,!0),v.err)throw v.msg||l[v.err];return v.result}s.prototype.push=function(o,m){var v,S,N=this.strm,P=this.options.chunkSize;if(this.ended)return!1;S=m===~~m?m:m===!0?4:0,typeof o=="string"?N.input=a.string2buf(o):y.call(o)==="[object ArrayBuffer]"?N.input=new Uint8Array(o):N.input=o,N.next_in=0,N.avail_in=N.input.length;do{if(N.avail_out===0&&(N.output=new c.Buf8(P),N.next_out=0,N.avail_out=P),(v=d.deflate(N,S))!==1&&v!==b)return this.onEnd(v),!(this.ended=!0);N.avail_out!==0&&(N.avail_in!==0||S!==4&&S!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(c.shrinkBuf(N.output,N.next_out))):this.onData(c.shrinkBuf(N.output,N.next_out)))}while((0<N.avail_in||N.avail_out===0)&&v!==1);return S===4?(v=d.deflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===b):S!==2||(this.onEnd(b),!(N.avail_out=0))},s.prototype.onData=function(o){this.chunks.push(o)},s.prototype.onEnd=function(o){o===b&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=o,this.msg=this.strm.msg},j.Deflate=s,j.deflate=f,j.deflateRaw=function(o,m){return(m=m||{}).raw=!0,f(o,m)},j.gzip=function(o,m){return(m=m||{}).gzip=!0,f(o,m)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(_,U,j){var d=_("./zlib/inflate"),c=_("./utils/common"),a=_("./utils/strings"),l=_("./zlib/constants"),h=_("./zlib/messages"),y=_("./zlib/zstream"),b=_("./zlib/gzheader"),w=Object.prototype.toString;function i(s){if(!(this instanceof i))return new i(s);this.options=c.assign({chunkSize:16384,windowBits:0,to:""},s||{});var f=this.options;f.raw&&0<=f.windowBits&&f.windowBits<16&&(f.windowBits=-f.windowBits,f.windowBits===0&&(f.windowBits=-15)),!(0<=f.windowBits&&f.windowBits<16)||s&&s.windowBits||(f.windowBits+=32),15<f.windowBits&&f.windowBits<48&&(15&f.windowBits)==0&&(f.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new y,this.strm.avail_out=0;var o=d.inflateInit2(this.strm,f.windowBits);if(o!==l.Z_OK)throw new Error(h[o]);this.header=new b,d.inflateGetHeader(this.strm,this.header)}function p(s,f){var o=new i(f);if(o.push(s,!0),o.err)throw o.msg||h[o.err];return o.result}i.prototype.push=function(s,f){var o,m,v,S,N,P,B=this.strm,M=this.options.chunkSize,O=this.options.dictionary,G=!1;if(this.ended)return!1;m=f===~~f?f:f===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof s=="string"?B.input=a.binstring2buf(s):w.call(s)==="[object ArrayBuffer]"?B.input=new Uint8Array(s):B.input=s,B.next_in=0,B.avail_in=B.input.length;do{if(B.avail_out===0&&(B.output=new c.Buf8(M),B.next_out=0,B.avail_out=M),(o=d.inflate(B,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&O&&(P=typeof O=="string"?a.string2buf(O):w.call(O)==="[object ArrayBuffer]"?new Uint8Array(O):O,o=d.inflateSetDictionary(this.strm,P)),o===l.Z_BUF_ERROR&&G===!0&&(o=l.Z_OK,G=!1),o!==l.Z_STREAM_END&&o!==l.Z_OK)return this.onEnd(o),!(this.ended=!0);B.next_out&&(B.avail_out!==0&&o!==l.Z_STREAM_END&&(B.avail_in!==0||m!==l.Z_FINISH&&m!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(v=a.utf8border(B.output,B.next_out),S=B.next_out-v,N=a.buf2string(B.output,v),B.next_out=S,B.avail_out=M-S,S&&c.arraySet(B.output,B.output,v,S,0),this.onData(N)):this.onData(c.shrinkBuf(B.output,B.next_out)))),B.avail_in===0&&B.avail_out===0&&(G=!0)}while((0<B.avail_in||B.avail_out===0)&&o!==l.Z_STREAM_END);return o===l.Z_STREAM_END&&(m=l.Z_FINISH),m===l.Z_FINISH?(o=d.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===l.Z_OK):m!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(B.avail_out=0))},i.prototype.onData=function(s){this.chunks.push(s)},i.prototype.onEnd=function(s){s===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=s,this.msg=this.strm.msg},j.Inflate=i,j.inflate=p,j.inflateRaw=function(s,f){return(f=f||{}).raw=!0,p(s,f)},j.ungzip=p},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(_,U,j){var d=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";j.assign=function(l){for(var h=Array.prototype.slice.call(arguments,1);h.length;){var y=h.shift();if(y){if(typeof y!="object")throw new TypeError(y+"must be non-object");for(var b in y)y.hasOwnProperty(b)&&(l[b]=y[b])}}return l},j.shrinkBuf=function(l,h){return l.length===h?l:l.subarray?l.subarray(0,h):(l.length=h,l)};var c={arraySet:function(l,h,y,b,w){if(h.subarray&&l.subarray)l.set(h.subarray(y,y+b),w);else for(var i=0;i<b;i++)l[w+i]=h[y+i]},flattenChunks:function(l){var h,y,b,w,i,p;for(h=b=0,y=l.length;h<y;h++)b+=l[h].length;for(p=new Uint8Array(b),h=w=0,y=l.length;h<y;h++)i=l[h],p.set(i,w),w+=i.length;return p}},a={arraySet:function(l,h,y,b,w){for(var i=0;i<b;i++)l[w+i]=h[y+i]},flattenChunks:function(l){return[].concat.apply([],l)}};j.setTyped=function(l){l?(j.Buf8=Uint8Array,j.Buf16=Uint16Array,j.Buf32=Int32Array,j.assign(j,c)):(j.Buf8=Array,j.Buf16=Array,j.Buf32=Array,j.assign(j,a))},j.setTyped(d)},{}],42:[function(_,U,j){var d=_("./common"),c=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{c=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var l=new d.Buf8(256),h=0;h<256;h++)l[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;function y(b,w){if(w<65537&&(b.subarray&&a||!b.subarray&&c))return String.fromCharCode.apply(null,d.shrinkBuf(b,w));for(var i="",p=0;p<w;p++)i+=String.fromCharCode(b[p]);return i}l[254]=l[254]=1,j.string2buf=function(b){var w,i,p,s,f,o=b.length,m=0;for(s=0;s<o;s++)(64512&(i=b.charCodeAt(s)))==55296&&s+1<o&&(64512&(p=b.charCodeAt(s+1)))==56320&&(i=65536+(i-55296<<10)+(p-56320),s++),m+=i<128?1:i<2048?2:i<65536?3:4;for(w=new d.Buf8(m),s=f=0;f<m;s++)(64512&(i=b.charCodeAt(s)))==55296&&s+1<o&&(64512&(p=b.charCodeAt(s+1)))==56320&&(i=65536+(i-55296<<10)+(p-56320),s++),i<128?w[f++]=i:(i<2048?w[f++]=192|i>>>6:(i<65536?w[f++]=224|i>>>12:(w[f++]=240|i>>>18,w[f++]=128|i>>>12&63),w[f++]=128|i>>>6&63),w[f++]=128|63&i);return w},j.buf2binstring=function(b){return y(b,b.length)},j.binstring2buf=function(b){for(var w=new d.Buf8(b.length),i=0,p=w.length;i<p;i++)w[i]=b.charCodeAt(i);return w},j.buf2string=function(b,w){var i,p,s,f,o=w||b.length,m=new Array(2*o);for(i=p=0;i<o;)if((s=b[i++])<128)m[p++]=s;else if(4<(f=l[s]))m[p++]=65533,i+=f-1;else{for(s&=f===2?31:f===3?15:7;1<f&&i<o;)s=s<<6|63&b[i++],f--;1<f?m[p++]=65533:s<65536?m[p++]=s:(s-=65536,m[p++]=55296|s>>10&1023,m[p++]=56320|1023&s)}return y(m,p)},j.utf8border=function(b,w){var i;for((w=w||b.length)>b.length&&(w=b.length),i=w-1;0<=i&&(192&b[i])==128;)i--;return i<0||i===0?w:i+l[b[i]]>w?i:w}},{"./common":41}],43:[function(_,U,j){U.exports=function(d,c,a,l){for(var h=65535&d|0,y=d>>>16&65535|0,b=0;a!==0;){for(a-=b=2e3<a?2e3:a;y=y+(h=h+c[l++]|0)|0,--b;);h%=65521,y%=65521}return h|y<<16|0}},{}],44:[function(_,U,j){U.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(_,U,j){var d=(function(){for(var c,a=[],l=0;l<256;l++){c=l;for(var h=0;h<8;h++)c=1&c?3988292384^c>>>1:c>>>1;a[l]=c}return a})();U.exports=function(c,a,l,h){var y=d,b=h+l;c^=-1;for(var w=h;w<b;w++)c=c>>>8^y[255&(c^a[w])];return-1^c}},{}],46:[function(_,U,j){var d,c=_("../utils/common"),a=_("./trees"),l=_("./adler32"),h=_("./crc32"),y=_("./messages"),b=0,w=4,i=0,p=-2,s=-1,f=4,o=2,m=8,v=9,S=286,N=30,P=19,B=2*S+1,M=15,O=3,G=258,J=G+O+1,g=42,R=113,r=1,T=2,re=3,F=4;function se(t,A){return t.msg=y[A],A}function W(t){return(t<<1)-(4<t?9:0)}function te(t){for(var A=t.length;0<=--A;)t[A]=0}function I(t){var A=t.state,z=A.pending;z>t.avail_out&&(z=t.avail_out),z!==0&&(c.arraySet(t.output,A.pending_buf,A.pending_out,z,t.next_out),t.next_out+=z,A.pending_out+=z,t.total_out+=z,t.avail_out-=z,A.pending-=z,A.pending===0&&(A.pending_out=0))}function E(t,A){a._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,A),t.block_start=t.strstart,I(t.strm)}function X(t,A){t.pending_buf[t.pending++]=A}function K(t,A){t.pending_buf[t.pending++]=A>>>8&255,t.pending_buf[t.pending++]=255&A}function V(t,A){var z,u,n=t.max_chain_length,k=t.strstart,D=t.prev_length,L=t.nice_match,C=t.strstart>t.w_size-J?t.strstart-(t.w_size-J):0,$=t.window,Y=t.w_mask,q=t.prev,Q=t.strstart+G,de=$[k+D-1],ie=$[k+D];t.prev_length>=t.good_match&&(n>>=2),L>t.lookahead&&(L=t.lookahead);do if($[(z=A)+D]===ie&&$[z+D-1]===de&&$[z]===$[k]&&$[++z]===$[k+1]){k+=2,z++;do;while($[++k]===$[++z]&&$[++k]===$[++z]&&$[++k]===$[++z]&&$[++k]===$[++z]&&$[++k]===$[++z]&&$[++k]===$[++z]&&$[++k]===$[++z]&&$[++k]===$[++z]&&k<Q);if(u=G-(Q-k),k=Q-G,D<u){if(t.match_start=A,L<=(D=u))break;de=$[k+D-1],ie=$[k+D]}}while((A=q[A&Y])>C&&--n!=0);return D<=t.lookahead?D:t.lookahead}function me(t){var A,z,u,n,k,D,L,C,$,Y,q=t.w_size;do{if(n=t.window_size-t.lookahead-t.strstart,t.strstart>=q+(q-J)){for(c.arraySet(t.window,t.window,q,q,0),t.match_start-=q,t.strstart-=q,t.block_start-=q,A=z=t.hash_size;u=t.head[--A],t.head[A]=q<=u?u-q:0,--z;);for(A=z=q;u=t.prev[--A],t.prev[A]=q<=u?u-q:0,--z;);n+=q}if(t.strm.avail_in===0)break;if(D=t.strm,L=t.window,C=t.strstart+t.lookahead,$=n,Y=void 0,Y=D.avail_in,$<Y&&(Y=$),z=Y===0?0:(D.avail_in-=Y,c.arraySet(L,D.input,D.next_in,Y,C),D.state.wrap===1?D.adler=l(D.adler,L,Y,C):D.state.wrap===2&&(D.adler=h(D.adler,L,Y,C)),D.next_in+=Y,D.total_in+=Y,Y),t.lookahead+=z,t.lookahead+t.insert>=O)for(k=t.strstart-t.insert,t.ins_h=t.window[k],t.ins_h=(t.ins_h<<t.hash_shift^t.window[k+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[k+O-1])&t.hash_mask,t.prev[k&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=k,k++,t.insert--,!(t.lookahead+t.insert<O)););}while(t.lookahead<J&&t.strm.avail_in!==0)}function ce(t,A){for(var z,u;;){if(t.lookahead<J){if(me(t),t.lookahead<J&&A===b)return r;if(t.lookahead===0)break}if(z=0,t.lookahead>=O&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+O-1])&t.hash_mask,z=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),z!==0&&t.strstart-z<=t.w_size-J&&(t.match_length=V(t,z)),t.match_length>=O)if(u=a._tr_tally(t,t.strstart-t.match_start,t.match_length-O),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=O){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+O-1])&t.hash_mask,z=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,--t.match_length!=0;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else u=a._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(u&&(E(t,!1),t.strm.avail_out===0))return r}return t.insert=t.strstart<O-1?t.strstart:O-1,A===w?(E(t,!0),t.strm.avail_out===0?re:F):t.last_lit&&(E(t,!1),t.strm.avail_out===0)?r:T}function ae(t,A){for(var z,u,n;;){if(t.lookahead<J){if(me(t),t.lookahead<J&&A===b)return r;if(t.lookahead===0)break}if(z=0,t.lookahead>=O&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+O-1])&t.hash_mask,z=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=O-1,z!==0&&t.prev_length<t.max_lazy_match&&t.strstart-z<=t.w_size-J&&(t.match_length=V(t,z),t.match_length<=5&&(t.strategy===1||t.match_length===O&&4096<t.strstart-t.match_start)&&(t.match_length=O-1)),t.prev_length>=O&&t.match_length<=t.prev_length){for(n=t.strstart+t.lookahead-O,u=a._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-O),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=n&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+O-1])&t.hash_mask,z=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),--t.prev_length!=0;);if(t.match_available=0,t.match_length=O-1,t.strstart++,u&&(E(t,!1),t.strm.avail_out===0))return r}else if(t.match_available){if((u=a._tr_tally(t,0,t.window[t.strstart-1]))&&E(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return r}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(u=a._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<O-1?t.strstart:O-1,A===w?(E(t,!0),t.strm.avail_out===0?re:F):t.last_lit&&(E(t,!1),t.strm.avail_out===0)?r:T}function oe(t,A,z,u,n){this.good_length=t,this.max_lazy=A,this.nice_length=z,this.max_chain=u,this.func=n}function xe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=m,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new c.Buf16(2*B),this.dyn_dtree=new c.Buf16(2*(2*N+1)),this.bl_tree=new c.Buf16(2*(2*P+1)),te(this.dyn_ltree),te(this.dyn_dtree),te(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new c.Buf16(M+1),this.heap=new c.Buf16(2*S+1),te(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new c.Buf16(2*S+1),te(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function he(t){var A;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=o,(A=t.state).pending=0,A.pending_out=0,A.wrap<0&&(A.wrap=-A.wrap),A.status=A.wrap?g:R,t.adler=A.wrap===2?0:1,A.last_flush=b,a._tr_init(A),i):se(t,p)}function je(t){var A=he(t);return A===i&&(function(z){z.window_size=2*z.w_size,te(z.head),z.max_lazy_match=d[z.level].max_lazy,z.good_match=d[z.level].good_length,z.nice_match=d[z.level].nice_length,z.max_chain_length=d[z.level].max_chain,z.strstart=0,z.block_start=0,z.lookahead=0,z.insert=0,z.match_length=z.prev_length=O-1,z.match_available=0,z.ins_h=0})(t.state),A}function ve(t,A,z,u,n,k){if(!t)return p;var D=1;if(A===s&&(A=6),u<0?(D=0,u=-u):15<u&&(D=2,u-=16),n<1||v<n||z!==m||u<8||15<u||A<0||9<A||k<0||f<k)return se(t,p);u===8&&(u=9);var L=new xe;return(t.state=L).strm=t,L.wrap=D,L.gzhead=null,L.w_bits=u,L.w_size=1<<L.w_bits,L.w_mask=L.w_size-1,L.hash_bits=n+7,L.hash_size=1<<L.hash_bits,L.hash_mask=L.hash_size-1,L.hash_shift=~~((L.hash_bits+O-1)/O),L.window=new c.Buf8(2*L.w_size),L.head=new c.Buf16(L.hash_size),L.prev=new c.Buf16(L.w_size),L.lit_bufsize=1<<n+6,L.pending_buf_size=4*L.lit_bufsize,L.pending_buf=new c.Buf8(L.pending_buf_size),L.d_buf=1*L.lit_bufsize,L.l_buf=3*L.lit_bufsize,L.level=A,L.strategy=k,L.method=z,je(t)}d=[new oe(0,0,0,0,function(t,A){var z=65535;for(z>t.pending_buf_size-5&&(z=t.pending_buf_size-5);;){if(t.lookahead<=1){if(me(t),t.lookahead===0&&A===b)return r;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;var u=t.block_start+z;if((t.strstart===0||t.strstart>=u)&&(t.lookahead=t.strstart-u,t.strstart=u,E(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-J&&(E(t,!1),t.strm.avail_out===0))return r}return t.insert=0,A===w?(E(t,!0),t.strm.avail_out===0?re:F):(t.strstart>t.block_start&&(E(t,!1),t.strm.avail_out),r)}),new oe(4,4,8,4,ce),new oe(4,5,16,8,ce),new oe(4,6,32,32,ce),new oe(4,4,16,16,ae),new oe(8,16,32,32,ae),new oe(8,16,128,128,ae),new oe(8,32,128,256,ae),new oe(32,128,258,1024,ae),new oe(32,258,258,4096,ae)],j.deflateInit=function(t,A){return ve(t,A,m,15,8,0)},j.deflateInit2=ve,j.deflateReset=je,j.deflateResetKeep=he,j.deflateSetHeader=function(t,A){return t&&t.state?t.state.wrap!==2?p:(t.state.gzhead=A,i):p},j.deflate=function(t,A){var z,u,n,k;if(!t||!t.state||5<A||A<0)return t?se(t,p):p;if(u=t.state,!t.output||!t.input&&t.avail_in!==0||u.status===666&&A!==w)return se(t,t.avail_out===0?-5:p);if(u.strm=t,z=u.last_flush,u.last_flush=A,u.status===g)if(u.wrap===2)t.adler=0,X(u,31),X(u,139),X(u,8),u.gzhead?(X(u,(u.gzhead.text?1:0)+(u.gzhead.hcrc?2:0)+(u.gzhead.extra?4:0)+(u.gzhead.name?8:0)+(u.gzhead.comment?16:0)),X(u,255&u.gzhead.time),X(u,u.gzhead.time>>8&255),X(u,u.gzhead.time>>16&255),X(u,u.gzhead.time>>24&255),X(u,u.level===9?2:2<=u.strategy||u.level<2?4:0),X(u,255&u.gzhead.os),u.gzhead.extra&&u.gzhead.extra.length&&(X(u,255&u.gzhead.extra.length),X(u,u.gzhead.extra.length>>8&255)),u.gzhead.hcrc&&(t.adler=h(t.adler,u.pending_buf,u.pending,0)),u.gzindex=0,u.status=69):(X(u,0),X(u,0),X(u,0),X(u,0),X(u,0),X(u,u.level===9?2:2<=u.strategy||u.level<2?4:0),X(u,3),u.status=R);else{var D=m+(u.w_bits-8<<4)<<8;D|=(2<=u.strategy||u.level<2?0:u.level<6?1:u.level===6?2:3)<<6,u.strstart!==0&&(D|=32),D+=31-D%31,u.status=R,K(u,D),u.strstart!==0&&(K(u,t.adler>>>16),K(u,65535&t.adler)),t.adler=1}if(u.status===69)if(u.gzhead.extra){for(n=u.pending;u.gzindex<(65535&u.gzhead.extra.length)&&(u.pending!==u.pending_buf_size||(u.gzhead.hcrc&&u.pending>n&&(t.adler=h(t.adler,u.pending_buf,u.pending-n,n)),I(t),n=u.pending,u.pending!==u.pending_buf_size));)X(u,255&u.gzhead.extra[u.gzindex]),u.gzindex++;u.gzhead.hcrc&&u.pending>n&&(t.adler=h(t.adler,u.pending_buf,u.pending-n,n)),u.gzindex===u.gzhead.extra.length&&(u.gzindex=0,u.status=73)}else u.status=73;if(u.status===73)if(u.gzhead.name){n=u.pending;do{if(u.pending===u.pending_buf_size&&(u.gzhead.hcrc&&u.pending>n&&(t.adler=h(t.adler,u.pending_buf,u.pending-n,n)),I(t),n=u.pending,u.pending===u.pending_buf_size)){k=1;break}k=u.gzindex<u.gzhead.name.length?255&u.gzhead.name.charCodeAt(u.gzindex++):0,X(u,k)}while(k!==0);u.gzhead.hcrc&&u.pending>n&&(t.adler=h(t.adler,u.pending_buf,u.pending-n,n)),k===0&&(u.gzindex=0,u.status=91)}else u.status=91;if(u.status===91)if(u.gzhead.comment){n=u.pending;do{if(u.pending===u.pending_buf_size&&(u.gzhead.hcrc&&u.pending>n&&(t.adler=h(t.adler,u.pending_buf,u.pending-n,n)),I(t),n=u.pending,u.pending===u.pending_buf_size)){k=1;break}k=u.gzindex<u.gzhead.comment.length?255&u.gzhead.comment.charCodeAt(u.gzindex++):0,X(u,k)}while(k!==0);u.gzhead.hcrc&&u.pending>n&&(t.adler=h(t.adler,u.pending_buf,u.pending-n,n)),k===0&&(u.status=103)}else u.status=103;if(u.status===103&&(u.gzhead.hcrc?(u.pending+2>u.pending_buf_size&&I(t),u.pending+2<=u.pending_buf_size&&(X(u,255&t.adler),X(u,t.adler>>8&255),t.adler=0,u.status=R)):u.status=R),u.pending!==0){if(I(t),t.avail_out===0)return u.last_flush=-1,i}else if(t.avail_in===0&&W(A)<=W(z)&&A!==w)return se(t,-5);if(u.status===666&&t.avail_in!==0)return se(t,-5);if(t.avail_in!==0||u.lookahead!==0||A!==b&&u.status!==666){var L=u.strategy===2?(function(C,$){for(var Y;;){if(C.lookahead===0&&(me(C),C.lookahead===0)){if($===b)return r;break}if(C.match_length=0,Y=a._tr_tally(C,0,C.window[C.strstart]),C.lookahead--,C.strstart++,Y&&(E(C,!1),C.strm.avail_out===0))return r}return C.insert=0,$===w?(E(C,!0),C.strm.avail_out===0?re:F):C.last_lit&&(E(C,!1),C.strm.avail_out===0)?r:T})(u,A):u.strategy===3?(function(C,$){for(var Y,q,Q,de,ie=C.window;;){if(C.lookahead<=G){if(me(C),C.lookahead<=G&&$===b)return r;if(C.lookahead===0)break}if(C.match_length=0,C.lookahead>=O&&0<C.strstart&&(q=ie[Q=C.strstart-1])===ie[++Q]&&q===ie[++Q]&&q===ie[++Q]){de=C.strstart+G;do;while(q===ie[++Q]&&q===ie[++Q]&&q===ie[++Q]&&q===ie[++Q]&&q===ie[++Q]&&q===ie[++Q]&&q===ie[++Q]&&q===ie[++Q]&&Q<de);C.match_length=G-(de-Q),C.match_length>C.lookahead&&(C.match_length=C.lookahead)}if(C.match_length>=O?(Y=a._tr_tally(C,1,C.match_length-O),C.lookahead-=C.match_length,C.strstart+=C.match_length,C.match_length=0):(Y=a._tr_tally(C,0,C.window[C.strstart]),C.lookahead--,C.strstart++),Y&&(E(C,!1),C.strm.avail_out===0))return r}return C.insert=0,$===w?(E(C,!0),C.strm.avail_out===0?re:F):C.last_lit&&(E(C,!1),C.strm.avail_out===0)?r:T})(u,A):d[u.level].func(u,A);if(L!==re&&L!==F||(u.status=666),L===r||L===re)return t.avail_out===0&&(u.last_flush=-1),i;if(L===T&&(A===1?a._tr_align(u):A!==5&&(a._tr_stored_block(u,0,0,!1),A===3&&(te(u.head),u.lookahead===0&&(u.strstart=0,u.block_start=0,u.insert=0))),I(t),t.avail_out===0))return u.last_flush=-1,i}return A!==w?i:u.wrap<=0?1:(u.wrap===2?(X(u,255&t.adler),X(u,t.adler>>8&255),X(u,t.adler>>16&255),X(u,t.adler>>24&255),X(u,255&t.total_in),X(u,t.total_in>>8&255),X(u,t.total_in>>16&255),X(u,t.total_in>>24&255)):(K(u,t.adler>>>16),K(u,65535&t.adler)),I(t),0<u.wrap&&(u.wrap=-u.wrap),u.pending!==0?i:1)},j.deflateEnd=function(t){var A;return t&&t.state?(A=t.state.status)!==g&&A!==69&&A!==73&&A!==91&&A!==103&&A!==R&&A!==666?se(t,p):(t.state=null,A===R?se(t,-3):i):p},j.deflateSetDictionary=function(t,A){var z,u,n,k,D,L,C,$,Y=A.length;if(!t||!t.state||(k=(z=t.state).wrap)===2||k===1&&z.status!==g||z.lookahead)return p;for(k===1&&(t.adler=l(t.adler,A,Y,0)),z.wrap=0,Y>=z.w_size&&(k===0&&(te(z.head),z.strstart=0,z.block_start=0,z.insert=0),$=new c.Buf8(z.w_size),c.arraySet($,A,Y-z.w_size,z.w_size,0),A=$,Y=z.w_size),D=t.avail_in,L=t.next_in,C=t.input,t.avail_in=Y,t.next_in=0,t.input=A,me(z);z.lookahead>=O;){for(u=z.strstart,n=z.lookahead-(O-1);z.ins_h=(z.ins_h<<z.hash_shift^z.window[u+O-1])&z.hash_mask,z.prev[u&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=u,u++,--n;);z.strstart=u,z.lookahead=O-1,me(z)}return z.strstart+=z.lookahead,z.block_start=z.strstart,z.insert=z.lookahead,z.lookahead=0,z.match_length=z.prev_length=O-1,z.match_available=0,t.next_in=L,t.input=C,t.avail_in=D,z.wrap=k,i},j.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(_,U,j){U.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(_,U,j){U.exports=function(d,c){var a,l,h,y,b,w,i,p,s,f,o,m,v,S,N,P,B,M,O,G,J,g,R,r,T;a=d.state,l=d.next_in,r=d.input,h=l+(d.avail_in-5),y=d.next_out,T=d.output,b=y-(c-d.avail_out),w=y+(d.avail_out-257),i=a.dmax,p=a.wsize,s=a.whave,f=a.wnext,o=a.window,m=a.hold,v=a.bits,S=a.lencode,N=a.distcode,P=(1<<a.lenbits)-1,B=(1<<a.distbits)-1;e:do{v<15&&(m+=r[l++]<<v,v+=8,m+=r[l++]<<v,v+=8),M=S[m&P];t:for(;;){if(m>>>=O=M>>>24,v-=O,(O=M>>>16&255)===0)T[y++]=65535&M;else{if(!(16&O)){if((64&O)==0){M=S[(65535&M)+(m&(1<<O)-1)];continue t}if(32&O){a.mode=12;break e}d.msg="invalid literal/length code",a.mode=30;break e}G=65535&M,(O&=15)&&(v<O&&(m+=r[l++]<<v,v+=8),G+=m&(1<<O)-1,m>>>=O,v-=O),v<15&&(m+=r[l++]<<v,v+=8,m+=r[l++]<<v,v+=8),M=N[m&B];r:for(;;){if(m>>>=O=M>>>24,v-=O,!(16&(O=M>>>16&255))){if((64&O)==0){M=N[(65535&M)+(m&(1<<O)-1)];continue r}d.msg="invalid distance code",a.mode=30;break e}if(J=65535&M,v<(O&=15)&&(m+=r[l++]<<v,(v+=8)<O&&(m+=r[l++]<<v,v+=8)),i<(J+=m&(1<<O)-1)){d.msg="invalid distance too far back",a.mode=30;break e}if(m>>>=O,v-=O,(O=y-b)<J){if(s<(O=J-O)&&a.sane){d.msg="invalid distance too far back",a.mode=30;break e}if(R=o,(g=0)===f){if(g+=p-O,O<G){for(G-=O;T[y++]=o[g++],--O;);g=y-J,R=T}}else if(f<O){if(g+=p+f-O,(O-=f)<G){for(G-=O;T[y++]=o[g++],--O;);if(g=0,f<G){for(G-=O=f;T[y++]=o[g++],--O;);g=y-J,R=T}}}else if(g+=f-O,O<G){for(G-=O;T[y++]=o[g++],--O;);g=y-J,R=T}for(;2<G;)T[y++]=R[g++],T[y++]=R[g++],T[y++]=R[g++],G-=3;G&&(T[y++]=R[g++],1<G&&(T[y++]=R[g++]))}else{for(g=y-J;T[y++]=T[g++],T[y++]=T[g++],T[y++]=T[g++],2<(G-=3););G&&(T[y++]=T[g++],1<G&&(T[y++]=T[g++]))}break}}break}}while(l<h&&y<w);l-=G=v>>3,m&=(1<<(v-=G<<3))-1,d.next_in=l,d.next_out=y,d.avail_in=l<h?h-l+5:5-(l-h),d.avail_out=y<w?w-y+257:257-(y-w),a.hold=m,a.bits=v}},{}],49:[function(_,U,j){var d=_("../utils/common"),c=_("./adler32"),a=_("./crc32"),l=_("./inffast"),h=_("./inftrees"),y=1,b=2,w=0,i=-2,p=1,s=852,f=592;function o(g){return(g>>>24&255)+(g>>>8&65280)+((65280&g)<<8)+((255&g)<<24)}function m(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new d.Buf16(320),this.work=new d.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function v(g){var R;return g&&g.state?(R=g.state,g.total_in=g.total_out=R.total=0,g.msg="",R.wrap&&(g.adler=1&R.wrap),R.mode=p,R.last=0,R.havedict=0,R.dmax=32768,R.head=null,R.hold=0,R.bits=0,R.lencode=R.lendyn=new d.Buf32(s),R.distcode=R.distdyn=new d.Buf32(f),R.sane=1,R.back=-1,w):i}function S(g){var R;return g&&g.state?((R=g.state).wsize=0,R.whave=0,R.wnext=0,v(g)):i}function N(g,R){var r,T;return g&&g.state?(T=g.state,R<0?(r=0,R=-R):(r=1+(R>>4),R<48&&(R&=15)),R&&(R<8||15<R)?i:(T.window!==null&&T.wbits!==R&&(T.window=null),T.wrap=r,T.wbits=R,S(g))):i}function P(g,R){var r,T;return g?(T=new m,(g.state=T).window=null,(r=N(g,R))!==w&&(g.state=null),r):i}var B,M,O=!0;function G(g){if(O){var R;for(B=new d.Buf32(512),M=new d.Buf32(32),R=0;R<144;)g.lens[R++]=8;for(;R<256;)g.lens[R++]=9;for(;R<280;)g.lens[R++]=7;for(;R<288;)g.lens[R++]=8;for(h(y,g.lens,0,288,B,0,g.work,{bits:9}),R=0;R<32;)g.lens[R++]=5;h(b,g.lens,0,32,M,0,g.work,{bits:5}),O=!1}g.lencode=B,g.lenbits=9,g.distcode=M,g.distbits=5}function J(g,R,r,T){var re,F=g.state;return F.window===null&&(F.wsize=1<<F.wbits,F.wnext=0,F.whave=0,F.window=new d.Buf8(F.wsize)),T>=F.wsize?(d.arraySet(F.window,R,r-F.wsize,F.wsize,0),F.wnext=0,F.whave=F.wsize):(T<(re=F.wsize-F.wnext)&&(re=T),d.arraySet(F.window,R,r-T,re,F.wnext),(T-=re)?(d.arraySet(F.window,R,r-T,T,0),F.wnext=T,F.whave=F.wsize):(F.wnext+=re,F.wnext===F.wsize&&(F.wnext=0),F.whave<F.wsize&&(F.whave+=re))),0}j.inflateReset=S,j.inflateReset2=N,j.inflateResetKeep=v,j.inflateInit=function(g){return P(g,15)},j.inflateInit2=P,j.inflate=function(g,R){var r,T,re,F,se,W,te,I,E,X,K,V,me,ce,ae,oe,xe,he,je,ve,t,A,z,u,n=0,k=new d.Buf8(4),D=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!g||!g.state||!g.output||!g.input&&g.avail_in!==0)return i;(r=g.state).mode===12&&(r.mode=13),se=g.next_out,re=g.output,te=g.avail_out,F=g.next_in,T=g.input,W=g.avail_in,I=r.hold,E=r.bits,X=W,K=te,A=w;e:for(;;)switch(r.mode){case p:if(r.wrap===0){r.mode=13;break}for(;E<16;){if(W===0)break e;W--,I+=T[F++]<<E,E+=8}if(2&r.wrap&&I===35615){k[r.check=0]=255&I,k[1]=I>>>8&255,r.check=a(r.check,k,2,0),E=I=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&I)<<8)+(I>>8))%31){g.msg="incorrect header check",r.mode=30;break}if((15&I)!=8){g.msg="unknown compression method",r.mode=30;break}if(E-=4,t=8+(15&(I>>>=4)),r.wbits===0)r.wbits=t;else if(t>r.wbits){g.msg="invalid window size",r.mode=30;break}r.dmax=1<<t,g.adler=r.check=1,r.mode=512&I?10:12,E=I=0;break;case 2:for(;E<16;){if(W===0)break e;W--,I+=T[F++]<<E,E+=8}if(r.flags=I,(255&r.flags)!=8){g.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){g.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=I>>8&1),512&r.flags&&(k[0]=255&I,k[1]=I>>>8&255,r.check=a(r.check,k,2,0)),E=I=0,r.mode=3;case 3:for(;E<32;){if(W===0)break e;W--,I+=T[F++]<<E,E+=8}r.head&&(r.head.time=I),512&r.flags&&(k[0]=255&I,k[1]=I>>>8&255,k[2]=I>>>16&255,k[3]=I>>>24&255,r.check=a(r.check,k,4,0)),E=I=0,r.mode=4;case 4:for(;E<16;){if(W===0)break e;W--,I+=T[F++]<<E,E+=8}r.head&&(r.head.xflags=255&I,r.head.os=I>>8),512&r.flags&&(k[0]=255&I,k[1]=I>>>8&255,r.check=a(r.check,k,2,0)),E=I=0,r.mode=5;case 5:if(1024&r.flags){for(;E<16;){if(W===0)break e;W--,I+=T[F++]<<E,E+=8}r.length=I,r.head&&(r.head.extra_len=I),512&r.flags&&(k[0]=255&I,k[1]=I>>>8&255,r.check=a(r.check,k,2,0)),E=I=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(W<(V=r.length)&&(V=W),V&&(r.head&&(t=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),d.arraySet(r.head.extra,T,F,V,t)),512&r.flags&&(r.check=a(r.check,T,V,F)),W-=V,F+=V,r.length-=V),r.length))break e;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(W===0)break e;for(V=0;t=T[F+V++],r.head&&t&&r.length<65536&&(r.head.name+=String.fromCharCode(t)),t&&V<W;);if(512&r.flags&&(r.check=a(r.check,T,V,F)),W-=V,F+=V,t)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(W===0)break e;for(V=0;t=T[F+V++],r.head&&t&&r.length<65536&&(r.head.comment+=String.fromCharCode(t)),t&&V<W;);if(512&r.flags&&(r.check=a(r.check,T,V,F)),W-=V,F+=V,t)break e}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;E<16;){if(W===0)break e;W--,I+=T[F++]<<E,E+=8}if(I!==(65535&r.check)){g.msg="header crc mismatch",r.mode=30;break}E=I=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),g.adler=r.check=0,r.mode=12;break;case 10:for(;E<32;){if(W===0)break e;W--,I+=T[F++]<<E,E+=8}g.adler=r.check=o(I),E=I=0,r.mode=11;case 11:if(r.havedict===0)return g.next_out=se,g.avail_out=te,g.next_in=F,g.avail_in=W,r.hold=I,r.bits=E,2;g.adler=r.check=1,r.mode=12;case 12:if(R===5||R===6)break e;case 13:if(r.last){I>>>=7&E,E-=7&E,r.mode=27;break}for(;E<3;){if(W===0)break e;W--,I+=T[F++]<<E,E+=8}switch(r.last=1&I,E-=1,3&(I>>>=1)){case 0:r.mode=14;break;case 1:if(G(r),r.mode=20,R!==6)break;I>>>=2,E-=2;break e;case 2:r.mode=17;break;case 3:g.msg="invalid block type",r.mode=30}I>>>=2,E-=2;break;case 14:for(I>>>=7&E,E-=7&E;E<32;){if(W===0)break e;W--,I+=T[F++]<<E,E+=8}if((65535&I)!=(I>>>16^65535)){g.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&I,E=I=0,r.mode=15,R===6)break e;case 15:r.mode=16;case 16:if(V=r.length){if(W<V&&(V=W),te<V&&(V=te),V===0)break e;d.arraySet(re,T,F,V,se),W-=V,F+=V,te-=V,se+=V,r.length-=V;break}r.mode=12;break;case 17:for(;E<14;){if(W===0)break e;W--,I+=T[F++]<<E,E+=8}if(r.nlen=257+(31&I),I>>>=5,E-=5,r.ndist=1+(31&I),I>>>=5,E-=5,r.ncode=4+(15&I),I>>>=4,E-=4,286<r.nlen||30<r.ndist){g.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;E<3;){if(W===0)break e;W--,I+=T[F++]<<E,E+=8}r.lens[D[r.have++]]=7&I,I>>>=3,E-=3}for(;r.have<19;)r.lens[D[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,z={bits:r.lenbits},A=h(0,r.lens,0,19,r.lencode,0,r.work,z),r.lenbits=z.bits,A){g.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;oe=(n=r.lencode[I&(1<<r.lenbits)-1])>>>16&255,xe=65535&n,!((ae=n>>>24)<=E);){if(W===0)break e;W--,I+=T[F++]<<E,E+=8}if(xe<16)I>>>=ae,E-=ae,r.lens[r.have++]=xe;else{if(xe===16){for(u=ae+2;E<u;){if(W===0)break e;W--,I+=T[F++]<<E,E+=8}if(I>>>=ae,E-=ae,r.have===0){g.msg="invalid bit length repeat",r.mode=30;break}t=r.lens[r.have-1],V=3+(3&I),I>>>=2,E-=2}else if(xe===17){for(u=ae+3;E<u;){if(W===0)break e;W--,I+=T[F++]<<E,E+=8}E-=ae,t=0,V=3+(7&(I>>>=ae)),I>>>=3,E-=3}else{for(u=ae+7;E<u;){if(W===0)break e;W--,I+=T[F++]<<E,E+=8}E-=ae,t=0,V=11+(127&(I>>>=ae)),I>>>=7,E-=7}if(r.have+V>r.nlen+r.ndist){g.msg="invalid bit length repeat",r.mode=30;break}for(;V--;)r.lens[r.have++]=t}}if(r.mode===30)break;if(r.lens[256]===0){g.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,z={bits:r.lenbits},A=h(y,r.lens,0,r.nlen,r.lencode,0,r.work,z),r.lenbits=z.bits,A){g.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,z={bits:r.distbits},A=h(b,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,z),r.distbits=z.bits,A){g.msg="invalid distances set",r.mode=30;break}if(r.mode=20,R===6)break e;case 20:r.mode=21;case 21:if(6<=W&&258<=te){g.next_out=se,g.avail_out=te,g.next_in=F,g.avail_in=W,r.hold=I,r.bits=E,l(g,K),se=g.next_out,re=g.output,te=g.avail_out,F=g.next_in,T=g.input,W=g.avail_in,I=r.hold,E=r.bits,r.mode===12&&(r.back=-1);break}for(r.back=0;oe=(n=r.lencode[I&(1<<r.lenbits)-1])>>>16&255,xe=65535&n,!((ae=n>>>24)<=E);){if(W===0)break e;W--,I+=T[F++]<<E,E+=8}if(oe&&(240&oe)==0){for(he=ae,je=oe,ve=xe;oe=(n=r.lencode[ve+((I&(1<<he+je)-1)>>he)])>>>16&255,xe=65535&n,!(he+(ae=n>>>24)<=E);){if(W===0)break e;W--,I+=T[F++]<<E,E+=8}I>>>=he,E-=he,r.back+=he}if(I>>>=ae,E-=ae,r.back+=ae,r.length=xe,oe===0){r.mode=26;break}if(32&oe){r.back=-1,r.mode=12;break}if(64&oe){g.msg="invalid literal/length code",r.mode=30;break}r.extra=15&oe,r.mode=22;case 22:if(r.extra){for(u=r.extra;E<u;){if(W===0)break e;W--,I+=T[F++]<<E,E+=8}r.length+=I&(1<<r.extra)-1,I>>>=r.extra,E-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;oe=(n=r.distcode[I&(1<<r.distbits)-1])>>>16&255,xe=65535&n,!((ae=n>>>24)<=E);){if(W===0)break e;W--,I+=T[F++]<<E,E+=8}if((240&oe)==0){for(he=ae,je=oe,ve=xe;oe=(n=r.distcode[ve+((I&(1<<he+je)-1)>>he)])>>>16&255,xe=65535&n,!(he+(ae=n>>>24)<=E);){if(W===0)break e;W--,I+=T[F++]<<E,E+=8}I>>>=he,E-=he,r.back+=he}if(I>>>=ae,E-=ae,r.back+=ae,64&oe){g.msg="invalid distance code",r.mode=30;break}r.offset=xe,r.extra=15&oe,r.mode=24;case 24:if(r.extra){for(u=r.extra;E<u;){if(W===0)break e;W--,I+=T[F++]<<E,E+=8}r.offset+=I&(1<<r.extra)-1,I>>>=r.extra,E-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){g.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(te===0)break e;if(V=K-te,r.offset>V){if((V=r.offset-V)>r.whave&&r.sane){g.msg="invalid distance too far back",r.mode=30;break}me=V>r.wnext?(V-=r.wnext,r.wsize-V):r.wnext-V,V>r.length&&(V=r.length),ce=r.window}else ce=re,me=se-r.offset,V=r.length;for(te<V&&(V=te),te-=V,r.length-=V;re[se++]=ce[me++],--V;);r.length===0&&(r.mode=21);break;case 26:if(te===0)break e;re[se++]=r.length,te--,r.mode=21;break;case 27:if(r.wrap){for(;E<32;){if(W===0)break e;W--,I|=T[F++]<<E,E+=8}if(K-=te,g.total_out+=K,r.total+=K,K&&(g.adler=r.check=r.flags?a(r.check,re,K,se-K):c(r.check,re,K,se-K)),K=te,(r.flags?I:o(I))!==r.check){g.msg="incorrect data check",r.mode=30;break}E=I=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;E<32;){if(W===0)break e;W--,I+=T[F++]<<E,E+=8}if(I!==(4294967295&r.total)){g.msg="incorrect length check",r.mode=30;break}E=I=0}r.mode=29;case 29:A=1;break e;case 30:A=-3;break e;case 31:return-4;case 32:default:return i}return g.next_out=se,g.avail_out=te,g.next_in=F,g.avail_in=W,r.hold=I,r.bits=E,(r.wsize||K!==g.avail_out&&r.mode<30&&(r.mode<27||R!==4))&&J(g,g.output,g.next_out,K-g.avail_out)?(r.mode=31,-4):(X-=g.avail_in,K-=g.avail_out,g.total_in+=X,g.total_out+=K,r.total+=K,r.wrap&&K&&(g.adler=r.check=r.flags?a(r.check,re,K,g.next_out-K):c(r.check,re,K,g.next_out-K)),g.data_type=r.bits+(r.last?64:0)+(r.mode===12?128:0)+(r.mode===20||r.mode===15?256:0),(X==0&&K===0||R===4)&&A===w&&(A=-5),A)},j.inflateEnd=function(g){if(!g||!g.state)return i;var R=g.state;return R.window&&(R.window=null),g.state=null,w},j.inflateGetHeader=function(g,R){var r;return g&&g.state?(2&(r=g.state).wrap)==0?i:((r.head=R).done=!1,w):i},j.inflateSetDictionary=function(g,R){var r,T=R.length;return g&&g.state?(r=g.state).wrap!==0&&r.mode!==11?i:r.mode===11&&c(1,R,T,0)!==r.check?-3:J(g,R,T,T)?(r.mode=31,-4):(r.havedict=1,w):i},j.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(_,U,j){var d=_("../utils/common"),c=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];U.exports=function(y,b,w,i,p,s,f,o){var m,v,S,N,P,B,M,O,G,J=o.bits,g=0,R=0,r=0,T=0,re=0,F=0,se=0,W=0,te=0,I=0,E=null,X=0,K=new d.Buf16(16),V=new d.Buf16(16),me=null,ce=0;for(g=0;g<=15;g++)K[g]=0;for(R=0;R<i;R++)K[b[w+R]]++;for(re=J,T=15;1<=T&&K[T]===0;T--);if(T<re&&(re=T),T===0)return p[s++]=20971520,p[s++]=20971520,o.bits=1,0;for(r=1;r<T&&K[r]===0;r++);for(re<r&&(re=r),g=W=1;g<=15;g++)if(W<<=1,(W-=K[g])<0)return-1;if(0<W&&(y===0||T!==1))return-1;for(V[1]=0,g=1;g<15;g++)V[g+1]=V[g]+K[g];for(R=0;R<i;R++)b[w+R]!==0&&(f[V[b[w+R]]++]=R);if(B=y===0?(E=me=f,19):y===1?(E=c,X-=257,me=a,ce-=257,256):(E=l,me=h,-1),g=r,P=s,se=R=I=0,S=-1,N=(te=1<<(F=re))-1,y===1&&852<te||y===2&&592<te)return 1;for(;;){for(M=g-se,G=f[R]<B?(O=0,f[R]):f[R]>B?(O=me[ce+f[R]],E[X+f[R]]):(O=96,0),m=1<<g-se,r=v=1<<F;p[P+(I>>se)+(v-=m)]=M<<24|O<<16|G|0,v!==0;);for(m=1<<g-1;I&m;)m>>=1;if(m!==0?(I&=m-1,I+=m):I=0,R++,--K[g]==0){if(g===T)break;g=b[w+f[R]]}if(re<g&&(I&N)!==S){for(se===0&&(se=re),P+=r,W=1<<(F=g-se);F+se<T&&!((W-=K[F+se])<=0);)F++,W<<=1;if(te+=1<<F,y===1&&852<te||y===2&&592<te)return 1;p[S=I&N]=re<<24|F<<16|P-s|0}}return I!==0&&(p[P+I]=g-se<<24|64<<16|0),o.bits=re,0}},{"../utils/common":41}],51:[function(_,U,j){U.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(_,U,j){var d=_("../utils/common"),c=0,a=1;function l(n){for(var k=n.length;0<=--k;)n[k]=0}var h=0,y=29,b=256,w=b+1+y,i=30,p=19,s=2*w+1,f=15,o=16,m=7,v=256,S=16,N=17,P=18,B=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],M=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],O=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],G=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],J=new Array(2*(w+2));l(J);var g=new Array(2*i);l(g);var R=new Array(512);l(R);var r=new Array(256);l(r);var T=new Array(y);l(T);var re,F,se,W=new Array(i);function te(n,k,D,L,C){this.static_tree=n,this.extra_bits=k,this.extra_base=D,this.elems=L,this.max_length=C,this.has_stree=n&&n.length}function I(n,k){this.dyn_tree=n,this.max_code=0,this.stat_desc=k}function E(n){return n<256?R[n]:R[256+(n>>>7)]}function X(n,k){n.pending_buf[n.pending++]=255&k,n.pending_buf[n.pending++]=k>>>8&255}function K(n,k,D){n.bi_valid>o-D?(n.bi_buf|=k<<n.bi_valid&65535,X(n,n.bi_buf),n.bi_buf=k>>o-n.bi_valid,n.bi_valid+=D-o):(n.bi_buf|=k<<n.bi_valid&65535,n.bi_valid+=D)}function V(n,k,D){K(n,D[2*k],D[2*k+1])}function me(n,k){for(var D=0;D|=1&n,n>>>=1,D<<=1,0<--k;);return D>>>1}function ce(n,k,D){var L,C,$=new Array(f+1),Y=0;for(L=1;L<=f;L++)$[L]=Y=Y+D[L-1]<<1;for(C=0;C<=k;C++){var q=n[2*C+1];q!==0&&(n[2*C]=me($[q]++,q))}}function ae(n){var k;for(k=0;k<w;k++)n.dyn_ltree[2*k]=0;for(k=0;k<i;k++)n.dyn_dtree[2*k]=0;for(k=0;k<p;k++)n.bl_tree[2*k]=0;n.dyn_ltree[2*v]=1,n.opt_len=n.static_len=0,n.last_lit=n.matches=0}function oe(n){8<n.bi_valid?X(n,n.bi_buf):0<n.bi_valid&&(n.pending_buf[n.pending++]=n.bi_buf),n.bi_buf=0,n.bi_valid=0}function xe(n,k,D,L){var C=2*k,$=2*D;return n[C]<n[$]||n[C]===n[$]&&L[k]<=L[D]}function he(n,k,D){for(var L=n.heap[D],C=D<<1;C<=n.heap_len&&(C<n.heap_len&&xe(k,n.heap[C+1],n.heap[C],n.depth)&&C++,!xe(k,L,n.heap[C],n.depth));)n.heap[D]=n.heap[C],D=C,C<<=1;n.heap[D]=L}function je(n,k,D){var L,C,$,Y,q=0;if(n.last_lit!==0)for(;L=n.pending_buf[n.d_buf+2*q]<<8|n.pending_buf[n.d_buf+2*q+1],C=n.pending_buf[n.l_buf+q],q++,L===0?V(n,C,k):(V(n,($=r[C])+b+1,k),(Y=B[$])!==0&&K(n,C-=T[$],Y),V(n,$=E(--L),D),(Y=M[$])!==0&&K(n,L-=W[$],Y)),q<n.last_lit;);V(n,v,k)}function ve(n,k){var D,L,C,$=k.dyn_tree,Y=k.stat_desc.static_tree,q=k.stat_desc.has_stree,Q=k.stat_desc.elems,de=-1;for(n.heap_len=0,n.heap_max=s,D=0;D<Q;D++)$[2*D]!==0?(n.heap[++n.heap_len]=de=D,n.depth[D]=0):$[2*D+1]=0;for(;n.heap_len<2;)$[2*(C=n.heap[++n.heap_len]=de<2?++de:0)]=1,n.depth[C]=0,n.opt_len--,q&&(n.static_len-=Y[2*C+1]);for(k.max_code=de,D=n.heap_len>>1;1<=D;D--)he(n,$,D);for(C=Q;D=n.heap[1],n.heap[1]=n.heap[n.heap_len--],he(n,$,1),L=n.heap[1],n.heap[--n.heap_max]=D,n.heap[--n.heap_max]=L,$[2*C]=$[2*D]+$[2*L],n.depth[C]=(n.depth[D]>=n.depth[L]?n.depth[D]:n.depth[L])+1,$[2*D+1]=$[2*L+1]=C,n.heap[1]=C++,he(n,$,1),2<=n.heap_len;);n.heap[--n.heap_max]=n.heap[1],(function(ie,ye){var Ne,ze,we,pe,Ce,Ie,x=ye.dyn_tree,Z=ye.max_code,H=ye.stat_desc.static_tree,ee=ye.stat_desc.has_stree,ne=ye.stat_desc.extra_bits,ge=ye.stat_desc.extra_base,ue=ye.stat_desc.max_length,ke=0;for(pe=0;pe<=f;pe++)ie.bl_count[pe]=0;for(x[2*ie.heap[ie.heap_max]+1]=0,Ne=ie.heap_max+1;Ne<s;Ne++)ue<(pe=x[2*x[2*(ze=ie.heap[Ne])+1]+1]+1)&&(pe=ue,ke++),x[2*ze+1]=pe,Z<ze||(ie.bl_count[pe]++,Ce=0,ge<=ze&&(Ce=ne[ze-ge]),Ie=x[2*ze],ie.opt_len+=Ie*(pe+Ce),ee&&(ie.static_len+=Ie*(H[2*ze+1]+Ce)));if(ke!==0){do{for(pe=ue-1;ie.bl_count[pe]===0;)pe--;ie.bl_count[pe]--,ie.bl_count[pe+1]+=2,ie.bl_count[ue]--,ke-=2}while(0<ke);for(pe=ue;pe!==0;pe--)for(ze=ie.bl_count[pe];ze!==0;)Z<(we=ie.heap[--Ne])||(x[2*we+1]!==pe&&(ie.opt_len+=(pe-x[2*we+1])*x[2*we],x[2*we+1]=pe),ze--)}})(n,k),ce($,de,n.bl_count)}function t(n,k,D){var L,C,$=-1,Y=k[1],q=0,Q=7,de=4;for(Y===0&&(Q=138,de=3),k[2*(D+1)+1]=65535,L=0;L<=D;L++)C=Y,Y=k[2*(L+1)+1],++q<Q&&C===Y||(q<de?n.bl_tree[2*C]+=q:C!==0?(C!==$&&n.bl_tree[2*C]++,n.bl_tree[2*S]++):q<=10?n.bl_tree[2*N]++:n.bl_tree[2*P]++,$=C,de=(q=0)===Y?(Q=138,3):C===Y?(Q=6,3):(Q=7,4))}function A(n,k,D){var L,C,$=-1,Y=k[1],q=0,Q=7,de=4;for(Y===0&&(Q=138,de=3),L=0;L<=D;L++)if(C=Y,Y=k[2*(L+1)+1],!(++q<Q&&C===Y)){if(q<de)for(;V(n,C,n.bl_tree),--q!=0;);else C!==0?(C!==$&&(V(n,C,n.bl_tree),q--),V(n,S,n.bl_tree),K(n,q-3,2)):q<=10?(V(n,N,n.bl_tree),K(n,q-3,3)):(V(n,P,n.bl_tree),K(n,q-11,7));$=C,de=(q=0)===Y?(Q=138,3):C===Y?(Q=6,3):(Q=7,4)}}l(W);var z=!1;function u(n,k,D,L){K(n,(h<<1)+(L?1:0),3),(function(C,$,Y,q){oe(C),X(C,Y),X(C,~Y),d.arraySet(C.pending_buf,C.window,$,Y,C.pending),C.pending+=Y})(n,k,D)}j._tr_init=function(n){z||((function(){var k,D,L,C,$,Y=new Array(f+1);for(C=L=0;C<y-1;C++)for(T[C]=L,k=0;k<1<<B[C];k++)r[L++]=C;for(r[L-1]=C,C=$=0;C<16;C++)for(W[C]=$,k=0;k<1<<M[C];k++)R[$++]=C;for($>>=7;C<i;C++)for(W[C]=$<<7,k=0;k<1<<M[C]-7;k++)R[256+$++]=C;for(D=0;D<=f;D++)Y[D]=0;for(k=0;k<=143;)J[2*k+1]=8,k++,Y[8]++;for(;k<=255;)J[2*k+1]=9,k++,Y[9]++;for(;k<=279;)J[2*k+1]=7,k++,Y[7]++;for(;k<=287;)J[2*k+1]=8,k++,Y[8]++;for(ce(J,w+1,Y),k=0;k<i;k++)g[2*k+1]=5,g[2*k]=me(k,5);re=new te(J,B,b+1,w,f),F=new te(g,M,0,i,f),se=new te(new Array(0),O,0,p,m)})(),z=!0),n.l_desc=new I(n.dyn_ltree,re),n.d_desc=new I(n.dyn_dtree,F),n.bl_desc=new I(n.bl_tree,se),n.bi_buf=0,n.bi_valid=0,ae(n)},j._tr_stored_block=u,j._tr_flush_block=function(n,k,D,L){var C,$,Y=0;0<n.level?(n.strm.data_type===2&&(n.strm.data_type=(function(q){var Q,de=4093624447;for(Q=0;Q<=31;Q++,de>>>=1)if(1&de&&q.dyn_ltree[2*Q]!==0)return c;if(q.dyn_ltree[18]!==0||q.dyn_ltree[20]!==0||q.dyn_ltree[26]!==0)return a;for(Q=32;Q<b;Q++)if(q.dyn_ltree[2*Q]!==0)return a;return c})(n)),ve(n,n.l_desc),ve(n,n.d_desc),Y=(function(q){var Q;for(t(q,q.dyn_ltree,q.l_desc.max_code),t(q,q.dyn_dtree,q.d_desc.max_code),ve(q,q.bl_desc),Q=p-1;3<=Q&&q.bl_tree[2*G[Q]+1]===0;Q--);return q.opt_len+=3*(Q+1)+5+5+4,Q})(n),C=n.opt_len+3+7>>>3,($=n.static_len+3+7>>>3)<=C&&(C=$)):C=$=D+5,D+4<=C&&k!==-1?u(n,k,D,L):n.strategy===4||$===C?(K(n,2+(L?1:0),3),je(n,J,g)):(K(n,4+(L?1:0),3),(function(q,Q,de,ie){var ye;for(K(q,Q-257,5),K(q,de-1,5),K(q,ie-4,4),ye=0;ye<ie;ye++)K(q,q.bl_tree[2*G[ye]+1],3);A(q,q.dyn_ltree,Q-1),A(q,q.dyn_dtree,de-1)})(n,n.l_desc.max_code+1,n.d_desc.max_code+1,Y+1),je(n,n.dyn_ltree,n.dyn_dtree)),ae(n),L&&oe(n)},j._tr_tally=function(n,k,D){return n.pending_buf[n.d_buf+2*n.last_lit]=k>>>8&255,n.pending_buf[n.d_buf+2*n.last_lit+1]=255&k,n.pending_buf[n.l_buf+n.last_lit]=255&D,n.last_lit++,k===0?n.dyn_ltree[2*D]++:(n.matches++,k--,n.dyn_ltree[2*(r[D]+b+1)]++,n.dyn_dtree[2*E(k)]++),n.last_lit===n.lit_bufsize-1},j._tr_align=function(n){K(n,2,3),V(n,v,J),(function(k){k.bi_valid===16?(X(k,k.bi_buf),k.bi_buf=0,k.bi_valid=0):8<=k.bi_valid&&(k.pending_buf[k.pending++]=255&k.bi_buf,k.bi_buf>>=8,k.bi_valid-=8)})(n)}},{"../utils/common":41}],53:[function(_,U,j){U.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(_,U,j){(function(d){(function(c,a){if(!c.setImmediate){var l,h,y,b,w=1,i={},p=!1,s=c.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(c);f=f&&f.setTimeout?f:c,l={}.toString.call(c.process)==="[object process]"?function(S){process.nextTick(function(){m(S)})}:(function(){if(c.postMessage&&!c.importScripts){var S=!0,N=c.onmessage;return c.onmessage=function(){S=!1},c.postMessage("","*"),c.onmessage=N,S}})()?(b="setImmediate$"+Math.random()+"$",c.addEventListener?c.addEventListener("message",v,!1):c.attachEvent("onmessage",v),function(S){c.postMessage(b+S,"*")}):c.MessageChannel?((y=new MessageChannel).port1.onmessage=function(S){m(S.data)},function(S){y.port2.postMessage(S)}):s&&"onreadystatechange"in s.createElement("script")?(h=s.documentElement,function(S){var N=s.createElement("script");N.onreadystatechange=function(){m(S),N.onreadystatechange=null,h.removeChild(N),N=null},h.appendChild(N)}):function(S){setTimeout(m,0,S)},f.setImmediate=function(S){typeof S!="function"&&(S=new Function(""+S));for(var N=new Array(arguments.length-1),P=0;P<N.length;P++)N[P]=arguments[P+1];var B={callback:S,args:N};return i[w]=B,l(w),w++},f.clearImmediate=o}function o(S){delete i[S]}function m(S){if(p)setTimeout(m,0,S);else{var N=i[S];if(N){p=!0;try{(function(P){var B=P.callback,M=P.args;switch(M.length){case 0:B();break;case 1:B(M[0]);break;case 2:B(M[0],M[1]);break;case 3:B(M[0],M[1],M[2]);break;default:B.apply(a,M)}})(N)}finally{o(S),p=!1}}}}function v(S){S.source===c&&typeof S.data=="string"&&S.data.indexOf(b)===0&&m(+S.data.slice(b.length))}})(typeof self>"u"?d===void 0?this:d:self)}).call(this,typeof Pe<"u"?Pe:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Ye)),Ye.exports}var It=At();const nt=lt(It),Lt=({user:De,profile:_e,onBack:_,initialView:U="overview",onProxyClient:j})=>{var Ie;const[d,c]=le.useState(U),[a,l]=le.useState(!1),[h,y]=le.useState(null),[b,w]=le.useState([]),[i,p]=le.useState([]),[s,f]=le.useState(""),[o,m]=le.useState(!1),[v,S]=le.useState(null),[N,P]=le.useState(null),[B,M]=le.useState(100),[O,G]=le.useState([]),[J,g]=le.useState(null),[R,r]=le.useState({message:"",type:null}),[T,re]=le.useState(null),[F,se]=le.useState([]),[W,te]=le.useState(!1),[I,E]=le.useState(""),[X,K]=le.useState(""),[V,me]=le.useState([]),[ce,ae]=le.useState([]),[oe,xe]=le.useState(!1),[he,je]=le.useState(!1),[ve,t]=le.useState(!1),A=(x,Z="success")=>{r({message:x,type:Z}),setTimeout(()=>r({message:"",type:null}),4e3)};le.useEffect(()=>{const x=new URLSearchParams(window.location.search),Z=x.get("status")||x.get("collection_status");if(x.get("payment_id"),Z==="approved"||Z==="success"){A("Recarga acreditada con xito! ","success");const H=window.location.pathname;window.history.replaceState({},document.title,H),D()}else if(Z==="failure"){A("El pago no pudo procesarse. Reintenta.","error");const H=window.location.pathname;window.history.replaceState({},document.title,H)}},[]),le.useEffect(()=>{c(U)},[U]);const[z,u]=le.useState({primary_color:"#135bec",logo_url:"",radius:"12px",style_presets:["Superhroes","John Wick","Urbano"]}),[n,k]=le.useState({name:"",slug:"",client_email:"",credits:500,start_date:new Date().toISOString().split("T")[0],end_date:new Date(Date.now()+10080*60*1e3).toISOString().split("T")[0]});le.useEffect(()=>{D()},[_e.partner_id]);const D=async()=>{try{l(!0);let x=_e.partner_id,Z=!1;if(!x){const{data:H}=await fe.from("partners").select("id").or(`user_id.eq.${_e.id},contact_email.eq.${_e.email}`).single();H?x=H.id:Z=!0}if(Z){y({id:_e.id,name:_e.full_name||_e.email.split("@")[0],credits_total:_e.credits||0,credits_used:_e.total_generations||0,is_virtual:!0,config:{primary_color:"#135bec",logo_url:null}});const[H,ee]=await Promise.all([fe.from("events").select("*").eq("partner_id",_e.id).order("created_at",{ascending:!1}),fe.from("wallet_transactions").select("*").eq("partner_id",_e.id).order("created_at",{ascending:!1})]);if(w(H.data||[]),p(ee.data||[]),H.data&&H.data.length>0){const ne=H.data.map(ue=>ue.id),{data:ge}=await fe.from("generations").select("created_at, event_id").in("event_id",ne);G(ge||[])}}else{const[H,ee,ne]=await Promise.all([fe.from("partners").select("*").eq("id",x).single(),fe.from("events").select("*").eq("partner_id",x).order("created_at",{ascending:!1}),fe.from("wallet_transactions").select("*").eq("partner_id",x).order("created_at",{ascending:!1})]);if(H.error)throw H.error;if(y(H.data),p(ne.data||[]),H.data.config&&u({primary_color:H.data.config.primary_color||"#135bec",logo_url:H.data.config.logo_url||"",radius:H.data.config.radius||"12px",style_presets:H.data.config.style_presets||["Superhroes","John Wick","Urbano"]}),ee.data&&ee.data.length>0){const ge=ee.data.map(ke=>ke.id),{data:ue}=await fe.from("generations").select("id, created_at, event_id, image_url").in("event_id",ge).order("created_at",{ascending:!1});G(ue||[]),me((ue==null?void 0:ue.slice(0,10))||[])}w(ee.data||[])}}catch(x){console.error("Error fetching partner data:",x)}finally{l(!1)}},L=async()=>{if(h)try{t(!0);const{error:x}=await fe.from("partners").update({config:z}).eq("id",h.id);if(x)throw x;y({...h,config:z}),A("Configuracin sincronizada con xito! ")}catch(x){console.error("Error updating branding:",x),A("Error al guardar: "+x.message,"error")}finally{t(!1)}},C=async x=>{try{te(!0);const{data:Z,error:H}=await fe.from("generations").select("*, profiles(email)").eq("event_id",x).order("created_at",{ascending:!1});if(H)throw H;se(Z||[])}catch(Z){console.error("Error fetching photos:",Z),A("No se pudieron cargar las fotos","error")}finally{te(!1)}},$=async x=>{if(window.confirm("Ests seguro de que deseas eliminar esta foto de la galera?"))try{const{error:Z}=await fe.from("generations").delete().eq("id",x);if(Z)throw Z;se(H=>H.filter(ee=>ee.id!==x)),A("Foto eliminada correctamente")}catch(Z){console.error("Error deleting photo:",Z),A("Error al eliminar la foto","error")}},Y=async x=>{if(!x.target.files||x.target.files.length===0)return;const Z=x.target.files[0],H=Z.name.split(".").pop(),ee=`${h==null?void 0:h.id}-${Date.now()}.${H}`;try{l(!0);const{error:ne}=await fe.storage.from("logos").upload(ee,Z);if(ne){const{error:ge}=await fe.storage.from("public").upload(`logos/${ee}`,Z);if(ge)throw ne;const{data:ue}=fe.storage.from("public").getPublicUrl(`logos/${ee}`);u({...z,logo_url:ue.publicUrl})}else{const{data:ge}=fe.storage.from("logos").getPublicUrl(ee);u({...z,logo_url:ge.publicUrl})}}catch(ne){console.error("Error uploading logo:",ne),A("Error al subir logo: "+ne.message,"error")}finally{l(!1)}},q=async x=>{if(x.preventDefault(),!h)return;const Z=Number(n.credits);if(Z>h.credits_total-h.credits_used){A("Crditos insuficientes en tu balance mayorista.","error");return}try{l(!0);const{data:H,error:ee}=await fe.from("events").insert([{partner_id:h.id,event_name:n.name,client_email:n.client_email,event_slug:n.slug||n.name.toLowerCase().replace(/\s+/g,"-"),credits_allocated:Z,credits_used:0,start_date:new Date(n.start_date).toISOString(),end_date:new Date(n.end_date).toISOString(),is_active:!0,selected_styles:z.style_presets}]).select();if(ee)throw ee;if(h.is_virtual){const{error:ne}=await fe.from("profiles").update({credits:Math.max(0,h.credits_total-Z)}).eq("id",_e.id);if(ne)throw ne}else{const{error:ne}=await fe.from("partners").update({credits_used:(h.credits_used||0)+Z}).eq("id",h.id);if(ne)throw ne}m(!1),k({name:"",slug:"",client_email:"",credits:500,start_date:"",end_date:""}),A("Evento creado con xito"),D()}catch(H){console.error("Error creating event:",H),A("Error al crear el evento. "+(H.message||"El slug podra estar duplicado."),"error")}finally{l(!1)}},Q=async()=>{if(!N||!h)return;const x=Number(B),Z=(h.credits_total||0)-(h.credits_used||0);if(x>Z){A("No tienes crditos suficientes.","error");return}try{l(!0);const{error:H}=await fe.from("events").update({credits_allocated:(N.credits_allocated||0)+x}).eq("id",N.id);if(H)throw H;if(h.is_virtual){const{error:ee}=await fe.from("profiles").update({credits:Math.max(0,h.credits_total-x)}).eq("id",_e.id);if(ee)throw ee}else{const{error:ee}=await fe.from("partners").update({credits_used:(h.credits_used||0)+x}).eq("id",h.id);if(ee)throw ee}await fe.from("wallet_transactions").insert({partner_id:h.id,amount:x,type:"usage",description:`Transferencia a evento: ${N.event_name}`}),A(`Se han transferido ${x} crditos.`),P(null),D()}catch(H){A("Error: "+H.message,"error")}finally{l(!1)}},de=async x=>{if(h)try{je(!0);const Z=window.location.href,ee=await(await fetch("https://elesttjfwfhvzdvldytn.supabase.co/functions/v1/mercadopago-payment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:h.id,credits:x.qty,price:x.price,pack_name:x.label,redirect_url:Z})})).json();if(ee.init_point)window.location.href=ee.init_point;else throw new Error(ee.message||"Error al iniciar pago")}catch(Z){A(Z.message,"error")}finally{je(!1)}},ie=async()=>{if(J)try{l(!0);const{error:x}=await fe.from("events").delete().eq("id",J.id);if(x)throw x;A("Evento eliminado permanentemente"),g(null),D()}catch(x){console.error("Error deleting event:",x),A("Error al eliminar evento: "+x.message,"error")}finally{l(!1)}},ye=x=>{u(Z=>({...Z,style_presets:Z.style_presets.includes(x)?Z.style_presets.filter(H=>H!==x):[...Z.style_presets,x]}))},Ne=le.useMemo(()=>F.filter(x=>{var ne;const Z=((ne=x.profiles)==null?void 0:ne.email)||"Annimo",H=!I||x.id.toLowerCase().includes(I.toLowerCase())||Z.toLowerCase().includes(I.toLowerCase()),ee=!X||x.created_at&&x.created_at.startsWith(X);return H&&ee}),[F,I,X]),ze=le.useMemo(()=>b.filter(x=>(x.event_name||"").toLowerCase().includes(s.toLowerCase())||(x.event_slug||"").toLowerCase().includes(s.toLowerCase())),[b,s]);if(a&&!h)return e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] text-white space-y-4",children:[e.jsx("div",{className:"size-12 border-4 border-[#135bec] border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"font-bold tracking-widest text-[10px] uppercase opacity-50",children:"Sincronizando con la red..."})]});const we=((h==null?void 0:h.credits_total)||0)-((h==null?void 0:h.credits_used)||0),pe=h!=null&&h.credits_total?Math.round(h.credits_used/h.credits_total*100):0,Ce=(x,Z,H)=>{const ee=d===x;return e.jsxs("button",{onClick:()=>c(x),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-all text-sm font-bold border ${ee?"bg-[#135bec]/10 text-[#135bec] border-[#135bec]/30 shadow-[0_0_15px_rgba(19,91,236,0.1)]":"text-slate-400 border-transparent hover:text-white hover:bg-white/5"}`,children:[e.jsx(H,{className:"size-4"}),Z]},x)};return e.jsxs("div",{className:"space-y-8 animate-fade-in text-slate-100",children:[e.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-6 pb-6 border-b border-white/5",children:[e.jsxs(be.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},children:[e.jsxs("h1",{className:"text-3xl font-black tracking-tight text-white mb-1 flex items-center gap-3",children:[e.jsx("div",{className:"size-10 rounded-xl bg-gradient-to-br from-[#135bec] to-[#0a1f4d] flex items-center justify-center shadow-lg shadow-[#135bec]/20",children:e.jsx(Xe,{className:"text-white size-6"})}),"Panel de Partner ",e.jsxs("span",{className:"text-[#135bec] opacity-50 text-xl font-medium",children:["/ ",h==null?void 0:h.name]})]}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Sistema de gestin de eventos y marca blanca corporativa."})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-slate-900/50 p-1 rounded-xl border border-white/5",children:[Ce("overview","Vista General",Xe),Ce("events","Mis Eventos",Le),Ce("wallet","Billetera",Ke),Ce("branding","Marca Blanca",Je)]})]}),e.jsxs(Oe,{mode:"wait",children:[d==="overview"&&e.jsxs(be.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-8",children:[e.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(()=>{var H,ee;const x=we>0&&we<((h==null?void 0:h.credits_total)||0)*.2,Z=we>0&&we<((h==null?void 0:h.credits_total)||0)*.1;return e.jsxs("div",{className:`glass-card rounded-2xl p-6 flex flex-col justify-between group overflow-hidden relative border transition-all duration-500 bg-gradient-to-br from-slate-900/80 to-slate-950/80 shadow-2xl ${Z?"border-rose-500 shadow-[0_0_30px_rgba(244,63,94,0.2)]":x?"border-amber-500/50 shadow-[0_0_20px_rgba(245,158,11,0.1)]":"border-white/5"}`,children:[Z&&e.jsx("div",{className:"absolute inset-0 bg-rose-500/5 animate-pulse pointer-events-none"}),e.jsx("div",{className:"absolute -right-4 -top-4 opacity-[0.03] group-hover:opacity-[0.1] transition-opacity duration-500",children:e.jsx(Ke,{className:"size-40"})}),e.jsxs("div",{className:"flex justify-between items-start mb-6 relative z-10",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:`size-2 rounded-full animate-pulse ${Z?"bg-rose-500":x?"bg-amber-500":"bg-[#135bec]"}`}),e.jsx("p",{className:"text-slate-400 text-[10px] font-black uppercase tracking-[2px]",children:"Wallet Mayorista"})]}),e.jsx("h3",{className:`text-4xl font-black transition-colors ${Z?"text-rose-400":x?"text-amber-400":"text-white"}`,children:we.toLocaleString()}),e.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest mt-1",children:"Crditos Disponibles"})]}),e.jsx("div",{className:`p-3 rounded-xl shadow-inner transition-colors ${Z?"bg-rose-500/20 border border-rose-500/30 text-rose-500":x?"bg-amber-500/20 border border-amber-500/30 text-amber-500":"bg-[#135bec]/10 border border-[#135bec]/20 text-[#135bec]"}`,children:e.jsx(ct,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"space-y-3 relative z-10",children:[x&&e.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 rounded-lg border mb-2 animate-in slide-in-from-top-2 duration-500 ${Z?"bg-rose-500/10 border-rose-500/20 text-rose-400":"bg-amber-500/10 border-amber-500/20 text-amber-400"}`,children:[e.jsx("span",{className:"material-symbols-outlined !text-sm",children:"warning"}),e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest",children:Z?"Servicio en Riesgo Crtico":"Saldo bajo detectado"})]}),e.jsxs("div",{className:"flex justify-between text-[11px] font-bold",children:[e.jsx("span",{className:"text-slate-500 uppercase tracking-[1px]",children:"Consumo Global"}),e.jsxs("span",{className:Z?"text-rose-400":x?"text-amber-400":"text-[#135bec]",children:[pe,"%"]})]}),e.jsx("div",{className:"w-full bg-slate-800/50 h-2.5 rounded-full overflow-hidden p-0.5 border border-white/5",children:e.jsx(be.div,{initial:{width:0},animate:{width:`${pe}%`},transition:{duration:1,ease:"easeOut"},className:`h-full rounded-full shadow-lg transition-colors ${Z?"bg-gradient-to-r from-rose-600 to-rose-400":x?"bg-gradient-to-r from-amber-600 to-amber-400":"bg-gradient-to-r from-[#135bec] to-[#3b82f6]"}`})}),e.jsxs("div",{className:"flex justify-between items-center text-[10px]",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:"text-slate-500",children:["Total: ",(H=h==null?void 0:h.credits_total)==null?void 0:H.toLocaleString()]}),e.jsxs("span",{className:"text-slate-700 text-[8px] font-bold mt-0.5 italic",children:["Aprox. ",we," fotos restantes"]})]}),e.jsxs("span",{className:"text-slate-400 font-bold",children:["Usados: ",(ee=h==null?void 0:h.credits_used)==null?void 0:ee.toLocaleString()]})]}),e.jsx("button",{onClick:()=>{c("wallet"),xe(!0)},className:`w-full py-2.5 text-white text-[9px] font-black rounded-lg border transition-all uppercase tracking-[2px] mt-2 block text-center ${Z?"bg-rose-500/20 border-rose-500/30 hover:bg-rose-500/30":x?"bg-amber-500/20 border-amber-500/30 hover:bg-amber-500/30":"bg-white/5 border-white/5 hover:bg-white/10"}`,children:"Gestionar Saldo / Recargar"})]})]})})(),e.jsxs("div",{className:"glass-card rounded-2xl p-6 flex flex-col justify-between group overflow-hidden relative border border-white/5 bg-gradient-to-br from-slate-900/80 to-slate-950/80",children:[e.jsx("div",{className:"absolute -right-4 -top-4 opacity-[0.03] group-hover:opacity-[0.1] transition-opacity duration-500",children:e.jsx(st,{className:"size-40"})}),e.jsxs("div",{className:"flex justify-between items-start mb-6 relative z-10",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 text-[10px] font-black uppercase tracking-[2px] mb-1",children:"Instancias Activas"}),e.jsx("h3",{className:"text-4xl font-black text-white",children:b.filter(x=>x.is_active).length}),e.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest mt-1",children:"Eventos en curso"})]}),e.jsx("div",{className:"p-3 bg-emerald-500/10 border border-emerald-500/20 rounded-xl text-emerald-500",children:e.jsx(Re,{className:"w-6 h-6"})})]}),e.jsxs("button",{onClick:()=>c("events"),className:"w-full py-3 bg-emerald-500/10 hover:bg-emerald-500/20 text-emerald-500 text-[10px] font-black rounded-xl border border-emerald-500/20 transition-all uppercase tracking-[2px] flex items-center justify-center gap-2 group/btn",children:[e.jsx(Le,{className:"size-4"}),"Gestionar Instancias"]})]}),e.jsxs("div",{className:"glass-card rounded-2xl p-6 flex flex-col justify-between group overflow-hidden relative border border-white/5 bg-gradient-to-br from-slate-900/80 to-slate-950/80",children:[e.jsx("div",{className:"absolute -right-4 -top-4 opacity-[0.03] group-hover:opacity-[0.1] transition-opacity duration-500",children:e.jsx(Je,{className:"size-40"})}),e.jsxs("div",{className:"flex justify-between items-start mb-6 relative z-10",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 text-[10px] font-black uppercase tracking-[2px] mb-1",children:"Identidad Visual"}),e.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[z.logo_url?e.jsx("img",{src:z.logo_url,className:"h-8 object-contain",alt:"Logo"}):e.jsx("div",{className:"size-8 rounded-lg bg-slate-800 flex items-center justify-center border border-white/5",children:e.jsx(Ue,{className:"size-4 text-slate-600"})}),e.jsx("div",{className:"size-6 rounded-full border border-white/20 shadow-lg",style:{backgroundColor:z.primary_color}})]})]}),e.jsx("div",{className:"p-3 bg-indigo-500/10 border border-indigo-500/20 rounded-xl text-indigo-500",children:e.jsx(Ue,{className:"w-6 h-6"})})]}),e.jsx("button",{onClick:()=>c("branding"),className:"w-full py-3 bg-slate-800 hover:bg-slate-700 text-slate-300 text-[10px] font-black rounded-xl border border-white/10 transition-all uppercase tracking-[2px]",children:"Editar Identidad Visual"})]})]}),e.jsxs("div",{className:"bg-slate-900/50 border border-white/5 rounded-[32px] p-8 glass-card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-black text-white uppercase tracking-widest",children:"Actividad de Generacin"}),e.jsx("p",{className:"text-[10px] text-slate-500 uppercase font-bold mt-1",children:"Fotos creadas por da (ltimos 7 das)"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"size-2 rounded-full bg-[#135bec] animate-pulse"}),e.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Tiempo Real"})]})]}),e.jsx("div",{className:"h-48 flex items-end gap-2 px-2",children:Array.from({length:7}).map((x,Z)=>{const H=new Date;H.setDate(H.getDate()-(6-Z));const ee=H.toISOString().split("T")[0],ne=O.filter(Ee=>Ee.created_at.startsWith(ee)).length,ge=Array.from({length:7}).map((Ee,Be)=>{const Ae=new Date;Ae.setDate(Ae.getDate()-(6-Be));const We=Ae.toISOString().split("T")[0];return O.filter(ot=>ot.created_at.startsWith(We)).length}),ue=Math.max(...ge,1),ke=ne/ue*100;return e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-3 group",children:[e.jsxs("div",{className:"w-full relative h-[140px] flex items-end",children:[e.jsx(be.div,{initial:{height:0},animate:{height:`${Math.max(ke,5)}%`},className:`w-full rounded-t-xl transition-all duration-500 hover:brightness-125 ${ne>0?"bg-gradient-to-t from-[#135bec] to-[#7f13ec]":"bg-white/5"}`}),ne>0&&e.jsxs("div",{className:"absolute -top-8 left-1/2 -translate-x-1/2 bg-white text-[#0f172a] text-[9px] font-black px-2 py-1 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-20",children:[ne," fotos"]})]}),e.jsx("span",{className:"text-[8px] font-black text-slate-600 uppercase",children:H.toLocaleDateString("es-AR",{weekday:"short"})})]},Z)})})]})]},"overview"),d==="events"&&e.jsxs(be.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between px-2",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black text-white uppercase tracking-tighter",children:"Mis Eventos"}),e.jsx("p",{className:"text-slate-500 text-xs mt-1",children:"Gestiona las instancias activas y el consumo de crditos."})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx(Qe,{className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-slate-500 group-focus-within:text-[#135bec] transition-colors"}),e.jsx("input",{type:"text",placeholder:"Buscar por nombre o slug...",value:s,onChange:x=>f(x.target.value),className:"bg-slate-900 border border-slate-800 rounded-xl pl-9 pr-4 py-2.5 text-xs text-white focus:ring-1 focus:ring-[#135bec] focus:border-[#135bec] w-64 transition-all outline-none"})]}),e.jsxs("button",{onClick:()=>m(!0),className:"px-6 py-2.5 bg-[#135bec] hover:bg-[#135bec]/90 text-white text-[10px] font-black rounded-xl shadow-lg shadow-[#135bec]/20 transition-all uppercase tracking-[2px] flex items-center gap-2",children:[e.jsx(pt,{className:"size-4"}),"Nuevo Evento"]})]})]}),e.jsx("div",{className:"glass-card rounded-2xl overflow-hidden border border-white/5 bg-slate-900/50 backdrop-blur-xl",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{className:"bg-white/[0.03] border-b border-white/5",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Identificacin"}),e.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Consumo de Crditos"}),e.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Estado"}),e.jsx("th",{className:"px-6 py-5 text-[10px] font-black text-slate-500 uppercase tracking-widest text-right",children:"Panel de Control"})]})}),e.jsxs("tbody",{className:"divide-y divide-white/5",children:[ze.map(x=>{const Z=x.credits_allocated?Math.min(100,Math.round(x.credits_used/x.credits_allocated*100)):0;return e.jsxs("tr",{className:"hover:bg-white/[0.02] transition-colors group",children:[e.jsx("td",{className:"px-6 py-5",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"size-12 rounded-xl bg-gradient-to-br from-[#135bec]/20 to-[#0a1f4d]/20 border border-[#135bec]/20 flex items-center justify-center text-[#135bec] font-black text-sm group-hover:scale-110 transition-transform",children:((x==null?void 0:x.event_name)||"E").substring(0,2).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-white group-hover:text-[#135bec] transition-colors",children:x.event_name}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[e.jsx(kt,{className:"size-3 text-slate-600"}),e.jsxs("p",{className:"text-[10px] text-slate-500 font-mono",children:["/",x.event_slug]})]})]})]})}),e.jsx("td",{className:"px-6 py-5",children:e.jsxs("div",{className:"w-48",children:[e.jsxs("div",{className:"flex justify-between text-[10px] mb-1.5 font-bold",children:[e.jsxs("span",{className:"text-slate-400",children:[x.credits_used.toLocaleString()," / ",x.credits_allocated.toLocaleString()]}),e.jsxs("span",{className:`${Z>90?"text-rose-500":"text-emerald-500"}`,children:[Z,"%"]})]}),e.jsx("div",{className:"w-full h-1.5 bg-slate-800 rounded-full overflow-hidden p-[1px]",children:e.jsx(be.div,{initial:{width:0},animate:{width:`${Z}%`},transition:{duration:1,ease:"easeOut"},className:`h-full ${Z>90?"bg-rose-500":"bg-[#135bec]"} rounded-full shadow-[0_0_8px_rgba(19,91,236,0.5)]`})})]})}),e.jsx("td",{className:"px-6 py-5",children:e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-[10px] font-black uppercase tracking-wider ${x.is_active?"bg-emerald-500/10 text-emerald-500 border border-emerald-500/20":"bg-rose-500/10 text-rose-500 border border-rose-500/20"}`,children:[e.jsx("span",{className:`size-2 rounded-full ${x.is_active?"bg-emerald-500 animate-pulse":"bg-rose-500"}`}),x.is_active?"En Lnea":"Pausado"]})}),e.jsx("td",{className:"px-6 py-5 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-3",children:[e.jsx("button",{onClick:()=>P(x),className:"p-2.5 bg-emerald-500/10 hover:bg-emerald-500 border border-emerald-500/20 rounded-xl text-emerald-500 hover:text-white transition-all group/action",title:"Cargar Crditos",children:e.jsx(He,{className:"w-4 h-4 group-hover/action:scale-110 transition-transform"})}),e.jsx("button",{onClick:()=>{re(x),C(x.id),c("moderation")},className:"p-2.5 bg-indigo-500/10 hover:bg-indigo-500 border border-indigo-500/20 rounded-xl text-indigo-500 hover:text-white transition-all group/action",title:"Moderacin de Galera",children:e.jsx(ht,{className:"w-4 h-4 group-hover/action:scale-110 transition-transform"})}),e.jsx("button",{onClick:()=>S(x),className:"p-2.5 bg-slate-800/50 hover:bg-slate-800 border border-white/5 rounded-xl text-slate-400 hover:text-white transition-all group/action",title:"Editar Evento",children:e.jsx(Ge,{className:"w-4 h-4 group-hover/action:rotate-12 transition-transform"})}),e.jsx("button",{onClick:()=>window.open(`https://photobooth.creativa-labs.com/?event=${x.event_slug}`,"_blank"),className:"p-2.5 bg-slate-800/50 hover:bg-slate-800 border border-white/5 rounded-xl text-slate-400 hover:text-white transition-all group/action",title:"Ver Kiosco (Pblico)",children:e.jsx(tt,{className:"w-4 h-4 group-hover/action:scale-110 transition-transform"})}),j&&x.client_email&&e.jsx("button",{onClick:()=>j(x.client_email),className:"p-2.5 bg-[#135bec]/10 hover:bg-[#135bec] border border-[#135bec]/20 rounded-xl text-[#135bec] hover:text-white transition-all group/action",title:"Gestionar Branding como Cliente",children:e.jsx(ut,{className:"w-4 h-4 group-hover/action:scale-110 transition-transform"})}),e.jsx("button",{onClick:()=>g({id:x.id,name:x.event_name}),className:"p-2.5 bg-rose-500/10 hover:bg-rose-500 border border-rose-500/20 rounded-xl text-rose-500 hover:text-white transition-all group/action",title:"Eliminar Instancia",children:e.jsx(Ve,{className:"w-4 h-4 group-hover/action:scale-110 transition-transform"})})]})})]},x.id)}),ze.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"p-20 text-center",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"size-16 rounded-2xl bg-slate-800/50 flex items-center justify-center mb-4",children:e.jsx(Le,{className:"size-8 text-slate-600 opacity-20"})}),e.jsx("p",{className:"text-slate-400 text-sm font-bold uppercase tracking-widest",children:"No hay eventos para mostrar"}),e.jsx("p",{className:"text-slate-600 text-[10px] mt-1",children:"Crea tu primera instancia para comenzar."})]})})})]})]})})]},"events"),d==="moderation"&&e.jsxs(be.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.05},className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>c("events"),className:"p-2.5 bg-slate-800 hover:bg-slate-700 rounded-xl text-white transition-all border border-white/5",children:e.jsx(rt,{className:"w-5 h-5 rotate-180"})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-black text-white uppercase tracking-tighter",children:["Galera: ",T==null?void 0:T.event_name]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:`size-2 rounded-full ${Ne.length>0?"bg-emerald-500 animate-pulse":"bg-slate-700"}`}),e.jsxs("p",{className:"text-slate-500 text-[10px] font-black uppercase tracking-widest",children:[Ne.length," de ",F.length," Fotos"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 bg-slate-900/80 p-1.5 rounded-2xl border border-white/5 shadow-inner",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Qe,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 size-3.5 text-slate-600"}),e.jsx("input",{type:"text",placeholder:"Buscar email o ID...",className:"bg-slate-950/50 border border-white/5 rounded-xl py-2.5 pl-10 pr-4 text-[10px] text-white focus:border-[#135bec] outline-none transition-all w-52 placeholder:text-slate-700 font-bold uppercase tracking-widest",value:I,onChange:x=>E(x.target.value)})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Le,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 size-3.5 text-slate-600"}),e.jsx("input",{type:"date",className:"bg-slate-950/50 border border-white/5 rounded-xl py-2.5 pl-10 pr-4 text-[10px] text-white focus:border-[#135bec] outline-none transition-all w-40 font-bold",value:X,onChange:x=>K(x.target.value)})]}),(I||X)&&e.jsx("button",{onClick:()=>{E(""),K("")},className:"p-2.5 hover:bg-white/5 text-slate-500 hover:text-white transition-all rounded-xl",children:e.jsx(Te,{className:"size-4"})})]}),e.jsx("div",{className:"w-px h-8 bg-white/5 mx-1"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>{const x=Ne.map(ne=>ne.image_url).join(`
`);if(x.length===0)return A("No hay links para exportar","error");const Z=new Blob([x],{type:"text/plain"}),H=window.URL.createObjectURL(Z),ee=document.createElement("a");ee.href=H,ee.download=`links-${T==null?void 0:T.event_slug}-filtrados.txt`,ee.click(),window.URL.revokeObjectURL(H),A("Links filtrados exportados")},className:"px-6 py-2.5 bg-slate-800 hover:bg-slate-700 text-white text-[10px] font-black rounded-xl border border-white/5 transition-all uppercase tracking-[2px] flex items-center gap-2",children:[e.jsx(et,{className:"size-4"}),"Exportar Links"]}),e.jsxs("button",{onClick:async()=>{if(Ne.length===0)return A("No hay fotos para descargar","error");try{A("Preparando descarga ZIP (Filtrada)...","info");const x=new nt,Z=x.folder(`${T==null?void 0:T.event_slug}-photos-filtered`);if(!Z)throw new Error("No se pudo crear la carpeta en el ZIP");const H=Ne.map(async(ue,ke)=>{var Ee;try{const Ae=await(await fetch(ue.image_url)).blob(),We=((Ee=ue.image_url.split(".").pop())==null?void 0:Ee.split("?")[0])||"jpg";Z.file(`photo-${ke+1}.${We}`,Ae)}catch(Be){console.error("Error al descargar foto para el ZIP:",Be)}});await Promise.all(H);const ee=await x.generateAsync({type:"blob"}),ne=window.URL.createObjectURL(ee),ge=document.createElement("a");ge.href=ne,ge.download=`galeria-${T==null?void 0:T.event_slug}.zip`,ge.click(),window.URL.revokeObjectURL(ne),A("Galera completa descargada")}catch(x){console.error("Error al generar ZIP:",x),A("Error al generar el archivo ZIP","error")}},className:"px-6 py-2.5 bg-[#135bec] hover:bg-[#135bec]/90 text-white text-[10px] font-black rounded-xl shadow-lg border border-white/10 transition-all uppercase tracking-[2px] flex items-center gap-2",children:[e.jsx(st,{className:"size-4"}),"Descargar Todo (ZIP)"]})]})]})]}),e.jsx(Oe,{children:ce.length>0&&e.jsxs(be.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},className:"fixed bottom-10 left-1/2 -translate-x-1/2 z-[60] bg-slate-900/90 backdrop-blur-2xl border border-[#135bec]/30 rounded-2xl px-8 py-4 flex items-center gap-8 shadow-[0_20px_50px_rgba(0,0,0,0.5)]",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] font-black text-[#135bec] uppercase tracking-widest",children:"Seleccin Activa"}),e.jsxs("span",{className:"text-xl font-black text-white",children:[ce.length," ",e.jsx("span",{className:"text-xs text-slate-500 font-medium",children:"Fotos"})]})]}),e.jsx("div",{className:"w-px h-10 bg-white/10"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>ae([]),className:"px-4 py-2 text-[10px] font-black text-slate-400 uppercase tracking-widest hover:text-white transition-colors",children:"Cancelar"}),e.jsxs("button",{onClick:async()=>{const x=new nt;A(`Preparando ZIP de ${ce.length} fotos...`,"info");const Z=x.folder("seleccion-personalizada"),ee=F.filter(ke=>ce.includes(ke.id)).map(async(ke,Ee)=>{const Ae=await(await fetch(ke.image_url)).blob();Z==null||Z.file(`photo-${Ee+1}.jpg`,Ae)});await Promise.all(ee);const ne=await x.generateAsync({type:"blob"}),ge=window.URL.createObjectURL(ne),ue=document.createElement("a");ue.href=ge,ue.download="seleccion-fotos.zip",ue.click(),A("ZIP de seleccin descargado"),ae([])},className:"px-6 py-2.5 bg-white text-black text-[10px] font-black rounded-xl hover:bg-slate-200 transition-all uppercase tracking-[2px] flex items-center gap-2",children:[e.jsx(et,{className:"size-4"}),"Descargar ZIP"]}),e.jsxs("button",{onClick:async()=>{if(confirm(` ACCIN MASIVA: Ests seguro de eliminar ${ce.length} fotos definitivamente?`))try{te(!0);const{error:x}=await fe.from("generations").delete().in("id",ce);if(x)throw x;A(`${ce.length} fotos eliminadas`),ae([]),C(T.id)}catch(x){A(x.message,"error")}finally{te(!1)}},className:"px-6 py-2.5 bg-rose-500 text-white text-[10px] font-black rounded-xl hover:bg-rose-600 transition-all uppercase tracking-[2px] flex items-center gap-2",children:[e.jsx(Ve,{className:"size-4"}),"Eliminar Seleccionadas"]})]})]})}),W?e.jsxs("div",{className:"h-96 flex flex-col items-center justify-center gap-4",children:[e.jsx("div",{className:"size-12 border-4 border-[#135bec]/30 border-t-[#135bec] rounded-full animate-spin"}),e.jsx("p",{className:"text-slate-500 text-[10px] font-black uppercase tracking-widest",children:"Sincronizando Galera..."})]}):e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:[Ne.map(x=>{var Z;return e.jsxs("div",{onClick:()=>{ce.includes(x.id)?ae(H=>H.filter(ee=>ee!==x.id)):ae(H=>[...H,x.id])},className:`group relative aspect-[3/4] rounded-2xl overflow-hidden border transition-all duration-300 cursor-pointer shadow-xl ${ce.includes(x.id)?"border-[#135bec] scale-[0.98] ring-4 ring-[#135bec]/20":"border-white/5 bg-slate-900"}`,children:[e.jsx("div",{className:`absolute top-4 left-4 z-20 size-5 rounded-md border flex items-center justify-center transition-all ${ce.includes(x.id)?"bg-[#135bec] border-[#135bec] text-white":"bg-black/20 border-white/20 text-transparent opacity-0 group-hover:opacity-100"}`,children:e.jsx("span",{className:"material-symbols-outlined !text-[14px] font-black",children:"check"})}),e.jsx("img",{src:x.image_url,alt:"Generation",className:`w-full h-full object-cover transition-transform duration-700 group-hover:scale-110 ${ce.includes(x.id)?"opacity-50":""}`}),e.jsxs("div",{className:"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent p-4 translate-y-2 group-hover:translate-y-0 transition-transform",children:[e.jsx("p",{className:"text-[8px] font-mono text-white/50 mb-0.5 truncate",children:x.id}),e.jsx("p",{className:"text-[10px] font-black text-white mb-3 truncate uppercase tracking-widest",children:((Z=x.profiles)==null?void 0:Z.email)||"Annimo"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:H=>{H.stopPropagation(),$(x.id)},className:"p-2.5 bg-rose-500/20 hover:bg-rose-500 border border-rose-500/30 rounded-xl text-rose-500 hover:text-white transition-all group/del",title:"Eliminar de la galera",children:e.jsx(Ve,{className:"size-4 group-hover/del:scale-110 transition-transform"})}),e.jsxs("button",{onClick:H=>{H.stopPropagation(),window.open(x.image_url,"_blank")},className:"flex-1 py-2 bg-white/10 backdrop-blur-md border border-white/20 rounded-xl text-white text-[9px] font-black uppercase tracking-widest hover:bg-white/20 transition-all flex items-center justify-center gap-2",children:[e.jsx(tt,{className:"size-3"}),"Ver Original"]})]})]})]},x.id)}),Ne.length===0&&e.jsxs("div",{className:"col-span-full h-64 flex flex-col items-center justify-center bg-slate-900/50 rounded-[32px] border border-dashed border-white/5",children:[e.jsx($e,{className:"size-8 text-slate-800 mb-4"}),e.jsx("p",{className:"text-slate-500 text-xs font-black uppercase tracking-widest",children:"No hay fotos en este evento"})]})]})]},"moderation"),d==="wallet"&&e.jsxs(be.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.05},className:"space-y-8",children:[e.jsxs("section",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 glass-card rounded-3xl p-10 bg-gradient-to-br from-[#135bec] to-[#0a1f4d] border-none shadow-2xl shadow-[#135bec]/20 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-10 opacity-10",children:e.jsx(xt,{className:"size-64"})}),e.jsxs("div",{className:"relative z-10 flex flex-col h-full justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white/60 text-[11px] font-black uppercase tracking-[3px] mb-2",children:"Crditos Totales Disponibles"}),e.jsxs("h2",{className:"text-7xl font-black text-white tracking-tighter",children:[we.toLocaleString(),e.jsx("span",{className:"text-2xl text-white/40 ml-4 font-medium uppercase tracking-widest",children:"unidades"})]})]}),e.jsxs("div",{className:"mt-12 flex flex-wrap gap-8 items-end",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-white/40 text-[10px] font-bold uppercase",children:"Consumo Total"}),e.jsxs("div",{className:"flex items-center gap-2 text-white",children:[e.jsx(at,{className:"size-5 text-emerald-400"}),e.jsx("span",{className:"text-2xl font-black",children:((Ie=h==null?void 0:h.credits_used)==null?void 0:Ie.toLocaleString())||0})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-white/40 text-[10px] font-bold uppercase",children:"Eventos Activos"}),e.jsxs("div",{className:"flex items-center gap-2 text-white/80",children:[e.jsx(Re,{className:"size-5 text-yellow-400"}),e.jsx("span",{className:"text-2xl font-black",children:b.filter(x=>x.is_active).length})]})]}),e.jsx("button",{onClick:()=>xe(!0),className:"ml-auto px-8 py-4 bg-white text-[#135bec] font-black rounded-2xl hover:scale-105 transition-all text-xs uppercase tracking-[2px] shadow-xl",children:"Recargar Crditos"})]})]})]}),e.jsxs("div",{className:"glass-card rounded-3xl p-8 border border-white/5 bg-slate-900/50 backdrop-blur-xl flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-black text-white uppercase tracking-tighter mb-6 flex items-center gap-2",children:[e.jsx(bt,{className:"size-5 text-[#135bec]"}),"ltimas Recargas"]}),e.jsx("div",{className:"space-y-6 max-h-[400px] overflow-y-auto custom-scrollbar pr-2",children:i.length>0?i.map((x,Z)=>e.jsxs("div",{className:"flex justify-between items-center bg-white/[0.02] p-4 rounded-2xl border border-white/5 group hover:border-[#135bec]/30 transition-all",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-bold text-white",children:["+",x.amount.toLocaleString()," Crditos"]}),e.jsx("p",{className:"text-[10px] text-slate-500 mt-1",children:new Date(x.created_at).toLocaleDateString()})]}),e.jsx("span",{className:`text-[9px] font-black uppercase px-2 py-1 rounded-lg ${x.type==="top-up"?"text-emerald-500 bg-emerald-500/10":"text-blue-500 bg-blue-500/10"}`,children:x.type==="top-up"?"Carga":"Ajuste"})]},x.id)):e.jsx("div",{className:"text-center py-10 opacity-40",children:e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-widest",children:"Sin movimientos"})})})]}),e.jsxs("p",{className:"text-[10px] text-slate-600 text-center mt-6",children:[e.jsx(qe,{className:"size-3 inline mr-1"}),"Los crditos no poseen fecha de vencimiento."]})]})]}),e.jsxs("section",{className:"glass-card rounded-[40px] p-10 border border-white/5 bg-slate-900/40 backdrop-blur-3xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-10",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-black text-white uppercase tracking-tighter",children:"Analticas de Consumo"}),e.jsx("p",{className:"text-slate-500 text-[9px] font-black uppercase tracking-[3px] mt-1",children:"Monitoreo de energa AI por evento activo"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("div",{className:"px-3 py-1 bg-emerald-500/10 border border-emerald-500/20 rounded-full flex items-center gap-2",children:[e.jsx("div",{className:"size-1.5 bg-emerald-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-[9px] font-black text-emerald-500 uppercase",children:"Live Metrics"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8",children:[b.map((x,Z)=>{var ne;const H=Math.min(100,(x.credits_used||0)/(x.credits_allocated||1)*100),ee=[20,45,30,60,40,75,H].map((ge,ue)=>`${ue*20},${80-ge*.6}`).join(" ");return e.jsx(be.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:Z*.05},className:"group relative h-full",children:e.jsxs("div",{className:"p-8 rounded-[32px] bg-gradient-to-br from-white/[0.03] to-transparent border border-white/5 group-hover:border-[#135bec]/40 transition-all overflow-hidden h-full flex flex-col",children:[e.jsx("div",{className:"absolute inset-x-0 bottom-0 h-24 opacity-20 pointer-events-none",children:e.jsxs("svg",{className:"w-full h-full",preserveAspectRatio:"none",viewBox:"0 0 120 80",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:`grad-${Z}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#135bec",stopOpacity:"0.5"}),e.jsx("stop",{offset:"100%",stopColor:"#135bec",stopOpacity:"0"})]})}),e.jsx("path",{d:`M0,80 L${ee} L120,80 Z`,fill:`url(#grad-${Z})`,className:"group-hover:opacity-100 transition-opacity"}),e.jsx(be.path,{d:`M0,${80-20*.6} L${ee}`,fill:"none",stroke:"#135bec",strokeWidth:"2",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:1.5,delay:.5}})]})}),e.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("div",{className:"p-2.5 bg-white/5 rounded-xl",children:e.jsx(at,{className:`size-4 ${H>80?"text-amber-500":"text-emerald-500"}`})}),e.jsx("p",{className:"text-[10px] font-black text-white/20 uppercase tracking-[2px]",children:x.event_slug})]}),e.jsx("h4",{className:"text-[11px] font-black text-white uppercase tracking-widest mb-1 truncate group-hover:text-[#135bec] transition-colors",children:x.event_name}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-black text-white",children:((ne=x.credits_used)==null?void 0:ne.toLocaleString())||0}),e.jsx("span",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Usados"})]}),e.jsx("div",{className:"mt-4 w-full bg-white/5 h-1.5 rounded-full overflow-hidden",children:e.jsx(be.div,{initial:{width:0},animate:{width:`${H}%`},className:`h-full rounded-full ${H>90?"bg-rose-500":H>70?"bg-amber-500":"bg-[#135bec]"}`})}),e.jsxs("div",{className:"flex justify-between mt-3",children:[e.jsxs("span",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest",children:[Math.round(H),"% Cap"]}),e.jsxs("span",{className:"text-[9px] font-black text-white/30 uppercase tracking-widest",children:["Limite: ",x.credits_allocated]})]})]})]})]})},x.id)}),b.length===0&&e.jsxs("div",{className:"col-span-full py-20 text-center border-2 border-dashed border-white/5 rounded-[40px]",children:[e.jsx("div",{className:"size-16 bg-white/5 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(qe,{className:"size-8 text-slate-600"})}),e.jsx("p",{className:"text-xs font-black text-slate-600 uppercase tracking-[3px]",children:"Sin actividad de consumo para reportar"})]})]})]})]},"wallet"),d==="branding"&&e.jsxs(be.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"grid grid-cols-1 xl:grid-cols-12 gap-8",children:[e.jsx("div",{className:"xl:col-span-8 space-y-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("section",{className:"glass-card rounded-[32px] p-8 border border-white/5 bg-slate-900/50 backdrop-blur-xl shadow-2xl h-fit",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx("div",{className:"p-3 bg-indigo-500/10 border border-indigo-500/20 rounded-xl text-indigo-500",children:e.jsx(Ue,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-black text-white uppercase tracking-tighter",children:"Identidad Visual"}),e.jsx("p",{className:"text-slate-500 text-xs",children:"Personaliza tu panel de control."})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[2px] block mb-4",children:"Logo Corporativo"}),e.jsxs("div",{className:"w-full border-2 border-dashed border-slate-800 rounded-2xl p-6 flex flex-col items-center justify-center bg-slate-950/50 hover:bg-slate-950 transition-all cursor-pointer group hover:border-[#135bec]/50 shadow-inner",onClick:()=>{var x;return(x=document.getElementById("brandingLogoInput"))==null?void 0:x.click()},children:[e.jsx("input",{type:"file",id:"brandingLogoInput",className:"hidden",accept:"image/*",onChange:Y}),z.logo_url?e.jsxs("div",{className:"relative group/logo",children:[e.jsx("img",{src:z.logo_url,className:"h-12 object-contain mb-2 group-hover:opacity-50 transition-opacity",alt:"Logo"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover/logo:opacity-100 transition-opacity",children:e.jsx(Ge,{className:"size-5 text-white"})})]}):e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(mt,{className:"w-8 h-8 text-slate-700 group-hover:text-[#135bec] mb-3 transition-colors"}),e.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest text-center",children:"Subir Identidad"})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[2px] block mb-4",children:"Color de Acento"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"size-12 rounded-xl border-2 border-white/10 shadow-2xl cursor-pointer hover:scale-105 transition-all",style:{backgroundColor:z.primary_color},onClick:()=>{var x;return(x=document.getElementById("brandingColorPicker"))==null?void 0:x.click()}}),e.jsx("input",{id:"brandingColorPicker",type:"color",className:"sr-only",value:z.primary_color,onChange:x=>u({...z,primary_color:x.target.value})}),e.jsxs("div",{className:"flex-1 bg-slate-950 border border-slate-800 rounded-xl py-3 px-4 text-xs text-white font-mono flex items-center justify-between",children:[e.jsx("span",{children:z.primary_color.toUpperCase()}),e.jsx(Ge,{className:"size-3 text-slate-600"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[2px] block mb-4",children:"Radio de Bordes"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{className:"w-full bg-slate-950 border border-slate-800 rounded-xl py-3 px-4 text-xs text-white focus:ring-1 focus:ring-[#135bec] outline-none appearance-none cursor-pointer pr-10",value:z.radius,onChange:x=>u({...z,radius:x.target.value}),children:[e.jsx("option",{value:"4px",children:"4px (Recto)"}),e.jsx("option",{value:"8px",children:"8px (Suave)"}),e.jsx("option",{value:"12px",children:"12px (Premium)"}),e.jsx("option",{value:"20px",children:"20px (Redondeado)"})]}),e.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none",children:e.jsx(rt,{className:"size-3 text-slate-600"})})]})]})]}),e.jsxs("button",{onClick:L,disabled:ve,className:`w-full py-4 bg-white text-slate-900 text-[10px] font-black rounded-2xl transition-all shadow-xl hover:shadow-2xl active:scale-[0.98] uppercase tracking-[3px] flex items-center justify-center gap-2 group ${ve?"opacity-50 cursor-not-allowed":""}`,children:[ve?e.jsx("div",{className:"size-4 border-2 border-slate-900 border-t-transparent rounded-full animate-spin"}):e.jsx(Me,{className:"size-4 group-hover:scale-110 transition-transform"}),ve?"Sincronizando...":"Sincronizar Panel"]})]})]}),e.jsxs("div",{className:"glass-card rounded-[32px] p-8 border border-white/5 bg-slate-900/50 backdrop-blur-xl shadow-2xl relative overflow-hidden h-fit",children:[e.jsx("div",{className:"flex items-center justify-between mb-8 relative z-10",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-[#135bec]/10 border border-[#135bec]/20 rounded-xl text-[#135bec]",children:e.jsx(Re,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-black text-white uppercase tracking-tighter",children:"Estilos IA"}),e.jsx("p",{className:"text-slate-500 text-xs",children:"Packs activos para clientes."})]})]})}),e.jsx("div",{className:"grid grid-cols-2 gap-4 relative z-10",children:ft.map(x=>{const Z=Fe.find(H=>H.subCategory===x)||Fe[0];return e.jsxs("label",{className:"relative block cursor-pointer group",children:[e.jsx("input",{type:"checkbox",checked:z.style_presets.includes(x),onChange:()=>ye(x),className:"peer sr-only"}),e.jsxs("div",{className:`aspect-square rounded-2xl overflow-hidden relative border-2 transition-all duration-300 ${z.style_presets.includes(x)?"border-[#135bec] scale-[1.02] shadow-xl shadow-[#135bec]/20":"border-white/5 opacity-40 hover:border-white/20 hover:opacity-80"}`,children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 to-transparent z-10"}),e.jsx("img",{alt:x,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700",src:Z.url}),e.jsx("div",{className:"absolute bottom-2 left-3 z-20",children:e.jsx("p",{className:"text-[8px] font-black uppercase text-white tracking-[1px] leading-tight",children:x})}),z.style_presets.includes(x)&&e.jsx("div",{className:"absolute top-2 right-2 z-20",children:e.jsx("div",{className:"bg-[#135bec] rounded-full p-1 shadow-xl border border-white/20",children:e.jsx(Me,{className:"w-2.5 h-2.5 text-white"})})})]})]},x)})})]})]})}),e.jsxs("div",{className:"xl:col-span-4 sticky top-8",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("div",{className:"mb-6 flex items-center gap-3",children:[e.jsx("div",{className:"size-1.5 rounded-full bg-emerald-500 animate-pulse"}),e.jsx("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[4px]",children:"Live Preview (Kiosk)"})]}),e.jsxs("div",{className:"relative w-[280px] h-[580px] bg-slate-800 rounded-[50px] p-3 border-[6px] border-slate-700 shadow-2xl overflow-hidden shadow-black/60",children:[e.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-32 h-6 bg-slate-700 rounded-b-2xl z-50"}),e.jsxs("div",{className:"w-full h-full bg-[#071121] rounded-[40px] overflow-hidden flex flex-col relative",children:[e.jsx("div",{className:"absolute inset-0 opacity-20",style:{background:`radial-gradient(circle at 50% 50%, ${z.primary_color}33 0%, transparent 70%)`}}),e.jsxs("div",{className:"p-6 flex flex-col items-center justify-center pt-10",children:[z.logo_url?e.jsx("img",{src:z.logo_url,className:"h-10 object-contain mb-4",alt:"Mockup Logo"}):e.jsx("div",{className:"h-10 w-32 bg-white/5 rounded-xl border border-white/10 flex items-center justify-center text-[8px] text-slate-600 font-black uppercase tracking-[2px]",children:"Your Logo Here"}),e.jsx("div",{className:"w-12 h-0.5",style:{background:`linear-gradient(90deg, transparent, ${z.primary_color}, transparent)`}})]}),e.jsxs("div",{className:"px-6 py-2 text-center",children:[e.jsx("h3",{className:"text-[14px] font-black text-white uppercase tracking-tighter italic",children:"Descubre tu Identidad"}),e.jsx("p",{className:"text-[8px] text-slate-500 uppercase font-black tracking-widest mt-1 opacity-60",children:"Selecciona un estandar de estilo"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4 no-scrollbar",children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[z.style_presets.slice(0,4).map((x,Z)=>{const H=Fe.find(ee=>ee.subCategory===x)||Fe[0];return e.jsxs("div",{className:"aspect-[3/4] overflow-hidden relative border shadow-lg",style:{borderRadius:z.radius,borderColor:Z===0?z.primary_color:"rgba(255,255,255,0.05)"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent z-10"}),e.jsx("img",{src:H.url,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute bottom-2 left-2 z-20",children:e.jsx("p",{className:"text-[7px] font-black text-white uppercase",children:x})})]},Z)}),z.style_presets.length<4&&Array.from({length:4-z.style_presets.length}).map((x,Z)=>e.jsx("div",{className:"aspect-[3/4] bg-white/5 border border-dashed border-white/10 flex items-center justify-center text-slate-800",style:{borderRadius:z.radius},children:e.jsx("span",{className:"material-symbols-outlined !text-sm",children:"add"})},Z))]})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"w-full py-3 text-center text-white text-[9px] font-black uppercase tracking-[2px] shadow-lg shadow-black/20",style:{backgroundColor:z.primary_color,borderRadius:z.radius},children:"Comenzar Experiencia"})})]})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 px-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"size-8 rounded-lg bg-orange-500/10 flex items-center justify-center text-orange-500",children:e.jsx(Re,{className:"size-4"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-black text-white uppercase tracking-widest",children:"Global Live Feed"}),e.jsx("p",{className:"text-[9px] text-slate-500 font-bold uppercase tracking-[2px]",children:"ltimas capturas en tus eventos"})]})]}),e.jsx("button",{onClick:()=>c("events"),className:"text-[9px] font-black text-[#135bec] uppercase tracking-widest hover:underline",children:"Ver todos los eventos"})]}),e.jsxs("div",{className:"relative group/feed",children:[e.jsx("div",{className:"flex gap-4 overflow-x-auto pb-6 pt-2 no-scrollbar scroll-smooth",children:V.length>0?V.map((x,Z)=>{var H;return e.jsxs(be.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:Z*.1},className:"min-w-[140px] md:min-w-[180px] aspect-[3/4] rounded-2xl overflow-hidden border border-white/5 bg-slate-900 shadow-xl relative group/item",children:[e.jsx("img",{src:x.image_url,alt:"Recent",className:"w-full h-full object-cover grayscale-[0.5] group-hover/item:grayscale-0 transition-all duration-500"}),e.jsxs("div",{className:"absolute inset-x-0 bottom-0 p-3 bg-gradient-to-t from-black/80 to-transparent",children:[e.jsx("p",{className:"text-[7px] font-black text-white/50 uppercase tracking-widest mb-0.5",children:((H=b.find(ee=>ee.id===x.event_id))==null?void 0:H.event_name)||"Evento"}),e.jsxs("p",{className:"text-[8px] font-bold text-white uppercase",children:["Hace ",Math.floor((Date.now()-new Date(x.created_at).getTime())/6e4),"m"]})]})]},x.id)}):e.jsxs("div",{className:"w-full h-40 rounded-[32px] border border-dashed border-white/10 flex flex-col items-center justify-center text-slate-600",children:[e.jsx("span",{className:"material-symbols-outlined text-3xl mb-2 opacity-20",children:"cloud_off"}),e.jsx("p",{className:"text-[10px] font-black uppercase tracking-[2px]",children:"Esperando actividad..."})]})}),e.jsx("div",{className:"absolute inset-y-0 left-0 w-20 bg-gradient-to-r from-[#0a0c0b]/50 to-transparent pointer-events-none opacity-0 group-hover/feed:opacity-100 transition-opacity"}),e.jsx("div",{className:"absolute inset-y-0 right-0 w-20 bg-gradient-to-l from-[#0a0c0b]/50 to-transparent pointer-events-none opacity-0 group-hover/feed:opacity-100 transition-opacity"})]})]})]})]},"branding")]}),e.jsxs(Oe,{children:[o&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-xl",children:e.jsxs(be.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"w-full max-w-md bg-slate-900 border border-white/10 rounded-2xl shadow-2xl overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-7 border-b border-white/5",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-white uppercase tracking-tighter",children:"Crear Evento"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1 uppercase tracking-widest font-bold",children:"Nueva instancia"})]}),e.jsx("button",{onClick:()=>m(!1),className:"size-10 flex items-center justify-center rounded-xl bg-slate-800 text-slate-500 hover:text-white transition-all",children:e.jsx(Te,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:q,className:"p-7 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 mb-2 block",children:"Nombre del Evento"}),e.jsx("input",{required:!0,type:"text",placeholder:"Nombre comercial",className:"w-full bg-[#0a0a0b] border border-white/10 rounded-xl px-5 py-4 text-white focus:border-[#135bec] outline-none transition-all placeholder:text-slate-800",value:n.name,onChange:x=>k({...n,name:x.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 mb-2 block",children:"Email del Cliente (Asignacin)"}),e.jsxs("div",{className:"relative",children:[e.jsx(dt,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-700 size-4"}),e.jsx("input",{required:!0,type:"email",placeholder:"cliente@ejemplo.com",className:"w-full bg-[#0a0a0b] border border-white/10 rounded-xl pl-11 pr-5 py-4 text-white focus:border-[#135bec] outline-none transition-all placeholder:text-slate-800 text-xs",value:n.client_email,onChange:x=>k({...n,client_email:x.target.value.toLowerCase()})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 mb-2 block",children:"Personalizado"}),e.jsx("input",{type:"text",placeholder:"slug",className:"w-full bg-[#0a0a0b] border border-white/10 rounded-xl px-4 py-3 text-white focus:border-[#135bec] outline-none transition-all text-xs font-mono",value:n.slug,onChange:x=>k({...n,slug:x.target.value.toLowerCase().replace(/\s+/g,"-")})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 mb-2 block",children:"Crditos"}),e.jsxs("div",{className:"relative",children:[e.jsx(He,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-[#135bec] size-4"}),e.jsx("input",{required:!0,type:"number",className:"w-full bg-[#0a0a0b] border border-white/10 rounded-xl pl-11 pr-5 py-3 text-white focus:border-[#135bec] outline-none transition-all text-xs font-bold",value:n.credits,onChange:x=>k({...n,credits:Number(x.target.value)})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 mb-2 block",children:"Inicio"}),e.jsx("input",{required:!0,type:"date",className:"w-full bg-[#0a0a0b] border border-white/10 rounded-xl px-4 py-3 text-white focus:border-[#135bec] outline-none transition-all text-xs",value:n.start_date,onChange:x=>k({...n,start_date:x.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 mb-2 block",children:"Fin"}),e.jsx("input",{required:!0,type:"date",className:"w-full bg-[#0a0a0b] border border-white/10 rounded-xl px-4 py-3 text-white focus:border-[#135bec] outline-none transition-all text-xs",value:n.end_date,onChange:x=>k({...n,end_date:x.target.value})})]})]}),e.jsxs("div",{className:"p-4 bg-[#135bec]/5 border border-[#135bec]/10 rounded-xl flex items-center gap-4",children:[e.jsx("div",{className:"size-8 rounded-lg bg-[#135bec]/10 flex items-center justify-center text-[#135bec]",children:e.jsx(Me,{className:"size-4"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[9px] font-bold text-slate-500 uppercase tracking-widest leading-none",children:"Verificacin de Balance"}),e.jsxs("p",{className:"text-[11px] text-slate-400 mt-1 leading-tight",children:["Se deducirn ",n.credits," crditos de tu balance mayorista (",we," disponibles)."]})]})]})]}),e.jsx("button",{disabled:a,type:"submit",className:"w-full py-5 bg-[#135bec] hover:bg-[#135bec]/90 text-white text-[11px] font-black rounded-xl transition-all shadow-xl shadow-[#135bec]/20 uppercase tracking-widest disabled:opacity-50 disabled:cursor-not-allowed group/btn",children:a?"Creando...":e.jsxs("span",{className:"flex items-center justify-center gap-2",children:["Activar Instancia de Evento",e.jsx(Re,{className:"size-4 group-hover:scale-110 transition-transform"})]})})]})]})}),v&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-xl",children:e.jsxs(be.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"w-full max-w-md bg-slate-900 border border-white/10 rounded-2xl shadow-2xl overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-7 border-b border-white/5",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-white uppercase tracking-tighter",children:"Editar Evento"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1 uppercase tracking-widest font-bold",children:"Modificar parmetros"})]}),e.jsx("button",{onClick:()=>S(null),className:"size-10 flex items-center justify-center rounded-xl bg-slate-800 text-slate-500 hover:text-white transition-all",children:e.jsx(Te,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-7 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 mb-2 block",children:"Nombre del Evento"}),e.jsx("input",{required:!0,type:"text",className:"w-full bg-[#0a0a0b] border border-white/10 rounded-xl px-5 py-4 text-white focus:border-[#135bec] outline-none transition-all placeholder:text-slate-800",value:v.event_name,onChange:x=>S({...v,event_name:x.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 mb-2 block",children:"Inicio"}),e.jsx("input",{required:!0,type:"date",className:"w-full bg-[#0a0a0b] border border-white/10 rounded-xl px-4 py-3 text-white focus:border-[#135bec] outline-none transition-all text-xs",value:new Date(v.start_date).toISOString().split("T")[0],onChange:x=>S({...v,start_date:x.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 mb-2 block",children:"Fin"}),e.jsx("input",{required:!0,type:"date",className:"w-full bg-[#0a0a0b] border border-white/10 rounded-xl px-4 py-3 text-white focus:border-[#135bec] outline-none transition-all text-xs",value:new Date(v.end_date).toISOString().split("T")[0],onChange:x=>S({...v,end_date:x.target.value})})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-white/5 rounded-2xl border border-white/5",children:[e.jsx("div",{className:`size-10 rounded-xl flex items-center justify-center ${v.is_active?"bg-emerald-500/10 text-emerald-500":"bg-rose-500/10 text-rose-500"}`,children:e.jsx(Re,{className:"size-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-[10px] font-black uppercase text-white tracking-widest leading-none",children:"Estado"}),e.jsx("p",{className:"text-[9px] text-slate-500 uppercase mt-1 leading-none",children:v.is_active?"En Lnea":"Inactivo"})]}),e.jsx("button",{onClick:()=>S({...v,is_active:!v.is_active}),className:`px-4 py-2 rounded-xl text-[10px] font-black uppercase transition-all ${v.is_active?"bg-rose-500/10 text-rose-500 hover:bg-rose-500 hover:text-white":"bg-emerald-500/10 text-emerald-500 hover:bg-emerald-500 hover:text-white"}`,children:v.is_active?"Pausar":"Activar"})]})]}),e.jsx("button",{disabled:a,onClick:async()=>{try{l(!0);const{error:x}=await fe.from("events").update({event_name:v.event_name,start_date:new Date(v.start_date).toISOString(),end_date:new Date(v.end_date).toISOString(),is_active:v.is_active}).eq("id",v.id);if(x)throw x;A("Evento actualizado correctamente"),S(null),D()}catch(x){A("Error al actualizar: "+x.message,"error")}finally{l(!1)}},className:"w-full py-5 bg-[#135bec] hover:bg-[#135bec]/90 text-white text-[11px] font-black rounded-xl transition-all shadow-xl shadow-[#135bec]/20 uppercase tracking-[3px] disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Sincronizando...":"Guardar Cambios"})]})]})}),N&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-xl",children:e.jsxs(be.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"w-full max-w-sm bg-slate-900 border border-white/10 rounded-2xl shadow-2xl overflow-hidden",children:[e.jsxs("div",{className:"p-7 border-b border-white/5 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-black text-white uppercase tracking-tighter",children:"Recargar Evento"}),e.jsx("p",{className:"text-[10px] text-slate-500 uppercase font-bold mt-1",children:N.event_name})]}),e.jsx("button",{onClick:()=>P(null),className:"size-8 flex items-center justify-center rounded-lg bg-slate-800 text-slate-500 hover:text-white transition-all",children:e.jsx(Te,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"p-7 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black uppercase tracking-[2px] text-slate-500 mb-2 block",children:"Cantidad de Crditos"}),e.jsxs("div",{className:"relative",children:[e.jsx(He,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-emerald-500 size-4"}),e.jsx("input",{type:"number",className:"w-full bg-[#0a0a0b] border border-white/10 rounded-xl pl-11 pr-5 py-4 text-white focus:border-emerald-500 outline-none transition-all font-bold text-center text-xl",value:B,onChange:x=>M(Number(x.target.value))})]}),e.jsxs("p",{className:"text-[9px] text-slate-500 mt-3 text-center uppercase tracking-widest",children:["Disponibles: ",e.jsx("span",{className:"text-white",children:we.toLocaleString()})]})]}),e.jsx("button",{disabled:a||B<=0||B>we,onClick:Q,className:"w-full py-5 bg-emerald-500 hover:bg-emerald-400 text-[#071121] text-[11px] font-black rounded-xl transition-all shadow-xl shadow-emerald-500/20 uppercase tracking-[3px] disabled:opacity-30 disabled:grayscale",children:a?"Procesando...":"Confirmar Transferencia"})]})]})})]}),e.jsx(Oe,{children:R.type&&e.jsx(be.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.9},className:"fixed bottom-8 right-8 z-[100]",children:e.jsxs("div",{className:`px-6 py-4 rounded-2xl shadow-2xl flex items-center gap-4 backdrop-blur-xl border ${R.type==="error"?"bg-rose-500/20 border-rose-500/30 text-rose-500":R.type==="info"?"bg-[#135bec]/20 border-[#135bec]/30 text-[#135bec]":"bg-[#13ec80]/20 border-[#13ec80]/30 text-[#13ec80]"}`,children:[R.type==="error"?e.jsx($e,{className:"size-5"}):R.type==="info"?e.jsx(qe,{className:"size-5"}):e.jsx(Me,{className:"size-5"}),e.jsx("p",{className:"text-xs font-black uppercase tracking-widest",children:R.message})]})})}),e.jsx(Oe,{children:J&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-xl",children:e.jsxs(be.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"w-full max-w-md bg-slate-900 border border-white/10 rounded-2xl shadow-2xl overflow-hidden",children:[e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"size-20 bg-rose-500/10 rounded-full flex items-center justify-center mx-auto mb-6 border border-rose-500/20",children:e.jsx($e,{className:"size-10 text-rose-500"})}),e.jsx("h3",{className:"text-2xl font-black text-white uppercase tracking-tighter mb-2",children:"Eliminar Evento?"}),e.jsxs("p",{className:"text-slate-400 text-sm leading-relaxed",children:["Esta accin es permanente. Se eliminar el evento ",e.jsxs("span",{className:"text-white font-bold",children:['"',J.name,'"']})," y todos sus datos asociados."]})]}),e.jsxs("div",{className:"flex border-t border-white/5 p-4 bg-slate-950/50 gap-3",children:[e.jsx("button",{onClick:()=>g(null),className:"flex-1 py-4 bg-slate-800 hover:bg-slate-700 text-slate-300 text-[10px] font-black rounded-xl transition-all uppercase tracking-[2px]",children:"Cancelar"}),e.jsx("button",{onClick:ie,className:"flex-1 py-4 bg-rose-500 hover:bg-rose-600 text-white text-[10px] font-black rounded-xl transition-all shadow-lg shadow-rose-500/20 uppercase tracking-[2px]",children:"Confirmar Baja"})]})]})})}),e.jsx(Oe,{children:oe&&e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 md:p-8",children:[e.jsx(be.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>xe(!1),className:"absolute inset-0 bg-slate-950/80 backdrop-blur-md"}),e.jsxs(be.div,{initial:{scale:.9,opacity:0,y:30},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:30},className:"relative w-full max-w-5xl glass-card rounded-[48px] overflow-hidden bg-gradient-to-br from-slate-900/40 to-slate-950/40 border border-white/5 shadow-[0_32px_100px_rgba(0,0,0,0.8)]",children:[e.jsxs("div",{className:"p-10 pb-4 flex justify-between items-start",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 bg-[#135bec]/10 border border-[#135bec]/20 rounded-xl",children:e.jsx(Ke,{className:"size-5 text-[#135bec]"})}),e.jsx("h2",{className:"text-3xl font-black text-white uppercase tracking-tighter",children:"Cargar Energa AI"})]}),e.jsx("p",{className:"text-slate-500 text-[10px] font-black uppercase tracking-[3px] mt-2",children:"Selecciona un pack de crditos para continuar operando"})]}),e.jsx("button",{onClick:()=>xe(!1),className:"p-4 hover:bg-white/5 rounded-full text-slate-500 transition-colors group",children:e.jsx(Te,{className:"size-6 group-hover:rotate-90 transition-transform duration-300"})})]}),e.jsx("div",{className:"p-10 grid grid-cols-1 md:grid-cols-3 gap-8",children:[{qty:5e3,label:"Pack Inicial",price:3e4,color:"from-blue-600/10 to-transparent",border:"border-blue-500/20"},{qty:1e4,label:"Pack Pro",price:6e4,color:"from-[#135bec]/20 to-[#135bec]/5",border:"border-[#135bec]/40",featured:!0},{qty:2e4,label:"Pack Elite",price:12e4,color:"from-purple-600/10 to-transparent",border:"border-purple-500/20"}].map((x,Z)=>e.jsxs(be.button,{disabled:he,whileHover:he?{}:{scale:1.02,y:-8},whileTap:he?{}:{scale:.98},onClick:()=>de(x),className:`relative group p-10 rounded-[40px] border ${x.border} bg-gradient-to-br ${x.color} backdrop-blur-3xl flex flex-col text-left transition-all overflow-hidden h-full ${he?"opacity-50 cursor-not-allowed":""}`,children:[x.featured&&e.jsx("div",{className:"absolute top-0 right-0 px-6 py-2 bg-[#135bec] text-white text-[9px] font-black uppercase tracking-widest rounded-bl-2xl shadow-lg animate-pulse",children:"Popular"}),e.jsxs("div",{className:"mb-12",children:[e.jsx("p",{className:"text-white/40 text-[10px] font-black uppercase tracking-[2px] mb-2",children:x.label}),e.jsxs("h3",{className:"text-5xl font-black text-white flex items-baseline gap-2",children:[x.qty.toLocaleString(),e.jsx("span",{className:"text-sm text-white/20 font-medium uppercase tracking-[3px]",children:"Cds"})]})]}),e.jsxs("div",{className:"mt-auto pt-10 border-t border-white/5 flex items-end justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-white/20 text-[9px] font-black uppercase tracking-widest",children:"Inversin"}),e.jsxs("h4",{className:"text-3xl font-black text-white tracking-tighter",children:["$",x.price.toLocaleString()," ",e.jsx("span",{className:"text-xs text-white/30 font-medium uppercase tracking-widest ml-1",children:"Ars"})]})]}),e.jsx("div",{className:"size-14 bg-white/5 border border-white/10 rounded-2xl flex items-center justify-center group-hover:bg-white text-white group-hover:text-black transition-all shadow-xl",children:he?e.jsx("div",{className:"size-5 border-2 border-current border-t-transparent rounded-full animate-spin"}):e.jsx(wt,{className:"size-6"})})]}),e.jsx("div",{className:"absolute -bottom-10 -right-10 size-40 bg-white/5 rounded-full blur-[80px] group-hover:bg-white/10 transition-all opacity-0 group-hover:opacity-100"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-white/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"})]},Z))}),e.jsxs("div",{className:"p-10 pt-0 flex flex-col items-center",children:[e.jsxs("div",{className:"flex items-center gap-8 opacity-40 hover:opacity-100 transition-all duration-500 grayscale hover:grayscale-0",children:[e.jsx("img",{src:"https://logodownload.org/wp-content/uploads/2019/06/mercado-pago-logo.png",className:"h-5",alt:"Mercado Pago"}),e.jsx("div",{className:"w-px h-6 bg-white/10"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/d/d6/Visa_2021.svg/512px-Visa_2021.svg.png",className:"h-3.5",alt:"Visa"}),e.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2a/Mastercard-logo.svg/1280px-Mastercard-logo.svg.png",className:"h-5",alt:"Mastercard"})]})]}),e.jsxs("p",{className:"text-[9px] text-slate-600 font-black uppercase tracking-[3px] mt-8 flex items-center gap-3",children:[e.jsx(Ue,{className:"size-4 text-emerald-500/50"}),"Transacciones encriptadas y aseguradas por Mercado Pago Gateway"]})]})]})]})})]})};export{Lt as PartnerDashboard};
