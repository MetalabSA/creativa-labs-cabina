import{c as J,r as o,j as e,S as oe,a as Yt,b as Kt,R as ye,C as ht,M as Xt,d as Pt,L as Jt,e as Ae,f as We,s as V,A as ea,T as Ye,g as ta,D as aa}from"./DashboardApp-CsHHBtGa.js";import{Q as Je,D as He,a as at}from"./index-DLwdZKHn.js";import{B as sa}from"./Background3D-Bc0ctoQJ.js";import{m as ie}from"./proxy-C4ZXLI9K.js";import{X as xe,H as et,S as ra}from"./x-CUt678W-.js";import{A as Ve,I as tt,C as lt,M as Et,S as St}from"./constants-CeMOve5C.js";import{Z as Le}from"./zap-D6ama1d2.js";/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],Mt=J("arrow-down",na);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Rt=J("arrow-left",ca);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ia=J("arrow-right",la);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ke=J("check",oa);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],xa=J("chevron-down",da);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ha=J("chevron-right",ua);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],pa=J("circle-alert",ma);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],fa=J("circle-question-mark",ba);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],mt=J("heart",ga);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],va=J("instagram",wa);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],ya=J("layout-grid",ja);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],ka=J("lock-open",Na);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Ca=J("log-out",_a);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ea=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],Sa=J("menu",Ea);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ma=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],At=J("printer",Ma);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ia=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],dt=J("refresh-cw",Ia);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Ra=J("share-2",Pa);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aa=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],xt=J("smartphone",Aa);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const La=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],$a=J("user",La),Xe=({title:n,sampleImageUrl:c,isSelected:m,onSelect:f,isPremium:k,isUnlocked:S,usageCount:_,isTopStyle:j,tags:x,isFavorite:L,onToggleFavorite:$})=>{const[O,M]=o.useState(!1),[D,W]=o.useState(!1);return o.useEffect(()=>{M(!1),W(!1);const B=new Image,P=setTimeout(()=>{D||(console.warn(`Timeout al cargar imagen: ${c}`),B.src=c+"?t="+Date.now())},5e3);return B.crossOrigin="anonymous",B.src=c,B.onload=()=>{clearTimeout(P),console.log(`Imagen cargada con Ã©xito: ${c}`),W(!0)},B.onerror=se=>{clearTimeout(P),console.error(`Fallo al cargar imagen: ${c}`,se),M(!0)},()=>clearTimeout(P)},[c]),e.jsxs("div",{className:`relative w-full max-w-[200px] aspect-[4/5] rounded-[24px] overflow-hidden transition-all duration-700 ease-[cubic-bezier(0.23,1,0.32,1)] group
                  backdrop-blur-xl border-2 cursor-pointer
                  hover:-translate-y-4 hover:shadow-[0_40px_80px_rgba(0,0,0,0.9)]
                  ${m?"border-accent shadow-[0_0_50px_rgba(255,85,0,0.3)] scale-[1.05] z-10":"border-white/5 hover:border-white/20 bg-[#121215]"}`,onClick:f,children:[$&&e.jsx("button",{onClick:$,className:`absolute top-4 right-4 z-[30] w-8 h-8 flex items-center justify-center rounded-full backdrop-blur-md border transition-all duration-300
            ${L?"bg-red-500/20 border-red-500/50 text-red-500":"bg-black/40 border-white/10 text-white/40 hover:bg-white/10 hover:text-white"}`,children:e.jsx(mt,{className:`w-4 h-4 ${L?"fill-current":""}`})}),k&&e.jsxs("div",{className:"absolute top-6 left-6 z-[20] flex items-center gap-2 px-3 py-1 bg-gradient-to-r from-amber-500 to-yellow-300 rounded-full shadow-[0_0_20px_rgba(245,158,11,0.4)] animate-pulse",children:[e.jsx(oe,{className:"w-3 h-3 text-white"}),e.jsx("span",{className:"text-[8px] font-black text-white uppercase tracking-[1px]",children:"Premium"})]}),_!==void 0&&_>0&&e.jsxs("div",{className:`absolute left-6 z-[20] flex items-center gap-1.5 px-2.5 py-1 bg-black/60 backdrop-blur-md rounded-full border border-white/10 transition-all duration-500
          ${k?"top-16":"top-6"}
          ${m?"opacity-100":"opacity-0 group-hover:opacity-100"}`,children:[e.jsx("div",{className:"w-1 h-1 rounded-full bg-accent animate-pulse"}),e.jsxs("span",{className:"text-[7px] font-black text-white/70 uppercase tracking-[1px]",children:[_," usos"]})]}),j&&e.jsx("div",{className:"absolute top-6 right-16 z-[20] flex items-center justify-center w-8 h-8 bg-accent/20 backdrop-blur-xl border border-accent/40 rounded-full shadow-[0_0_15px_rgba(255,85,0,0.3)] animate-bounce duration-[2000ms]",children:e.jsx(oe,{className:"w-4 h-4 text-accent"})}),e.jsx("div",{className:`absolute top-0 left-0 w-full h-[2px] bg-accent/60 blur-[2px] z-[10] pointer-events-none transition-opacity duration-500
        ${m?"opacity-100 animate-[scan_3s_linear_infinite]":"opacity-0"}`}),e.jsx("div",{className:`absolute inset-0 transition-opacity duration-700 pointer-events-none z-0
        ${m?"opacity-100":"opacity-0"}`,style:{background:"radial-gradient(circle at 50% 100%, rgba(255, 85, 0, 0.2) 0%, transparent 70%)"}}),e.jsx("div",{className:`absolute inset-[1px] rounded-[22px] bg-gradient-to-br from-white/10 to-transparent z-[2] pointer-events-none transition-opacity
        ${m?"opacity-100":"opacity-40"}`}),e.jsxs("div",{className:"absolute inset-0 z-[1] overflow-hidden bg-[#0a0a0c]",children:[O?e.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center bg-gradient-to-br from-[#1a1a1e] to-[#0a0a0c] p-10 text-center animate-[fadeIn_0.5s_ease-out]",children:[e.jsx(pa,{className:"w-12 h-12 text-accent/40 mb-4"}),e.jsxs("div",{className:"text-[8px] tracking-[4px] text-white/40 font-black uppercase leading-relaxed",children:["Error de Archivo",e.jsx("br",{}),e.jsx("span",{className:"text-accent/60 mt-2 block lowercase font-mono opacity-80",children:c})]}),e.jsx("p",{className:"text-[6px] text-white/20 uppercase tracking-[2px] mt-4 max-w-[150px]",children:"AsegÃºrate de que el archivo estÃ© en la raÃ­z con este nombre exacto."})]}):e.jsx("img",{src:c,alt:n,className:`w-full h-full object-cover transition-all duration-1000 ease-in-out
              ${D?"opacity-100":"opacity-0"}
              ${m?"scale-105 brightness-110 saturate-[1.1]":"scale-100 brightness-[0.7] saturate-[0.8] group-hover:brightness-90 group-hover:scale-102"}`,onLoad:()=>W(!0),onError:()=>M(!0),crossOrigin:"anonymous"}),!D&&!O&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-[#121215] z-[3]",children:e.jsx("div",{className:"w-8 h-8 border-2 border-accent/20 border-t-accent rounded-full animate-spin shadow-[0_0_15px_rgba(255,85,0,0.2)]"})}),e.jsx("div",{className:`absolute inset-0 transition-all duration-700 pointer-events-none z-[4]
          ${m?"bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-90":"bg-black/20"}`})]}),e.jsx("div",{className:"relative z-[15] flex flex-col items-center justify-end w-full h-full px-4 py-8",children:e.jsxs("div",{className:`flex flex-col items-center transition-all duration-500 transform
          ${m?"translate-y-0 opacity-100":"translate-y-4 opacity-70 group-hover:translate-y-0 group-hover:opacity-100"}`,children:[e.jsx("div",{className:`text-[9px] font-black tracking-[2px] uppercase mb-4 transition-colors duration-300 text-center leading-tight
            ${m?"text-accent":"text-white/60"}`,children:n}),e.jsx("div",{className:`px-6 py-2.5 rounded-full border text-[9px] font-black tracking-[4px] uppercase transition-all duration-500 backdrop-blur-xl
            ${m?"bg-accent text-white border-accent shadow-[0_0_20px_rgba(255,85,0,0.4)]":"bg-black/60 text-white/40 border-white/10"}`,children:m?"ACTIVO":k&&!S?"DESBLOQUEAR":"SELECCIONAR"}),x&&x.length>0&&e.jsx("div",{className:`flex flex-wrap justify-center gap-1.5 mt-4 transition-opacity duration-500 ${m?"opacity-100":"opacity-0 group-hover:opacity-60"}`,children:x.slice(0,3).map(B=>e.jsxs("span",{className:"text-[7px] font-black uppercase tracking-[1px] px-2 py-0.5 bg-white/5 rounded-md text-white/40",children:["#",B]},B))})]})}),e.jsx("div",{className:"absolute top-4 left-4 w-2 h-2 border-t border-l border-white/20 z-[6]"}),e.jsx("div",{className:"absolute top-4 right-4 w-2 h-2 border-t border-r border-white/20 z-[6]"}),e.jsx("div",{className:"absolute bottom-4 left-4 w-2 h-2 border-b border-l border-white/20 z-[6]"}),e.jsx("div",{className:"absolute bottom-4 right-4 w-2 h-2 border-b border-r border-white/20 z-[6]"})]})};var pt={};(function n(c,m,f,k){var S=!!(c.Worker&&c.Blob&&c.Promise&&c.OffscreenCanvas&&c.OffscreenCanvasRenderingContext2D&&c.HTMLCanvasElement&&c.HTMLCanvasElement.prototype.transferControlToOffscreen&&c.URL&&c.URL.createObjectURL),_=typeof Path2D=="function"&&typeof DOMMatrix=="function",j=(function(){if(!c.OffscreenCanvas)return!1;try{var s=new OffscreenCanvas(1,1),t=s.getContext("2d");t.fillRect(0,0,1,1);var d=s.transferToImageBitmap();t.createPattern(d,"no-repeat")}catch{return!1}return!0})();function x(){}function L(s){var t=m.exports.Promise,d=t!==void 0?t:c.Promise;return typeof d=="function"?new d(s):(s(x,x),null)}var $=(function(s,t){return{transform:function(d){if(s)return d;if(t.has(d))return t.get(d);var b=new OffscreenCanvas(d.width,d.height),v=b.getContext("2d");return v.drawImage(d,0,0),t.set(d,b),b},clear:function(){t.clear()}}})(j,new Map),O=(function(){var s=Math.floor(16.666666666666668),t,d,b={},v=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(t=function(w){var I=Math.random();return b[I]=requestAnimationFrame(function g(y){v===y||v+s-1<y?(v=y,delete b[I],w()):b[I]=requestAnimationFrame(g)}),I},d=function(w){b[w]&&cancelAnimationFrame(b[w])}):(t=function(w){return setTimeout(w,s)},d=function(w){return clearTimeout(w)}),{frame:t,cancel:d}})(),M=(function(){var s,t,d={};function b(v){function w(I,g){v.postMessage({options:I||{},callback:g})}v.init=function(g){var y=g.transferControlToOffscreen();v.postMessage({canvas:y},[y])},v.fire=function(g,y,q){if(t)return w(g,null),t;var T=Math.random().toString(36).slice(2);return t=L(function(F){function R(Q){Q.data.callback===T&&(delete d[T],v.removeEventListener("message",R),t=null,$.clear(),q(),F())}v.addEventListener("message",R),w(g,T),d[T]=R.bind(null,{data:{callback:T}})}),t},v.reset=function(){v.postMessage({reset:!0});for(var g in d)d[g](),delete d[g]}}return function(){if(s)return s;if(!f&&S){var v=["var CONFETTI, SIZE = {}, module = {};","("+n.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{s=new Worker(URL.createObjectURL(new Blob([v])))}catch(w){return typeof console<"u"&&typeof console.warn=="function"&&console.warn("ðŸŽŠ Could not load worker",w),null}b(s)}return s}})(),D={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function W(s,t){return t?t(s):s}function B(s){return s!=null}function P(s,t,d){return W(s&&B(s[t])?s[t]:D[t],d)}function se(s){return s<0?0:Math.floor(s)}function G(s,t){return Math.floor(Math.random()*(t-s))+s}function ue(s){return parseInt(s,16)}function Me(s){return s.map(ee)}function ee(s){var t=String(s).replace(/[^0-9a-f]/gi,"");return t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),{r:ue(t.substring(0,2)),g:ue(t.substring(2,4)),b:ue(t.substring(4,6))}}function re(s){var t=P(s,"origin",Object);return t.x=P(t,"x",Number),t.y=P(t,"y",Number),t}function he(s){s.width=document.documentElement.clientWidth,s.height=document.documentElement.clientHeight}function _e(s){var t=s.getBoundingClientRect();s.width=t.width,s.height=t.height}function me(s){var t=document.createElement("canvas");return t.style.position="fixed",t.style.top="0px",t.style.left="0px",t.style.pointerEvents="none",t.style.zIndex=s,t}function fe(s,t,d,b,v,w,I,g,y){s.save(),s.translate(t,d),s.rotate(w),s.scale(b,v),s.arc(0,0,1,I,g,y),s.restore()}function Ce(s){var t=s.angle*(Math.PI/180),d=s.spread*(Math.PI/180);return{x:s.x,y:s.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:s.startVelocity*.5+Math.random()*s.startVelocity,angle2D:-t+(.5*d-Math.random()*d),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:s.color,shape:s.shape,tick:0,totalTicks:s.ticks,decay:s.decay,drift:s.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:s.gravity*3,ovalScalar:.6,scalar:s.scalar,flat:s.flat}}function Te(s,t){t.x+=Math.cos(t.angle2D)*t.velocity+t.drift,t.y+=Math.sin(t.angle2D)*t.velocity+t.gravity,t.velocity*=t.decay,t.flat?(t.wobble=0,t.wobbleX=t.x+10*t.scalar,t.wobbleY=t.y+10*t.scalar,t.tiltSin=0,t.tiltCos=0,t.random=1):(t.wobble+=t.wobbleSpeed,t.wobbleX=t.x+10*t.scalar*Math.cos(t.wobble),t.wobbleY=t.y+10*t.scalar*Math.sin(t.wobble),t.tiltAngle+=.1,t.tiltSin=Math.sin(t.tiltAngle),t.tiltCos=Math.cos(t.tiltAngle),t.random=Math.random()+2);var d=t.tick++/t.totalTicks,b=t.x+t.random*t.tiltCos,v=t.y+t.random*t.tiltSin,w=t.wobbleX+t.random*t.tiltCos,I=t.wobbleY+t.random*t.tiltSin;if(s.fillStyle="rgba("+t.color.r+", "+t.color.g+", "+t.color.b+", "+(1-d)+")",s.beginPath(),_&&t.shape.type==="path"&&typeof t.shape.path=="string"&&Array.isArray(t.shape.matrix))s.fill(pe(t.shape.path,t.shape.matrix,t.x,t.y,Math.abs(w-b)*.1,Math.abs(I-v)*.1,Math.PI/10*t.wobble));else if(t.shape.type==="bitmap"){var g=Math.PI/10*t.wobble,y=Math.abs(w-b)*.1,q=Math.abs(I-v)*.1,T=t.shape.bitmap.width*t.scalar,F=t.shape.bitmap.height*t.scalar,R=new DOMMatrix([Math.cos(g)*y,Math.sin(g)*y,-Math.sin(g)*q,Math.cos(g)*q,t.x,t.y]);R.multiplySelf(new DOMMatrix(t.shape.matrix));var Q=s.createPattern($.transform(t.shape.bitmap),"no-repeat");Q.setTransform(R),s.globalAlpha=1-d,s.fillStyle=Q,s.fillRect(t.x-T/2,t.y-F/2,T,F),s.globalAlpha=1}else if(t.shape==="circle")s.ellipse?s.ellipse(t.x,t.y,Math.abs(w-b)*t.ovalScalar,Math.abs(I-v)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI):fe(s,t.x,t.y,Math.abs(w-b)*t.ovalScalar,Math.abs(I-v)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI);else if(t.shape==="star")for(var A=Math.PI/2*3,Z=4*t.scalar,de=8*t.scalar,te=t.x,le=t.y,be=5,ne=Math.PI/be;be--;)te=t.x+Math.cos(A)*de,le=t.y+Math.sin(A)*de,s.lineTo(te,le),A+=ne,te=t.x+Math.cos(A)*Z,le=t.y+Math.sin(A)*Z,s.lineTo(te,le),A+=ne;else s.moveTo(Math.floor(t.x),Math.floor(t.y)),s.lineTo(Math.floor(t.wobbleX),Math.floor(v)),s.lineTo(Math.floor(w),Math.floor(I)),s.lineTo(Math.floor(b),Math.floor(t.wobbleY));return s.closePath(),s.fill(),t.tick<t.totalTicks}function Ie(s,t,d,b,v){var w=t.slice(),I=s.getContext("2d"),g,y,q=L(function(T){function F(){g=y=null,I.clearRect(0,0,b.width,b.height),$.clear(),v(),T()}function R(){f&&!(b.width===k.width&&b.height===k.height)&&(b.width=s.width=k.width,b.height=s.height=k.height),!b.width&&!b.height&&(d(s),b.width=s.width,b.height=s.height),I.clearRect(0,0,b.width,b.height),w=w.filter(function(Q){return Te(I,Q)}),w.length?g=O.frame(R):F()}g=O.frame(R),y=F});return{addFettis:function(T){return w=w.concat(T),q},canvas:s,promise:q,reset:function(){g&&O.cancel(g),y&&y()}}}function u(s,t){var d=!s,b=!!P(t||{},"resize"),v=!1,w=P(t,"disableForReducedMotion",Boolean),I=S&&!!P(t||{},"useWorker"),g=I?M():null,y=d?he:_e,q=s&&g?!!s.__confetti_initialized:!1,T=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,F;function R(A,Z,de){for(var te=P(A,"particleCount",se),le=P(A,"angle",Number),be=P(A,"spread",Number),ne=P(A,"startVelocity",Number),st=P(A,"decay",Number),ce=P(A,"gravity",Number),U=P(A,"drift",Number),Ge=P(A,"colors",Me),we=P(A,"ticks",Number),ve=P(A,"shapes"),De=P(A,"scalar"),p=!!P(A,"flat"),Fe=re(A),qe=te,Ne=[],rt=s.width*Fe.x,Qe=s.height*Fe.y;qe--;)Ne.push(Ce({x:rt,y:Qe,angle:le,spread:be,startVelocity:ne,color:Ge[qe%Ge.length],shape:ve[G(0,ve.length)],ticks:we,decay:st,gravity:ce,drift:U,scalar:De,flat:p}));return F?F.addFettis(Ne):(F=Ie(s,Ne,y,Z,de),F.promise)}function Q(A){var Z=w||P(A,"disableForReducedMotion",Boolean),de=P(A,"zIndex",Number);if(Z&&T)return L(function(ne){ne()});d&&F?s=F.canvas:d&&!s&&(s=me(de),document.body.appendChild(s)),b&&!q&&y(s);var te={width:s.width,height:s.height};g&&!q&&g.init(s),q=!0,g&&(s.__confetti_initialized=!0);function le(){if(g){var ne={getBoundingClientRect:function(){if(!d)return s.getBoundingClientRect()}};y(ne),g.postMessage({resize:{width:ne.width,height:ne.height}});return}te.width=te.height=null}function be(){F=null,b&&(v=!1,c.removeEventListener("resize",le)),d&&s&&(document.body.contains(s)&&document.body.removeChild(s),s=null,q=!1)}return b&&!v&&(v=!0,c.addEventListener("resize",le,!1)),g?g.fire(A,te,be):R(A,te,be)}return Q.reset=function(){g&&g.reset(),F&&F.reset()},Q}var ge;function l(){return ge||(ge=u(null,{useWorker:!0,resize:!0})),ge}function pe(s,t,d,b,v,w,I){var g=new Path2D(s),y=new Path2D;y.addPath(g,new DOMMatrix(t));var q=new Path2D;return q.addPath(y,new DOMMatrix([Math.cos(I)*v,Math.sin(I)*v,-Math.sin(I)*w,Math.cos(I)*w,d,b])),q}function ze(s){if(!_)throw new Error("path confetti are not supported in this browser");var t,d;typeof s=="string"?t=s:(t=s.path,d=s.matrix);var b=new Path2D(t),v=document.createElement("canvas"),w=v.getContext("2d");if(!d){for(var I=1e3,g=I,y=I,q=0,T=0,F,R,Q=0;Q<I;Q+=2)for(var A=0;A<I;A+=2)w.isPointInPath(b,Q,A,"nonzero")&&(g=Math.min(g,Q),y=Math.min(y,A),q=Math.max(q,Q),T=Math.max(T,A));F=q-g,R=T-y;var Z=10,de=Math.min(Z/F,Z/R);d=[de,0,0,de,-Math.round(F/2+g)*de,-Math.round(R/2+y)*de]}return{type:"path",path:t,matrix:d}}function Ee(s){var t,d=1,b="#000000",v='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof s=="string"?t=s:(t=s.text,d="scalar"in s?s.scalar:d,v="fontFamily"in s?s.fontFamily:v,b="color"in s?s.color:b);var w=10*d,I=""+w+"px "+v,g=new OffscreenCanvas(w,w),y=g.getContext("2d");y.font=I;var q=y.measureText(t),T=Math.ceil(q.actualBoundingBoxRight+q.actualBoundingBoxLeft),F=Math.ceil(q.actualBoundingBoxAscent+q.actualBoundingBoxDescent),R=2,Q=q.actualBoundingBoxLeft+R,A=q.actualBoundingBoxAscent+R;T+=R+R,F+=R+R,g=new OffscreenCanvas(T,F),y=g.getContext("2d"),y.font=I,y.fillStyle=b,y.fillText(t,Q,A);var Z=1/d;return{type:"bitmap",bitmap:g.transferToImageBitmap(),matrix:[Z,0,0,Z,-T*Z/2,-F*Z/2]}}m.exports=function(){return l().apply(this,arguments)},m.exports.reset=function(){l().reset()},m.exports.create=u,m.exports.shapeFromPath=ze,m.exports.shapeFromText=Ee})((function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}})(),pt,!1);const ut=pt.exports;pt.exports.create;function Lt(n){var c,m,f="";if(typeof n=="string"||typeof n=="number")f+=n;else if(typeof n=="object")if(Array.isArray(n)){var k=n.length;for(c=0;c<k;c++)n[c]&&(m=Lt(n[c]))&&(f&&(f+=" "),f+=m)}else for(m in n)n[m]&&(f&&(f+=" "),f+=m);return f}function $e(){for(var n,c,m=0,f="",k=arguments.length;m<k;m++)(n=arguments[m])&&(c=Lt(n))&&(f&&(f+=" "),f+=c);return f}const Ta=({user:n,profile:c,onNavigate:m,onLogout:f,categories:k,currentView:S,eventConfig:_})=>{var D;const[j,x]=o.useState(!1),[L,$]=o.useState(!1),O=()=>x(!j),M=W=>{m(W),x(!1)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"fixed top-6 inset-x-0 z-[200] flex justify-center md:justify-end md:pr-12 px-4 pointer-events-none",children:e.jsx("div",{className:"pointer-events-auto relative",children:e.jsxs(ie.div,{layout:!0,className:$e("bg-black/60 backdrop-blur-3xl border border-white/20 shadow-[0_20px_50px_rgba(0,0,0,0.5)] overflow-hidden",j?"rounded-[32px] w-[320px]":"rounded-full w-auto"),initial:{borderRadius:50},animate:{width:j?320:"auto",borderRadius:j?32:999},transition:{type:"spring",stiffness:300,damping:30},children:[e.jsxs("div",{className:"flex items-center justify-between p-3 gap-4",children:[e.jsxs("div",{className:$e("flex items-center gap-3 transition-opacity duration-300","opacity-100"),onClick:()=>!j&&O(),children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-tr from-accent to-purple-600 rounded-full flex items-center justify-center shrink-0 shadow-lg shadow-accent/20 cursor-pointer",children:e.jsx("span",{className:"font-black italic text-white text-lg",children:"C"})}),!j&&e.jsxs("div",{className:"flex flex-col pr-4 cursor-pointer",onClick:O,children:[e.jsx("span",{className:"text-[10px] uppercase font-bold text-white/50 tracking-wider",children:_?"Event Credits":"CrÃ©ditos"}),e.jsx("span",{className:"text-sm font-black text-white leading-none",children:_?Math.max(0,(_.credits_allocated||0)-(_.credits_used||0)):c!=null&&c.is_master||(c==null?void 0:c.role)==="master"?"âˆž":(c==null?void 0:c.credits)||0})]}),j&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-bold text-white leading-tight",children:_?_.event_name:n?`Hola, ${(D=n.email)==null?void 0:D.split("@")[0]}`:"Invitado"}),e.jsx("span",{className:"text-[10px] text-accent font-black uppercase tracking-wider",children:_?`${Math.max(0,(_.credits_allocated||0)-(_.credits_used||0))} Disponibles`:`${c!=null&&c.is_master||(c==null?void 0:c.role)==="master"?"âˆž":(c==null?void 0:c.credits)||0} CrÃ©ditos`})]})]}),e.jsx("button",{onClick:O,className:"w-10 h-10 hover:bg-white/10 rounded-full flex items-center justify-center text-white transition-colors cursor-pointer shrink-0",children:j?e.jsx(xe,{className:"w-5 h-5"}):e.jsx(Sa,{className:"w-5 h-5"})})]}),e.jsx(Ve,{children:j&&e.jsx(ie.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"px-4 pb-6",children:e.jsxs("div",{className:"space-y-2 mt-4",children:[((c==null?void 0:c.is_master)||(c==null?void 0:c.role)==="master"||(c==null?void 0:c.role)==="partner"||(c==null?void 0:c.role)==="admin")&&e.jsx(Se,{icon:Yt,label:"Dashboard Admin",onClick:()=>window.location.href="/dashboard.html",active:!1,highlight:!0}),e.jsxs("div",{className:"overflow-hidden rounded-xl bg-white/5 border border-white/5",children:[e.jsxs("button",{onClick:()=>$(!L),className:"w-full flex items-center justify-between p-3 text-sm font-medium text-white hover:bg-white/5 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ya,{className:"w-4 h-4 text-white/70"}),e.jsx("span",{children:"CategorÃ­as"})]}),e.jsx(xa,{className:$e("w-4 h-4 transition-transform",L&&"rotate-180")})]}),e.jsx(Ve,{children:L&&e.jsx(ie.div,{initial:{height:0},animate:{height:"auto"},exit:{height:0},className:"bg-black/20",children:e.jsxs("div",{className:"p-2 space-y-1",children:[k.map(W=>e.jsx(it,{label:W.label,onClick:()=>M(`category_${W.id}`)},W.id)),!_&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-px bg-white/10 my-1"}),e.jsx(it,{label:"Mis Favoritos",icon:mt,onClick:()=>M("favorites"),className:"text-pink-400 hover:text-pink-300"}),e.jsx(it,{label:"Mis Fotos",icon:et,onClick:()=>M("history"),className:"text-blue-400 hover:text-blue-300"})]})]})})})]}),_&&e.jsxs(e.Fragment,{children:[e.jsx(Se,{icon:et,label:"GalerÃ­a del Evento",onClick:()=>M("event-gallery"),active:S==="event-gallery",highlight:!0}),e.jsx(Se,{icon:Je,label:"Compartir Evento",onClick:()=>M("show-qr")})]}),!_&&e.jsx(Se,{icon:oe,label:"Comprar CrÃ©ditos",onClick:()=>M("buy_credits"),highlight:!0}),e.jsx(Se,{icon:ra,label:"Packs",onClick:()=>M("packs"),active:S==="packs"}),!_&&e.jsx(Se,{icon:Kt,label:"Ajustes",onClick:()=>M("settings"),active:S==="settings"}),e.jsx(Se,{icon:fa,label:"Soporte",onClick:()=>M("support"),active:S==="support"}),n&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-px bg-white/10 my-2"}),e.jsxs("button",{onClick:f,className:"w-full flex items-center gap-3 p-3 rounded-xl text-sm font-medium text-red-400 hover:bg-red-500/10 hover:text-red-300 transition-colors",children:[e.jsx(Ca,{className:"w-4 h-4"}),e.jsx("span",{children:"Cerrar SesiÃ³n"})]})]})]})})})]})})})})},Se=({icon:n,label:c,onClick:m,active:f,highlight:k})=>e.jsxs("button",{onClick:m,className:$e("w-full flex items-center gap-3 p-3 rounded-xl text-sm font-medium transition-all group",f?"bg-accent text-white":"text-white/80 hover:bg-white/10 hover:text-white",k&&!f&&"bg-gradient-to-r from-accent/20 to-transparent border border-accent/20 text-accent"),children:[e.jsx(n,{className:$e("w-4 h-4",f?"text-white":"text-white/70 group-hover:text-white")}),e.jsx("span",{children:c})]}),it=({label:n,onClick:c,icon:m,className:f})=>e.jsxs("button",{onClick:c,className:$e("w-full flex items-center gap-3 p-2.5 rounded-lg text-xs font-medium pl-9 text-white/60 hover:bg-white/10 hover:text-white transition-colors",f),children:[m&&e.jsx(m,{className:"w-3 h-3"}),e.jsx("span",{children:n})]}),za=({profile:n,session:c,onBack:m,onAddCredits:f,onUpdateProfile:k})=>{var $,O;const[S,_]=ye.useState((n==null?void 0:n.full_name)||""),[j,x]=ye.useState(!1),L=async()=>{x(!0),await k({full_name:S}),x(!1)};return e.jsxs("div",{className:"w-full max-w-2xl mx-auto pt-32 px-6 pb-12 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("button",{onClick:m,className:"flex items-center gap-2 text-white/60 hover:text-white mb-8 transition-colors",children:[e.jsx(ht,{className:"w-5 h-5"}),e.jsx("span",{children:"Volver"})]}),e.jsx("h2",{className:"text-3xl font-black italic uppercase mb-8 tracking-tighter",children:"Ajustes de Perfil"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-6 backdrop-blur-sm",children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx($a,{className:"w-5 h-5 text-accent"}),"InformaciÃ³n Personal"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs uppercase tracking-wider text-white/40 mb-1",children:"Email"}),e.jsxs("div",{className:"flex items-center gap-3 text-lg font-medium text-white/80",children:[e.jsx(Xt,{className:"w-5 h-5 text-white/40"}),($=c==null?void 0:c.user)==null?void 0:$.email]})]}),e.jsxs("div",{className:"pt-4 border-t border-white/10",children:[e.jsx("label",{className:"block text-xs uppercase tracking-wider text-white/40 mb-3",children:"Nombre Completo"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"relative flex-1",children:e.jsx("input",{type:"text",value:S,onChange:M=>_(M.target.value),placeholder:"Tu nombre aquÃ­...",className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white placeholder:text-white/20 focus:outline-none focus:border-accent transition-colors"})}),e.jsx("button",{onClick:L,disabled:j||S===((n==null?void 0:n.full_name)||""),className:"px-6 py-3 bg-accent text-white rounded-xl font-bold uppercase tracking-wider text-xs hover:bg-white hover:text-black transition-all disabled:opacity-30 disabled:hover:bg-accent disabled:hover:text-white",children:j?"...":"Guardar"})]})]}),e.jsxs("div",{className:"pt-4 border-t border-white/10",children:[e.jsx("label",{className:"block text-xs uppercase tracking-wider text-white/40 mb-1",children:"ID de Usuario"}),e.jsx("code",{className:"text-xs text-white/30 font-mono",children:(O=c==null?void 0:c.user)==null?void 0:O.id})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-accent/20 to-transparent border border-accent/30 rounded-2xl p-6 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-accent/20 blur-[50px] rounded-full -translate-y-1/2 translate-x-1/2"}),e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2 relative z-10",children:[e.jsx(Pt,{className:"w-5 h-5 text-accent"}),"CrÃ©ditos y Consumo"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 relative z-10",children:[e.jsxs("div",{className:"bg-black/20 rounded-xl p-4",children:[e.jsx("span",{className:"block text-xs uppercase tracking-wider text-white/60 mb-1",children:"CrÃ©ditos Disponibles"}),e.jsx("span",{className:"text-3xl font-black text-accent",children:n!=null&&n.is_master?"âˆž":(n==null?void 0:n.credits)||0})]}),e.jsxs("div",{className:"bg-black/20 rounded-xl p-4",children:[e.jsx("span",{className:"block text-xs uppercase tracking-wider text-white/60 mb-1",children:"Total Generaciones"}),e.jsx("span",{className:"text-3xl font-black text-white",children:(n==null?void 0:n.total_generations)||0})]})]}),e.jsx("button",{onClick:f,className:"mt-6 w-full bg-white text-black font-black uppercase tracking-widest py-3 rounded-xl hover:bg-accent hover:text-white transition-all duration-300",children:"Cargar MÃ¡s CrÃ©ditos"})]})]})]})},ot=3e3,Da=({onBack:n,identities:c,unlockedPacks:m=[],userCredits:f,onUnlock:k,isUnlocking:S})=>{const _=o.useMemo(()=>{const x=new Map;return c.forEach(L=>{x.has(L.subCategory)||x.set(L.subCategory,{id:L.subCategory,title:L.subCategory,preview:L.url,count:0}),x.get(L.subCategory).count++}),Array.from(x.values())},[c]),j=x=>{k(x,ot)};return e.jsxs("div",{className:"w-full max-w-7xl mx-auto pt-32 px-6 pb-24 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsxs("button",{onClick:n,className:"flex items-center gap-2 text-white/60 hover:text-white transition-colors",children:[e.jsx(ht,{className:"w-5 h-5"}),e.jsx("span",{children:"Volver"})]}),e.jsx("h2",{className:"text-3xl font-black italic uppercase tracking-tighter",children:"Tienda de Packs"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:_.map(x=>{const L=m.includes(x.id),$=f>=ot;return e.jsxs("div",{className:"group relative bg-[#0a0a0a] border border-white/10 rounded-2xl overflow-hidden hover:border-accent/50 transition-all duration-300",children:[e.jsxs("div",{className:"h-48 overflow-hidden relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent z-10"}),e.jsx("img",{src:x.preview,alt:x.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700"}),L?e.jsxs("div",{className:"absolute top-4 right-4 z-20 bg-green-500/20 backdrop-blur-md border border-green-500/50 text-green-400 px-3 py-1 rounded-full text-xs font-bold uppercase flex items-center gap-1.5",children:[e.jsx(ka,{className:"w-3 h-3"}),"Adquirido"]}):e.jsxs("div",{className:"absolute top-4 right-4 z-20 bg-black/60 backdrop-blur-md border border-white/10 text-white/60 px-3 py-1 rounded-full text-xs font-bold uppercase flex items-center gap-1.5",children:[e.jsx(Jt,{className:"w-3 h-3"}),"Premium"]})]}),e.jsxs("div",{className:"p-6 relative z-20",children:[e.jsx("div",{className:"flex justify-between items-start mb-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:x.title}),e.jsxs("p",{className:"text-white/40 text-sm",children:[x.count," Estilos incluidos"]})]})}),L?e.jsxs("button",{disabled:!0,className:"w-full py-4 rounded-xl font-black uppercase tracking-widest bg-white/5 text-green-400 opacity-50 flex items-center justify-center gap-2 cursor-default",children:[e.jsx(Fa,{className:"w-5 h-5"}),"Disponible"]}):e.jsx("button",{onClick:()=>j(x.id),disabled:!$||S,className:`w-full py-4 rounded-xl font-black uppercase tracking-widest flex items-center justify-center gap-2 transition-all ${$?"bg-white text-black hover:bg-accent hover:text-white":"bg-white/5 text-white/20 cursor-not-allowed"}`,children:S?e.jsx(oe,{className:"w-5 h-5 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Desbloquear"}),e.jsxs("div",{className:"flex items-center gap-1 text-xs opacity-50 ml-2 border-l border-black/20 pl-2",children:[e.jsx(Le,{className:"w-3 h-3"}),ot]})]})})]})]},x.id)})})]})},Fa=({className:n})=>e.jsx("svg",{className:n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),qa=({eventConfig:n,supabase:c,onBack:m,onViewPhoto:f})=>{const[k,S]=o.useState([]),[_,j]=o.useState(!0),[x,L]=o.useState(!1),$=async(M=!1)=>{M?L(!0):j(!0);try{const{data:D,error:W}=await c.from("generations").select("id, image_url, style_id, created_at").eq("event_id",n.id).order("created_at",{ascending:!1});!W&&D&&S(D)}catch(D){console.error("Error fetching event gallery:",D)}finally{j(!1),L(!1)}};o.useEffect(()=>{$();const M=setInterval(()=>$(!0),3e4);return()=>clearInterval(M)},[n.id]);const O=(n.credits_allocated||0)-(n.credits_used||0);return e.jsxs("div",{className:"animate-[fadeIn_0.5s_ease-out] max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col items-center mb-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-accent/10 rounded-full flex items-center justify-center mb-6",children:e.jsx("span",{className:"text-3xl",children:"ðŸ“¸"})}),e.jsx("h2",{className:"text-3xl font-black uppercase italic tracking-tight text-white mb-2",children:n.event_name}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"h-[1px] w-8 bg-accent/50"}),e.jsx("p",{className:"text-[10px] tracking-[4px] text-white/40 uppercase",children:"GalerÃ­a del Evento"}),e.jsx("div",{className:"h-[1px] w-8 bg-accent/50"})]}),e.jsxs("div",{className:"flex items-center gap-6 mt-4",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-2xl font-black text-accent",children:k.length}),e.jsx("span",{className:"text-[8px] tracking-[2px] text-white/30 uppercase",children:"Fotos"})]}),e.jsx("div",{className:"w-px h-8 bg-white/10"}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-2xl font-black text-white",children:O}),e.jsx("span",{className:"text-[8px] tracking-[2px] text-white/30 uppercase",children:"CrÃ©ditos"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-6",children:[e.jsxs("button",{onClick:m,className:"flex items-center gap-2 px-5 py-2.5 bg-white/5 border border-white/10 rounded-xl hover:bg-white/10 transition-all text-white/60 hover:text-white text-[10px] font-bold tracking-[1px] uppercase",children:[e.jsx(Rt,{className:"w-4 h-4"}),"Volver"]}),e.jsxs("button",{onClick:()=>$(!0),className:`flex items-center gap-2 px-5 py-2.5 bg-accent/10 border border-accent/20 rounded-xl hover:bg-accent/20 transition-all text-accent text-[10px] font-bold tracking-[1px] uppercase ${x?"opacity-50":""}`,disabled:x,children:[e.jsx(dt,{className:`w-4 h-4 ${x?"animate-spin":""}`}),"Actualizar"]})]})]}),_?e.jsxs("div",{className:"flex flex-col items-center py-20 opacity-40",children:[e.jsx(Ae,{className:"w-10 h-10 animate-spin mb-4 text-accent"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-[2px]",children:"Cargando galerÃ­a..."})]}):k.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-32 border-2 border-dashed border-white/5 rounded-[40px] bg-white/[0.02]",children:[e.jsx(We,{className:"w-12 h-12 text-white/10 mb-6"}),e.jsx("p",{className:"text-white/30 text-xs font-black uppercase tracking-[4px] mb-4",children:"AÃºn no hay fotos en este evento"}),e.jsx("p",{className:"text-white/20 text-[10px] tracking-[1px] max-w-sm text-center",children:"Las fotos aparecerÃ¡n aquÃ­ a medida que los invitados las generen. Esta galerÃ­a se actualiza automÃ¡ticamente."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6",children:k.map(M=>e.jsxs("div",{className:"group relative aspect-[4/5] rounded-[24px] md:rounded-[32px] overflow-hidden border border-white/10 bg-[#0a0a0c] hover:border-accent/40 hover:shadow-[0_0_30px_rgba(0,0,0,0.5)] transition-all duration-500",children:[e.jsx("img",{src:M.image_url,alt:"Foto del evento",className:"w-full h-full object-cover opacity-80 group-hover:opacity-100 group-hover:scale-110 transition-all duration-700",crossOrigin:"anonymous",loading:"lazy"}),e.jsxs("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col justify-end p-4 md:p-6",children:[e.jsx("span",{className:"text-[8px] font-black uppercase tracking-[2px] text-accent mb-2 block",children:new Date(M.created_at).toLocaleTimeString("es-AR",{hour:"2-digit",minute:"2-digit"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>f(M.image_url),className:"flex-1 bg-white text-black py-3 rounded-xl text-[8px] font-black uppercase tracking-[1px] hover:bg-accent hover:text-white transition-colors flex items-center justify-center gap-2",children:e.jsx("span",{children:"Ver"})}),e.jsx("a",{href:M.image_url,target:"_blank",rel:"noreferrer",className:"p-3 bg-white/10 rounded-xl text-white hover:bg-white hover:text-black transition-colors",children:e.jsx(He,{className:"w-4 h-4"})})]})]})]},M.id))}),e.jsxs("div",{className:"flex items-center justify-center gap-2 mt-8 text-white/20",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500/50 animate-pulse"}),e.jsx("span",{className:"text-[9px] tracking-[1px]",children:"actualizaciÃ³n automÃ¡tica cada 30s"})]})]})]})},Oa=({eventConfig:n,onClose:c})=>{const m=o.useRef(null),f=`https://app.metalabia.com/?event=${n.event_slug}`,k=()=>{var G;const _=(G=m.current)==null?void 0:G.querySelector("canvas");if(!_)return;const j=document.createElement("canvas"),x=j.getContext("2d");if(!x)return;const L=60,$=400,O=120,M=80,D=$+L*2,W=O+$+L+M;j.width=D,j.height=W,x.fillStyle="#0a0a0c",x.fillRect(0,0,D,W),x.strokeStyle="rgba(255, 85, 0, 0.3)",x.lineWidth=2,x.roundRect(4,4,D-8,W-8,20),x.stroke(),x.fillStyle="#ffffff",x.font="bold 28px system-ui, -apple-system, sans-serif",x.textAlign="center",x.fillText(n.event_name,D/2,55),x.fillStyle="rgba(255, 85, 0, 0.8)",x.font="bold 14px system-ui, -apple-system, sans-serif",x.fillText("ðŸ“¸  ESCANEÃ Y CREÃ TU FOTO CON IA",D/2,85);const B=(D-$-20)/2,P=O;x.fillStyle="#ffffff",x.beginPath(),x.roundRect(B,P,$+20,$+20,16),x.fill(),x.drawImage(_,B+10,P+10,$,$),x.fillStyle="rgba(255,255,255,0.3)",x.font="12px system-ui, -apple-system, sans-serif",x.fillText("Powered by MetaLab IA  â€¢  metalab30.com",D/2,W-30);const se=document.createElement("a");se.download=`qr-${n.event_slug}.png`,se.href=j.toDataURL("image/png"),se.click()},S=()=>{var x;const _=(x=m.current)==null?void 0:x.querySelector("canvas");if(!_)return;const j=window.open("","_blank");j&&(j.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>QR - ${n.event_name}</title>
          <style>
            * { margin: 0; padding: 0; box-sizing: border-box; }
            body { 
              display: flex; flex-direction: column; align-items: center; 
              justify-content: center; min-height: 100vh; font-family: system-ui;
              background: white; color: black;
            }
            h1 { font-size: 32px; font-weight: 900; margin-bottom: 8px; text-transform: uppercase; }
            p.sub { font-size: 16px; color: #666; margin-bottom: 40px; }
            .qr { margin-bottom: 40px; }
            .qr img { width: 300px; height: 300px; }
            p.url { font-size: 12px; color: #999; margin-bottom: 8px; }
            p.brand { font-size: 11px; color: #ccc; }
          </style>
        </head>
        <body>
          <h1>${n.event_name}</h1>
          <p class="sub">ðŸ“¸ EscaneÃ¡ y creÃ¡ tu foto con IA</p>
          <div class="qr"><img src="${_.toDataURL()}" /></div>
          <p class="url">${f}</p>
          <p class="brand">Powered by MetaLab IA</p>
          <script>window.onload = () => { window.print(); }<\/script>
        </body>
      </html>
    `),j.document.close())};return e.jsx("div",{className:"fixed inset-0 z-[500] bg-black/95 backdrop-blur-2xl flex items-center justify-center p-4 animate-[fadeIn_0.3s_ease-out]",children:e.jsxs("div",{className:"relative w-full max-w-sm bg-[#0a0a0c] rounded-[40px] p-10 border border-white/10 text-center flex flex-col items-center",children:[e.jsx("button",{onClick:c,className:"absolute top-6 right-6 w-10 h-10 rounded-full bg-white/5 flex items-center justify-center hover:bg-white/10 transition-colors",children:e.jsx(xe,{className:"w-5 h-5"})}),e.jsx("div",{className:"w-16 h-16 bg-accent/20 rounded-full flex items-center justify-center mb-6",children:e.jsx("span",{className:"text-3xl",children:"ðŸ“±"})}),e.jsx("h3",{className:"text-xl font-black mb-1 uppercase italic text-white",children:n.event_name}),e.jsx("p",{className:"text-accent text-[10px] uppercase tracking-[3px] mb-8 font-bold",children:"EscaneÃ¡ y creÃ¡ tu foto con IA"}),e.jsx("div",{ref:m,className:"p-5 bg-white rounded-3xl mb-8 shadow-[0_0_40px_rgba(255,85,0,0.15)]",children:e.jsx(at,{value:f,size:220,level:"H",includeMargin:!0,imageSettings:{src:"/icon-192x192.png",height:40,width:40,excavate:!0}})}),e.jsx("p",{className:"text-white/20 text-[9px] tracking-[1px] mb-8 break-all px-4",children:f}),e.jsxs("div",{className:"flex gap-3 w-full",children:[e.jsxs("button",{onClick:k,className:"flex-1 flex items-center justify-center gap-2 px-6 py-4 bg-accent text-white rounded-xl hover:bg-accent/80 transition-all text-[10px] font-black tracking-[2px] uppercase",children:[e.jsx(He,{className:"w-4 h-4"}),"Descargar"]}),e.jsxs("button",{onClick:S,className:"flex-1 flex items-center justify-center gap-2 px-6 py-4 bg-white/10 text-white border border-white/10 rounded-xl hover:bg-white/20 transition-all text-[10px] font-black tracking-[2px] uppercase",children:[e.jsx(At,{className:"w-4 h-4"}),"Imprimir"]})]}),e.jsx("p",{className:"text-white/15 text-[8px] tracking-[1px] mt-6 leading-relaxed",children:"ImprimÃ­ este QR y colocalo en las mesas del evento. Los invitados escanean y generan sus fotos al instante."})]})})},Ua=({eventConfig:n,supabase:c,onBackToMain:m})=>{var pe,ze,Ee,s;const[f,k]=o.useState("WELCOME"),[S,_]=o.useState(null),[j,x]=o.useState(null),[L,$]=o.useState(!1),[O,M]=o.useState(null),[D,W]=o.useState(!1),[B,P]=o.useState(null),[se,G]=o.useState(null),[ue,Me]=o.useState(0),[ee,re]=o.useState(!1),he=o.useRef(null),_e=o.useRef(null),me=o.useRef(null),fe=["Invocando a los genios digitales... âœ¨","Analizando tu mejor Ã¡ngulo... ðŸ¤³","Mezclando pÃ­xeles y creatividad... ðŸŽ¨","Casi listo para la magia... ðŸª„","Tu retrato estÃ¡ en el horno digital... ðŸ¥¨","Ajustando las luces del multiverso... ðŸŒŒ"],Ce=ye.useMemo(()=>{var t;return((t=n==null?void 0:n.selected_styles)==null?void 0:t.length)>0?tt.filter(d=>n.selected_styles.includes(d.id)):tt.slice(0,8)},[n]);o.useEffect(()=>{if(D){const t=setInterval(()=>{Me(d=>(d+1)%fe.length)},5e3);return()=>clearInterval(t)}},[D]);const Te=async()=>{M(null);try{me.current&&me.current.getTracks().forEach(d=>d.stop());const t=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:1080},height:{ideal:1920}}});me.current=t,he.current&&(he.current.srcObject=t)}catch(t){console.error(t),M("No se pudo acceder a la cÃ¡mara. Verifica los permisos.")}};o.useEffect(()=>{f==="CAMERA"?Te():me.current&&(me.current.getTracks().forEach(t=>t.stop()),me.current=null)},[f]);const Ie=()=>{if(he.current&&_e.current){const t=_e.current,d=he.current,b=d.videoWidth,v=d.videoHeight;t.width=b,t.height=v;const w=t.getContext("2d");w&&(w.translate(t.width,0),w.scale(-1,1),w.drawImage(d,0,0,b,v),x(t.toDataURL("image/jpeg",.8)),k("CAMERA"))}},u=async()=>{var t;if(!(!S||!j)){k("PROCESSING"),W(!0),G(null);try{const{data:d,error:b}=await c.functions.invoke("cabina-vision",{body:{user_photo:j,model_id:S.id,aspect_ratio:"9:16",event_id:n.id,guest_id:`guest_${Date.now()}`}});if(b)throw b;if(!(d!=null&&d.success))throw new Error((d==null?void 0:d.error)||"Error en el procesamiento");P(d.image_url),k("RESULT"),ut({particleCount:150,spread:70,origin:{y:.6},colors:[((t=n.config)==null?void 0:t.primary_color)||"#7f13ec","#ffffff"]})}catch(d){console.error(d),G(d.message||"Lo sentimos, hubo un error. Intenta de nuevo."),k("RESULT")}finally{W(!1)}}},ge=()=>{k("WELCOME"),_(null),x(null),P(null),G(null)},l={"--accent-color":((pe=n==null?void 0:n.config)==null?void 0:pe.primary_color)||"#7f13ec","--accent-glow":`${((ze=n==null?void 0:n.config)==null?void 0:ze.primary_color)||"#7f13ec"}40`};return e.jsxs("div",{className:"fixed inset-0 bg-[#050505] text-white flex flex-col items-center overflow-hidden z-[100] font-sans selection:bg-accent/30",style:l,children:[e.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-[800px] h-[300px] bg-accent/10 blur-[150px] rounded-full -translate-y-1/2 pointer-events-none"}),e.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 w-[600px] h-[300px] bg-accent/5 blur-[120px] rounded-full translate-y-1/2 pointer-events-none"}),e.jsxs("main",{className:"relative flex-1 w-full max-w-lg flex flex-col p-6 overflow-y-auto no-scrollbar",children:[e.jsxs("div",{className:"flex flex-col items-center mb-8 pt-4",children:[(Ee=n.config)!=null&&Ee.logo_url?e.jsx(ie.img,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},src:n.config.logo_url,alt:"Logo",className:"h-12 w-auto object-contain mb-4 drop-shadow-2xl"}):e.jsx(oe,{className:"w-10 h-10 text-accent mb-4"}),e.jsx("h1",{className:"text-xl font-black italic uppercase tracking-tighter text-white/90",children:n.event_name})]}),e.jsxs(Ve,{mode:"wait",children:[f==="WELCOME"&&e.jsxs(ie.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.05},className:"flex-1 flex flex-col items-center justify-center text-center space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-4xl font-extrabold tracking-tight leading-tight",children:((s=n.config)==null?void 0:s.welcome_text)||"Â¡Bienvenidos a la fiesta!"}),e.jsx("p",{className:"text-white/40 text-sm uppercase tracking-[4px] font-bold",children:"Transforma tu foto con IA en segundos"})]}),e.jsxs("div",{className:"w-full aspect-[4/5] bg-white/5 rounded-[40px] border border-white/10 flex items-center justify-center p-8 relative overflow-hidden group",children:[e.jsx(ie.div,{animate:{rotate:[0,5,-5,0]},transition:{duration:6,repeat:1/0,ease:"easeInOut"},className:"relative z-10",children:e.jsx(We,{className:"w-24 h-24 text-accent drop-shadow-[0_0_30px_rgba(var(--accent-rgb),0.5)]"})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-accent/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"})]}),e.jsxs("button",{onClick:()=>k("STYLE_SELECTION"),className:"w-full py-6 bg-accent rounded-3xl text-lg font-black uppercase tracking-[6px] shadow-[0_20px_40px_rgba(0,0,0,0.4)] hover:scale-105 active:scale-95 transition-all flex items-center justify-center gap-4",children:["Iniciar Experiencia",e.jsx(ia,{className:"w-6 h-6"})]})]},"welcome"),f==="STYLE_SELECTION"&&e.jsxs(ie.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("span",{className:"text-accent text-[10px] font-black uppercase tracking-[4px]",children:"Paso 01"}),e.jsx("h2",{className:"text-2xl font-black uppercase italic italic",children:"ElegÃ­ tu Estilo"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4 pb-24",children:Ce.map(t=>e.jsx(Xe,{type:"character",title:t.title,sampleImageUrl:t.url,isSelected:(S==null?void 0:S.id)===t.id,onSelect:()=>{_(t),k("CAMERA")}},t.id))})]},"styles"),f==="CAMERA"&&e.jsxs(ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.9},className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("span",{className:"text-accent text-[10px] font-black uppercase tracking-[4px]",children:"Paso 02"}),e.jsx("h2",{className:"text-2xl font-black uppercase italic",children:"Â¡SonrÃ­e!"})]}),e.jsxs("div",{className:"relative w-full aspect-[3/4] rounded-[40px] overflow-hidden bg-black border border-white/10 shadow-2xl",children:[j?e.jsx("img",{src:j,className:"w-full h-full object-cover",alt:"Captura"}):e.jsxs(e.Fragment,{children:[e.jsx("video",{ref:he,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover scale-x-[-1]"}),e.jsx("div",{className:"absolute inset-0 border-[20px] border-black/40 pointer-events-none",children:e.jsx("div",{className:"w-full h-full border border-white/5 flex items-center justify-center",children:e.jsx("div",{className:"w-48 h-64 border border-accent/30 rounded-[100px] border-dashed"})})})]}),O&&e.jsxs("div",{className:"absolute inset-0 bg-black/90 flex flex-col items-center justify-center p-8 text-center mt-[-40px]",children:[e.jsx(xe,{className:"w-12 h-12 text-red-500 mb-4"}),e.jsx("p",{className:"font-bold text-sm uppercase tracking-wider",children:O}),e.jsx("button",{onClick:Te,className:"mt-6 px-6 py-3 bg-white/10 rounded-full text-[10px] font-black uppercase",children:"Reintentar"})]})]}),e.jsx("div",{className:"mt-8 flex items-center justify-center gap-6",children:j?e.jsxs("div",{className:"w-full space-y-4",children:[e.jsxs("button",{onClick:u,className:"w-full py-6 bg-accent rounded-3xl text-lg font-black uppercase tracking-[6px] shadow-[0_20px_40px_rgba(0,0,0,0.4)] flex items-center justify-center gap-4",children:["Generar Arte",e.jsx(oe,{className:"w-6 h-6"})]}),e.jsx("button",{onClick:()=>x(null),className:"w-full py-4 bg-white/5 text-white/40 rounded-2xl text-[10px] font-black uppercase tracking-[4px]",children:"Tomar otra foto"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>k("STYLE_SELECTION"),className:"w-16 h-16 rounded-full bg-white/5 border border-white/10 flex items-center justify-center text-white/50 hover:bg-white/10",children:e.jsx(Rt,{className:"w-6 h-6"})}),e.jsx("button",{onClick:Ie,className:"w-24 h-24 rounded-full bg-white p-1.5 shadow-[0_0_40px_rgba(255,255,255,0.2)]",children:e.jsx("div",{className:"w-full h-full rounded-full border-4 border-black bg-black/5 flex items-center justify-center",children:e.jsx("div",{className:"w-6 h-6 bg-black rounded-full"})})}),e.jsx("div",{className:"w-16"})]})})]},"camera"),f==="PROCESSING"&&e.jsxs(ie.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex-1 flex flex-col items-center justify-center text-center p-8",children:[e.jsxs("div",{className:"relative mb-12",children:[e.jsx(ie.div,{animate:{rotate:360},transition:{duration:4,repeat:1/0,ease:"linear"},className:"w-48 h-48 rounded-full border-t-2 border-accent"}),e.jsx(ie.div,{animate:{rotate:-360},transition:{duration:3,repeat:1/0,ease:"linear"},className:"absolute inset-4 rounded-full border-r-2 border-accent/30"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(oe,{className:"w-12 h-12 text-accent animate-pulse"})})]}),e.jsx("h2",{className:"text-2xl font-black uppercase italic mb-4",children:"Procesando Alquimia..."}),e.jsxs("p",{className:"text-white/60 text-sm font-medium h-12 italic",children:['"',fe[ue],'"']})]},"processing"),f==="RESULT"&&e.jsx(ie.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"flex-1 flex flex-col items-center",children:se?e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center space-y-6",children:[e.jsx("div",{className:"w-20 h-20 bg-red-500/10 border border-red-500/20 rounded-full flex items-center justify-center",children:e.jsx(xe,{className:"w-10 h-10 text-red-500"})}),e.jsx("h3",{className:"text-2xl font-black uppercase text-red-500 italic",children:"Algo saliÃ³ mal"}),e.jsx("p",{className:"text-white/40 text-sm",children:se}),e.jsx("button",{onClick:ge,className:"px-8 py-4 bg-white/10 rounded-2xl text-[10px] font-black uppercase tracking-widest",children:"Reintentar"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-black uppercase italic text-accent leading-none",children:"Â¡IncreÃ­ble!"}),e.jsx("p",{className:"text-[10px] font-black text-white/30 uppercase tracking-[4px] mt-2",children:"Tu Alquimia Digital ha terminado"})]}),e.jsxs("div",{className:"relative w-full aspect-[3/4] rounded-[40px] overflow-hidden border-2 border-accent shadow-[0_0_50px_rgba(var(--accent-rgb),0.3)] bg-black mb-8 group",children:[e.jsx("img",{src:B||"",alt:"Resultado",className:"w-full h-full object-cover",crossOrigin:"anonymous"}),e.jsx("div",{className:"absolute top-4 right-4 z-20",children:e.jsx("button",{onClick:()=>re(!0),className:"w-12 h-12 bg-black/60 backdrop-blur-xl border border-white/20 rounded-2xl flex items-center justify-center shadow-2xl",children:e.jsx(Je,{className:"w-6 h-6 text-white"})})})]}),e.jsxs("div",{className:"w-full space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>{const t=document.createElement("a");t.href=B,t.download=`creativa-${Date.now()}.jpg`,t.click()},className:"py-5 bg-white text-black rounded-2xl font-black uppercase tracking-[2px] text-[10px] flex items-center justify-center gap-3",children:[e.jsx(He,{className:"w-4 h-4"}),"Descargar"]}),e.jsxs("button",{onClick:async()=>{var t;if(B)try{const b=await(await fetch(B,{mode:"cors"})).blob(),v=new File([b],`creativa-${Date.now()}.png`,{type:"image/png"});if(navigator.share&&((t=navigator.canShare)!=null&&t.call(navigator,{files:[v]})))await navigator.share({files:[v],title:n.event_name,text:`ðŸ“¸ Mi Alquimia en ${n.event_name} âœ¨ metalab30.com`});else{const w=encodeURIComponent(`ðŸ“¸ Â¡MirÃ¡ mi foto del evento ${n.event_name}! âœ¨ Creada por metalab30.com`);window.open(`https://wa.me/?text=${w}`,"_blank")}}catch{const b=encodeURIComponent(`ðŸ“¸ Â¡MirÃ¡ mi foto del evento ${n.event_name}! âœ¨ metalab30.com`);window.open(`https://wa.me/?text=${b}`,"_blank")}},className:"py-5 bg-accent text-white rounded-2xl font-black uppercase tracking-[2px] text-[10px] flex items-center justify-center gap-3",children:[e.jsx(Ra,{className:"w-4 h-4"}),"WhatsApp"]})]}),e.jsx("button",{onClick:ge,className:"w-full py-4 bg-white/5 text-white/40 rounded-2xl text-[9px] font-black uppercase tracking-[4px]",children:"Hacer otra foto"})]})]})},"result")]})]}),e.jsx("footer",{className:"py-8 opacity-20 hover:opacity-100 transition-opacity",children:e.jsx("span",{className:"text-[7px] font-black uppercase tracking-[6px] italic",children:"Powered by Creativa Labs"})}),e.jsx(Ve,{children:ee&&B&&e.jsx(ie.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[200] bg-black/95 backdrop-blur-2xl flex items-center justify-center p-6",children:e.jsxs("div",{className:"relative w-full max-w-sm bg-[#0a0a0c] rounded-[48px] p-12 border border-white/10 text-center flex flex-col items-center shadow-[0_40px_100px_rgba(0,0,0,1)]",children:[e.jsx("button",{onClick:()=>re(!1),className:"absolute top-8 right-8 w-12 h-12 rounded-full bg-white/5 flex items-center justify-center hover:bg-white/10",children:e.jsx(xe,{className:"w-6 h-6"})}),e.jsx(Je,{className:"w-16 h-16 text-accent mb-6"}),e.jsx("h3",{className:"text-2xl font-black uppercase italic mb-2 tracking-tighter",children:"Escanea y GuardÃ¡"}),e.jsxs("p",{className:"text-white/40 text-[9px] uppercase tracking-[3px] mb-10 leading-relaxed",children:["ApuntÃ¡ con tu cÃ¡mara",e.jsx("br",{}),"para descargar tu Alquimia"]}),e.jsx("div",{className:"p-6 bg-white rounded-[40px] shadow-2xl mb-10",children:e.jsx(at,{value:B,size:220,level:"H",includeMargin:!0})}),e.jsx("button",{onClick:()=>re(!1),className:"text-[10px] font-black uppercase tracking-[4px] text-accent hover:text-white",children:"Volver a la Foto"})]})})}),e.jsx("canvas",{ref:_e,className:"hidden"})]})},Ba=({eventConfig:n,supabase:c})=>{var $,O,M,D;const[m,f]=o.useState([]),[k,S]=o.useState(0),[_,j]=o.useState(!0);o.useEffect(()=>{(async()=>{const{data:P}=await c.from("generations").select("id, image_url, created_at").eq("event_id",n.id).order("created_at",{ascending:!1}).limit(50);P&&f(P),j(!1)})();const B=c.channel(`public-gallery-${n.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"generations",filter:`event_id=eq.${n.id}`},P=>{f(se=>[P.new,...se.slice(0,49)]),S(0)}).subscribe();return()=>{c.removeChannel(B)}},[n.id]),o.useEffect(()=>{if(m.length>1){const W=setInterval(()=>{S(B=>(B+1)%m.length)},8e3);return()=>clearInterval(W)}},[m.length]);const x={"--accent-color":(($=n==null?void 0:n.config)==null?void 0:$.primary_color)||"#7f13ec"},L=`${window.location.origin}/?event=${n.event_slug}`;return e.jsxs("div",{className:"fixed inset-0 bg-[#050505] text-white flex flex-col overflow-hidden z-[100] font-sans",style:x,children:[e.jsx("div",{className:"relative flex-1 flex items-center justify-center p-8 md:p-12",children:e.jsx(Ve,{mode:"wait",children:m.length>0?e.jsxs(ie.div,{initial:{opacity:0,scale:.9,rotate:-2},animate:{opacity:1,scale:1,rotate:0},exit:{opacity:0,scale:1.1,rotate:2},transition:{duration:.8,ease:"easeOut"},className:"relative w-full h-full max-w-4xl flex items-center justify-center",children:[e.jsxs("div",{className:"relative w-full h-full rounded-[40px] md:rounded-[60px] overflow-hidden border-[10px] border-white/5 shadow-[0_0_100px_rgba(0,0,0,0.8)]",children:[e.jsx("img",{src:(O=m[k])==null?void 0:O.image_url,alt:"Live Event",className:"w-full h-full object-cover",crossOrigin:"anonymous"}),e.jsx("div",{className:"absolute bottom-10 left-10 z-10",children:e.jsxs("div",{className:"flex items-center gap-4 bg-black/40 backdrop-blur-xl px-6 py-3 rounded-full border border-white/10",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),e.jsxs("span",{className:"text-xs font-black uppercase tracking-[4px]",children:["Live from ",n.event_name]})]})})]}),e.jsx("div",{className:"absolute -top-10 -right-10 w-40 h-40 bg-accent/20 blur-[80px] rounded-full pointer-events-none"}),e.jsx("div",{className:"absolute -bottom-10 -left-10 w-60 h-60 bg-accent/10 blur-[100px] rounded-full pointer-events-none"})]},(M=m[k])==null?void 0:M.id):e.jsxs("div",{className:"flex flex-col items-center gap-6 text-white/20",children:[e.jsx(We,{className:"w-24 h-24 animate-pulse"}),e.jsx("p",{className:"text-xl font-black uppercase tracking-[10px]",children:"Esperando la primera Alquimia..."})]})})}),e.jsxs("div",{className:"h-48 md:h-auto md:w-[400px] bg-black/40 backdrop-blur-3xl border-t md:border-t-0 md:border-l border-white/10 p-10 flex md:flex-col items-center justify-between md:justify-center gap-8 relative z-20",children:[e.jsxs("div",{className:"text-center md:mb-8",children:[(D=n.config)!=null&&D.logo_url?e.jsx("img",{src:n.config.logo_url,alt:"Logo",className:"h-16 w-auto object-contain mx-auto mb-6"}):e.jsx(oe,{className:"w-12 h-12 text-accent mx-auto mb-6"}),e.jsx("h2",{className:"hidden md:block text-2xl font-black uppercase italic tracking-tighter leading-none mb-2",children:"Â¡Hazte la Tuya!"}),e.jsx("p",{className:"hidden md:block text-[10px] font-bold text-white/40 uppercase tracking-[4px]",children:"Escanea el cÃ³digo QR"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-[40px] shadow-2xl relative",children:[e.jsx(at,{value:L,size:window.innerWidth<768?120:200,level:"H",includeMargin:!0}),e.jsx("div",{className:"absolute -inset-2 border-2 border-accent/30 rounded-[48px] animate-pulse pointer-events-none"})]}),e.jsx("div",{className:"hidden md:flex flex-col items-center gap-4 mt-8 opacity-40",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xt,{className:"w-5 h-5"}),e.jsx("span",{className:"text-[9px] font-black uppercase tracking-[2px]",children:"Usa tu mÃ³vil"})]})}),e.jsxs("div",{className:"md:hidden text-right",children:[e.jsx("h2",{className:"text-lg font-black uppercase italic tracking-tighter text-accent leading-none",children:n.event_name}),e.jsx("p",{className:"text-[8px] font-bold text-white/40 uppercase tracking-[2px] mt-1",children:"Live Gallery"})]})]}),e.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-full bg-gradient-to-l from-accent/5 to-transparent pointer-events-none"})]})},Wa=(n,c)=>{if(!n||n[0]!=="#")return`rgba(255, 85, 0, ${c})`;const m=parseInt(n.slice(1,3),16),f=parseInt(n.slice(3,5),16),k=parseInt(n.slice(5,7),16);return`rgba(${m}, ${f}, ${k}, ${c})`},Ha=()=>{var Nt,kt,_t,Ct;const[n,c]=o.useState({selectedIdentity:null,details:"GeneraciÃ³n desde Cabina Creativa Labs",email:"booth@creativa.lab",aspectRatio:"9:16",resolution:"1K",outputFormat:"png"}),[m,f]=o.useState(!1),[k,S]=o.useState(!1),[_,j]=o.useState(!1),[x,L]=o.useState(null),[$,O]=o.useState(!1),[M,D]=o.useState(null),[W,B]=o.useState(!1),[P,se]=o.useState(!1),[G,ue]=o.useState(null),[Me,ee]=o.useState(null),[re,he]=o.useState(0),[_e,me]=o.useState(0),[fe,Ce]=o.useState([]),[Te,Ie]=o.useState(!1),[u,ge]=o.useState(null),[l,pe]=o.useState(null),[ze,Ee]=o.useState(!0),[s,t]=o.useState(!1),[d,b]=o.useState([]),[v,w]=o.useState(!1),[I,g]=o.useState(!1),[y,q]=o.useState(null),[T,F]=o.useState("all"),[R,Q]=o.useState(""),[A,Z]=o.useState(null),[de,te]=o.useState(!1),[le,be]=o.useState(!1),[ne,st]=o.useState([]),[ce,U]=o.useState("gallery"),[Ge,we]=o.useState([]),[ve,De]=o.useState(null),[p,Fe]=o.useState(null),[qe,Ne]=o.useState(null),[rt,Qe]=o.useState(()=>!!new URLSearchParams(window.location.search).get("event")),Pe=3e3,Oe=ye.useMemo(()=>tt.map(a=>{const r=ne.find(i=>i.id===a.id||i.id===a.subCategory);return{...a,isPremium:r?r.is_premium:a.isPremium,usageCount:(r==null?void 0:r.usage_count)||0,isActive:r?r.is_active??!0:!0}}),[ne]),ke=ye.useMemo(()=>{let a=Oe.filter(r=>r.isActive);return p!=null&&p.selected_styles&&p.selected_styles.length>0&&(a=a.filter(r=>p.selected_styles.includes(r.id))),a},[Oe,p]),Tt=ye.useMemo(()=>{if(p)return[...ke].sort(()=>Math.random()-.5).slice(0,4);const a=["jhonw_a","sup_a","pb_a","f1_a","magic_a"];return ke.filter(r=>a.includes(r.id)).sort(()=>Math.random()-.5).slice(0,4)},[ke,p]),Ze=ye.useMemo(()=>[...ke].sort((a,r)=>(r.usageCount||0)-(a.usageCount||0)).slice(0,5).filter(a=>(a.usageCount||0)>0),[ke]);o.useEffect(()=>{V.auth.getSession().then(({data:{session:r}})=>{ge(r)});const{data:{subscription:a}}=V.auth.onAuthStateChange((r,i)=>{ge(i)});return()=>a.unsubscribe()},[]),o.useEffect(()=>{if(!R.trim()||R.length<3)return;const a=setTimeout(async()=>{var r;try{await V.from("search_logs").insert({query:R.trim().toLowerCase(),user_id:(r=u==null?void 0:u.user)==null?void 0:r.id})}catch(i){console.error("Error logging search:",i)}},2e3);return()=>clearTimeout(a)},[R,(Nt=u==null?void 0:u.user)==null?void 0:Nt.id]),o.useEffect(()=>{Ot()},[s]),o.useEffect(()=>{u!=null&&u.user&&(bt(),ft(),Ft())},[u]);const zt=new URLSearchParams(window.location.search).get("mode")==="gallery",Dt=(l==null?void 0:l.is_master)||(l==null?void 0:l.role)==="partner"||(l==null?void 0:l.role)==="admin"||(l==null?void 0:l.role)==="master";o.useEffect(()=>{(async()=>{const i=new URLSearchParams(window.location.search).get("event");if(i){Qe(!0);try{const{data:h,error:E}=await V.from("events").select("*").eq("event_slug",i).maybeSingle();if(E)throw E;if(h){console.log("Evento detectado:",h.event_name);const H=new Date;if(h.start_date&&new Date(h.start_date)>H){const ae=new Date(h.start_date).toLocaleDateString("es-AR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"});Ne(`ðŸ—“ï¸ Este evento aÃºn no comenzÃ³. Arranca el ${ae}`);return}if(h.end_date&&new Date(h.end_date)<H){Ne("ðŸŽ¬ Este evento ya finalizÃ³. Â¡Gracias por participar!");return}if((h.credits_allocated||0)-(h.credits_used||0)<=0){Ne(`ðŸŽŸï¸ Los crÃ©ditos de "${h.event_name}" se agotaron.`);return}Fe(h)}else Ne("âŒ Evento no encontrado. VerificÃ¡ el link.")}catch(h){console.error("Error cargando evento:",h)}finally{Qe(!1)}}})()},[u]),o.useEffect(()=>{var a;if((a=p==null?void 0:p.config)!=null&&a.primary_color){const r=p.config.primary_color,i=Wa(r,.4);document.documentElement.style.setProperty("--accent-color",r),document.documentElement.style.setProperty("--accent-glow",i),console.log("ðŸŽ¨ Branding aplicado:",r)}else document.documentElement.style.setProperty("--accent-color","#ff5500"),document.documentElement.style.setProperty("--accent-glow","rgba(255, 85, 0, 0.4)")},[p]);const Ft=async()=>{if(u!=null&&u.user)try{Ie(!0);const{data:a,error:r}=await V.from("favorites").select("style_id").eq("user_id",u.user.id);if(r)throw r;Ce(a.map(i=>i.style_id))}catch(a){console.error("Error fetching favorites:",a)}finally{Ie(!1)}},qt=async a=>{if(u!=null&&u.user)try{fe.includes(a)?(await V.from("favorites").delete().eq("user_id",u.user.id).eq("style_id",a),Ce(i=>i.filter(h=>h!==a))):(await V.from("favorites").insert({user_id:u.user.id,style_id:a}),Ce(i=>[...i,a]))}catch(r){console.error("Error toggling favorite:",r)}};o.useEffect(()=>{var i,h,E,H;const a=((h=(i=p==null?void 0:p.partner)==null?void 0:i.config)==null?void 0:h.primary_color)||((H=(E=l==null?void 0:l.partner)==null?void 0:E.config)==null?void 0:H.primary_color)||"#ff5500",r=(z,ae)=>{parseInt((z.slice(1,4).length===2,z.slice(1,3)),16);const je=parseInt(z.substring(1,3),16),N=parseInt(z.substring(3,5),16),K=parseInt(z.substring(5,7),16);return`rgba(${je}, ${N}, ${K}, ${ae})`};try{const z=r(a,.4);document.documentElement.style.setProperty("--accent-color",a),document.documentElement.style.setProperty("--accent-glow",z)}catch(z){console.error("Error applying dynamic colors:",z)}},[p,l]);const Ot=async()=>{try{const{data:a,error:r}=await V.from("styles_metadata").select("*");if(r)throw r;st(a||[])}catch(a){console.error("Error fetching styles metadata:",a)}},bt=async()=>{try{Ee(!0);const{data:a,error:r}=await V.from("profiles").select("credits, total_generations, is_master, role, partner_id, unlocked_packs, full_name").eq("id",u.user.id).single();if(r)throw r;pe(a)}catch(a){console.error("Error fetching profile:",a)}finally{Ee(!1)}},Ut=async a=>{if(u!=null&&u.user)try{const{error:r}=await V.from("profiles").update(a).eq("id",u.user.id);if(r)throw r;pe(i=>i?{...i,...a}:null),we(i=>[...i,{id:Date.now().toString(),message:"âœ… Perfil actualizado correctamente",type:"success"}])}catch(r){console.error("Error updating profile:",r),we(i=>[...i,{id:Date.now().toString(),message:"âŒ Error al actualizar perfil",type:"error"}])}},ft=async()=>{var a;try{w(!0);let r=V.from("generations").select("*");if(p!=null&&p.id)r=r.eq("event_id",p.id);else if((a=u==null?void 0:u.user)!=null&&a.id)r=r.eq("user_id",u.user.id);else{w(!1);return}const{data:i,error:h}=await r.order("created_at",{ascending:!1}).limit(20);if(h)throw h;b(i||[])}catch(r){console.error("Error fetching generations:",r)}finally{w(!1)}},gt=async a=>{if(!(!l||!(u!=null&&u.user)))try{if(be(!0),l.credits<Pe){Z(null),g(!0);return}const r=[...l.unlocked_packs||[],a],i=l.credits-Pe,{error:h}=await V.from("profiles").update({credits:i,unlocked_packs:r}).eq("id",u.user.id);if(h)throw h;pe(N=>N?{...N,credits:i,unlocked_packs:r}:null),Z(null),ee(null);const E=3*1e3,H=Date.now()+E,z={startVelocity:30,spread:360,ticks:60,zIndex:500},ae=(N,K)=>Math.random()*(K-N)+N,je=setInterval(function(){const N=H-Date.now();if(N<=0)return clearInterval(je);const K=50*(N/E);ut({...z,particleCount:K,origin:{x:ae(.1,.3),y:Math.random()-.2},colors:["#ff5500","#ffffff","#00d2ff"]}),ut({...z,particleCount:K,origin:{x:ae(.7,.9),y:Math.random()-.2},colors:["#ff5500","#ffffff","#00d2ff"]})},250)}catch(r){console.error("Error unlocking pack:",r),ee("No se pudo desbloquear el pack. Reintenta.")}finally{be(!1)}},wt=["Invocando a los genios digitales para tu retrato... âœ¨","Â¿SabÃ­as que la IA analiza miles de patrones para crear tu estilo? ðŸ§ ","Â¡EstÃ¡s quedando increÃ­ble! (O al menos eso dice nuestro algoritmo) ðŸ˜‰","Extrayendo creatividad del Ã©ter digital... ðŸŒŒ","Dato curioso: La IA no duerme, pero toma mucho cafÃ© virtual â˜•","Ajustando las luces y sombras para tu obra maestra... ðŸŽ¨","Casi listo... la perfecciÃ³n toma unos segundos extra âŒ›","Convirtiendo pÃ­xeles en arte puro para ti ðŸ’Ž","Esperamos que estÃ©s disfrutando de la magia de Creativa Labs ðŸš€","Buscando tu mejor Ã¡ngulo en el multiverso digital... ðŸŒ€"],Ue=o.useRef(null),nt=o.useRef(null),Be=o.useRef(null),vt=async()=>{D(null);try{Be.current&&Be.current.getTracks().forEach(h=>h.stop());const a=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:1280},height:{ideal:720}}});Be.current=a;let r=0;const i=()=>{Ue.current?Ue.current.srcObject=a:r<10&&(r++,setTimeout(i,100))};i()}catch(a){console.error(a),D("No se pudo acceder a la cÃ¡mara. Verifica los permisos.")}};o.useEffect(()=>{if(_&&$){const a=setTimeout(vt,300);return()=>clearTimeout(a)}},[_,$]),o.useEffect(()=>{let a,r;return m?(he(0),me(0),a=setInterval(()=>{he(i=>i+1)},1e3),r=setInterval(()=>{me(i=>(i+1)%wt.length)},6e3)):he(0),()=>{clearInterval(a),clearInterval(r)}},[m]);const Bt=()=>{j(!0),O(!0)},Wt=()=>{if(Ue.current&&nt.current){const a=nt.current,r=Ue.current,i=1024;let h=r.videoWidth,E=r.videoHeight;h>E?h>i&&(E*=i/h,h=i):E>i&&(h*=i/E,E=i),a.width=h,a.height=E;const H=a.getContext("2d");H&&(H.translate(a.width,0),H.scale(-1,1),H.drawImage(r,0,0,a.width,a.height),L(a.toDataURL("image/jpeg",.8)),O(!1),Be.current&&Be.current.getTracks().forEach(z=>z.stop()))}},Ht=async a=>{var h,E,H,z,ae,je;a.preventDefault();const r=!!p,i=l==null?void 0:l.is_master;if(!(!n.selectedIdentity||!x)&&!(!r&&!(u!=null&&u.user))){if(r){if((p.credits_allocated||0)-(p.credits_used||0)<=0){ee("ðŸŽŸï¸ Los crÃ©ditos del evento se agotaron."),S(!0),U("result");return}}else if(!i&&(!l||l.credits<100)){ee(l&&l.total_generations>=5?"Ya gastaste tus 500 crÃ©ditos.":"Saldo insuficiente."),S(!0),U("result");return}if(f(!0),ue(null),ee(null),!r&&!i&&(u!=null&&u.user))try{const N=new Date;N.setHours(0,0,0,0);const{count:K,error:C}=await V.from("generations").select("*",{count:"exact",head:!0}).eq("user_id",u.user.id).gte("created_at",N.toISOString());if(C)throw C;if(K!==null&&K>=2){ee("MÃ¡ximo de impresiones del dÃ­a alcanzado."),S(!0),U("result"),f(!1);return}}catch(N){console.error("Error checking daily limit:",N)}if(!r&&!i&&(u!=null&&u.user))try{const{error:N}=await V.from("profiles").update({credits:l.credits-100}).eq("id",u.user.id);if(N)throw N;pe(K=>K?{...K,credits:K.credits-100}:null)}catch(N){console.error("Error deducting credit:",N),ee("Error al procesar crÃ©ditos. Intenta de nuevo."),f(!1);return}U("processing");try{const{data:N,error:K}=await V.functions.invoke("cabina-vision",{body:{user_photo:x,model_id:n.selectedIdentity,aspect_ratio:n.aspectRatio,user_id:((h=u==null?void 0:u.user)==null?void 0:h.id)||null,email:((E=u==null?void 0:u.user)==null?void 0:E.email)||null,guest_id:`cabina_${Date.now()}`,event_id:(p==null?void 0:p.id)||null}});if(K)throw console.warn("Invoke error (timeout), habilitando modo espera..."),await new Promise(Y=>setTimeout(Y,2e3)),new Error("VAR: Se perdiÃ³ la conexiÃ³n, pero tu Alquimia ya estÃ¡ en proceso en la nube. ðŸ‡¦ðŸ‡·âœ¨");if(!(N!=null&&N.success))throw new Error((N==null?void 0:N.error)||"Error al iniciar la IA");let C=N.image_url;if(!C&&N.taskId){console.log("Modo rescate activado para taskId:",N.taskId);for(let Y=0;Y<10;Y++){await new Promise(Re=>setTimeout(Re,5e3));const{data:X}=await V.functions.invoke("cabina-vision",{body:{action:"check",taskId:N.taskId,model_id:n.selectedIdentity}});if(X!=null&&X.success&&X.state==="success"&&X.image_url){C=X.image_url;break}}}if(!C)throw new Error("VAR: Alquimia en proceso en la nube... âœ¨");ue(C),u!=null&&u.user&&l&&(await V.from("profiles").update({total_generations:(l.total_generations||0)+1}).eq("id",u.user.id),bt()),r&&Fe(Y=>Y&&{...Y,credits_used:(Y.credits_used||0)+1}),ft(),S(!0),U("result"),we(Y=>[...Y,{id:Date.now().toString(),message:"ðŸª„ Â¡Tu foto estÃ¡ lista!",type:"success",action:()=>{U("result"),window.scrollTo({top:0,behavior:"smooth"})}}])}catch(N){console.error("Submission error:",N),((H=N.message)==null?void 0:H.includes("non-2xx"))||((z=N.message)==null?void 0:z.includes("timeout"))||((ae=N.message)==null?void 0:ae.includes("Failed to fetch"))||((je=N.message)==null?void 0:je.includes("VAR"))?ee("VAR: Se perdiÃ³ la conexiÃ³n, pero tu Alquimia ya estÃ¡ en proceso en la nube. ðŸ‡¦ðŸ‡·âœ¨"):(!r&&!i&&l&&(u!=null&&u.user)&&(await V.from("profiles").update({credits:l.credits}).eq("id",u.user.id),pe(C=>C?{...C,credits:l.credits}:null)),ee(N.message||"Error al procesar la imagen.")),S(!0),U("result")}finally{f(!1),De(null)}}},Vt=()=>{if(!G)return;const a=window.open("","_blank");a&&(a.document.write(`
        <html>
          <head>
            <title>Imprimir Foto</title>
            <style>
              body { margin: 0; display: flex; align-items: center; justify-content: center; height: 100vh; background: #fff; }
              img { max-width: 100%; max-height: 100%; object-fit: contain; }
              @media print {
                body { background: none; }
                img { width: 100%; height: auto; }
              }
            </style>
          </head>
          <body>
            <img src="${G}" onload="setTimeout(function(){window.print();}, 500);" />
          </body>
        </html>
      `),a.document.close())},Gt=async()=>{if(!G)return;const a=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent);try{const r=`creativa-photo-${Date.now()}.png`,h=await(await fetch(G,{mode:"cors"})).blob(),E=new File([h],r,{type:"image/png"});if(a&&navigator.share&&navigator.canShare&&navigator.canShare({files:[E]}))try{await navigator.share({files:[E],title:"Mi Foto Creativa",text:"Â¡Mira mi foto generada con IA por Creativa Labs!"});return}catch(ae){if(ae.name!=="AbortError")throw ae;return}const H=window.URL.createObjectURL(h),z=document.createElement("a");z.href=H,z.download=r,document.body.appendChild(z),z.click(),document.body.removeChild(z),window.URL.revokeObjectURL(H)}catch(r){console.error("Download/Share error:",r),a?window.location.href=G:window.open(G,"_blank")}},Qt=[{id:"9:16",label:"9:16",icon:xt,desc:"Portrait"},{id:"16:9",label:"16:9",icon:Et,desc:"Landscape"},{id:"4:5",label:"4:5",icon:va,desc:"Classic"}],jt=()=>{L(null),ue(null),S(!1),f(!1),c(a=>({...a,selectedIdentity:null})),U("gallery"),ee(null),window.scrollTo({top:0,behavior:"smooth"})},ct=x&&n.selectedIdentity,yt=async a=>{try{q(a.name),console.log("Iniciando pago para pack:",a.name);const{data:r,error:i}=await V.functions.invoke("mercadopago-payment",{body:{user_id:u.user.id,credits:a.credits,price:a.price,pack_name:a.name,redirect_url:window.location.origin}});if(i)throw console.error("Error invocando funciÃ³n:",i),i;if(console.log("Respuesta de funciÃ³n:",r),r!=null&&r.error){const E=r.message||"Error desconocido en el servidor.";ee(`Error de Pago: ${E}`),we(H=>[...H,{id:Date.now().toString(),message:`âŒ ${E}`,type:"error"}]);return}const h=(r==null?void 0:r.init_point)||(r==null?void 0:r.sandbox_init_point);h?window.location.href=h:(console.error("No se recibiÃ³ URL de pago:",r),ee("No se pudo generar el enlace de pago."),we(E=>[...E,{id:Date.now().toString(),message:"âŒ Error: No se recibiÃ³ link de pago",type:"error"}]))}catch(r){console.error("Error initiating payment:",r);let i=r.message||"No se pudo iniciar el proceso de pago.";if(r.context)try{const h=await r.context.json();i=h.message||h.error||i}catch{}ee(`Error: ${i}`),we(h=>[...h,{id:Date.now().toString(),message:`âŒ ${i}`,type:"error"}])}finally{q(null)}};return rt?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-primary",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-white/5 border-t-[#7f13ec] rounded-full animate-spin"}),e.jsx(oe,{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-6 h-6 text-[#7f13ec] animate-pulse"})]}),e.jsx("div",{className:"mt-8 text-white font-bold tracking-[0.2em] animate-pulse uppercase text-[10px]",children:"Iniciando Experiencia AlquÃ­mica"})]}):qe?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-primary",children:e.jsxs("div",{className:"text-center max-w-md mx-auto px-6",children:[e.jsx("div",{className:"text-6xl mb-6",children:"ðŸŽ­"}),e.jsx("h2",{style:{fontFamily:"var(--font-display)",fontSize:"1.5rem",color:"white",marginBottom:"12px"},children:"Cabina de Fotos"}),e.jsx("p",{style:{color:"rgba(255,255,255,0.7)",fontSize:"1.1rem",lineHeight:"1.6",marginBottom:"24px"},children:qe}),e.jsx("a",{href:"https://metalab30.com",style:{color:"rgba(255,255,255,0.4)",fontSize:"0.8rem",textDecoration:"underline"},children:"metalab30.com"})]})}):!u&&!p?e.jsx(ea,{}):zt&&p?e.jsx(Ba,{eventConfig:p,supabase:V}):p&&!Dt?e.jsx(Ua,{eventConfig:p,supabase:V}):e.jsxs("div",{className:"relative w-full min-h-screen font-sans text-white bg-primary overflow-x-hidden",children:[e.jsx(sa,{}),u||p?e.jsx(Ta,{user:(u==null?void 0:u.user)||null,profile:l,eventConfig:p,onNavigate:a=>{a.startsWith("category_")?(F(a.replace("category_","")),U("gallery")):a==="favorites"?(F("favorites"),U("gallery")):a==="buy_credits"?g(!0):a==="show-qr"?se(!0):U(a),window.scrollTo({top:0,behavior:"smooth"})},onLogout:async()=>{await V.auth.signOut(),window.location.href="/"},categories:lt,currentView:ce}):null,e.jsxs("div",{className:"fixed bottom-10 right-10 z-[500] flex flex-col gap-4",children:[Ge.map(a=>e.jsxs("div",{onClick:a.action,className:`flex items-center gap-4 px-8 py-4 rounded-2xl border backdrop-blur-2xl animate-[fadeInRight_0.5s_ease-out] shadow-2xl cursor-pointer hover:scale-105 transition-all
              ${a.type==="success"?"bg-accent/20 border-accent/40 text-white":"bg-red-500/20 border-red-500/40 text-red-100"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${a.type==="success"?"bg-accent":"bg-red-500"}`,children:a.type==="success"?e.jsx(Ke,{className:"w-5 h-5"}):e.jsx(Ye,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-black text-[10px] uppercase tracking-[2px]",children:a.message}),a.action&&e.jsx("span",{className:"text-[7px] font-bold text-accent uppercase tracking-[1px]",children:"Clic para ver"})]}),e.jsx("button",{onClick:r=>{r.stopPropagation(),we(i=>i.filter(h=>h.id!==a.id))},className:"ml-4 opacity-40 hover:opacity-100",children:e.jsx(xe,{className:"w-4 h-4"})})]},a.id)),m&&(ve==null?void 0:ve.active)&&e.jsxs("div",{className:"bg-black/80 backdrop-blur-xl border border-white/10 p-6 rounded-[24px] shadow-2xl flex items-center gap-6 animate-[fadeInUp_0.5s_ease-out]",children:[e.jsxs("div",{className:"relative w-12 h-12 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 border-[1px] border-accent/20 rounded-full animate-spin"}),e.jsxs("span",{className:"text-[8px] font-black",children:[re,"s"]})]}),e.jsxs("div",{className:"flex flex-col text-left",children:[e.jsx("span",{className:"text-white text-[10px] font-black uppercase tracking-[2px]",children:"Alquimia en progreso..."}),e.jsx("span",{className:"text-white/40 text-[7px] uppercase tracking-[1px]",children:"PodÃ©s seguir usando la app"})]}),e.jsx("button",{onClick:()=>{U("gallery"),De({active:!1,id:null,startTime:Date.now()})},className:"px-4 py-2 bg-accent text-white rounded-lg text-[8px] font-black uppercase tracking-[1px] hover:bg-white transition-colors",children:"Cerrar"})]})]}),m&&!(ve!=null&&ve.active)&&e.jsxs("div",{className:"fixed inset-0 z-[200] bg-black/90 backdrop-blur-2xl flex flex-col items-center justify-center p-6 text-center animate-[fadeIn_0.3s_ease-out]",children:[e.jsxs("div",{className:"relative mb-12",children:[e.jsx("div",{className:"absolute inset-0 bg-accent/20 blur-[100px] rounded-full animate-pulse"}),e.jsxs("div",{className:"relative w-32 h-32 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 border-[1px] border-accent/20 rounded-full animate-[ping_3s_linear_infinite]"}),e.jsx("div",{className:"absolute inset-[-10px] border-[1px] border-white/5 rounded-full animate-[ping_4s_linear_infinite]"}),e.jsx(Ae,{className:"w-full h-full text-accent animate-spin stroke-[1px] opacity-40"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(Et,{className:"w-6 h-6 text-accent animate-pulse mb-1"}),e.jsx("span",{className:"text-xl font-black italic tracking-tighter text-white",children:"AI"}),e.jsx("span",{className:"text-[6px] font-black uppercase tracking-[2px] text-accent/60",children:"Scanning..."})]})})]})]}),e.jsxs("div",{className:"max-w-md space-y-8 relative z-10",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-accent text-[10px] font-black tracking-[5px] uppercase block animate-pulse",children:"Procesando Alquimia Digital"}),e.jsx("h3",{className:"text-2xl font-black italic uppercase tracking-tight h-20 flex items-center justify-center transition-all duration-500",children:wt[_e]})]}),e.jsxs("div",{className:"flex flex-col items-center gap-4 pt-8",children:[e.jsx("div",{className:"w-64 h-1.5 bg-white/5 rounded-full overflow-hidden border border-white/5",children:e.jsx("div",{className:"h-full bg-accent transition-all duration-300 ease-linear shadow-[0_0_15px_rgba(255,85,0,0.5)]",style:{width:`${re<5?re/5*30:re<25?30+(re-5)/20*50:re<60?80+(re-25)/35*15:Math.min(99,95+(re-60)/60*4)}%`}})}),e.jsx("p",{className:"text-[8px] text-white/30 font-black tracking-[3px] uppercase",children:re>30?"Finalizando detalles finales...":"Sincronizando con el servidor"})]}),e.jsxs("button",{onClick:()=>{De({active:!0,id:null,startTime:Date.now()}),U("gallery")},className:"px-8 py-4 mt-8 bg-white/5 border border-white/10 rounded-xl text-[10px] font-black uppercase tracking-[2px] hover:bg-white/10 transition-all flex items-center gap-3 group",children:[e.jsx(xt,{className:"w-4 h-4 text-accent group-hover:scale-110 transition-transform"}),"Procesar en Segundo Plano"]})]})]}),ce==="gallery"&&e.jsx("section",{className:"relative h-[40vh] w-full flex flex-col items-center justify-center z-10 px-4",children:e.jsxs("div",{className:"text-center pointer-events-none",children:[e.jsxs("h1",{className:"font-black text-[clamp(2.5rem,10vw,10rem)] leading-none tracking-tighter uppercase select-none",children:[(p==null?void 0:p.event_name)||"Creativa"," ",e.jsx("span",{className:"text-white/20",children:p?"":"Labs"})]}),e.jsxs("div",{className:"mt-4 flex flex-col items-center gap-2",children:[e.jsx("div",{className:"h-[1px] w-16 bg-accent"}),e.jsx("div",{className:"text-[10px] tracking-[0.5rem] text-white/40 uppercase",children:((kt=p==null?void 0:p.config)==null?void 0:kt.welcome_text)||"Photo Booth Experience"})]})]})}),(ce==="setup"||ce==="result"||ce==="history")&&e.jsx("div",{className:"fixed top-24 left-6 z-[160] animate-[fadeIn_0.5s_ease-out]",children:e.jsxs("button",{onClick:()=>{jt(),U("gallery")},className:"group flex items-center gap-4 px-6 py-3 bg-black/40 backdrop-blur-xl border border-white/5 rounded-full hover:bg-white/10 transition-all pointer-events-auto shadow-2xl",children:[e.jsx(Mt,{className:"w-4 h-4 text-accent rotate-90"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-[3px]",children:"Volver a Estilos"})]})}),e.jsx("section",{className:"relative min-h-screen w-full bg-[#050505]/95 backdrop-blur-md border-t border-white/5 py-20 px-6 z-20",children:e.jsxs("div",{className:"max-w-[1200px] mx-auto",children:[ce==="gallery"&&e.jsxs("div",{className:"animate-[fadeIn_1s_ease-out]",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("span",{className:"inline-block px-4 py-1 rounded-full bg-accent/10 border border-accent/20 text-accent text-[10px] font-black tracking-[3px] uppercase mb-6",children:"Discovery"}),e.jsx("h2",{className:"text-4xl font-black tracking-tight uppercase mb-4 italic text-white",children:p?"Selecciona tu Estilo":"Elige tu destino"}),e.jsx("p",{className:"text-white/30 text-[10px] uppercase tracking-[4px]",children:p?"Personaliza tu experiencia exclusiva":"Navega por los universos visuales disponibles"}),p&&e.jsxs("button",{onClick:()=>U("event-gallery"),className:"mt-8 inline-flex items-center gap-2 px-6 py-3 bg-white/5 border border-white/10 rounded-2xl hover:bg-white/10 transition-all text-white/40 hover:text-white text-[10px] font-black tracking-[2px] uppercase blur-none",children:[e.jsx(et,{className:"w-4 h-4"}),e.jsx("span",{children:"Ver GalerÃ­a del Evento"})]})]}),e.jsxs("div",{className:"max-w-xl mx-auto mb-12 relative group",children:[e.jsx("div",{className:"absolute inset-0 bg-accent/5 blur-2xl rounded-full opacity-0 group-focus-within:opacity-100 transition-opacity duration-700"}),e.jsxs("div",{className:"relative flex items-center bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl overflow-hidden focus-within:border-accent/50 transition-all duration-300",children:[e.jsx("div",{className:"pl-6 pointer-events-none",children:e.jsx(St,{className:`w-5 h-5 transition-colors ${R?"text-accent":"text-white/20"}`})}),e.jsx("input",{type:"text",value:R,onChange:a=>Q(a.target.value),placeholder:"Busca por estilo, pack o tags (ej: f1, traje, neon)...",className:"w-full bg-transparent border-none px-6 py-5 text-sm font-bold placeholder:text-white/10 focus:outline-none focus:ring-0 text-white"}),R&&e.jsx("button",{onClick:()=>Q(""),className:"pr-6 text-white/20 hover:text-white transition-colors",children:e.jsx(xe,{className:"w-4 h-4"})})]})]}),!R&&e.jsxs("div",{className:"mb-20 animate-[fadeIn_0.8s_ease-out]",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-8",children:[e.jsx(oe,{className:"w-4 h-4 text-amber-500 animate-pulse"}),e.jsx("h3",{className:"text-[10px] font-black tracking-[4px] uppercase text-white/40",children:"Recomendados para vos"}),e.jsx(oe,{className:"w-4 h-4 text-amber-500 animate-pulse"})]}),e.jsx("div",{className:"flex flex-nowrap overflow-x-auto pb-8 gap-3 px-4 no-scrollbar justify-center",children:Tt.map(a=>{var r;return e.jsx("div",{className:"min-w-[110px] sm:min-w-[120px] transform hover:scale-110 transition-all duration-500",children:e.jsx(Xe,{type:"character",title:a.title,sampleImageUrl:a.url,isSelected:n.selectedIdentity===a.id,isPremium:a.isPremium,isUnlocked:((r=l==null?void 0:l.unlocked_packs)==null?void 0:r.includes(a.subCategory))||(l==null?void 0:l.is_master),usageCount:a.usageCount,isTopStyle:Ze.some(i=>i.id===a.id),tags:[],onSelect:()=>{var h;a.isPremium&&!((h=l==null?void 0:l.unlocked_packs)!=null&&h.includes(a.subCategory))&&!(l!=null&&l.is_master)?l&&l.credits>=Pe?Z(a):te(!0):(c(E=>({...E,selectedIdentity:a.id})),U("setup"),window.scrollTo({top:0,behavior:"smooth"}))}})},`rec-${a.id}`)})})]}),!R&&!p&&Ze.length>0&&e.jsxs("div",{className:"mb-20 animate-[fadeIn_1.2s_ease-out]",children:[e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-10",children:[e.jsx("div",{className:"h-[1px] w-12 bg-gradient-to-r from-transparent to-accent"}),e.jsx(Le,{className:"w-5 h-5 text-accent animate-pulse"}),e.jsx("h3",{className:"text-[12px] font-black tracking-[6px] uppercase text-white italic",children:"Los MÃ¡s Buscados"}),e.jsx(Le,{className:"w-5 h-5 text-accent animate-pulse"}),e.jsx("div",{className:"h-[1px] w-12 bg-gradient-to-l from-transparent to-accent"})]}),e.jsx("div",{className:"flex flex-nowrap overflow-x-auto pb-8 gap-4 px-4 no-scrollbar justify-center",children:Ze.map(a=>{var r;return e.jsx("div",{className:"min-w-[120px] sm:min-w-[140px] transform hover:scale-110 transition-all duration-500",children:e.jsx(Xe,{type:"character",title:a.title,sampleImageUrl:a.url,isSelected:n.selectedIdentity===a.id,isPremium:a.isPremium,isUnlocked:((r=l==null?void 0:l.unlocked_packs)==null?void 0:r.includes(a.subCategory))||(l==null?void 0:l.is_master),usageCount:a.usageCount,isTopStyle:!0,tags:[],onSelect:()=>{var h;a.isPremium&&!((h=l==null?void 0:l.unlocked_packs)!=null&&h.includes(a.subCategory))&&!(l!=null&&l.is_master)?l&&l.credits>=Pe?Z(a):te(!0):(c(E=>({...E,selectedIdentity:a.id})),U("setup"),window.scrollTo({top:0,behavior:"smooth"}))}})},`top-${a.id}`)})})]}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-4 mb-16",children:[(p?lt.filter(a=>a.id==="all"||ke.some(r=>r.category===a.id)):lt).map(a=>e.jsxs("button",{onClick:()=>F(a.id),className:`flex items-center gap-3 px-8 py-4 rounded-2xl border-2 transition-all duration-500
                      ${T===a.id?"bg-accent border-accent text-white shadow-[0_0_30px_rgba(255,85,0,0.3)] scale-105":"bg-white/5 border-white/5 text-white/40 hover:border-white/20"}`,children:[e.jsx(a.icon,{className:`w-5 h-5 ${T===a.id?"animate-pulse":""}`}),e.jsx("span",{className:"font-black tracking-[2px] uppercase text-xs",children:a.label})]},a.id)),!p&&e.jsxs("button",{onClick:()=>F("favorites"),className:`flex items-center gap-3 px-8 py-4 rounded-2xl border-2 transition-all duration-500
                        ${T==="favorites"?"bg-gradient-to-r from-pink-500 to-rose-500 border-pink-500 text-white shadow-[0_0_30px_rgba(244,63,94,0.3)] scale-105":"bg-white/5 border-white/5 text-white/40 hover:text-pink-400 hover:border-pink-500/30"}`,children:[e.jsx(mt,{className:`w-5 h-5 ${T==="favorites"?"fill-current animate-pulse":""}`}),e.jsx("span",{className:"font-black tracking-[2px] uppercase text-xs",children:"Favoritos"})]})]}),e.jsxs("div",{className:"space-y-20",children:[Array.from(new Set(ke.filter(a=>{const r=T==="favorites"?fe.includes(a.id):T==="all"||a.category===T,i=R.toLowerCase(),h=a.title.toLowerCase().includes(i)||a.subCategory.toLowerCase().includes(i)||a.tags.some(E=>E.toLowerCase().includes(i));return r&&h}).map(a=>a.subCategory))).sort((a,r)=>{const i=ne.find(z=>z.id===a),h=ne.find(z=>z.id===r),E=(i==null?void 0:i.sort_order)??999,H=(h==null?void 0:h.sort_order)??999;return E!==H?E-H:a.localeCompare(r)}).map(a=>{const r=()=>{const i=o.useRef(null),[h,E]=o.useState(!1),[H,z]=o.useState(!0),ae=()=>{if(i.current){const{scrollLeft:C,scrollWidth:Y,clientWidth:X}=i.current;E(C>10),z(C<Y-X-10)}};o.useEffect(()=>{ae();const C=setTimeout(ae,500);return()=>clearTimeout(C)},[]);const je=C=>{if(i.current){const{clientWidth:Y}=i.current,X=C==="left"?-Y*.8:Y*.8;i.current.scrollBy({left:X,behavior:"smooth"})}},N=ke.filter(C=>{const Y=T==="favorites"?fe.includes(C.id):T==="all"||C.category===T,X=R.toLowerCase();return C.subCategory===a&&Y&&(C.title.toLowerCase().includes(X)||C.subCategory.toLowerCase().includes(X)||C.tags.some(Re=>Re.toLowerCase().includes(X)))}),K=N.length;return e.jsxs("div",{className:"animate-[fadeIn_0.5s_ease-out]",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx("div",{className:"h-[2px] w-8 bg-accent"}),e.jsx("h3",{className:"text-sm font-black tracking-[4px] uppercase text-white/60 italic",children:a}),e.jsx("div",{className:"flex-grow h-[1px] bg-white/5"})]}),e.jsxs("div",{className:"relative group/carousel",children:[K>4&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>je("left"),className:`absolute -left-4 top-1/2 -translate-y-1/2 z-30 p-3 rounded-full bg-black/80 border border-accent/30 shadow-[0_0_20px_rgba(255,85,0,0.2)] backdrop-blur-xl transition-all duration-300 hover:scale-110 active:scale-95
                                    ${h?"opacity-100":"opacity-20 pointer-events-none"}`,children:e.jsx(ht,{className:"w-5 h-5 text-accent"})}),e.jsx("button",{onClick:()=>je("right"),className:`absolute -right-4 top-1/2 -translate-y-1/2 z-30 p-3 rounded-full bg-black/80 border border-accent/30 shadow-[0_0_20px_rgba(255,85,0,0.2)] backdrop-blur-xl transition-all duration-300 hover:scale-110 active:scale-95
                                    ${H?"opacity-100":"opacity-20 pointer-events-none"}`,children:e.jsx(ha,{className:"w-5 h-5 text-accent"})})]}),e.jsx("div",{ref:i,onScroll:ae,className:`flex flex-nowrap overflow-x-auto pt-8 pb-12 gap-6 snap-x snap-mandatory no-scrollbar scroll-smooth px-4 ${K<=4?"justify-center":""}`,children:N.map(C=>{var Y;return e.jsx("div",{className:"min-w-[130px] sm:min-w-[140px] lg:min-w-[150px] snap-center transform hover:scale-[1.08] transition-all duration-500",children:e.jsx(Xe,{type:"character",title:C.title,sampleImageUrl:C.url,isSelected:n.selectedIdentity===C.id,isPremium:C.isPremium,isUnlocked:((Y=l==null?void 0:l.unlocked_packs)==null?void 0:Y.includes(C.subCategory))||(l==null?void 0:l.is_master),usageCount:C.usageCount,isTopStyle:Ze.some(X=>X.id===C.id),tags:C.tags,isFavorite:fe.includes(C.id),onToggleFavorite:X=>{X.stopPropagation(),qt(C.id)},onSelect:()=>{var Re;C.isPremium&&!((Re=l==null?void 0:l.unlocked_packs)!=null&&Re.includes(C.subCategory))&&!(l!=null&&l.is_master)?l&&l.credits>=Pe?Z(C):te(!0):(c(Zt=>({...Zt,selectedIdentity:C.id})),U("setup"),window.scrollTo({top:0,behavior:"smooth"}))}})},C.id)})}),e.jsx("div",{className:"absolute left-0 top-0 bottom-12 w-20 bg-gradient-to-r from-[#050505]/80 to-transparent pointer-events-none z-[10] opacity-0 group-hover/carousel:opacity-100 transition-opacity"}),e.jsx("div",{className:"absolute right-0 top-0 bottom-12 w-20 bg-gradient-to-l from-[#050505]/80 to-transparent pointer-events-none z-[10] opacity-0 group-hover/carousel:opacity-100 transition-opacity"})]})]},a)};return e.jsx(r,{},a)}),R&&Oe.filter(a=>{const r=T==="all"||a.category===T,i=R.toLowerCase();return r&&(a.title.toLowerCase().includes(i)||a.subCategory.toLowerCase().includes(i)||a.tags.some(h=>h.toLowerCase().includes(i)))}).length===0&&e.jsxs("div",{className:"py-20 text-center animate-pulse",children:[e.jsx(St,{className:"w-12 h-12 text-white/5 mx-auto mb-4"}),e.jsxs("p",{className:"text-white/20 text-[10px] font-black uppercase tracking-[4px]",children:['No hay resultados para "',R,'"']}),e.jsx("button",{onClick:()=>Q(""),className:"mt-6 text-accent text-[8px] font-black uppercase tracking-[2px] hover:underline",children:"Limpiar bÃºsqueda"})]})]})]}),ce==="setup"&&e.jsxs("div",{className:"animate-[fadeInDown_0.8s_ease-out]",children:[n.selectedIdentity&&e.jsxs("div",{className:"flex flex-col items-center mb-16",children:[e.jsx("div",{className:"w-32 h-32 rounded-3xl overflow-hidden border-2 border-accent mb-6 shadow-[0_0_30px_rgba(255,85,0,0.3)]",children:e.jsx("img",{src:(_t=Oe.find(a=>a.id===n.selectedIdentity))==null?void 0:_t.url,className:"w-full h-full object-cover",alt:"Estilo"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-accent text-[8px] font-black uppercase tracking-[4px]",children:"TransformaciÃ³n Elegida"}),e.jsx("h2",{className:"text-3xl font-black italic uppercase tracking-tighter text-white",children:(Ct=Oe.find(a=>a.id===n.selectedIdentity))==null?void 0:Ct.title})]})]}),e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("span",{className:"inline-block px-4 py-1 rounded-full bg-accent/10 border border-accent/20 text-accent text-[10px] font-black tracking-[3px] uppercase mb-6",children:"Paso 01"}),e.jsx("h2",{className:"text-2xl font-black tracking-[0.2em] uppercase mb-8",children:"Captura tu Rostro"}),e.jsx("p",{className:"text-white/30 text-[9px] uppercase tracking-[3px] mb-12",children:"Ubica tu cara en el centro para mejores resultados"}),e.jsx("div",{className:"flex flex-col items-center gap-8",children:x?e.jsxs("div",{className:"relative group",children:[e.jsxs("div",{className:"w-64 aspect-[4/5] rounded-3xl overflow-hidden border-2 border-accent shadow-[0_0_40px_rgba(255,85,0,0.3)] relative",children:[e.jsx("img",{src:x,className:"w-full h-full object-cover",alt:"Tu foto"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-[1px] bg-accent/50 animate-[scan_2s_linear_infinite]"})]}),e.jsx("button",{onClick:()=>L(null),className:"absolute -top-3 -right-3 w-10 h-10 bg-white text-black rounded-full flex items-center justify-center hover:bg-accent hover:text-white transition-all shadow-xl z-30",children:e.jsx(dt,{className:"w-5 h-5"})}),e.jsx("p",{className:"mt-4 text-[9px] font-black tracking-[3px] text-accent uppercase",children:"Foto Capturada"})]}):e.jsxs("button",{onClick:Bt,className:"group relative flex items-center justify-center gap-4 px-12 py-6 bg-white/5 border-2 border-white/10 rounded-2xl hover:bg-accent hover:border-accent transition-all duration-500 hover:scale-105",children:[e.jsx(We,{className:"w-6 h-6 text-accent group-hover:text-white"}),e.jsx("span",{className:"font-black tracking-[4px] uppercase text-sm text-white",children:"Iniciar CÃ¡mara"})]})})]}),e.jsxs("div",{className:"relative py-20 flex items-center justify-center",children:[e.jsx("div",{className:"absolute w-full h-[1px] bg-white/5"}),e.jsx(Mt,{className:`relative px-4 bg-[#050505] w-12 h-5 transition-colors duration-500 ${x?"text-accent":"text-white/10"}`})]}),e.jsx("div",{className:`transition-all duration-700 ${x?"opacity-100":"opacity-20 pointer-events-none grayscale"}`,children:e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("span",{className:"inline-block px-4 py-1 rounded-full bg-white/5 border border-white/10 text-white/40 text-[10px] font-black tracking-[3px] uppercase mb-6",children:"Paso 02"}),e.jsx("h2",{className:"text-2xl font-black tracking-[0.2em] uppercase mb-12",children:"Formato de Imagen"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-8 max-w-3xl mx-auto",children:Qt.map(a=>e.jsxs("button",{onClick:()=>c(r=>({...r,aspectRatio:a.id})),className:`relative group flex flex-col items-center p-8 rounded-[32px] border-2 transition-all duration-500
                          ${n.aspectRatio===a.id?"border-accent bg-accent/5 shadow-[0_0_40px_rgba(255,85,0,0.2)]":"border-white/5 bg-white/2 bg-[#121215] hover:border-white/20"}`,children:[e.jsx("div",{className:`mb-6 p-4 rounded-2xl transition-all duration-500
                          ${n.aspectRatio===a.id?"bg-accent text-white":"bg-white/5 text-white/40 group-hover:text-white"}`,children:e.jsx(a.icon,{className:"w-8 h-8"})}),e.jsx("span",{className:`text-xl font-black tracking-[4px] mb-2 ${n.aspectRatio===a.id?"text-white":"text-white/40"}`,children:a.label}),n.aspectRatio===a.id&&e.jsx(Ke,{className:"absolute top-4 right-4 w-5 h-5 text-accent"})]},a.id))})]})}),e.jsx("div",{className:`mt-32 max-w-sm mx-auto transition-all duration-700 ${ct?"opacity-100 scale-100":"opacity-30 scale-95 pointer-events-none"}`,children:e.jsxs("button",{onClick:Ht,disabled:m||!ct,className:"group relative w-full h-20 rounded-2xl overflow-hidden transition-all duration-500 shadow-2xl",children:[e.jsx("div",{className:`absolute inset-0 transition-all duration-500 ${ct?"bg-accent":"bg-white/10"}`}),e.jsx("div",{className:"relative flex items-center justify-center gap-4 font-black text-sm uppercase tracking-[6px] text-white",children:m?e.jsx("span",{children:"PROCESANDO..."}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"GENERAR ALQUIMIA"}),e.jsx(oe,{className:"w-5 h-5"})]})})]})})]}),ce==="result"&&e.jsxs("div",{className:"mt-8 p-12 bg-accent/5 border border-accent/20 rounded-[40px] text-center max-w-2xl mx-auto backdrop-blur-3xl animate-[fadeIn_0.5s_ease-out] flex flex-col items-center",children:[Me?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-16 h-16 bg-red-500 rounded-full flex items-center justify-center mb-8",children:e.jsx(Ye,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"text-3xl font-black mb-4 uppercase italic text-red-500",children:"Error"}),e.jsx("p",{className:"text-white/70 text-xs font-bold uppercase tracking-[2px] leading-relaxed",children:Me})]}):G?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-16 h-16 bg-accent rounded-full flex items-center justify-center mb-8 shadow-[0_0_30px_rgba(255,85,0,0.4)]",children:e.jsx(Ke,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"text-3xl font-black mb-10 uppercase italic text-white",children:"Â¡Tu Alquimia estÃ¡ Lista!"}),e.jsx("div",{className:"w-64 aspect-[4/5] rounded-3xl overflow-hidden border-2 border-accent shadow-[0_0_40px_rgba(255,85,0,0.3)] mb-10 bg-black",children:e.jsx("img",{src:G,alt:"Resultado",className:"w-full h-full object-cover",crossOrigin:"anonymous"})}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[e.jsxs("button",{onClick:Vt,className:"group flex items-center gap-3 px-8 py-4 bg-white text-black rounded-xl hover:bg-accent hover:text-white transition-all shadow-lg hover:shadow-accent/50",children:[e.jsx(At,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs font-black tracking-[2px] uppercase",children:"Imprimir"})]}),e.jsxs("button",{onClick:Gt,className:"group flex items-center gap-3 px-8 py-4 bg-white/10 text-white border border-white/10 rounded-xl hover:bg-white/20 transition-all shadow-lg",children:[e.jsx(He,{className:"w-5 h-5 text-accent"}),e.jsx("span",{className:"text-xs font-black tracking-[2px] uppercase",children:"Descargar"})]}),e.jsxs("button",{onClick:async()=>{var a;if(G)try{const i=await(await fetch(G,{mode:"cors"})).blob(),h=new File([i],`creativa-${Date.now()}.png`,{type:"image/png"});if(navigator.share&&((a=navigator.canShare)!=null&&a.call(navigator,{files:[h]})))await navigator.share({files:[h],title:(p==null?void 0:p.event_name)||"Mi Foto Creativa",text:p?`ðŸ“¸ Mi foto del evento ${p.event_name} âœ¨ Creada con IA por metalab30.com`:"ðŸ“¸ Â¡Mi foto generada con IA! âœ¨ metalab30.com"});else{const E=encodeURIComponent(p?`ðŸ“¸ Â¡MirÃ¡ mi foto del evento ${p.event_name}! âœ¨ Creada con IA por metalab30.com`:"ðŸ“¸ Â¡MirÃ¡ mi foto generada con IA! âœ¨ metalab30.com");window.open(`https://wa.me/?text=${E}`,"_blank")}}catch(r){if(r.name!=="AbortError"){const i=encodeURIComponent("ðŸ“¸ Â¡MirÃ¡ mi foto generada con IA! âœ¨ metalab30.com");window.open(`https://wa.me/?text=${i}`,"_blank")}}},className:"group flex items-center gap-3 px-8 py-4 bg-[#25D366]/20 text-[#25D366] border border-[#25D366]/30 rounded-xl hover:bg-[#25D366]/30 transition-all shadow-lg",children:[e.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),e.jsx("span",{className:"text-xs font-black tracking-[2px] uppercase",children:"Compartir"})]})]}),p&&e.jsxs("button",{onClick:()=>{U("event-gallery")},className:"mt-6 flex items-center gap-2 px-6 py-3 bg-white/5 border border-white/10 rounded-xl hover:bg-white/10 transition-all text-white/60 hover:text-white mx-auto",children:[e.jsx("span",{className:"text-lg",children:"ðŸ“¸"}),e.jsx("span",{className:"text-[10px] font-bold tracking-[2px] uppercase",children:"Ver galerÃ­a del evento"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-16 h-16 bg-yellow-500 rounded-full flex items-center justify-center mb-8",children:e.jsx(Ye,{className:"w-8 h-8 text-white"})}),e.jsx("p",{children:"Respuesta inesperada del servidor."})]}),e.jsx("button",{onClick:jt,className:"mt-12 text-[9px] font-black tracking-[4px] uppercase text-white/30 hover:text-white transition-colors",children:"Reiniciar Proceso"})]}),ce==="history"&&e.jsxs("div",{className:"animate-[fadeIn_0.5s_ease-out] max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col items-center mb-16 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-white/5 rounded-full flex items-center justify-center mb-6",children:e.jsx(et,{className:"w-8 h-8 text-accent"})}),e.jsx("h2",{className:"text-3xl font-black uppercase italic tracking-tight text-white mb-2",children:"Mis Fotos"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-[1px] w-8 bg-accent/50"}),e.jsx("p",{className:"text-[10px] tracking-[4px] text-white/40 uppercase",children:"Historial de Generaciones"}),e.jsx("div",{className:"h-[1px] w-8 bg-accent/50"})]})]}),v?e.jsxs("div",{className:"flex flex-col items-center py-20 opacity-40",children:[e.jsx(Ae,{className:"w-10 h-10 animate-spin mb-4 text-accent"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-[2px]",children:"Cargando historial..."})]}):d.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-32 border-2 border-dashed border-white/5 rounded-[40px] bg-white/[0.02]",children:[e.jsx(We,{className:"w-12 h-12 text-white/10 mb-6"}),e.jsx("p",{className:"text-white/30 text-xs font-black uppercase tracking-[4px] mb-8",children:"AÃºn no has generado imÃ¡genes"}),e.jsx("button",{onClick:()=>U("gallery"),className:"px-8 py-4 bg-accent text-white rounded-xl text-[10px] font-black uppercase tracking-[2px] hover:bg-white hover:text-black transition-all",children:"Crear mi primera foto"})]}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:d.map(a=>e.jsxs("div",{className:"group relative aspect-[4/5] rounded-[32px] overflow-hidden border border-white/10 bg-[#0a0a0c] hover:border-accent/40 hover:shadow-[0_0_30px_rgba(0,0,0,0.5)] transition-all duration-500",children:[e.jsx("img",{src:a.image_url,alt:"GeneraciÃ³n",className:"w-full h-full object-cover opacity-80 group-hover:opacity-100 group-hover:scale-110 transition-all duration-700",crossOrigin:"anonymous"}),e.jsxs("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col justify-end p-6",children:[e.jsx("span",{className:"text-[8px] font-black uppercase tracking-[2px] text-accent mb-2 block",children:new Date(a.created_at).toLocaleDateString()}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{ue(a.image_url),S(!0),U("result"),window.scrollTo({top:0,behavior:"smooth"})},className:"flex-1 bg-white text-black py-3 rounded-xl text-[8px] font-black uppercase tracking-[1px] hover:bg-accent hover:text-white transition-colors flex items-center justify-center gap-2",children:e.jsx("span",{children:"Ver"})}),e.jsx("a",{href:a.image_url,target:"_blank",rel:"noreferrer",className:"p-3 bg-white/10 rounded-xl text-white hover:bg-white hover:text-black transition-colors",children:e.jsx(He,{className:"w-4 h-4"})})]})]})]},a.id))})]}),ce==="event-gallery"&&p&&e.jsx(qa,{eventConfig:p,supabase:V,onBack:()=>U("gallery"),onViewPhoto:a=>{ue(a),S(!0),U("result"),window.scrollTo({top:0,behavior:"smooth"})}}),ce==="settings"&&e.jsx(za,{profile:l,session:u,onBack:()=>U("gallery"),onAddCredits:()=>g(!0),onUpdateProfile:Ut}),ce==="packs"&&e.jsx(Da,{identities:tt,unlockedPacks:l==null?void 0:l.unlocked_packs,userCredits:(l==null?void 0:l.credits)||0,onBack:()=>U("gallery"),onUnlock:gt,isUnlocking:le}),ce==="support"&&e.jsxs("div",{className:"flex flex-col items-center justify-center pt-32 pb-20 animate-[fadeIn_0.5s_ease-out]",children:[e.jsx("h2",{className:"text-3xl font-black italic uppercase text-white mb-6",children:"Soporte"}),e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-8 max-w-md w-full text-center",children:[e.jsx("p",{className:"text-white/60 text-sm mb-6",children:"Si tienes algÃºn problema o sugerencia, contÃ¡ctanos."}),e.jsx("a",{href:"mailto:support@metalab.ai",className:"inline-block px-8 py-4 bg-accent text-white rounded-xl font-black uppercase tracking-[2px] text-xs hover:bg-white hover:text-black transition-all",children:"Enviar Email"}),e.jsx("button",{onClick:()=>U("gallery"),className:"block w-full mt-6 text-[10px] font-black uppercase tracking-[2px] text-white/30 hover:text-white",children:"Volver"})]})]})]})}),_&&e.jsx("div",{className:"fixed inset-0 z-[100] bg-black/95 backdrop-blur-xl flex items-center justify-center p-4",children:e.jsxs("div",{className:"relative w-full max-w-md max-h-[90vh] aspect-[3/4] bg-primary rounded-[40px] overflow-hidden border border-white/10 flex flex-col",children:[e.jsxs("div",{className:"relative flex-1 bg-black overflow-hidden",children:[$?e.jsx("video",{ref:Ue,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover scale-x-[-1]"}):e.jsx("img",{src:x||"",className:"w-full h-full object-cover",alt:"PrevisualizaciÃ³n"}),M&&e.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-black/80 p-8 text-center",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(Ye,{className:"w-12 h-12 text-red-500 mb-4"}),e.jsx("p",{className:"text-white text-xs font-bold uppercase tracking-widest",children:M}),e.jsx("button",{onClick:vt,className:"mt-6 px-6 py-3 bg-white/10 hover:bg-white/20 rounded-full text-[10px] font-black uppercase tracking-widest transition-all",children:"Reintentar"})]})}),e.jsx("div",{className:"absolute inset-0 border-[20px] border-black/40 pointer-events-none",children:e.jsx("div",{className:"w-full h-full border border-white/5 relative flex items-center justify-center",children:e.jsx("div",{className:"w-48 h-64 border border-accent/20 rounded-[100px]"})})})]}),e.jsx("div",{className:"absolute bottom-10 left-0 w-full px-10 flex items-center justify-between z-20",children:$?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>j(!1),className:"w-12 h-12 rounded-full bg-white/5 flex items-center justify-center border border-white/10",children:e.jsx(xe,{className:"w-5 h-5"})}),e.jsx("button",{onClick:Wt,className:"w-20 h-20 rounded-full bg-white p-1 shadow-2xl",children:e.jsx("div",{className:"w-full h-full rounded-full border-4 border-black bg-black/5 flex items-center justify-center",children:e.jsx("div",{className:"w-4 h-4 bg-black rounded-full"})})}),e.jsx("div",{className:"w-12"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>O(!0),className:"flex flex-col items-center gap-2 group",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-white/5 border border-white/10 flex items-center justify-center group-hover:bg-white/10",children:e.jsx(dt,{className:"w-5 h-5"})}),e.jsx("span",{className:"text-[8px] font-black tracking-[2px] uppercase opacity-40",children:"Reintentar"})]}),e.jsxs("button",{onClick:()=>j(!1),className:"flex flex-col items-center gap-2 group",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-accent flex items-center justify-center shadow-lg",children:e.jsx(Ke,{className:"w-6 h-6"})}),e.jsx("span",{className:"text-[8px] font-black tracking-[2px] uppercase",children:"Listo"})]}),e.jsxs("button",{onClick:()=>{L(null),j(!1)},className:"flex flex-col items-center gap-2 group",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-white/5 border border-white/10 flex items-center justify-center group-hover:bg-white/10",children:e.jsx(xe,{className:"w-5 h-5"})}),e.jsx("span",{className:"text-[8px] font-black tracking-[2px] uppercase opacity-40",children:"Cerrar"})]})]})})]})}),W&&G&&e.jsx("div",{className:"fixed inset-0 z-[110] bg-black/95 backdrop-blur-2xl flex items-center justify-center p-4",children:e.jsxs("div",{className:"relative w-full max-w-sm bg-[#0a0a0c] rounded-[40px] p-12 border border-white/10 text-center flex flex-col items-center",children:[e.jsx("button",{onClick:()=>B(!1),className:"absolute top-6 right-6 w-10 h-10 rounded-full bg-white/5 flex items-center justify-center hover:bg-white/10 transition-colors",children:e.jsx(xe,{className:"w-5 h-5"})}),e.jsx("div",{className:"w-16 h-16 bg-accent/20 rounded-full flex items-center justify-center mb-8",children:e.jsx(Je,{className:"w-8 h-8 text-accent"})}),e.jsx("h3",{className:"text-2xl font-black mb-2 uppercase italic",children:"Escanear para Descargar"}),e.jsx("p",{className:"text-white/40 text-[10px] uppercase tracking-[2px] mb-8",children:"Escanea con tu cÃ¡mara para guardar en tu mÃ³vil"}),e.jsx("div",{className:"p-4 bg-white rounded-3xl mb-8",children:e.jsx(at,{value:G,size:200,level:"H",includeMargin:!0})}),e.jsx("button",{onClick:()=>B(!1),className:"text-[10px] font-black tracking-[4px] uppercase text-accent hover:text-white transition-colors",children:"Cerrar"})]})}),P&&p&&e.jsx(Oa,{eventConfig:p,onClose:()=>se(!1)}),I&&e.jsx("div",{className:"fixed inset-0 z-[300] bg-black/40 backdrop-blur-md flex items-center justify-center p-4 animate-[fadeIn_0.3s_ease-out]",children:e.jsxs("div",{className:"relative w-full max-w-xl bg-white/5 backdrop-blur-[40px] rounded-[32px] p-6 md:p-8 border border-white/10 text-center shadow-2xl overflow-y-auto max-h-[95vh]",children:[e.jsx("button",{onClick:()=>g(!1),className:"absolute top-6 right-6 w-10 h-10 rounded-full bg-white/5 flex items-center justify-center hover:bg-white/10 transition-colors",children:e.jsx(xe,{className:"w-5 h-5"})}),e.jsx("div",{className:"w-16 h-16 bg-accent/20 rounded-full flex items-center justify-center mb-8 mx-auto",children:e.jsx(Pt,{className:"w-8 h-8 text-accent"})}),e.jsx("h3",{className:"text-xl md:text-2xl font-black mb-1 uppercase italic tracking-tight",children:"ElegÃ­ tu Pack"}),e.jsx("p",{className:"text-accent text-[7px] font-black uppercase tracking-[2px] mb-1",children:"Desbloquea todos los estilos Premium"}),e.jsx("p",{className:"text-white/40 text-[6px] uppercase tracking-[2px] mb-6",children:"ObtenÃ© crÃ©ditos para tus retratos con IA"}),e.jsx("div",{className:"flex flex-wrap items-center justify-center gap-3",children:[{name:"Starter",price:4e3,credits:500,bonus:"",color:"white/5",popular:!1,premium:!1},{name:"Standard",price:8e3,credits:1100,bonus:"+10%",color:"accent/5",popular:!0,premium:!1},{name:"Business",price:1e4,credits:1500,bonus:"+20%",color:"white/5",popular:!1,premium:!1}].map(a=>e.jsxs("div",{className:`relative w-full max-w-[150px] p-4 rounded-[24px] border transition-all duration-500 flex flex-col items-center group
                    ${a.popular?"bg-accent/10 border-accent shadow-[0_0_20px_rgba(255,85,0,0.1)] scale-105 z-10":"bg-white/5 border-white/5 hover:border-white/20"}`,children:[a.popular&&e.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-accent text-[8px] font-black uppercase tracking-[2px] px-4 py-1 rounded-full",children:"MÃ¡s Popular"}),a.premium&&e.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-gradient-to-r from-amber-500 to-yellow-300 text-[8px] font-black uppercase tracking-[2px] px-4 py-1 rounded-full text-black",children:"Especial Packs"}),e.jsx("span",{className:"text-[7px] font-black uppercase tracking-[1px] text-white/40 mb-3",children:a.name}),e.jsxs("div",{className:"flex flex-col items-center mb-4",children:[e.jsx("span",{className:`text-3xl font-black italic mb-1 ${a.premium?"text-amber-400":"text-white"}`,children:a.credits}),e.jsx("span",{className:"text-[7px] font-black uppercase tracking-[1px] text-accent",children:"CrÃ©ditos"}),a.bonus&&e.jsxs("div",{className:`mt-4 flex items-center gap-2 px-3 py-1 rounded-full ${a.premium?"bg-amber-500/20":"bg-accent/20"}`,children:[e.jsx(Le,{className:`w-3 h-3 ${a.premium?"text-amber-400":"text-accent"}`}),e.jsx("span",{className:`text-[8px] font-black uppercase tracking-[1px] ${a.premium?"text-amber-400":"text-accent"}`,children:a.bonus})]})]}),e.jsxs("div",{className:`text-lg font-black italic mb-4 ${a.premium?"text-amber-400":"text-white"}`,children:["$",a.price.toLocaleString()]}),e.jsx("button",{disabled:!!y,onClick:()=>yt(a),className:`w-full py-4 rounded-xl text-xs font-black uppercase tracking-[2px] transition-all duration-300 flex items-center justify-center gap-2
                      ${a.popular?"bg-accent text-white hover:bg-white hover:text-black":"bg-white text-black hover:bg-accent hover:text-white"}
                      ${y===a.name?"opacity-50":""}`,children:y===a.name?e.jsx(Ae,{className:"w-4 h-4 animate-spin"}):"Comprar"})]},a.name))}),e.jsx("p",{className:"mt-12 text-[8px] font-black tracking-[4px] uppercase text-white/20",children:"Pagos protegidos por Mercado Pago"})]})}),A&&e.jsx("div",{className:"fixed inset-0 z-[400] bg-black/90 backdrop-blur-2xl flex items-center justify-center p-6 animate-[fadeIn_0.3s_ease-out]",children:e.jsxs("div",{className:"relative w-full max-w-md bg-[#0a0a0c] rounded-[40px] p-10 border border-white/10 text-center shadow-2xl",children:[e.jsx("div",{className:"w-16 h-16 bg-accent/20 rounded-full flex items-center justify-center mb-8 mx-auto",children:e.jsx(Le,{className:"w-8 h-8 text-accent animate-pulse"})}),e.jsx("h3",{className:"text-2xl font-black mb-2 uppercase italic",children:"Desbloquear Pack"}),e.jsxs("p",{className:"text-white/40 text-[10px] uppercase tracking-[2px] mb-8",children:["Â¿Quieres desbloquear el pack ",e.jsx("span",{className:"text-white font-bold",children:A.subCategory})," por ",e.jsxs("span",{className:"text-accent font-bold",children:[Pe," crÃ©ditos"]}),"?"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("button",{disabled:le,onClick:()=>gt(A.subCategory),className:"w-full h-16 bg-accent text-white rounded-2xl font-black uppercase tracking-[4px] text-xs hover:bg-white hover:text-black transition-all flex items-center justify-center gap-3",children:le?e.jsx(Ae,{className:"w-5 h-5 animate-spin"}):e.jsxs(e.Fragment,{children:["Confirmar Compra",e.jsx(oe,{className:"w-4 h-4"})]})}),e.jsx("button",{disabled:le,onClick:()=>Z(null),className:"w-full py-4 text-[10px] font-black uppercase tracking-[3px] text-white/20 hover:text-white transition-colors",children:"Cancelar"})]}),e.jsxs("p",{className:"mt-8 text-[8px] font-black tracking-[3px] text-white/10 uppercase",children:["Tu saldo actual: ",l==null?void 0:l.credits," crÃ©ditos"]})]})}),de&&e.jsx("div",{className:"fixed inset-0 z-[400] bg-black/40 backdrop-blur-md flex items-center justify-center p-6 animate-[fadeIn_0.3s_ease-out]",children:e.jsxs("div",{className:"relative w-full max-w-[260px] bg-white/5 backdrop-blur-[40px] rounded-[32px] p-6 border border-amber-500/20 text-center shadow-[0_0_80px_rgba(251,191,36,0.1)]",children:[e.jsx("button",{onClick:()=>te(!1),className:"absolute top-4 right-4 w-8 h-8 rounded-full bg-white/5 flex items-center justify-center hover:bg-white/10 transition-colors",children:e.jsx(xe,{className:"w-4 h-4 text-white/40"})}),e.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-amber-500 to-yellow-300 rounded-2xl flex items-center justify-center mb-6 mx-auto rotate-6 shadow-xl shadow-amber-500/10",children:e.jsx(oe,{className:"w-7 h-7 text-black"})}),e.jsx("h3",{className:"text-2xl font-black mb-3 uppercase italic tracking-tighter text-transparent bg-clip-text bg-gradient-to-r from-amber-400 to-yellow-200",children:"Pack Premium"}),e.jsxs("div",{className:"bg-white/5 border border-white/5 rounded-2xl p-5 mb-6",children:[e.jsx("div",{className:"text-[8px] font-black text-white/40 uppercase tracking-[3px] mb-4 leading-relaxed",children:"Desbloquea estilos VIP + 3000 crÃ©ditos"}),e.jsx("div",{className:"flex flex-col items-center",children:e.jsxs("div",{className:"flex items-baseline gap-1.5",children:[e.jsx("span",{className:"text-4xl font-black italic text-white leading-none",children:"3000"}),e.jsx("span",{className:"text-[8px] font-black uppercase text-amber-500 tracking-widest",children:"CrÃ©ditos"})]})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"text-3xl font-black italic mb-1",children:"$20.000"}),e.jsx("div",{className:"text-[7px] font-black uppercase tracking-[2px] text-white/15",children:"Pago Ãšnico"})]}),e.jsx("button",{disabled:!!y,onClick:()=>{yt({name:"Unlock Premium",price:2e4,credits:3e3}),te(!1)},className:"w-full h-14 bg-gradient-to-r from-amber-500 to-yellow-400 hover:from-white hover:to-white text-black font-black uppercase tracking-[4px] text-[10px] rounded-xl transition-all duration-500 shadow-[0_10px_20px_rgba(245,158,11,0.2)] active:scale-95 flex items-center justify-center gap-3",children:y?e.jsx(Ae,{className:"w-5 h-5 animate-spin"}):e.jsxs(e.Fragment,{children:["DESBLOQUEAR AHORA",e.jsx(Le,{className:"w-3.5 h-3.5 fill-black"})]})})]})}),e.jsx("canvas",{ref:nt,className:"hidden"}),e.jsx("footer",{className:"relative py-12 bg-primary border-t border-white/5 text-center z-20",children:e.jsx("div",{className:"text-white/10 text-[8px] uppercase tracking-[6px] font-bold italic",children:"Â© 2024 Creativa Labs â€” Digital Alchemy Studio"})})]})},$t=document.getElementById("root");if(!$t)throw new Error("Could not find root element to mount to");const It=window.location.hostname,Va=It.startsWith("kiosk")||It.startsWith("admin")||window.location.pathname.startsWith("/dashboard")||window.location.pathname.startsWith("/kiosk");class Ga extends ye.Component{constructor(c){super(c),this.state={hasError:!1,error:null}}static getDerivedStateFromError(c){return{hasError:!0,error:c}}componentDidCatch(c,m){console.error("ErrorBoundary caught an error",c,m)}render(){var c;return this.state.hasError?e.jsxs("div",{style:{padding:"20px",color:"white",background:"#222",minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center"},children:[e.jsx("h1",{style:{color:"#13ec80"},children:"Algo saliÃ³ mal"}),e.jsx("p",{children:((c=this.state.error)==null?void 0:c.message)||"Error desconocido"}),e.jsx("button",{onClick:()=>window.location.reload(),style:{padding:"10px 20px",background:"#13ec80",border:"none",color:"black",fontWeight:"bold",borderRadius:"8px",cursor:"pointer",marginTop:"20px"},children:"Reintentar"})]}):this.props.children}}const Qa=ta.createRoot($t);Qa.render(e.jsx(ye.StrictMode,{children:e.jsx(Ga,{children:Va?e.jsx(aa,{}):e.jsx(Ha,{})})}));
