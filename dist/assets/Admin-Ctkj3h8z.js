import{c as fe,r as k,s as C,j as e,i as Ce,P as Se,a as Ee,m as K,R as se,A as ae}from"./DashboardApp-C9KkE3ci.js";import{I as Ae}from"./constants-BsGWQy1J.js";import{B as Pe}from"./Background3D-DIWHIAJc.js";import{A as Le,S as ge}from"./search-BeSAqKDi.js";import{U as Re}from"./users-Ba2VOeiC.js";import{A as xe}from"./AlquimiaModal-CvkY2jPC.js";/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Ie=fe("activity",Ue);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],ze=fe("circle-user",De),Be=({showToast:l})=>{const[d,f]=k.useState(!0),[u,b]=k.useState([]),[o,p]=k.useState([]),[g,r]=k.useState({totalGenerations:0,totalPartners:0,totalCreditsSold:0,activeEvents:0,allGenerations:[]}),[m,n]=k.useState({totalUsers:0,totalB2CCredits:0,totalB2CGenerations:0,topStyles:[],recentTransactions:[]}),[t,w]=k.useState({totalPartners:0,totalEvents:0,creditsInCirculation:0,avgConsumptionRate:0,topPartners:[]}),[a,c]=k.useState([]),[y,_]=k.useState([]),[E,R]=k.useState([]),[D,i]=k.useState(!1),v=k.useCallback(async()=>{try{f(!0);const[h,j,N,S,L,A]=await Promise.all([C.from("partners").select("*"),C.from("events").select("*"),C.from("profiles").select("*"),C.from("generations").select("id, created_at, style_id, event_id, user_id, image_url, events(event_name, partner_id), profiles(email)").order("created_at",{ascending:!1}).limit(200),C.from("styles_metadata").select("*"),C.from("identity_prompts").select("*")]);if(h.error)throw h.error;if(N.error)throw N.error;const O=h.data||[],G=N.data||[],W=j.data||[],T=S.data||[],oe=G.filter(s=>s.role==="partner").filter(s=>!O.some(x=>{var P,U;return((P=x.contact_email)==null?void 0:P.toLowerCase())===((U=s.email)==null?void 0:U.toLowerCase())||x.user_id===s.id})).map(s=>({id:s.id,name:s.full_name||s.email.split("@")[0],business_name:s.full_name,contact_email:s.email,credits_total:s.credits||0,credits_used:s.total_generations||0,user_id:s.id,is_active:!0,is_from_profile:!0})),z=[...O,...oe].map(s=>{const x=W.filter(P=>P.partner_id===s.id);return{...s,eventCount:x.length,activeEvents:x.filter(P=>P.is_active).length}});b(z);const V=G.filter(s=>s.role==="pending_partner");R(V);const J=G.filter(s=>s.role==="user"||!s.role);p(J);const M=(L==null?void 0:L.data)||[],ue=(A==null?void 0:A.data)||[],X=new Map;Ae.forEach(s=>{const x=M.find(I=>I.id===s.id),P=ue.find(I=>I.id===s.id),U=M.find(I=>{var B,Q;return((B=I.id)==null?void 0:B.toLowerCase())===((Q=s.subCategory)==null?void 0:Q.toLowerCase())}),H=M.find(I=>{var B,Q;return((B=I.id)==null?void 0:B.toLowerCase())===((Q=s.category)==null?void 0:Q.toLowerCase())});let q=(H==null?void 0:H.is_active)===!1||(U==null?void 0:U.is_active)===!1;X.set(s.id,{id:s.id,label:(x==null?void 0:x.label)||s.title,category:(x==null?void 0:x.category)||s.category,subcategory:(x==null?void 0:x.subcategory)||s.subCategory,image_url:(x==null?void 0:x.image_url)||s.url,prompt:(P==null?void 0:P.master_prompt)||"",tags:(x==null?void 0:x.tags)||s.tags||[],is_premium:(x==null?void 0:x.is_premium)??s.isPremium,usage_count:(x==null?void 0:x.usage_count)||0,is_active:q?!1:(x==null?void 0:x.is_active)??!0,source:"static"})}),M.forEach(s=>{if(!(!s.label&&!s.image_url)&&!X.has(s.id)){const x=ue.find(q=>q.id===s.id),P=M.find(q=>{var I,B;return((I=q.id)==null?void 0:I.toLowerCase())===((B=s.subcategory)==null?void 0:B.toLowerCase())}),U=M.find(q=>{var I,B;return((I=q.id)==null?void 0:I.toLowerCase())===((B=s.category)==null?void 0:B.toLowerCase())});let H=(U==null?void 0:U.is_active)===!1||(P==null?void 0:P.is_active)===!1;X.set(s.id,{id:s.id,label:s.label||s.id,category:s.category||"General",subcategory:s.subcategory||"General",image_url:s.image_url||"/placeholder-style.jpg",prompt:(x==null?void 0:x.master_prompt)||"",tags:s.tags||[],is_premium:s.is_premium||!1,usage_count:s.usage_count||0,is_active:H?!1:s.is_active??!0,source:"db_metadata"})}});const ve=Array.from(X.values()).filter(s=>{const x=["magia","urbano","superhÃ©roes","series","sports","general","legacy","all","fantasy","cinema","f1","formula 1"],P=x.includes(s.id.toLowerCase())||x.includes((s.label||"").toLowerCase());return s.id&&!P});_(ve);const ee=z.reduce((s,x)=>s+(x.credits_total||0),0),ce=z.reduce((s,x)=>s+(x.credits_used||0),0),be=J.reduce((s,x)=>s+(x.total_generations||0),0),Ne=ce+be,we=W.filter(s=>s.is_active).length||0;r({totalGenerations:Ne,totalPartners:z.length,totalCreditsSold:ee,activeEvents:we,allGenerations:T});const ye=J.reduce((s,x)=>s+(x.credits||0),0),de={};T.forEach(s=>{s.style_id&&(de[s.style_id]=(de[s.style_id]||0)+1)});const ke=Object.entries(de).map(([s,x])=>({id:s,count:x,label:s})).sort((s,x)=>x.count-s.count).slice(0,5);n({totalUsers:J.length,totalB2CCredits:ye,totalB2CGenerations:be,topStyles:ke,recentTransactions:T.slice(0,5)});const _e=ee>0?ce/ee*100:0;w({totalPartners:z.length,totalEvents:W.length,creditsInCirculation:ee-ce,avgConsumptionRate:_e,topPartners:[...z].sort((s,x)=>(x.eventCount||0)-(s.eventCount||0)).slice(0,5)}),c(T.map(s=>{var x,P,U;return{id:s.id,type:"success",title:s.style_id?`AI Generation: ${s.style_id}`:"GeneraciÃ³n Exitosa",text:s.event_id?`Evento: ${((x=s.events)==null?void 0:x.event_name)||"Desconocido"}`:"Uso Directo B2C",time:new Date(s.created_at).toLocaleString("es-AR",{hour:"2-digit",minute:"2-digit",second:"2-digit"}),event_id:s.event_id,partner_id:(P=s.events)==null?void 0:P.partner_id,email:((U=s.profiles)==null?void 0:U.email)||"Guest @ Event",cost:.12}}))}catch(h){console.error("Error fetching data:",h),l("Error al cargar datos: "+h.message,"error")}finally{f(!1)}},[l]);return k.useEffect(()=>{v()},[v]),{loading:d,isSaving:D,partners:u,b2cUsers:o,stats:g,b2cStats:m,partnerStats:t,recentLogs:a,stylesMetadata:y,pendingPartners:E,fetchData:v,handleCreatePartner:async h=>{var j;try{f(!0);const{data:N}=await C.from("profiles").select("*").eq("email",h.email.toLowerCase()).maybeSingle();let S=N==null?void 0:N.id;if(!S){const{data:O,error:G}=await C.auth.signUp({email:h.email.toLowerCase(),password:h.password||"Partner123!"});if(G)throw G;S=(j=O.user)==null?void 0:j.id}if(!S)throw new Error("No se pudo obtener o crear el ID del usuario");await C.from("profiles").upsert({id:S,email:h.email.toLowerCase(),role:"partner",full_name:h.name},{onConflict:"id"});const L={company_name:h.name,contact_email:h.email.toLowerCase(),user_id:S,credits_total:Number(h.initialCredits),credits_used:0,is_active:!0},{error:A}=await C.from("partners").insert(L);if(A&&A.code!=="23505")throw A;return(A==null?void 0:A.code)==="23505"&&await C.from("partners").update(L).eq("contact_email",h.email.toLowerCase()),l("Partner creado con Ã©xito."),v(),!0}catch(N){return l("Error: "+N.message,"error"),!1}finally{f(!1)}},handleUpdatePartner:async(h,j)=>{try{const{error:N}=await C.from("partners").update(j).eq("id",h);if(N)throw N;return l("Partner actualizado"),v(),!0}catch(N){return l("Error: "+N.message,"error"),!1}},handleTopUpPartner:async(h,j,N)=>{try{const{data:S}=await C.from("partners").select("credits_total, user_id").eq("id",h).single();if(!S)throw new Error("Partner no encontrado");const L=(S.credits_total||0)+N,{error:A}=await C.from("partners").update({credits_total:L}).eq("id",h);if(A)throw A;return S.user_id&&await C.from("profiles").update({credits:L}).eq("id",S.user_id),await C.from("wallet_transactions").insert({partner_id:h,amount:N,type:"top-up",description:"Recarga administrativa SuperAdmin"}),l(`Â¡${N} crÃ©ditos acreditados a ${j}!`),v(),!0}catch(S){return l("Error: "+S.message,"error"),!1}},handleDeletePartner:async h=>{try{if(!u.find(S=>S.id===h))return!1;const{error:N}=await C.from("partners").update({is_active:!1}).eq("id",h);if(N)throw N;return l("Partner desactivado"),v(),!0}catch(j){return l("Error: "+j.message,"error"),!1}},handleApprovePartner:async h=>{try{f(!0);const{data:j,error:N}=await C.from("profiles").select("*").eq("id",h).single();if(N||!j)throw new Error("Perfil no encontrado");const{error:S}=await C.from("profiles").update({role:"partner"}).eq("id",h);if(S)throw S;const{data:L}=await C.from("partners").select("id").eq("user_id",h).maybeSingle();if(L)await C.from("partners").update({is_active:!0}).eq("user_id",h);else{const{error:A}=await C.from("partners").insert({user_id:h,contact_email:j.email,company_name:j.full_name||j.email.split("@")[0],credits_total:0,credits_used:0,is_active:!0});if(A)throw A}return l("Agencia aprobada con Ã©xito"),v(),!0}catch(j){return l("Error al aprobar: "+j.message,"error"),!1}finally{f(!1)}},handleRejectPartner:async h=>{try{if(!confirm("Â¿EstÃ¡s seguro de rechazar esta solicitud? El usuario volverÃ¡ a ser un usuario bÃ¡sico."))return!1;f(!0);const{error:j}=await C.from("profiles").update({role:"user"}).eq("id",h);if(j)throw j;return l("Solicitud rechazada"),v(),!0}catch(j){return l("Error: "+j.message,"error"),!1}finally{f(!1)}},handleCreateUser:async h=>{try{const{error:j}=await C.from("profiles").insert({email:h.email.toLowerCase(),credits:Number(h.credits),unlocked_packs:h.packs.split(",").map(N=>N.trim()).filter(Boolean),role:"user"});if(j)throw j;return l("Usuario creado"),v(),!0}catch(j){return l("Error: "+j.message,"error"),!1}},handleUpdateUser:async(h,j)=>{try{const{error:N}=await C.from("profiles").update(j).eq("id",h);if(N)throw N;return l("Usuario actualizado"),v(),!0}catch(N){return l("Error: "+N.message,"error"),!1}},handleUpdateStyle:async h=>{try{i(!0);const{prompt:j,...N}=h,S={id:N.id,master_prompt:j,updated_at:new Date().toISOString()},{error:L}=await C.from("styles_metadata").upsert(N);if(L)throw L;const{error:A}=await C.from("identity_prompts").upsert(S);if(A)throw A;return l("Identidad sincronizada correctamente"),v(),!0}catch(j){return l("Error de sincronizaciÃ³n: "+j.message,"error"),!1}finally{i(!1)}},handleStyleImageUpload:async h=>{var N;const j=(N=h.target.files)==null?void 0:N[0];if(!j)return null;try{i(!0);const S=j.name.split(".").pop(),A=`styles/${`${Math.random()}.${S}`}`,{error:O}=await C.storage.from("styles").upload(A,j);if(O)throw O;const{data:{publicUrl:G}}=C.storage.from("styles").getPublicUrl(A);return G}catch(S){return l("Error al subir imagen: "+S.message,"error"),null}finally{i(!1)}}}},Ge=({view:l,setView:d,onBack:f})=>{const u=[{id:"overview",label:"Resumen",icon:Ce},{id:"partners",label:"Partners B2B",icon:Re},{id:"b2c",label:"Usuarios B2C",icon:ze},{id:"styles",label:"Protocolos IA",icon:Se},{id:"logs",label:"Logs Sistema",icon:Ie},{id:"settings",label:"Ajustes",icon:Ee}];return e.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-slate-950/80 backdrop-blur-xl border-b border-white/5",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6 h-20 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsxs("button",{onClick:f,className:"group flex items-center gap-2 text-slate-500 hover:text-white transition-colors",children:[e.jsx("div",{className:"size-8 rounded-full border border-white/5 flex items-center justify-center group-hover:bg-white/5",children:e.jsx(Le,{className:"size-4"})}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Panel Central"})]}),e.jsx("div",{className:"h-4 w-px bg-white/10"}),e.jsx("div",{className:"flex items-center gap-1",children:u.map(b=>e.jsxs("button",{onClick:()=>d(b.id),className:`px-4 py-2 rounded-full flex items-center gap-2 transition-all relative group ${l===b.id?"text-[#135bec]":"text-slate-500 hover:text-white"}`,children:[e.jsx(b.icon,{className:"size-4"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest whitespace-nowrap",children:b.label}),l===b.id&&e.jsx(K.div,{layoutId:"admin-nav-pill",className:"absolute inset-0 bg-[#135bec]/10 border border-[#135bec]/20 rounded-full -z-10"})]},b.id))})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-[10px] font-black text-white uppercase tracking-widest",children:"Super Administrador"}),e.jsx("p",{className:"text-[8px] font-bold text-[#135bec] uppercase tracking-[2px]",children:"Alquimia Engine v3.0"})]})})]})})},te=({label:l,value:d,trend:f,status:u,color:b,icon:o})=>e.jsxs("div",{className:"bg-[#121413] p-5 border border-[#1f2b24] rounded-xl hover:border-[#13ec80]/30 transition-all group overflow-hidden relative",children:[e.jsx("div",{className:"absolute -right-4 -top-4 opacity-[0.03] group-hover:opacity-[0.08] transition-opacity",children:e.jsx("span",{className:"material-symbols-outlined !text-8xl",children:o})}),e.jsxs("div",{className:"flex justify-between items-start mb-3 relative z-10",children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-wider",children:l}),f&&e.jsx("span",{className:"text-[10px] font-bold text-[#13ec80] px-1.5 py-0.5 bg-[#13ec80]/10 rounded tracking-tight",children:f}),u&&e.jsxs("span",{className:"flex items-center gap-1.5 text-[10px] font-bold text-[#13ec80] tracking-widest",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-[#13ec80] animate-pulse"}),u]})]}),e.jsx("div",{className:"flex items-baseline gap-2 relative z-10",children:e.jsx("h3",{className:"text-3xl font-black text-white leading-none",children:d})}),e.jsx("div",{className:"mt-4 border-t border-[#1f2b24] pt-3 relative z-10",children:e.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-medium text-slate-500",children:[e.jsx("span",{className:"material-symbols-outlined !text-[14px]",children:"arrow_outward"})," SincronizaciÃ³n en tiempo real"]})})]}),je=({type:l,title:d,text:f,time:u})=>{const b={success:"bg-[#13ec80]",info:"bg-blue-400",warning:"bg-amber-400",error:"bg-red-400"};return e.jsxs("div",{className:"flex gap-3 relative pb-2 group",children:[e.jsx("div",{className:`w-2 h-2 mt-1 rounded-full ${b[l]} shrink-0 shadow-[0_0_5px_currentColor] opacity-60 group-hover:opacity-100 transition-opacity`}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[11px] font-bold text-white leading-tight",children:d}),e.jsx("p",{className:"text-[10px] text-slate-500 mt-1 leading-relaxed",children:f}),e.jsx("p",{className:"text-[8px] font-mono text-slate-600 mt-1 uppercase",children:u})]})]})},$e=({logs:l})=>e.jsxs("div",{className:"bg-[#121413] border border-[#1f2b24] rounded-xl flex flex-col h-full overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-[#1f2b24] bg-white/5 flex items-center justify-between",children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"System Pulse"}),e.jsx("span",{className:"material-symbols-outlined !text-[16px] text-[#13ec80] animate-pulse",children:"sensors"})]}),e.jsx("div",{className:"flex-1 p-4 space-y-4 overflow-y-auto custom-scrollbar",children:l.length>0?l.map(d=>e.jsx(je,{type:d.type,title:d.title,text:d.text,time:d.time},d.id)):e.jsx("div",{className:"text-center py-10",children:e.jsxs("p",{className:"text-[10px] text-slate-600 font-bold uppercase tracking-widest leading-relaxed",children:["No hay actividad",e.jsx("br",{}),"reciente detectable"]})})}),e.jsx("div",{className:"p-3 border-t border-[#1f2b24] bg-[#0a0c0b]",children:e.jsx("button",{className:"w-full text-[9px] font-bold text-slate-500 uppercase tracking-widest hover:text-white transition-colors tracking-[0.2em]",children:"Abrir Centro de Comando"})})]}),Oe=({stats:l,b2cStats:d,partnerStats:f,recentLogs:u,fetchData:b,setView:o,partners:p})=>e.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"flex justify-between items-end mb-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black text-white tracking-tight uppercase",children:"Centro de Mando Ejecutivo"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Resumen tÃ¡ctico del ecosistema Metalab Creative Labs"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx("button",{onClick:()=>b(),className:"p-3 bg-white/5 border border-white/10 rounded-lg text-slate-400 hover:text-[#13ec80] transition-colors",children:e.jsx("span",{className:"material-symbols-outlined !text-xl",children:"sync"})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e.jsx(te,{label:"Ingresos Estimados",value:`$${(l.totalCreditsSold*.1).toLocaleString()}`,trend:"+15.2%",color:"#13ec80",icon:"payments"}),e.jsx(te,{label:"Generaciones Totales",value:l.totalGenerations.toLocaleString(),trend:"+8.4%",color:"#3b82f6",icon:"auto_awesome"}),e.jsx(te,{label:"Cuentas Activas",value:(d.totalUsers+f.totalPartners).toLocaleString(),color:"#f59e0b",icon:"hub"}),e.jsx(te,{label:"Eficiencia Motor",value:"99.8%",status:"OPERATIVO",color:"#13ec80",icon:"monitoring"})]}),e.jsxs("div",{className:"bg-[#121413] border border-[#1f2b24] rounded-[32px] p-8 mb-8 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute -right-20 -top-20 w-64 h-64 bg-[#13ec80]/5 blur-[100px] rounded-full pointer-events-none"}),e.jsxs("div",{className:"flex items-center justify-between mb-8 relative z-10",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-black text-white uppercase tracking-widest italic",children:"Actividad de Red Global"}),e.jsx("p",{className:"text-[10px] text-slate-500 uppercase font-bold mt-1 tracking-tighter",children:"Fotos creadas por dÃ­a (Ãšltimos 7 dÃ­as)"})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"size-2 rounded-full bg-[#13ec80] animate-pulse"}),e.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Live Pulse"})]})})]}),e.jsx("div",{className:"h-40 flex items-end gap-3 px-2 relative z-10",children:Array.from({length:7}).map((g,r)=>{const m=new Date;m.setDate(m.getDate()-(6-r));const n=m.toISOString().split("T")[0],t=l.allGenerations.filter(y=>y.created_at.startsWith(n)).length,w=Array.from({length:7}).map((y,_)=>{const E=new Date;E.setDate(E.getDate()-(6-_));const R=E.toISOString().split("T")[0];return l.allGenerations.filter(D=>D.created_at.startsWith(R)).length}),a=Math.max(...w,1),c=t/a*100;return e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-4 group/bar",children:[e.jsxs("div",{className:"w-full relative h-[120px] flex items-end",children:[e.jsx(K.div,{initial:{height:0},animate:{height:`${Math.max(c,5)}%`},transition:{duration:1,delay:r*.1,ease:"circOut"},className:`w-full rounded-t-xl transition-all duration-300 group-hover/bar:brightness-125 relative ${t>0?"bg-gradient-to-t from-[#0e5233] to-[#13ec80]":"bg-white/5"}`,children:t>0&&e.jsx("div",{className:"absolute inset-0 bg-white/20 opacity-0 group-hover/bar:opacity-100 transition-opacity rounded-t-xl"})}),t>0&&e.jsxs("div",{className:"absolute -top-10 left-1/2 -translate-x-1/2 bg-[#13ec80] text-[#0a0c0b] text-[9px] font-black px-3 py-1.5 rounded-lg opacity-0 group-hover/bar:opacity-100 transition-all scale-75 group-hover/bar:scale-100 whitespace-nowrap z-20 shadow-[0_5px_15px_rgba(19,236,128,0.4)]",children:[t," GENS"]})]}),e.jsx("span",{className:"text-[9px] font-black text-slate-600 uppercase tracking-widest group-hover/bar:text-slate-300 transition-colors",children:m.toLocaleDateString("es-AR",{weekday:"short"})})]},r)})})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-12 gap-8",children:[e.jsxs("div",{className:"xl:col-span-8 space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-[#121413] border border-[#1f2b24] rounded-2xl p-6 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-blue-500 opacity-50"}),e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-black uppercase text-sm tracking-tight mb-1",children:"Segmento B2C"}),e.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest",children:"Consumo en App PÃºblica"})]}),e.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-500/10 flex items-center justify-center text-blue-400",children:e.jsx("span",{className:"material-symbols-outlined",children:"person"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase mb-1",children:"Usuarios"}),e.jsx("p",{className:"text-xl font-black text-white",children:d.totalUsers})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase mb-1",children:"Gens"}),e.jsx("p",{className:"text-xl font-black text-white",children:d.totalB2CGenerations})]})]}),e.jsx("button",{onClick:()=>o("b2c"),className:"w-full mt-6 py-2 border border-blue-500/20 bg-blue-500/5 text-blue-400 text-[10px] font-black uppercase rounded-lg hover:bg-blue-500/10 transition-colors",children:"Gestionar B2C"})]}),e.jsxs("div",{className:"bg-[#121413] border border-[#1f2b24] rounded-2xl p-6 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-[#13ec80] opacity-50"}),e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-black uppercase text-sm tracking-tight mb-1",children:"Red de Partners"}),e.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest",children:"SaaS & B2B Events"})]}),e.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#13ec80]/10 flex items-center justify-center text-[#13ec80]",children:e.jsx("span",{className:"material-symbols-outlined",children:"corporate_fare"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase mb-1",children:"Agencias"}),e.jsx("p",{className:"text-xl font-black text-white",children:f.totalPartners})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase mb-1",children:"Eventos"}),e.jsx("p",{className:"text-xl font-black text-white",children:f.totalEvents})]})]}),e.jsx("button",{onClick:()=>o("partners"),className:"w-full mt-6 py-2 border border-[#13ec80]/20 bg-[#13ec80]/5 text-[#13ec80] text-[10px] font-black uppercase rounded-lg hover:bg-[#13ec80]/10 transition-colors",children:"Ecosistema SaaS"})]})]}),e.jsxs("div",{className:"bg-[#121413] border border-[#1f2b24] rounded-2xl p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-white font-black uppercase text-sm tracking-tight",children:"ðŸ‘‘ Ranking Global de Estilos"}),e.jsx("span",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest",children:"Rendimiento por IA Identity"})]}),e.jsx("div",{className:"space-y-4",children:d.topStyles.slice(0,4).map((g,r)=>{var m;return e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"w-8 h-8 rounded bg-white/5 border border-white/10 flex items-center justify-center text-xs font-black text-slate-500",children:["#",r+1]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between text-xs font-bold mb-1",children:[e.jsx("span",{className:"text-white",children:g.id}),e.jsxs("span",{className:"text-[#13ec80]",children:[g.count.toLocaleString()," gens"]})]}),e.jsx("div",{className:"h-1.5 w-full bg-[#0a0c0b] rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-[#13ec80]",style:{width:`${g.count/(((m=d.topStyles[0])==null?void 0:m.count)||1)*100}%`}})})]})]},r)})})]}),e.jsxs("div",{className:"bg-[#121413] border border-[#1f2b24] rounded-2xl p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 text-[#13ec80]",children:[e.jsx("h3",{className:"text-white font-black uppercase text-sm tracking-tight",children:"ðŸ¢ Ranking FacturaciÃ³n (SaaS)"}),e.jsx("span",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest",children:"Top Partners por CrÃ©ditos"})]}),e.jsx("div",{className:"space-y-3",children:p.sort((g,r)=>(r.credits_total||0)-(g.credits_total||0)).slice(0,5).map((g,r)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/5 border border-white/5 rounded-xl group hover:border-[#13ec80]/30 transition-all",children:[e.jsxs("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-[#13ec80]/20 to-transparent flex items-center justify-center text-[10px] font-black text-[#13ec80] border border-[#13ec80]/20 shrink-0",children:["#",r+1]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("h4",{className:"text-[11px] font-black text-white uppercase truncate tracking-tight",children:g.company_name||g.name}),e.jsx("span",{className:"text-[10px] font-bold text-slate-400 font-mono",children:(g.credits_total||0).toLocaleString()})]}),e.jsx("div",{className:"w-full h-1 bg-white/5 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-[#13ec80] to-[#13ec80]/50",style:{width:`${Math.min(100,(g.credits_used||0)/Math.max(1,g.credits_total||1)*100)}%`}})})]})]},r))})]})]}),e.jsxs("div",{className:"xl:col-span-4 space-y-8",children:[e.jsx("div",{className:"h-[400px]",children:e.jsx($e,{logs:u})}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500/10 to-transparent border border-purple-500/20 rounded-2xl p-6",children:[e.jsx("h3",{className:"text-white font-black uppercase text-sm tracking-tight mb-4",children:"Acciones RÃ¡pidas"}),e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsxs("button",{onClick:()=>o("styles"),className:"flex items-center gap-3 p-3 bg-white/5 rounded-xl hover:bg-white/10 transition-all text-left group",children:[e.jsx("span",{className:"material-symbols-outlined text-purple-400",children:"auto_fix_high"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-white",children:"Inyectar Estilo"}),e.jsx("p",{className:"text-[9px] text-slate-500 uppercase",children:"Nueva identidad IA"})]})]}),e.jsxs("button",{onClick:()=>o("partners"),className:"flex items-center gap-3 p-3 bg-white/5 rounded-xl hover:bg-white/10 transition-all text-left group",children:[e.jsx("span",{className:"material-symbols-outlined text-amber-400",children:"add_business"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-white",children:"Onboarding Partner"}),e.jsx("p",{className:"text-[9px] text-slate-500 uppercase",children:"Nuevo contrato SaaS"})]})]})]})]})]})]})]}),qe=({partners:l,pendingPartners:d=[],partnerStats:f,showInactivePartners:u,setShowInactivePartners:b,setShowCreatePartner:o,setShowTopUp:p,setEditingPartner:g,setPartnerForm:r,onApprovePartner:m,onRejectPartner:n})=>e.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"flex justify-between items-end mb-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black text-white tracking-tight uppercase",children:"Resellers Management (SaaS)"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Control total sobre tu red de agencias y eventos"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{onClick:()=>b(!u),className:`px-4 py-3 rounded-lg font-bold text-xs transition-all flex items-center gap-2 border ${u?"border-[#13ec80] text-[#13ec80] bg-[#13ec80]/10":"border-[#1f2b24] text-slate-500"}`,children:[e.jsx("span",{className:"material-symbols-outlined !text-sm",children:u?"visibility":"visibility_off"}),u?"OCULTAR INACTIVOS":"VER INACTIVOS"]}),e.jsxs("button",{onClick:()=>o(!0),className:"bg-[#13ec80] text-[#0a0c0b] px-6 py-3 rounded-lg font-bold flex items-center gap-2 hover:scale-[1.02] transition-all shadow-[0_0_20px_rgba(19,236,128,0.3)]",children:[e.jsx("span",{className:"material-symbols-outlined",children:"add"})," New Reseller"]})]})]}),d.length>0&&e.jsxs("div",{className:"mb-12 animate-in fade-in slide-in-from-top-4 duration-700",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"flex items-center justify-center size-8 rounded-lg bg-amber-500/20 text-amber-500 border border-amber-500/30",children:e.jsx("span",{className:"material-symbols-outlined !text-lg",children:"how_to_reg"})}),e.jsxs("h3",{className:"text-sm font-black text-white uppercase tracking-widest italic",children:["Solicitudes de Agencia Pendientes (",d.length,")"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map(t=>{var w;return e.jsxs("div",{className:"bg-[#121413] border border-amber-500/20 rounded-2xl p-5 relative group overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-amber-500/5 blur-2xl rounded-full -translate-y-12 translate-x-12"}),e.jsx("div",{className:"flex justify-between items-start relative z-10 mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"size-10 rounded-xl bg-amber-500/10 border border-amber-500/20 flex items-center justify-center",children:e.jsx("span",{className:"text-amber-500 font-black",children:((w=t.full_name)==null?void 0:w[0])||t.email[0]})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-white text-sm",children:t.full_name||t.email.split("@")[0]}),e.jsx("p",{className:"text-[10px] text-slate-500 font-mono",children:t.email})]})]})}),e.jsxs("div",{className:"flex gap-2 relative z-10",children:[e.jsx("button",{onClick:()=>m==null?void 0:m(t.id),className:"flex-1 bg-amber-500 hover:bg-amber-400 text-black font-black text-[10px] py-2 rounded-lg transition-all uppercase tracking-widest",children:"APROBAR"}),e.jsx("button",{onClick:()=>n==null?void 0:n(t.id),className:"flex-1 bg-white/5 hover:bg-rose-500/20 border border-white/10 hover:border-rose-500/30 text-slate-400 hover:text-rose-400 font-black text-[10px] py-2 rounded-lg transition-all uppercase tracking-widest",children:"RECHAZAR"})]})]},t.id)})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[e.jsxs("div",{className:"bg-[#121413] p-5 border border-[#1f2b24] rounded-xl relative overflow-hidden group",children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase mb-2",children:"Partners Activos"}),e.jsx("h3",{className:"text-2xl font-black text-white",children:l.filter(t=>t.is_active!==!1).length}),e.jsx("div",{className:"absolute top-0 right-0 w-12 h-12 bg-[#13ec80]/10 rounded-bl-full flex items-center justify-center translate-x-4 -translate-y-4 group-hover:translate-x-2 group-hover:-translate-y-2 transition-transform",children:e.jsx("span",{className:"material-symbols-outlined text-[#13ec80] !text-sm",children:"handshake"})})]}),e.jsxs("div",{className:"bg-[#121413] p-5 border border-[#1f2b24] rounded-xl relative overflow-hidden group",children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase mb-2",children:"Total Eventos Red"}),e.jsx("h3",{className:"text-2xl font-black text-[#13ec80]",children:f.totalEvents}),e.jsx("div",{className:"absolute top-0 right-0 w-12 h-12 bg-blue-500/10 rounded-bl-full flex items-center justify-center translate-x-4 -translate-y-4 group-hover:translate-x-2 group-hover:-translate-y-2 transition-transform",children:e.jsx("span",{className:"material-symbols-outlined text-blue-500 !text-sm",children:"event"})})]}),e.jsxs("div",{className:"bg-[#121413] p-5 border border-[#1f2b24] rounded-xl relative overflow-hidden group",children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase mb-2",children:"CrÃ©ditos en Canales"}),e.jsx("h3",{className:"text-2xl font-black text-blue-400",children:(f.creditsInCirculation||0).toLocaleString()}),e.jsx("div",{className:"absolute top-0 right-0 w-12 h-12 bg-purple-500/10 rounded-bl-full flex items-center justify-center translate-x-4 -translate-y-4 group-hover:translate-x-2 group-hover:-translate-y-2 transition-transform",children:e.jsx("span",{className:"material-symbols-outlined text-purple-500 !text-sm",children:"account_balance_wallet"})})]}),e.jsxs("div",{className:"bg-[#121413] p-5 border border-[#1f2b24] rounded-xl relative overflow-hidden group",children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase mb-2",children:"Ratio de Consumo"}),e.jsxs("h3",{className:"text-2xl font-black text-amber-400",children:[f.avgConsumptionRate.toFixed(1),"%"]}),e.jsx("div",{className:"absolute top-0 right-0 w-12 h-12 bg-amber-500/10 rounded-bl-full flex items-center justify-center translate-x-4 -translate-y-4 group-hover:translate-x-2 group-hover:-translate-y-2 transition-transform",children:e.jsx("span",{className:"material-symbols-outlined text-amber-500 !text-sm",children:"trending_up"})})]})]}),e.jsx("div",{className:"bg-[#121413] border border-[#1f2b24] rounded-xl overflow-hidden shadow-2xl",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-[#0a0c0b] border-b border-[#1f2b24]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Partner / Agencia"}),e.jsx("th",{className:"px-6 py-4 text-[10px] font-bold text-slate-400 uppercase tracking-widest text-center",children:"Eventos"}),e.jsx("th",{className:"px-6 py-4 text-[10px] font-bold text-slate-400 uppercase tracking-widest text-center",children:"Billetera"}),e.jsx("th",{className:"px-6 py-4 text-[10px] font-bold text-slate-400 uppercase tracking-widest text-center",children:"ConfiguraciÃ³n"}),e.jsx("th",{className:"px-6 py-4 text-[10px] font-bold text-slate-400 uppercase tracking-widest text-right",children:"Acciones"})]})}),e.jsx("tbody",{className:"divide-y divide-[#1f2b24]/50",children:l.filter(t=>u?!0:t.is_active!==!1).map(t=>{var c,y,_;const w=t.is_active===!1,a=((c=t.config)==null?void 0:c.primary_color)||((y=t.config)==null?void 0:y.logo_url);return e.jsxs("tr",{className:`hover:bg-white/[0.02] transition-colors group ${w?"opacity-50 grayscale":""}`,children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-[#13ec80]/20 to-transparent flex items-center justify-center text-[#13ec80] font-black border border-[#13ec80]/20 shadow-inner",children:(t.company_name||t.name||t.contact_email||"P")[0].toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-white group-hover:text-[#13ec80] transition-colors",children:t.company_name||t.name||((_=t.contact_email)==null?void 0:_.split("@")[0])||"Partner Sin Nombre"}),e.jsxs("p",{className:"text-[10px] text-slate-500 font-mono flex items-center gap-1",children:[e.jsx("span",{className:"w-1 h-1 rounded-full bg-[#13ec80]"}),t.contact_email]}),w&&e.jsx("span",{className:"mt-1 px-2 py-0.5 bg-red-500/10 text-red-500 text-[8px] font-black uppercase rounded border border-red-500/20 inline-block tracking-tighter",children:"Inactivo / De Baja"})]})]})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-sm font-bold text-white",children:t.eventCount||0}),e.jsx("span",{className:"text-[10px] text-slate-500 uppercase tracking-tighter",children:"Eventos creados"})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono text-white text-sm font-bold",children:((t.credits_total||0)-(t.credits_used||0)).toLocaleString()}),e.jsxs("span",{className:"text-[10px] text-slate-600",children:["/ ",(t.credits_total||0).toLocaleString()]})]}),e.jsx("div",{className:"w-24 h-1 bg-[#1f2b24] rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-[#13ec80]",style:{width:`${Math.min(100,t.credits_used/(t.credits_total||1)*100)}%`}})})]})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("span",{title:"Branding Configurado",className:`material-symbols-outlined !text-sm ${a?"text-blue-400":"text-white/10"}`,children:"palette"}),e.jsx("span",{title:"Subdominio Activo",className:"material-symbols-outlined !text-sm text-[#13ec80]",children:"language"}),e.jsx("span",{title:"Soporte VIP",className:"material-symbols-outlined !text-sm text-amber-400",children:"verified"})]})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>p({id:t.id,name:t.company_name||t.name}),className:"text-[10px] font-black text-[#13ec80] border border-[#13ec80]/30 px-4 py-2 rounded-lg hover:bg-[#13ec80]/10 transition-all flex items-center gap-2",children:"RECARGAR"}),e.jsx("button",{onClick:()=>{g(t),r({name:t.name||"",company_name:t.company_name||t.name||"",contact_email:t.contact_email||"",contact_phone:t.contact_phone||"",is_active:t.is_active!==!1})},className:"w-8 h-8 flex items-center justify-center rounded-lg text-slate-500 hover:text-white hover:bg-white/5 transition-all",children:e.jsx("span",{className:"material-symbols-outlined !text-lg",children:"settings"})})]})})]},t.id)})})]})})]}),Te=({b2cUsers:l,setShowNewUserModal:d,setEditingUser:f,setShowTopUp:u,b2cStats:b,stats:o})=>{const[p,g]=se.useState("");return e.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end mb-10 gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-3xl font-black text-white uppercase tracking-tight italic",children:["Active Operatives ",e.jsxs("span",{className:"text-[#13ec80]",children:["(",l.length,")"]})]}),e.jsx("p",{className:"text-slate-500 text-sm font-bold uppercase tracking-widest mt-1",children:"GestiÃ³n de identidades y crÃ©ditos de la red pÃºblica"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 w-full md:w-auto",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ge,{className:"w-4 h-4 text-slate-500 absolute left-4 top-1/2 -translate-y-1/2"}),e.jsx("input",{type:"text",placeholder:"Buscar por email...",value:p,onChange:r=>g(r.target.value),className:"bg-[#121413] border border-[#1f2b24] rounded-2xl pl-12 pr-6 py-3 text-sm text-white focus:border-[#13ec80] outline-none w-full md:w-64 transition-all"})]}),e.jsxs("button",{onClick:()=>d(!0),className:"bg-blue-600 text-white px-8 py-3 rounded-2xl font-black text-xs uppercase tracking-widest flex items-center justify-center gap-3 hover:scale-[1.05] transition-all shadow-[0_10px_30px_rgba(37,99,235,0.3)]",children:[e.jsx("span",{className:"material-symbols-outlined !text-lg",children:"person_add"})," Enrolar Usuario"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-4 gap-8",children:[e.jsx("div",{className:"xl:col-span-3",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:l.filter(r=>r.email.toLowerCase().includes(p.toLowerCase())).sort((r,m)=>(m.total_generations||0)-(r.total_generations||0)).map(r=>{var m,n,t;return e.jsxs("div",{className:"bg-[#121413] border border-[#1f2b24] rounded-[32px] p-6 hover:border-[#13ec80]/30 transition-all group relative overflow-hidden",children:[e.jsxs("div",{className:"flex items-start justify-between mb-6 relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-[#13ec80]/20 to-blue-500/20 flex items-center justify-center border border-white/5",children:e.jsx("span",{className:"text-xl font-black text-white uppercase",children:((m=r.full_name)==null?void 0:m[0])||r.email[0]})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-black text-white group-hover:text-[#13ec80] transition-colors line-clamp-1",children:r.full_name||r.email.split("@")[0]}),e.jsx("p",{className:"text-[10px] text-slate-500 font-mono italic",children:r.email})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>f(r),className:"w-8 h-8 rounded-full bg-white/5 border border-white/10 flex items-center justify-center text-slate-500 hover:text-white hover:bg-[#13ec80]/20 transition-all",children:e.jsx("span",{className:"material-symbols-outlined !text-sm",children:"edit"})}),e.jsx("button",{onClick:()=>u({id:r.id,name:r.email}),className:"px-3 h-8 rounded-full bg-[#13ec80]/10 border border-[#13ec80]/20 text-[#13ec80] text-[9px] font-black uppercase tracking-tighter hover:bg-[#13ec80] hover:text-black transition-all",children:"Saldo"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6 relative z-10",children:[e.jsxs("div",{className:"bg-white/5 border border-white/5 rounded-2xl p-4",children:[e.jsx("p",{className:"text-[8px] font-black text-slate-500 uppercase tracking-widest mb-1",children:"Balance Disponible"}),e.jsxs("p",{className:"text-lg font-black text-[#13ec80]",children:[((n=r.credits)==null?void 0:n.toLocaleString())||0," pts"]})]}),e.jsxs("div",{className:"bg-white/5 border border-white/5 rounded-2xl p-4",children:[e.jsx("p",{className:"text-[8px] font-black text-slate-500 uppercase tracking-widest mb-1",children:"Generaciones"}),e.jsx("p",{className:"text-lg font-black text-white",children:r.total_generations||0})]})]}),e.jsxs("div",{className:"space-y-4 relative z-10",children:[e.jsx("div",{className:"flex flex-wrap gap-1.5",children:(r.unlocked_packs||[]).length>0?(t=r.unlocked_packs)==null?void 0:t.map(w=>e.jsx("span",{className:"text-[8px] px-2 py-0.5 bg-blue-500/10 border border-blue-500/20 text-blue-400 rounded-md font-black uppercase tracking-tighter",children:w},w)):e.jsx("span",{className:"text-[8px] text-slate-700 font-black uppercase italic tracking-widest",children:"No active packs"})}),e.jsx("div",{className:"w-full h-1 bg-white/5 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-[#13ec80]",style:{width:`${Math.min(100,(r.total_generations||0)*2)}%`}})})]}),e.jsx("div",{className:"absolute -right-4 -bottom-4 w-32 h-32 bg-[#13ec80]/5 blur-[60px] rounded-full group-hover:bg-[#13ec80]/10 transition-colors pointer-events-none"})]},r.id)})})}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-[#121413] border border-[#1f2b24] rounded-[32px] p-8",children:[e.jsxs("h3",{className:"text-xs font-black text-white uppercase tracking-[4px] mb-8 flex items-center gap-3",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-[#13ec80] animate-pulse"}),"Market Analysis"]}),e.jsx("div",{className:"space-y-6",children:b.topStyles.slice(0,5).map(r=>{var m;return e.jsxs("div",{className:"group",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest group-hover:text-white transition-colors",children:r.id}),e.jsxs("span",{className:"text-[10px] font-mono font-bold text-[#13ec80]",children:[r.count," GENS"]})]}),e.jsx("div",{className:"w-full h-1.5 bg-white/5 rounded-full overflow-hidden border border-white/5",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-[#13ec80] to-[#13ec80]/40 transition-all duration-1000",style:{width:`${r.count/(((m=b.topStyles[0])==null?void 0:m.count)||1)*100}%`}})})]},r.id)})})]}),e.jsx("div",{className:"bg-gradient-to-br from-[#13ec80]/20 to-blue-600/10 border border-[#13ec80]/30 rounded-[32px] p-8 shadow-[0_20px_50px_rgba(19,236,128,0.1)] relative overflow-hidden",children:e.jsxs("div",{className:"relative z-10",children:[e.jsx("h3",{className:"text-xs font-black text-white uppercase tracking-[4px] mb-2 font-black italic",children:"Network Load"}),e.jsxs("p",{className:"text-[11px] text-slate-300 leading-relaxed font-bold mb-6 italic opacity-80",children:["B2C SEGMENT REPRESENTS ",e.jsxs("span",{className:"text-[#13ec80]",children:[Math.min(100,b.totalB2CGenerations/Math.max(1,o.totalGenerations)*100).toFixed(1),"%"]})," OF TOTAL OPS."]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex-1 h-3 bg-black/40 rounded-full overflow-hidden p-0.5 border border-white/5",children:e.jsx("div",{className:"h-full bg-[#13ec80] rounded-full shadow-[0_0_15px_#13ec80]",style:{width:`${b.totalB2CGenerations/Math.max(1,o.totalGenerations)*100}%`}})}),e.jsx("span",{className:"text-[10px] font-mono font-black text-[#13ec80] tracking-tighter",children:"SECURED"})]})]})})]})]})]})},Me=({stylesMetadata:l,setEditingStyle:d,fetchData:f,showToast:u})=>{const[b,o]=se.useState(""),[p,g]=se.useState("all"),[r,m]=se.useState(!1),n=async a=>{const y=!l.filter(_=>{var E;return((E=_.category)==null?void 0:E.toLowerCase())===a.toLowerCase()}).every(_=>_.is_active);try{m(!0);const{error:_}=await window.supabase.from("styles_metadata").update({is_active:y}).ilike("category",a);if(_)throw _;const{error:E}=await window.supabase.from("styles_metadata").upsert({id:a.toLowerCase(),is_active:y,category:a},{onConflict:"id"});if(E)throw E;u(`CategorÃ­a ${y?"activada":"ocultada"} correctamente`),f()}catch(_){u("Error: "+_.message,"error")}finally{m(!1)}},t=async(a,c)=>{const _=!l.filter(E=>{var R;return E.subcategory===a&&((R=E.category)==null?void 0:R.toLowerCase())===c.toLowerCase()}).every(E=>E.is_active);try{m(!0);const{error:E}=await window.supabase.from("styles_metadata").update({is_active:_}).eq("subcategory",a).ilike("category",c);if(E)throw E;const{error:R}=await window.supabase.from("styles_metadata").upsert({id:a.toLowerCase(),is_active:_,subcategory:a,category:c},{onConflict:"id"});if(R)throw R;u(`SubcategorÃ­a ${_?"activada":"ocultada"} correctamente`),f()}catch(E){u("Error: "+E.message,"error")}finally{m(!1)}},w=async a=>{if(confirm(`ðŸš¨ PURGA CRÃTICA: Â¿EstÃ¡s seguro de eliminar "${a.id}" definitivamente?`))try{m(!0),await Promise.all([window.supabase.from("styles_metadata").delete().eq("id",a.id),window.supabase.from("identity_prompts").delete().eq("id",a.id)]),u("Identidad purgada del sistema"),f()}catch(c){u("Error al purgar: "+c.message,"error")}finally{m(!1)}};return e.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end mb-8 gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-black text-white tracking-tight uppercase",children:["Identity Repository ",e.jsxs("span",{className:"text-[#13ec80]",children:["(",l.length,")"]})]}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Protocolo de gestiÃ³n de identidades y mallas IA Maestro"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 w-full md:w-auto",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ge,{className:"w-4 h-4 text-slate-500 absolute left-3 top-1/2 -translate-y-1/2"}),e.jsx("input",{type:"text",placeholder:"Buscar identidad...",value:b,onChange:a=>o(a.target.value),className:"bg-[#121413] border border-[#1f2b24] rounded-xl pl-10 pr-4 py-2 text-sm text-white focus:border-[#13ec80] outline-none w-full md:w-64 transition-all"})]}),e.jsxs("button",{onClick:()=>{d("new")},className:"bg-[#13ec80] text-[#0a0c0b] px-6 py-2 rounded-xl font-bold flex items-center justify-center gap-2 hover:scale-[1.02] transition-all shadow-[0_0_20px_rgba(19,236,128,0.3)]",children:[e.jsx("span",{className:"material-symbols-outlined",children:"add_box"})," Nueva Identidad"]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-8",children:[e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 no-scrollbar",children:["all",...Array.from(new Set(l.map(a=>{var c;return(c=a.category)==null?void 0:c.toLowerCase()}).filter(Boolean)))].map(a=>e.jsx("button",{onClick:()=>g(a),className:`px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest transition-all whitespace-nowrap ${p===a?"bg-[#13ec80] text-black shadow-[0_0_15px_rgba(19,236,128,0.3)]":"bg-white/5 text-slate-500 border border-white/10 hover:border-white/20"}`,children:a==="all"?"Todas / All":a},a))}),p!=="all"&&e.jsxs("div",{className:"flex items-center gap-3 bg-white/5 border border-white/10 rounded-2xl px-4 py-2 animate-in zoom-in-95 duration-300",children:[e.jsxs("span",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest",children:["Grupo ",p,":"]}),e.jsxs("button",{onClick:()=>n(p),className:`flex items-center gap-2 px-3 py-1 rounded-lg text-[9px] font-black uppercase transition-all ${l.filter(a=>{var c;return((c=a.category)==null?void 0:c.toLowerCase())===p}).every(a=>a.is_active)?"bg-[#13ec80]/10 text-[#13ec80] border border-[#13ec80]/30 hover:bg-[#13ec80]/20":"bg-slate-500/10 text-slate-400 border border-slate-500/30 hover:bg-slate-500/20"}`,children:[e.jsx("span",{className:"material-symbols-outlined !text-sm",children:l.filter(a=>{var c;return((c=a.category)==null?void 0:c.toLowerCase())===p}).every(a=>a.is_active)?"visibility":"visibility_off"}),l.filter(a=>{var c;return((c=a.category)==null?void 0:c.toLowerCase())===p}).every(a=>a.is_active)?"Hide Category":"Show Category"]})]})]}),p!=="all"&&e.jsx("div",{className:"flex flex-wrap items-center gap-4 mb-8 pl-4 border-l-2 border-[#13ec80]/20 animate-in slide-in-from-left-4 duration-500",children:e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 no-scrollbar",children:Array.from(new Set(l.filter(a=>{var c;return((c=a.category)==null?void 0:c.toLowerCase())===p}).map(a=>a.subcategory).filter(Boolean))).map(a=>e.jsxs("button",{className:"px-3 py-1.5 rounded-xl text-[9px] font-black uppercase tracking-widest bg-white/5 text-slate-400 border border-white/10 hover:border-[#13ec80]/30 transition-all flex items-center gap-2 group/sub",children:[a,e.jsx("div",{onClick:c=>{c.stopPropagation(),t(a,p)},className:`w-5 h-5 rounded-full flex items-center justify-center transition-all ${l.filter(c=>{var y;return c.subcategory===a&&((y=c.category)==null?void 0:y.toLowerCase())===p}).every(c=>c.is_active)?"bg-[#13ec80]/10 text-[#13ec80] hover:bg-[#13ec80]/20":"bg-red-500/10 text-red-500 hover:bg-red-500/20"}`,title:l.filter(c=>{var y;return c.subcategory===a&&((y=c.category)==null?void 0:y.toLowerCase())===p}).every(c=>c.is_active)?"Ocultar SubcategorÃ­a":"Mostrar SubcategorÃ­a",children:e.jsx("span",{className:"material-symbols-outlined !text-[12px]",children:l.filter(c=>{var y;return c.subcategory===a&&((y=c.category)==null?void 0:y.toLowerCase())===p}).every(c=>c.is_active)?"visibility":"visibility_off"})})]},a))})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:l.filter(a=>{var _;const c=(a.label||"").toLowerCase().includes(b.toLowerCase())||(a.id||"").toLowerCase().includes(b.toLowerCase()),y=p==="all"||((_=a.category)==null?void 0:_.toLowerCase())===p;return c&&y}).map(a=>e.jsxs("div",{className:"bg-[#121413] border border-[#1f2b24] rounded-[32px] overflow-hidden group hover:border-[#13ec80]/50 transition-all cursor-pointer relative",children:[e.jsx("button",{onClick:c=>{c.stopPropagation(),w(a)},className:"absolute top-4 right-4 z-20 w-8 h-8 rounded-full bg-red-500/10 border border-red-500/20 text-red-500 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all hover:bg-red-500 hover:text-white",title:"Purgar Identidad",children:e.jsx("span",{className:"material-symbols-outlined !text-sm",children:"delete_forever"})}),e.jsxs("div",{onClick:()=>{d(a)},children:[e.jsxs("div",{className:"aspect-[4/5] relative overflow-hidden",children:[e.jsx("img",{src:a.image_url?a.image_url.startsWith("http")||a.image_url.startsWith("blob")||a.image_url.startsWith("/")?a.image_url:`/${a.image_url}`:"/placeholder-style.jpg",alt:a.label,className:`w-full h-full object-cover group-hover:scale-110 transition-transform duration-700 ${a.is_active===!1?"grayscale brightness-50 opacity-40":"opacity-60 group-hover:opacity-100"}`,onError:c=>{const y=c.target;y.src.includes("placeholder")||(y.src="/placeholder-style.jpg")}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#0a0c0b] via-transparent to-transparent opacity-90 group-hover:opacity-40 transition-opacity"}),e.jsxs("div",{className:"absolute top-4 left-4 flex gap-2",children:[a.is_premium&&e.jsx("span",{className:"bg-[#ff5500] text-white text-[8px] font-black px-2 py-1 rounded-md uppercase tracking-tighter",children:"Premium"}),a.is_active===!1&&e.jsxs("span",{className:"bg-slate-600 text-white text-[8px] font-black px-2 py-1 rounded-md uppercase tracking-tighter flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined !text-[10px]",children:"visibility_off"}),"Hidden"]}),e.jsx("span",{className:"bg-[#1f2b24]/80 backdrop-blur-md text-white text-[8px] font-black px-2 py-1 rounded-md uppercase tracking-tighter border border-white/10",children:a.category})]})]}),e.jsxs("div",{className:"p-6 absolute bottom-0 left-0 right-0",children:[e.jsx("h4",{className:"text-xl font-black text-white italic uppercase tracking-tighter mb-1 group-hover:text-[#13ec80] transition-colors",children:a.label}),e.jsxs("p",{className:"text-[10px] text-slate-400 line-clamp-2 leading-relaxed italic opacity-60 group-hover:opacity-100 transition-opacity",children:['"',a.prompt||"Sin prompt definido...",'"']}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-white/5 flex items-center justify-between opacity-40 group-hover:opacity-100 transition-opacity",children:[e.jsxs("span",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest",children:["SUB: ",a.subcategory||"General"]}),e.jsx("span",{className:"material-symbols-outlined !text-sm text-slate-600",children:"chevron_right"})]})]})]})]},a.id))})]})},Fe=({partners:l,recentLogs:d,logFilterPartner:f,setLogFilterPartner:u,fetchData:b})=>e.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end mb-8 gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black text-white tracking-tight uppercase",children:"Visor de Registros Maestro"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Monitor de actividad y salud del motor en tiempo real"})]}),e.jsxs("div",{className:"flex gap-3 w-full md:w-auto",children:[e.jsx("div",{className:"relative flex-1 md:w-64",children:e.jsxs("select",{value:f,onChange:o=>u(o.target.value),className:"w-full bg-[#121413] border border-[#1f2b24] rounded-lg px-4 py-2.5 text-xs text-white appearance-none outline-none focus:ring-1 focus:ring-[#13ec80]",children:[e.jsx("option",{value:"all",children:"Todos los Partners"}),l.map(o=>e.jsx("option",{value:o.id,children:o.name||o.company_name||o.contact_email},o.id))]})}),e.jsx("button",{onClick:()=>b(),className:"p-2.5 bg-white/5 border border-white/10 rounded-lg text-slate-400 hover:text-[#13ec80] transition-colors flex items-center gap-2",children:e.jsx("span",{className:"material-symbols-outlined !text-xl",children:"refresh"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[e.jsxs("div",{className:"bg-[#121413] p-5 border border-[#1f2b24] rounded-xl",children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase mb-2",children:"Tasa de Ã‰xito"}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("h3",{className:"text-2xl font-black text-white",children:"99.8%"}),e.jsx("span",{className:"text-[10px] text-[#13ec80] font-bold mb-1",children:"UP"})]})]}),e.jsxs("div",{className:"bg-[#121413] p-5 border border-[#1f2b24] rounded-xl",children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase mb-2",children:"Gens (Hoy)"}),e.jsx("h3",{className:"text-2xl font-black text-blue-400",children:d.length})]}),e.jsxs("div",{className:"bg-[#121413] p-5 border border-[#1f2b24] rounded-xl",children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase mb-2",children:"Uso API"}),e.jsx("h3",{className:"text-2xl font-black text-purple-400",children:"Escalable"})]}),e.jsxs("div",{className:"bg-[#121413] p-5 border border-[#1f2b24] rounded-xl",children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase mb-2",children:"Estado Motor"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-[#13ec80] animate-pulse"}),e.jsx("h3",{className:"text-xl font-bold text-white uppercase tracking-tighter",children:"Latencia 2.4s"})]})]})]}),e.jsxs("div",{className:"bg-[#121413] border border-[#1f2b24] rounded-xl overflow-hidden shadow-2xl",children:[e.jsxs("div",{className:"p-4 border-b border-[#1f2b24] bg-white/5 flex justify-between items-center",children:[e.jsx("h3",{className:"text-xs font-bold text-white uppercase tracking-widest",children:"Actividad Reciente del Sistema"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("span",{className:"flex items-center gap-1.5 text-[10px] font-bold text-slate-500",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-[#13ec80]"})," Ã‰xito"]}),e.jsxs("span",{className:"flex items-center gap-1.5 text-[10px] font-bold text-slate-500",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-400"})," Info"]}),e.jsxs("span",{className:"flex items-center gap-1.5 text-[10px] font-bold text-slate-500",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-red-400"})," CrÃ­tico"]})]})]}),e.jsx("div",{className:"p-6 divide-y divide-[#1f2b24]/30 max-h-[600px] overflow-y-auto custom-scrollbar",children:d.length>0?d.map(o=>e.jsx("div",{className:"py-4 first:pt-0 last:pb-0",children:e.jsx(je,{type:o.type,title:o.title,text:o.text,time:o.time})},o.id)):e.jsxs("div",{className:"py-20 text-center",children:[e.jsx("span",{className:"material-symbols-outlined !text-4xl text-slate-700 mb-4",children:"database_off"}),e.jsxs("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest leading-relaxed",children:["No se detecta actividad",e.jsx("br",{}),"en los registros filtrados"]})]})})]})]}),he=({isOpen:l,onClose:d,onSave:f,onDelete:u,partner:b,isSaving:o,loading:p})=>{const g=!!b,[r,m]=k.useState({name:"",company_name:"",contact_email:"",contact_phone:"",password:"",initialCredits:1e3,is_active:!0});k.useEffect(()=>{l&&m(b?{name:b.name||"",company_name:b.company_name||"",contact_email:b.contact_email,contact_phone:b.contact_phone||"",password:"",initialCredits:b.credits_total||0,is_active:b.is_active!==!1}:{name:"",company_name:"",contact_email:"",contact_phone:"",password:"",initialCredits:1e3,is_active:!0})},[l,b]);const n=async t=>{t.preventDefault(),await f(r)};return g?e.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center p-6 bg-black/90 backdrop-blur-xl",children:e.jsxs(K.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},className:"bg-[#121413] border border-[#1f2b24] p-8 rounded-[32px] w-full max-w-lg shadow-[0_0_100px_rgba(0,0,0,1)] relative overflow-hidden",children:[e.jsx("div",{className:`absolute top-0 right-0 w-32 h-32 blur-[80px] opacity-20 pointer-events-none ${r.is_active?"bg-[#13ec80]":"bg-red-500"}`}),e.jsxs("div",{className:"flex justify-between items-start mb-8 relative z-10",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-2xl font-black text-white uppercase tracking-tight italic",children:["Partner ",e.jsx("span",{className:"text-[#13ec80]",children:"Settings"})]}),e.jsx("p",{className:"text-slate-500 text-[10px] font-bold uppercase tracking-[3px] mt-1",children:"ConfiguraciÃ³n Maestro de Canal"})]}),e.jsx("button",{onClick:d,className:"w-10 h-10 rounded-full bg-white/5 flex items-center justify-center text-slate-500 hover:text-white transition-colors",children:e.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),e.jsxs("form",{onSubmit:n,className:"space-y-6 relative z-10",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest block mb-2",children:"RazÃ³n Social / Empresa"}),e.jsx("input",{className:"w-full bg-[#0a0c0b] border border-[#1f2b24] rounded-xl px-4 py-3 text-white outline-none focus:border-[#13ec80] transition-all",value:r.company_name,onChange:t=>m({...r,company_name:t.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest block mb-2",children:"Nombre de Contacto"}),e.jsx("input",{className:"w-full bg-[#0a0c0b] border border-[#1f2b24] rounded-xl px-4 py-3 text-white outline-none focus:border-[#13ec80] transition-all",value:r.name,onChange:t=>m({...r,name:t.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest block mb-2",children:"TelÃ©fono de Contacto"}),e.jsx("input",{className:"w-full bg-[#0a0c0b] border border-[#1f2b24] rounded-xl px-4 py-3 text-white outline-none focus:border-[#13ec80] transition-all",value:r.contact_phone,onChange:t=>m({...r,contact_phone:t.target.value}),placeholder:"+54 9 11..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest block mb-2",children:"Email del Partner"}),e.jsx("input",{className:"w-full bg-[#0a0c0b] border border-[#1f2b24] rounded-xl px-4 py-3 text-white/50 outline-none cursor-not-allowed",value:r.contact_email,readOnly:!0}),e.jsx("p",{className:"text-[9px] text-slate-600 mt-1 italic",children:"* El email es el identificador Ãºnico y no puede cambiarse."})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-2xl border border-white/5",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-white uppercase italic",children:"Estado de Cuenta"}),e.jsx("p",{className:"text-[10px] text-slate-500 font-medium",children:"Permitir acceso y operaciones"})]}),e.jsx("button",{type:"button",onClick:()=>m({...r,is_active:!r.is_active}),className:`relative w-12 h-6 rounded-full transition-colors duration-300 ${r.is_active?"bg-[#13ec80]":"bg-slate-700"}`,children:e.jsx("div",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-transform duration-300 ${r.is_active?"left-7":"left-1"}`})})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[u&&e.jsx("button",{type:"button",onClick:()=>u(b),className:"px-6 py-4 rounded-xl border border-red-500/30 text-red-500 text-[10px] font-black uppercase tracking-widest hover:bg-red-500/10 transition-all font-mono",children:"Dar de Baja"}),e.jsx("button",{type:"submit",disabled:o,className:"flex-1 py-4 bg-[#13ec80] text-[#0a0c0b] font-black text-[10px] rounded-xl shadow-[0_10px_30px_rgba(19,236,128,0.2)] hover:scale-[1.02] transition-all disabled:opacity-50 uppercase tracking-widest",children:o?"Sincronizando...":"Guardar Cambios"})]})]})]})}):e.jsxs(xe,{isOpen:l,onClose:d,title:"Nuevo Revendedor",maxWidth:"max-w-md",children:[e.jsxs("h3",{className:"text-xl font-black text-white uppercase mb-6 flex items-center gap-3",children:[e.jsx("span",{className:"material-symbols-outlined text-[#13ec80]",children:"add_business"})," Nuevo Revendedor"]}),e.jsxs("form",{onSubmit:n,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest block mb-1",children:"RazÃ³n Social"}),e.jsx("input",{className:"w-full bg-[#0a0c0b] border border-[#1f2b24] rounded-lg px-4 py-3 text-white outline-none focus:border-[#13ec80]",placeholder:"Nombre de la Agencia...",value:r.name,onChange:t=>m({...r,name:t.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest block mb-1",children:"Email de Usuario (Login)"}),e.jsx("input",{className:"w-full bg-[#0a0c0b] border border-[#1f2b24] rounded-lg px-4 py-3 text-white outline-none focus:border-[#13ec80]",placeholder:"admin@agencia.com",type:"email",value:r.contact_email,onChange:t=>m({...r,contact_email:t.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest block mb-1",children:"ContraseÃ±a Temporal"}),e.jsx("input",{className:"w-full bg-[#0a0c0b] border border-[#1f2b24] rounded-lg px-4 py-3 text-white outline-none focus:border-[#13ec80]",placeholder:"ContraseÃ±a temporal para el partner",type:"password",value:r.password,onChange:t=>m({...r,password:t.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest block mb-1",children:"CrÃ©ditos Iniciales"}),e.jsx("input",{className:"w-full bg-[#0a0c0b] border border-[#1f2b24] rounded-lg px-4 py-3 text-white outline-none focus:border-[#13ec80]",type:"number",value:r.initialCredits,onChange:t=>m({...r,initialCredits:parseInt(t.target.value)||0}),required:!0})]}),e.jsxs("div",{className:"flex gap-4 mt-8",children:[e.jsx("button",{type:"button",onClick:d,className:"flex-1 py-3 text-xs font-bold text-slate-500 hover:text-white transition-colors uppercase",children:"CANCELAR"}),e.jsx("button",{type:"submit",disabled:p,className:"flex-1 py-3 bg-[#13ec80] text-[#0a0c0b] font-black text-xs rounded-lg shadow-[0_0_20px_rgba(19,236,128,0.2)] hover:scale-[1.02] transition-all disabled:opacity-50 uppercase",children:p?"CREANDO...":"CREAR PARTNER"})]})]})]})},We=({isOpen:l,onClose:d,onTopUp:f,targetName:u,loading:b})=>e.jsxs(xe,{isOpen:l,onClose:d,title:"Recarga de CrÃ©ditos",maxWidth:"max-w-md",children:[e.jsxs("p",{className:"text-slate-400 text-sm mb-6",children:["Asignando nuevos crÃ©ditos a ",e.jsx("span",{className:"text-[#13ec80] font-bold",children:u})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:[1e3,5e3,1e4,5e4].map(o=>e.jsxs("button",{onClick:()=>f(o),disabled:b,className:"py-4 border border-[#1f2b24] bg-[#0a0c0b] rounded-xl text-white font-black hover:border-[#13ec80] hover:text-[#13ec80] transition-all uppercase disabled:opacity-50",children:["+",o.toLocaleString()]},o))}),e.jsx("button",{onClick:d,className:"w-full mt-6 py-3 text-xs font-bold text-slate-500 hover:text-white tracking-widest uppercase transition-colors",children:"Cerrar"})]}),Ve=({isOpen:l,onClose:d,onSave:f,user:u,stylesMetadata:b,isSaving:o})=>{const p=!!u,[g,r]=k.useState({email:"",credits:1e3,full_name:"",unlocked_packs:[]});k.useEffect(()=>{l&&r(u?{email:u.email,credits:u.credits,full_name:u.full_name||"",unlocked_packs:u.unlocked_packs||[]}:{email:"",credits:1e3,full_name:"",unlocked_packs:[]})},[l,u]);const m=async t=>{t.preventDefault(),await f(g)},n=t=>{const w=[...g.unlocked_packs],a=w.indexOf(t);a>-1?w.splice(a,1):w.push(t),r({...g,unlocked_packs:w})};return e.jsxs(xe,{isOpen:l,onClose:d,title:p?"Editar Usuario B2C":"Nuevo Usuario B2C",maxWidth:"max-w-lg",children:[e.jsx("div",{className:"mb-6",children:e.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest mt-1",children:p?g.email:"Alta de cuenta pÃºblica y crÃ©ditos"})}),e.jsxs("form",{onSubmit:m,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:p?"col-span-1":"col-span-2",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest block mb-2",children:p?"Nombre Completo":"Email del Usuario"}),e.jsx("input",{type:p?"text":"email",required:!0,value:p?g.full_name:g.email,onChange:t=>r({...g,[p?"full_name":"email"]:t.target.value}),className:"w-full bg-[#0a0c0b] border border-[#1f2b24] rounded-xl px-4 py-3 text-white outline-none focus:border-blue-500 transition-colors",placeholder:p?"Nombre del usuario...":"ejemplo@usuario.com"})]}),p&&e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest block mb-2",children:"CrÃ©ditos"}),e.jsx("input",{type:"number",required:!0,value:g.credits,onChange:t=>r({...g,credits:parseInt(t.target.value)||0}),className:"w-full bg-[#0a0c0b] border border-[#1f2b24] rounded-xl px-4 py-3 text-white outline-none focus:border-blue-500"})]})]}),!p&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest block mb-2",children:"CrÃ©ditos Iniciales"}),e.jsx("input",{type:"number",required:!0,value:g.credits,onChange:t=>r({...g,credits:parseInt(t.target.value)||0}),className:"w-full bg-[#0a0c0b] border border-[#1f2b24] rounded-xl px-4 py-3 text-white outline-none focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest block mb-2",children:"Rol Asignado"}),e.jsx("div",{className:"w-full bg-[#0a0c0b] border border-[#1f2b24] rounded-xl px-4 py-3 text-slate-400 text-xs font-bold uppercase tracking-widest",children:"USUARIO B2C"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest block mb-2",children:"Packs Desbloqueados"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-40 overflow-y-auto p-4 bg-[#0a0c0b] rounded-xl border border-[#1f2b24] custom-scrollbar",children:Array.from(new Set(b.map(t=>t.category))).filter(t=>t).map(t=>{const w=g.unlocked_packs.includes(t);return e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[e.jsx("input",{type:"checkbox",checked:w,onChange:()=>n(t),className:"hidden"}),e.jsx("div",{className:`w-4 h-4 rounded border ${w?"bg-blue-600 border-blue-600":"border-[#1f2b24] group-hover:border-slate-600"} flex items-center justify-center transition-all`,children:w&&e.jsx("span",{className:"material-symbols-outlined !text-[12px] text-white",children:"check"})}),e.jsx("span",{className:`text-[11px] uppercase font-bold tracking-tight ${w?"text-white":"text-slate-500"}`,children:t})]},t)})}),!p&&e.jsx("p",{className:"text-[9px] text-slate-600 mt-2 italic",children:"* Los nombres deben coincidir con la categorÃ­a en el Motor de Estilos."})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx("button",{type:"button",onClick:d,className:"flex-1 px-6 py-4 rounded-xl font-bold text-slate-400 hover:text-white hover:bg-white/5 transition-all uppercase text-[10px] tracking-widest",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:o,className:"flex-1 px-6 py-4 bg-blue-600 text-white rounded-xl font-black uppercase text-[10px] tracking-[2px] shadow-lg shadow-blue-500/20 hover:scale-[1.02] transition-all disabled:opacity-50",children:o?p?"GUARDANDO...":"CREANDO...":p?"GUARDAR CAMBIOS":"CREAR USUARIO"})]})]})]})},He=({isOpen:l,onClose:d,onSave:f,onDelete:u,onImageUpload:b,style:o,isSaving:p,stylesMetadata:g,stats:r})=>{var R,D;const m=o==="new",[n,t]=k.useState({id:"",label:"",category:"",subcategory:"",image_url:"",prompt:"",tags:[],is_premium:!1,is_active:!0}),[w,a]=k.useState(!1);k.useEffect(()=>{l&&o&&t(m?{id:"",label:"",category:"",subcategory:"",image_url:"",prompt:"",tags:[],is_premium:!1,is_active:!0}:{id:o.id||"",label:o.label||"",category:o.category||"",subcategory:o.subcategory||"",image_url:o.image_url||"",prompt:o.prompt||"",tags:Array.isArray(o.tags)?o.tags:(o.tags||"").split(",").map(i=>i.trim()).filter(Boolean),is_premium:!!o.is_premium,is_active:o.is_active!==!1})},[l,o,m]);const c=async i=>{a(!0);const v=await b(i);v&&t($=>({...$,image_url:v})),a(!1)},y=async()=>{await f(n)},_=i=>{i&&!n.tags.includes(i)&&t({...n,tags:[...n.tags,i]})},E=i=>{t({...n,tags:n.tags.filter(v=>v!==i)})};return l?e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 md:p-6 bg-black/95 backdrop-blur-3xl overflow-hidden",children:e.jsxs("div",{className:"bg-[#0a0c0b] border border-[#1f2b24] rounded-[40px] w-full max-w-5xl max-h-[90vh] shadow-[0_0_100px_rgba(0,0,0,1)] overflow-hidden flex flex-col md:flex-row animate-in zoom-in-95 duration-300",children:[e.jsxs("div",{className:"w-full md:w-[35%] bg-white/5 p-8 flex flex-col items-center justify-start border-r border-[#1f2b24] relative overflow-y-auto no-scrollbar",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-full opacity-10 pointer-events-none",children:e.jsx("div",{className:"absolute top-[-100px] left-[-100px] w-[300px] h-[300px] bg-[#13ec80] blur-[150px] rounded-full"})}),e.jsxs("div",{className:"relative z-10 w-full mb-8",children:[e.jsxs("div",{className:"aspect-[4/5] rounded-[32px] overflow-hidden border-2 border-[#13ec80]/30 shadow-2xl relative group",children:[e.jsx("img",{src:n.image_url?n.image_url.startsWith("http")||n.image_url.startsWith("blob")||n.image_url.startsWith("/")?n.image_url:`/${n.image_url}`:"/placeholder-style.jpg",alt:"Preview",className:`w-full h-full object-cover group-hover:scale-110 transition-transform duration-1000 ${w?"opacity-30":"opacity-60"} group-hover:opacity-100`,onError:i=>{const v=i.target;v.src.includes("placeholder")||(v.src="/placeholder-style.jpg")}}),w&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-12 h-12 border-4 border-[#13ec80] border-t-transparent rounded-full animate-spin"})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#0a0c0b] via-transparent to-transparent opacity-80"}),e.jsx("div",{className:"absolute inset-x-0 bottom-0 p-6 flex flex-col items-center",children:e.jsxs("label",{className:"w-12 h-12 bg-[#13ec80] rounded-full flex items-center justify-center cursor-pointer hover:scale-110 active:scale-95 transition-all shadow-[0_0_20px_rgba(19,236,128,0.4)] group/btn",children:[e.jsx("span",{className:"material-symbols-outlined text-[#0a0c0b] group-hover:rotate-90 transition-transform",children:"add_a_photo"}),e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:c,disabled:w})]})})]}),e.jsxs("div",{className:"mt-6 text-center",children:[e.jsx("p",{className:"text-[10px] font-black text-[#13ec80] uppercase tracking-[4px] mb-2",children:"Protocolo Activo"}),e.jsx("h4",{className:"text-xl font-black text-white italic uppercase tracking-tighter",children:n.label||"Nueva Identidad"})]})]}),e.jsxs("div",{className:"w-full space-y-4 pt-4 border-t border-white/5",children:[e.jsxs("div",{className:"flex justify-between items-center text-[8px] font-black text-slate-500 uppercase tracking-widest",children:[e.jsx("span",{children:"Sync Status:"}),e.jsx("span",{className:w||p?"text-amber-400 animate-pulse":"text-[#13ec80]",children:w||p?"PROCESANDO...":"STANDBY"})]}),e.jsx("div",{className:"w-full h-1 bg-white/5 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full bg-[#13ec80] transition-all duration-500 ${w||p?"w-1/2 animate-pulse":"w-full opacity-50"}`})})]}),e.jsx("div",{className:"mt-auto pt-8 flex flex-col items-center",children:e.jsxs("p",{className:"text-[9px] font-bold text-slate-600 uppercase tracking-widest italic antialiased text-center",children:["IDENTITY PREVIEW MODULE ",e.jsx("br",{}),e.jsx("span",{className:"text-[#13ec80]/40",children:"V 1.5.0-STABLE"})]})})]}),e.jsxs("div",{className:"flex-1 p-6 md:p-10 overflow-y-auto no-scrollbar",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl md:text-2xl font-black text-white italic uppercase tracking-tighter",children:m?"Initialize Protocol":"Sync Identity Data"}),e.jsx("p",{className:"text-[8px] text-slate-500 font-bold uppercase tracking-[3px] mt-1 text-center md:text-left",children:"SintonizaciÃ³n de Red Neuronal"})]}),e.jsx("button",{onClick:d,className:"w-8 h-8 rounded-full bg-white/5 flex items-center justify-center text-slate-500 hover:text-white transition-colors",children:e.jsx("span",{className:"material-symbols-outlined !text-lg",children:"close"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[9px] font-black text-[#13ec80] uppercase tracking-widest ml-1",children:"Identity Handle (ID)"}),e.jsx("input",{className:"w-full bg-[#121413] border border-[#1f2b24] rounded-xl px-4 py-3 text-white outline-none focus:border-[#13ec80] font-mono text-xs",value:n.id,disabled:!m,onChange:i=>t({...n,id:i.target.value.toLowerCase()})})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest ml-1",children:"Visual Title"}),e.jsx("input",{className:"w-full bg-[#121413] border border-[#1f2b24] rounded-xl px-4 py-3 text-white outline-none focus:border-[#13ec80] text-sm",value:n.label,onChange:i=>t({...n,label:i.target.value})})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest ml-1",children:"System URL / Storage Path"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{className:"flex-1 bg-[#121413] border border-[#1f2b24] rounded-xl px-4 py-3 text-white outline-none focus:border-[#13ec80] font-mono text-[10px]",value:n.image_url,onChange:i=>t({...n,image_url:i.target.value})}),e.jsx("button",{onClick:()=>{n.image_url&&navigator.clipboard.writeText(n.image_url)},className:"px-3 bg-white/5 border border-white/10 rounded-xl text-slate-500 hover:text-[#13ec80] transition-colors",title:"Copiar URL",children:e.jsx("span",{className:"material-symbols-outlined !text-sm",children:"content_copy"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest ml-1",children:"Operational Category (Pack)"}),e.jsx("input",{list:"category-suggestions",className:"w-full bg-[#121413] border border-[#1f2b24] rounded-xl px-4 py-3 text-white outline-none focus:border-[#13ec80] text-xs",placeholder:"Escribir o seleccionar categorÃ­a...",value:n.category,onChange:i=>t({...n,category:i.target.value})}),e.jsx("datalist",{id:"category-suggestions",children:Array.from(new Set(g.map(i=>i.category).filter(Boolean).map(i=>i.toLowerCase()))).map(i=>e.jsx("option",{value:i},i))})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest ml-1",children:"Legacy Subcategory"}),e.jsx("input",{list:"subcategory-suggestions",className:"w-full bg-[#121413] border border-[#1f2b24] rounded-xl px-4 py-3 text-white outline-none focus:border-[#13ec80] font-mono text-[10px]",value:n.subcategory,onChange:i=>t({...n,subcategory:i.target.value})}),e.jsx("datalist",{id:"subcategory-suggestions",children:Array.from(new Set(g.filter(i=>{var v,$;return((v=i.category)==null?void 0:v.toLowerCase())===(($=n.category)==null?void 0:$.toLowerCase())}).map(i=>i.subcategory).filter(Boolean))).map(i=>e.jsx("option",{value:i},i))})]})]}),e.jsxs("div",{className:"bg-[#121413] border border-[#1f2b24] rounded-[24px] p-6 flex items-center justify-between group hover:border-[#13ec80]/30 transition-all",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${n.is_active?"bg-[#13ec80]/10 text-[#13ec80]":"bg-slate-500/10 text-slate-500"}`,children:e.jsx("span",{className:"material-symbols-outlined",children:n.is_active?"visibility":"visibility_off"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-black text-white uppercase tracking-widest block",children:"Visibility Status"}),e.jsx("span",{className:"text-[10px] text-slate-500 font-bold uppercase",children:n.is_active?"Active in application":"Hidden from users"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:n.is_active,onChange:i=>t({...n,is_active:i.target.checked})}),e.jsx("div",{className:"w-14 h-7 bg-white/5 border border-white/10 rounded-full peer peer-checked:after:translate-x-full peer-checked:bg-[#13ec80] after:content-[''] after:absolute after:top-[4px] after:left-[4px] after:bg-white after:rounded-full after:h-6 after:w-6 after:transition-all"})]})]}),e.jsxs("div",{className:"bg-[#121413] border border-[#1f2b24] rounded-[24px] p-6 flex items-center justify-between group hover:border-[#ff5500]/30 transition-all",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-[#ff5500]/10 flex items-center justify-center text-[#ff5500]",children:e.jsx("span",{className:"material-symbols-outlined",children:"workspace_premium"})}),e.jsx("span",{className:"text-xs font-black text-white uppercase tracking-widest",children:"Elevate to Premium Status (VIP Access Only)"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:n.is_premium,onChange:i=>t({...n,is_premium:i.target.checked})}),e.jsx("div",{className:"w-14 h-7 bg-white/5 border border-white/10 rounded-full peer peer-checked:after:translate-x-full peer-checked:bg-[#ff5500] after:content-[''] after:absolute after:top-[4px] after:left-[4px] after:bg-white after:rounded-full after:h-6 after:w-6 after:transition-all"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black text-[#13ec80] uppercase tracking-widest ml-1 block mb-1 underline decoration-2 underline-offset-4",children:"NEURO-CORE PROMPT (MASTER TEMPLATE)"}),e.jsx("p",{className:"text-[8px] text-slate-500 font-bold uppercase tracking-[2px]",children:"Estructura base de la red neuronal"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-[9px] font-black text-white leading-none",children:[((R=n.prompt)==null?void 0:R.split(/\s+/).filter(Boolean).length)||0," WORDS"]}),e.jsx("p",{className:"text-[7px] font-bold text-slate-650 uppercase",children:"Neural Load"})]}),e.jsx("div",{className:"w-px h-6 bg-white/10"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-[9px] font-black text-[#13ec80] leading-none",children:[((D=n.prompt)==null?void 0:D.length)||0," CHARS"]}),e.jsx("p",{className:"text-[7px] font-bold text-slate-650 uppercase",children:"Capacity"})]})]})]}),e.jsxs("div",{className:"relative group/prompt",children:[e.jsx("textarea",{className:"w-full bg-[#0a0c0b] border-2 border-[#1f2b24] group-hover/prompt:border-[#13ec80]/30 rounded-[32px] px-8 py-7 text-white outline-none focus:border-[#13ec80] text-sm leading-relaxed min-h-[160px] resize-none font-mono shadow-inner transition-all placeholder:text-slate-800",placeholder:"Inject system instructions here...",value:n.prompt,onChange:i=>t({...n,prompt:i.target.value})}),e.jsx("div",{className:"absolute right-6 top-6 opacity-20 group-hover/prompt:opacity-100 transition-opacity",children:e.jsx("div",{className:"size-2 rounded-full bg-[#13ec80] animate-pulse"})})]}),e.jsxs("div",{className:"bg-[#121413]/50 border border-[#1f2b24] rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"material-symbols-outlined !text-[14px] text-[#13ec80]",children:"bolt"}),e.jsx("span",{className:"text-[8px] font-black text-slate-500 uppercase tracking-widest",children:"Neural Boosters (Inject Tokens)"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{label:"Photorealistic",token:"hyper-realistic, photorealistic, 8k resolution, highly detailed"},{label:"Cinematic",token:"cinematic lighting, dramatic shadows, professional photography"},{label:"Sharp Focus",token:"sharp focus, masterpiece, intricate details"},{label:"Digital Art",token:"concept art, matte painting, trending on artstation"},{label:"Analog Style",token:"35mm film grain, analog photography, retro vintage feel"}].map(i=>e.jsx("button",{type:"button",onClick:()=>{const v=n.prompt||"",$=v&&!v.endsWith(",")&&!v.endsWith(", ")?", ":"";t({...n,prompt:v+$+i.token})},className:"px-3 py-1.5 bg-white/5 border border-white/10 rounded-lg text-[8px] font-black text-slate-400 uppercase tracking-widest hover:border-[#13ec80] hover:text-[#13ec80] transition-all",children:i.label},i.label))})]})]}),!m&&e.jsxs("div",{className:"space-y-4 pt-4 border-t border-[#1f2b24]",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest ml-1",children:"Real-World Outcomes (Recent Captures)"}),e.jsx("p",{className:"text-[8px] text-slate-600 font-bold uppercase tracking-[2px]",children:"PrevisualizaciÃ³n de ejecuciones reales con esta identidad"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[9px] font-black text-amber-500 uppercase tracking-widest",children:"Live Feed"}),e.jsx("div",{className:"size-1.5 rounded-full bg-amber-500 animate-pulse"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[r.allGenerations.filter(i=>i.style_id===o.id).slice(0,4).map((i,v)=>e.jsxs("div",{className:"aspect-square rounded-2xl overflow-hidden border border-white/5 bg-slate-900 group/outcome relative",children:[e.jsx("img",{src:i.image_url,className:"w-full h-full object-cover grayscale group-hover/outcome:grayscale-0 transition-all duration-700",alt:"Outcome"}),e.jsx("div",{className:"absolute inset-0 bg-blue-500/10 opacity-0 group-hover/outcome:opacity-100 transition-opacity"}),e.jsx("div",{className:"absolute bottom-1 right-1 opacity-0 group-hover/outcome:opacity-100 transition-opacity",children:e.jsx("button",{onClick:()=>window.open(i.image_url,"_blank"),className:"p-1 bg-black/60 rounded-md text-white",children:e.jsx("span",{className:"material-symbols-outlined !text-[12px]",children:"open_in_new"})})})]},v)),r.allGenerations.filter(i=>i.style_id===o.id).length===0&&e.jsx("div",{className:"col-span-4 h-24 rounded-2xl border border-dashed border-[#1f2b24] flex items-center justify-center",children:e.jsx("p",{className:"text-[9px] font-black text-slate-700 uppercase tracking-[2px]",children:"No hay ejecuciones recientes detectadas"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest ml-1",children:"Tactical Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:n.tags.map((i,v)=>e.jsxs("span",{className:"bg-white/5 border border-white/10 rounded-lg px-3 py-1.5 text-[10px] font-bold text-slate-300 flex items-center gap-2",children:[i.trim(),e.jsx("button",{onClick:()=>E(i),className:"text-slate-600 hover:text-white transition-colors",children:"Ã—"})]},v))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{className:"flex-1 bg-[#121413] border border-[#1f2b24] rounded-2xl px-5 py-4 text-white outline-none focus:border-[#13ec80]",id:"new-tag-modal-input",placeholder:"Add tactical label...",onKeyDown:i=>{if(i.key==="Enter"){const v=i.target;_(v.value.trim()),v.value=""}}}),e.jsx("button",{type:"button",onClick:()=>{const i=document.getElementById("new-tag-modal-input");_(i.value.trim()),i.value=""},className:"bg-white/5 border border-white/10 text-white px-6 rounded-2xl font-black text-[10px] uppercase hover:bg-white/10 transition-all",children:"Add"})]})]}),e.jsxs("div",{className:"pt-8 flex gap-4",children:[e.jsx("button",{onClick:y,disabled:p||w,className:"flex-1 py-6 bg-gradient-to-r from-orange-600 to-[#ff5500] text-white font-black rounded-[32px] text-xs tracking-[4px] shadow-[0_20px_40px_rgba(255,85,0,0.3)] hover:scale-[1.02] active:scale-95 transition-all uppercase italic disabled:opacity-50",children:p?"Sincronizando...":"Finalize Protocol Sync"}),!m&&u&&e.jsx("button",{onClick:()=>u(n.id),className:"px-6 border border-red-500/30 text-red-500 rounded-2xl font-black text-[10px] uppercase hover:bg-red-500/10 transition-all",disabled:p||w,children:"Purge"}),e.jsx("button",{onClick:d,className:"aspect-square w-16 bg-white/5 border border-white/10 rounded-[28px] flex items-center justify-center text-slate-500 hover:text-white transition-all",children:e.jsx("span",{className:"material-symbols-outlined",children:"query_stats"})})]})]})]})]})}):null},Qe=({isOpen:l,onClose:d,onConfirm:f,partnerName:u})=>e.jsx(ae,{children:l&&e.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-6 bg-black/80 backdrop-blur-md",children:e.jsxs(K.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"bg-[#121413] border border-red-500/30 p-8 rounded-3xl w-full max-w-md shadow-[0_0_50px_rgba(239,68,68,0.2)] relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-red-500/10 blur-[60px] pointer-events-none"}),e.jsx("div",{className:"w-20 h-20 rounded-full bg-red-500/10 flex items-center justify-center text-red-500 mx-auto mb-6 border border-red-500/20",children:e.jsx("span",{className:"material-symbols-outlined !text-4xl",children:"warning"})}),e.jsxs("h3",{className:"text-2xl font-black text-white uppercase text-center mb-2 italic tracking-tighter",children:["Confirmar ",e.jsx("span",{className:"text-red-500",children:"Baja"})]}),e.jsxs("p",{className:"text-slate-400 text-sm text-center mb-8 px-4",children:["Â¿EstÃ¡s seguro de que deseas dar de baja a ",e.jsx("span",{className:"text-white font-bold",children:u}),"?",e.jsx("br",{}),e.jsx("span",{className:"text-[10px] uppercase font-black text-red-500/60 tracking-[2px] mt-4 block p-2 bg-red-500/5 rounded-lg border border-red-500/10",children:"Esta acciÃ³n desactivarÃ¡ su acceso de inmediato"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:d,className:"flex-1 py-4 text-[10px] font-black text-slate-500 hover:text-white transition-colors uppercase tracking-widest",children:"Cancelar"}),e.jsx("button",{onClick:f,className:"flex-1 py-4 bg-red-600 text-white font-black text-[10px] rounded-xl shadow-[0_10px_30px_rgba(220,38,38,0.2)] hover:scale-[1.05] active:scale-95 transition-all uppercase tracking-widest",children:"Confirmar Baja"})]})]})})}),tt=({onBack:l})=>{const[d,f]=k.useState("overview"),[u,b]=k.useState(!1),[o,p]=k.useState(null),[g,r]=k.useState(!1),[m,n]=k.useState(null),[t,w]=k.useState(null),[a,c]=k.useState(!1),[y,_]=k.useState(null),[E,R]=k.useState(null),[D,i]=k.useState({message:"",type:null}),v=k.useCallback((z,V="success")=>{i({message:z,type:V}),setTimeout(()=>i({message:"",type:null}),4e3)},[]),{loading:$,isSaving:re,partners:F,pendingPartners:pe,b2cUsers:me,stats:Y,b2cStats:le,partnerStats:ie,recentLogs:ne,stylesMetadata:Z,fetchData:h,handleCreatePartner:j,handleUpdatePartner:N,handleTopUpPartner:S,handleDeletePartner:L,handleApprovePartner:A,handleRejectPartner:O,handleCreateUser:G,handleUpdateUser:W,handleUpdateStyle:T,handleStyleImageUpload:oe}=Be({showToast:v});return $&&F.length===0?e.jsx("div",{className:"fixed inset-0 bg-[#0a0c0b] flex items-center justify-center z-[100]",children:e.jsxs("div",{className:"flex flex-col items-center gap-6",children:[e.jsx("div",{className:"size-16 border-4 border-[#13ec80]/20 border-t-[#13ec80] rounded-full animate-spin"}),e.jsx("p",{className:"text-[10px] font-black text-white uppercase tracking-[4px] animate-pulse",children:"Iniciando Protocolos Admin..."})]})}):e.jsxs("main",{className:"min-h-screen bg-[#0a0c0b] text-white selection:bg-[#13ec80] selection:text-black pb-20",children:[e.jsx(Pe,{}),e.jsx(Ge,{view:d,setView:f,onBack:l}),e.jsx("div",{className:"max-w-7xl mx-auto px-6 pt-32 relative z-10",children:e.jsxs(ae,{mode:"wait",children:[d==="overview"&&e.jsx(Oe,{stats:Y,b2cStats:le,partnerStats:ie,recentLogs:ne,fetchData:h,setView:f,partners:F},"overview"),d==="partners"&&e.jsx(qe,{partners:F,pendingPartners:pe,partnerStats:ie,showInactivePartners:a,setShowInactivePartners:c,setShowCreatePartner:b,setShowTopUp:p,setEditingPartner:w,setPartnerForm:()=>{},onApprovePartner:A,onRejectPartner:O},"partners"),d==="b2c"&&e.jsx(Te,{b2cUsers:me,b2cStats:le,stats:Y,setEditingUser:n,setShowTopUp:p,setShowNewUserModal:r},"b2c"),d==="styles"&&e.jsx(Me,{stylesMetadata:Z,setEditingStyle:R,fetchData:h,showToast:v},"styles"),d==="logs"&&e.jsx(Fe,{recentLogs:ne,partners:F},"logs")]})}),e.jsxs(ae,{children:[u&&e.jsx(he,{isOpen:!0,onClose:()=>b(!1),onSave:j}),t&&e.jsx(he,{isOpen:!0,partner:t,onClose:()=>w(null),onSave:N,onDelete:(z,V)=>_({id:z,name:V})}),o&&e.jsx(We,{isOpen:!0,target:o,onClose:()=>p(null),onConfirm:S}),(g||m)&&e.jsx(Ve,{isOpen:!0,user:m,onClose:()=>{r(!1),n(null)},onSave:m?W:G,isSaving:re,stylesMetadata:Z}),E&&e.jsx(He,{isOpen:!0,style:E,onClose:()=>R(null),onSave:T,onImageUpload:oe,isSaving:re,stylesMetadata:Z,stats:Y}),y&&e.jsx(Qe,{isOpen:!0,partner:y,onClose:()=>_(null),onConfirm:async()=>{await L(y.id)&&_(null)}})]}),e.jsx(ae,{children:D.type&&e.jsxs(K.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},className:`fixed bottom-8 left-1/2 -translate-x-1/2 px-6 py-3 rounded-2xl font-black text-xs uppercase tracking-[3px] z-[100] shadow-2xl border backdrop-blur-xl flex items-center gap-3 ${D.type==="error"?"bg-rose-500/20 text-rose-400 border-rose-500/30":"bg-[#13ec80]/20 text-[#13ec80] border-[#13ec80]/30"}`,children:[e.jsx("span",{className:"material-symbols-outlined !text-lg",children:D.type==="error"?"error":"check_circle"}),D.message]})})]})};export{tt as Admin};
